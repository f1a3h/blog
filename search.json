[{"categories":["ACG"],"content":"ä» 17 å¹´åº•åˆ° 24 å¹´åˆï¼Œä»åˆäºŒåˆ°å¤§äºŒï¼Œä»æ‡µæ‡‚æ— çŸ¥çš„ä¸­äºŒå°‘å¹´åˆ°ç°åœ¨çš„æˆç†Ÿç¨³é‡ï¼ˆï¼Ÿï¼‰ã€å³å°†è¿ˆå…¥å¤§äººçš„ä¸–ç•Œï¼Œå…­å¹´åŠè½½ï¼Œå›æƒ³èµ·æ¥ï¼Œå¡å°”è¾¾ç«Ÿå‡ ä¹æ‰¿è½½äº†æˆ‘å‡ ä¹æ•´ä¸ªä¸­å­¦æ—¶ä»£ã€‚\næƒ³å½“å¹´ï¼Œå…¨æ ¡ç¬¬äºŒï¼Œæ‹¿åˆ° 5000 å…ƒå¥–å­¦é‡‘ï¼Œç»ˆäºè¶çˆ¹å¦ˆé«˜å…´çš„æ—¶å€™è¦åˆ°äº†ä¸€å°å½“å¹´æ–°å‡ºçš„ Switchï¼Œè¿˜è®°å¾—è¿™å° Switch æ˜¯æ‰˜äº²æˆšä»è‹±å›½å¸¦å›æ¥çš„ï¼ŒèŠ±äº†ğŸ­ğŸ­2800+å¤§æ´‹ï¼Œè‚‰ç—›çš„ä¸€æ‰¹ã€‚å½“ç„¶äº†ï¼ŒSwitch åˆ°æ‰‹ä¹‹åç¬¬ä¸€æ¬¾æ¸¸æˆå½“ç„¶è¦ä¹°å½“æ—¶æ­£å¤§ç«çš„ã€Œå¡å°”è¾¾ä¼ è¯´ï¼šæ—·é‡ä¹‹æ¯ã€å•¦ï¼äºæ˜¯ï¼Œé‚£ååˆäºŒå°‘å¹´å¼€å¯äº†åœ¨æµ·æ‹‰é²å¤§é™†ä¸Šçš„æ—…ç¨‹ã€‚\nä¸€å¼€å§‹ Switch æ²¡æœ‰ä¸­æ–‡ï¼Œå¡å°”è¾¾å°±æ›´ä¸ç”¨è¯´äº†ï¼Œæˆ‘è¯•è¿‡æ‹å±ç¿»è¯‘ï¼Œç„¶è€Œä½“éªŒå®åœ¨å¤ªå·®äºæ˜¯å¼€å§‹è‡ªä¸»æ¢é™©ã€‚å¥½æ™¯ä¸é•¿ï¼Œæˆ‘æ€ä¹ˆä¹Ÿæ²¡åŠæ³•ç¦»å¼€é‚£ç‰‡å°å°çš„åˆå§‹å°åœ°ï¼Œå°±è¿™æ ·çæ¢ç´¢äº† 20h+ï¼Œæˆ‘å›å»ç›‘ç‹±ä¸Šå­¦äº†ã€‚\nå†ä¹‹å Switch å’Œå¡å°”è¾¾ç»ˆäºæ”¯æŒä¸­æ–‡äº†ï¼Œæˆ‘å…´é«˜é‡‡çƒˆåœ°æ¢äº†ä¸ªå·é‡æ–°å¼€å§‹åœ¨æµ·æ‹‰é²å¤§é™†çš„ç”Ÿæ´»ï¼Œä½†æ˜¯è¿˜æ˜¯å¥½æ™¯ä¸é•¿ï¼Œå› ä¸ºåˆä¸‰çš„æ—¶å€™ç”±äºå¾ˆå¤šæœºç¼˜å·§åˆè¦å»é•¿æ²™è¯»ä¹¦äº†ï¼Œèƒ½å½“æ‘¸é±¼å‹‡è€…çš„æ—¶é—´å°±æ›´å®è´µäº†ã€‚\næ—¶å…‰èè‹’ï¼Œå¾ˆå¿«ä¾¿æ¥åˆ°äº†æˆ‘è®°å¿†æœ€æ·±åˆ»çš„é‚£æ®µæ—¶å…‰â€”â€”é«˜ä¸€å¯’å‡ï¼Œä¹Ÿå°±æ˜¯è‘—åçš„æ–°å† çˆ†å‘çš„é‚£ä¸ªæ—¶å€™ï¼ˆè°åˆèƒ½æƒ³åˆ° 3 å¹´åæˆ‘å±…ç„¶æ¥äº†æ­¦æ±‰è¯»ä¹¦å‘¢ï¼‰ã€‚é‚£ä¸ªæ—¶å€™æ­£æ˜¯æˆ‘çš„ä½è°·æ—¶æœŸï¼ŒæœŸæœ«è€ƒçš„ç¨€çƒ‚ï¼Œç«èµ›åˆå‡ºäº†å¼ºåŸºè®¡åˆ’ï¼Œåƒæˆ‘è¿™ç§æœºæˆ¿æ‰“äº†åŠå¹´å¤šæ‘†ç»ˆäºè§‰é†’è¦å¼€å§‹è®¤çœŸåˆ·é¢˜çš„å®¶ä¼™æ¥è¯´è¿™æ— ç–‘æ˜¯æ™´å¤©éœ¹é›³ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘é€€ç»„äº†ï¼Œä¹Ÿå› ä¸ºæœŸæœ«è€ƒçš„å¤ªçƒ‚æŠŠå½“æ—¶çš„ QQ æ ‡ç­¾åˆ å®Œäº†ç•™ä¸‹ä¸€ä¸ªâ€œæˆ‘å¤ªèœäº†â€ã€‚çœ‹åˆ°è¿™é‡Œå¤§æ¦‚éƒ½ä¼šè§‰å¾—æˆ‘ä¼šå¼€å§‹ã€Œæœªæ¥å¯æœŸï¼Œæ„Ÿè°¢ç»å†ï¼Œæ²‰æ·€ã€ç½¢ï¼Œä¸è¿‡è¿æˆ‘è‡ªå·±éƒ½æ²¡æƒ³åˆ°å›å®¶ä¹‹åç¬¬ä¸€ä»¶äº‹æ˜¯ç©ã€Œå¡å°”è¾¾ä¼ è¯´ã€ã€‚æ¯«æ— ç–‘é—®ï¼Œç»“å±€å°±æ˜¯è¢«æˆ‘å¦ˆç‹ ç‹ æ‰¹æ–—äº†ä¸€é¡¿ç„¶åå°±æ»šå»è‡ªå·±æˆ¿é—´ç”¨ç”µè„‘æ‘¸é±¼äº†ï¼ˆæ„Ÿè°¢åœ¨ç»„é‡Œç»ƒå°±çš„æ‘¸é±¼ç¥åŠŸï¼‰ã€‚\né«˜ä¸­ä¸‰å¹´ï¼Œå¾ˆå¤±è´¥ï¼Œç›´åˆ°æœ€åäº†éƒ½æ²¡èƒ½æˆåŠŸè¯æ˜è‡ªå·±ï¼Œä½†è¿˜æ˜¯å¾ˆæ€€å¿µåœ¨å­¦æ ¡æ‘¸é±¼çš„æ—¥å­ã€‚è‡ªé‚£æ¬¡è¢«æ‰¹æ–—ä¹‹åï¼Œæˆ‘å†ä¹Ÿæ²¡ç¢°è¿‡å¡å°”è¾¾ä¼ è¯´äº†ï¼Œä¸€ç›´åˆ°å¤§å­¦äº†æ‰é‡æ–°æ‹¾èµ·æ¥ã€‚\n2024.2.11ï¼Œæ—¶éš”å…­å¹´åŠï¼Œæˆ‘æ‰ç»ˆäºé€šå…³äº†å¡å°”è¾¾ä¼ è¯´çš„ç¬¬ä¸€éƒ¨ã€‚å½“å¹´è®²æ±‚æ¢ç´¢ï¼Œè¿·ä½ ä»»åŠ¡ã€å‘€å“ˆå“ˆã€ç¥åº™ï¼Œè¿½æ±‚å®Œæ»¡ï¼Œç”šè‡³èŠ±äº†ä¸å°‘æ—¶é—´æ”’é’±ä¹°æˆ¿ï¼Œå“ªæ€•ç›´åˆ°ç°åœ¨æˆ‘ä¹Ÿåªè¿›è¿‡é‚£é—´å°æœ¨å±‹é‡Œä¸€æ¬¡ï¼Œå ªç§°æµ·æ‹‰é²ç‹å›½çš„è´¥å®¶éª‘å£«ï¼Œçº¯çº¯ä¸€ä¸ªæ‘¸é±¼å‹‡è€…ï¼Œå…¬ä¸»æ— æ•°æ¬¡æé†’è¡€æœˆæ¥ä¸´ä¹Ÿæ²¡èƒ½è®©æˆ‘ä»æ‘¸é±¼ä¸­é†’è¿‡æ¥ã€‚ä½†æ˜¯ä»å»å¹´æš‘å‡å¼€å§‹ï¼Œæˆ‘æ—å…‹ä¸€æ”¹è¿‡å»â€œæ­¥æ­¥ä¸ºè¥â€çš„æ¢é™©é£æ ¼ï¼Œç›®æ ‡æ˜ç¡®ï¼Œæ‹¯æ•‘æœ€åçš„ç«èœ¥èœ´ç¥å…½ï¼Œæ‹”å‡ºå¤§å¸ˆä¹‹å‰‘ï¼Œç›´å¥”ç‹å›½åŸå ¡ï¼Œå–„ç”¨ SL å¤§æ³•ï¼Œå„ç§æŠ•æœºå–å·§æ‰“æ‘†äº†ç¾å„ç›–ä¾¬ï¼Œå€ŸåŠ©å…¬ä¸»çš„åŠ›é‡å®Œæˆäº†æœ€åä¸€åœºæˆ˜å½¹ã€‚æ²¡é”™ï¼Œä»ä¸€å¼€å§‹åªä¼šæ‘¸é±¼çš„ç‹—éª‘å£«åˆ°æœ€åæ‹¯æ•‘ç‹å›½çš„çœŸæ­£çš„å‹‡å£«ï¼Œæˆ‘èŠ±äº†å…­å¹´åŠçš„æ—¶é—´æ‰å®Œæˆè¿™æ ·çš„èœ•å˜ï¼Œé‚£ä¹ˆï¼Œååœ¨ç”µè„‘å±å¹•é¢å‰ä¸€å­—ä¸€å¥æ•²ä¸‹è¿™æ®µæ–‡å­—çš„ä½ åˆä¼šåœ¨ä»€ä¹ˆæ—¶å€™æ‹”å‡ºå±äºä½ çš„å¤§å¸ˆä¹‹å‰‘å‘¢ï¼Ÿ\n","description":"ä¸€åœºå­¤ç‹¬çš„å†’é™©","tags":["Game","ARPG"],"title":"ã€Œå¡å°”è¾¾ä¼ è¯´ï¼šæ—·é‡ä¹‹æ¯ã€: ä¸€åœºå­¤ç‹¬çš„å†’é™©","uri":"/posts/zelda-breath-of-the-world/"},{"categories":["ACG"],"content":" å³ä¾¿è¯´å‡ºå†å¤šçš„è¨€è¯­ï¼Œå †ç Œçš„è¯è¯­ï¼Œä¹Ÿæ— æ³•æ‰“åŠ¨ä½ çš„å¿ƒã€‚\nå¯å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä¹Ÿæƒ³è¦ä¼ è¾¾ã€‚\næ‰€ä»¥ï¼Œè¯·å¬æˆ‘çš„è¨€è¯­å§ï¼Œè¿™å¾®ä¸è¶³é“çš„çˆ±æ‹\nçºµä½¿å¿ƒä¸­æœ‰åƒè¨€ä¸‡è¯­ï¼Œå´ä¸çŸ¥ä»ä½•è¯´èµ·â€¦â€¦ æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£åªèƒ½ä» default é€‰é¡¹ â€”â€” æ—¶é—´é¡ºåºå¼€å§‹è°ˆèµ·äº†ã€‚\næ•…äº‹çš„å¼€å¤´æ˜¯ä»æ´¸å¤ªéƒçš„å›å¿†å¼€å§‹çš„ï¼Œå­©ææ—¶çœŸæŒšçš„æ„Ÿæƒ…ã€å¿ƒæ€¥å¦‚ç„šåœ°ç­‰å¾…åè¿Ÿè¿Ÿæ²¡èƒ½æ”¶åˆ°çš„å›å¤ï¼Œé…åˆèƒŒæ™¯é‡Œçš„é’¢ç´æ›²ï¼Œç»™äººçš„æ„Ÿè§‰å°±æ˜¯ä¸€è‚¡åä¸ºæ„Ÿä¼¤çš„æºªæµç¼“ç¼“æµè¿‡ã€‚\nç›´åˆ°åæ¥æ¨±èŠ±æ ‘ä¸‹çš„å†ä¼šï¼Œä¸€ä»½ä¸å¯åçŠ¶çš„æ„Ÿæƒ…è¿¸å‘å‡ºæ¥ï¼Œå¾ˆéš¾ä¸è®©äººæ„Ÿå—åˆ°æ´¸å¤ªéƒå¿ƒä¸­äº¤é”™é‡å çš„æƒ…æ„Ÿï¼Œè¿›è€Œä¹Ÿå¯¹ç”»é¢é‡Œè¿™ä¸ªå‘†å‘†çš„å¥³å­©äº§ç”Ÿä¸€ç§æ†§æ†¬ã€‚\nä¹‹ååˆ™æ˜¯å¹³æ·¡çš„æ ¡å›­ç”Ÿæ´»ã€‚ä¸å¾—ä¸æåˆ°çš„æ˜¯åœ¨è¿™æ®µæ•…äº‹çš„å™è¿°ï¼Œä¸å¯¹ï¼Œå‡†ç¡®æ¥è¯´æ˜¯æ•´ä¸ªæ•…äº‹çš„å™è¿°ä¸­ï¼Œéƒ½æ˜¯äº¤æ›¿å¤¹æ‚ç€æ´¸å¤ªéƒç”œèœœã€è‹¦æ¶©çš„å›å¿†ï¼Œå¥¹ç©¶ç«Ÿæ€ä¹ˆçœ‹å¾…çš„é‚£ä¸€å°ä¿¡ï¼Ÿåˆ°åº•ä¸ºä»€ä¹ˆä»€ä¹ˆä¹Ÿä¸è¯´å°±é»˜é»˜åœ°ç¦»å¼€äº†ï¼ŸéŸ³ä¹çš„æ¢¦æƒ³æœ€ååˆæ€ä¹ˆæ ·äº†ï¼Ÿåä¸ºå§¬é‡æ˜Ÿå¥çš„å°‘å¥³èº«ä¸Šéšè—ç€å¤ªå¤šçš„è°œå›¢äº†ï¼Œå…¶å®æˆ‘åªæƒ³å•æ¨æ˜Ÿå¥ï¼Œä½†æ˜¯ä¸æŠŠå…¶ä½™çš„çº¿æ¨å®Œæ²¡æ³•è¿›å…¥æœ€ç»ˆç« ï¼Œå¦‚æœä¸æœ€åæ‰æ¨æ˜Ÿå¥çš„è¯åˆæ€•ä¸¢å¤±äº†æœ€åˆçš„æ„ŸåŠ¨ï¼Œå› æ­¤å›å­¦æ ¡å‡†å¤‡æœŸæœ«è€ƒè¯•å‰æˆ‘åªä¸ç”˜åœ°æ¨å®Œäº†å½©éŸ³çº¿ï¼Œå°½ç®¡åœ¨ç´§å¼ æ——é¼“åœ°å¤ä¹ é¢„ä¹ ä¸­ä¹Ÿä»ç„¶ä¼šæ—¶ä¸æ—¶æ€è€ƒç€æ˜Ÿå¥èº«ä¸Šçš„è°œå›¢ã€‚è¿™å°±æ˜¯ä½ å¤§ç‰©è€ƒçš„ä¸€å¨çš„åŸå› å—\nè€ƒå®Œè¯•å›æ¥ä¹‹åæˆ‘å¿«è¿›è§£å†³äº†å‰©ä½™çš„ 2 æ¡çº¿ï¼Œè¿›å…¥äº†æ˜Ÿå¥çº¿ã€‚æœ¬ä»¥ä¸ºæ˜Ÿå¥ç­”åº”äº†ä¹‹åå°±å·²ç»æˆåŠŸä¼ è¾¾åˆ°äº†å¿ƒä¸­çš„è¯è¯­ï¼Œæ•…äº‹çš„æœ€ç»ˆä¼šåœ¨ç”œç”œçš„æƒ…ä¾£ç”Ÿæ´»ä¹‹åä»¥ Happy Ending çš„æ–¹å¼ç»“æŸï¼Œä½†æ˜¯æ²¡æƒ³åˆ° Glorious Days çš„çªç„¶å‡ºç°ã€æ˜Ÿå¥è«åçš„ææƒ§ã€å°‘å¥³å¶åƒä¸æ˜Ÿå¥ä¹‹é—´åƒæ˜¯è¯´æ•™ä¸€èˆ¬çš„å¯¹è¯æ‰“ç ´äº†è¿™ä¸€åˆ‡ã€‚è¿™ä¹‹åï¼Œæ˜Ÿå¥å†ä¸€æ¬¡é»˜é»˜åœ°ç¦»å¼€äº†ï¼Œå“ªæ€•æ˜¯å·²ç»æˆä¸ºäº†æƒ…ä¾£ä¹‹åå¥¹æ‰€åšçš„ä¹Ÿä»…ä»…åªæ˜¯æ¯”ä¸Šæ¬¡å¤šç•™äº†ä¸€åˆ™å†…å®¹ç®€å•åˆ°ä¸èƒ½å†ç®€å•çš„é‚®ä»¶ã€‚\nå¥¹æœ‰å¯èƒ½ä¸€ç›´åœ¨ç­‰æˆ‘ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ç¦»å¼€äº†\nè¿™ä¸€è·¯ä¸Šï¼Œæœ‰å¯èƒ½ä¸‹é›¨ï¼Œä¹Ÿæœ‰å¯èƒ½å¤©æ™´\næˆ‘ç”šè‡³å¯èƒ½æ— æ³•åˆ°è¾¾\nä½†æ˜¯ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œ\næˆ‘è¿˜æ˜¯æƒ³å°½ä¸€äº›å…¨åŠ›ï¼Œå‘ä½ èµ°å»\nè¿˜ä¼šå†è§é¢å—ï¼Ÿæˆ‘å¦‚æ˜¯æƒ³ç€ã€‚æ•…äº‹è¿˜è¿œè¿œæ²¡æœ‰ç»“æŸï¼Œä¸‹ä¸€æ¬¡è®¤çœŸçš„å†ä¼šæ˜¯åœ¨æ´¸å¤ªéƒæˆä¸ºäº†è€å¸ˆä¹‹åäº†ã€‚\nè¿™ä¸€æ¬¡çš„å†ä¼šç”šè‡³éƒ½åˆ°äº†é€æˆ’æŒ‡çš„ç¯èŠ‚ï¼Œä½†æ˜¯ç¬¬äºŒå¤©æ˜Ÿå¥è¿˜æ˜¯åˆä¸€æ¬¡æŠ›å¼ƒäº†æ´¸å¤ªéƒå¥äº†ã€‚çœ‹åˆ°è¿™é‡Œå®åœ¨å¾ˆéš¾ç»§ç»­å¯¹è¿™ä¸ªæ•´æ•´æ¬ºéª—ä½ ä¸‰æ¬¡æ„Ÿæƒ…çš„å¥³äººå†æŠ±æœ‰ä»€ä¹ˆå¥½çš„çœ‹æ³•ï¼Œå“ªæ€•å†…å¿ƒä¸­ä»ç„¶åœ¨æ— åŠ›ä¸ºå¥¹è¾©è§£ç€ã€‚\nä¸è¿‡ï¼Œè¿™ç§ã€Œåå¥³äººã€çš„çœ‹æ³•è¿˜æ˜¯åœ¨æ´¸å¤ªéƒç—´æƒ…åœ°æˆä¸ºè®°è€…å¼€å§‹è¿½å¯»æ˜Ÿå¥çš„èƒŒå½±åè¢«æ‰­è½¬äº†ã€‚ä¸æ˜Ÿå¥æ˜”æ—¥é˜Ÿå‹ä¹‹é—´çš„å¯¹è¯è®©æˆ‘æ˜ç™½äº†æ˜Ÿå¥ç¡®å®æ˜¯å®å®åœ¨åœ¨åœ°çˆ±ç€æ´¸å¤ªéƒçš„ï¼Œä½†æ˜¯å¤§æ¦‚æ˜¯è§‰å¾—ä¼¤å®³äº†å‡ æ¬¡æ´¸å¤ªéƒçš„è‡ªå·±æ²¡æœ‰èµ„æ ¼ç»§ç»­å‘†åœ¨ä»–èº«è¾¹ï¼Œå†åŠ ä¸Šé˜Ÿå‹ã€å¤§äººçš„ PUAï¼Œæ‰ä¼šé€‰æ‹©å†æ¬¡ç¦»å¼€æ´¸å¤ªéƒçš„å§ï¼Œç”šè‡³è®¸è¯ºæ°¸è¿œä¸ä¼šå†å‡ºç°åœ¨æ´¸å¤ªéƒçš„é¢å‰ï¼Œæ°¸è¿œä¸ä¼šå†åˆ©ç”¨æ´¸å¤ªéƒäº†ã€‚å¿ƒç—›æ˜¯æˆ‘çŸ¥æ™“è¿™ä¸€åˆ‡åæœ€å¤§çš„æƒ³æ³•ï¼Œæœ€åä¸€å¹•ä¸­ï¼Œåœ¨æ´¸å¤ªéƒçš„æƒ³è±¡é‡Œæ˜Ÿå¥å›æ¥äº†ï¼Œå°½ç®¡æ˜¯åŠå¼€æ”¾å¼çš„ç»“å±€ï¼Œæˆ‘ä»ç„¶ç›¸ä¿¡æ´¸å¤ªéƒçš„è¯è¯­æœ‰å¥½å¥½ä¼ è¾¾åˆ°äº†æ˜Ÿå¥çš„å¿ƒä¸­ï¼Œé‚£ä¸ªåä¸ºå§¬é‡æ˜Ÿå¥çš„å¥³äººä¸€å®šè¿˜æ˜¯å†æ¬¡å›åˆ°äº†æ´¸å¤ªéƒçš„èº«è¾¹ã€‚\nçœ‹åˆ°ç½‘ä¸Šå¤§éƒ¨åˆ†äººéƒ½è®¤ä¸ºæ˜Ÿå¥æ˜¯åå¥³äººï¼ˆå…¶å®æˆ‘ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªæ¢—æ‰ç©çš„æ‹å½¼å¥³ï¼‰ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸è®¤ä¸ºè¿™æ˜¯ä¸€ç§èƒŒå›ã€‚è‡³å°‘æ˜Ÿå¥åœ¨æ„Ÿæƒ…ä¸Šä»æ¥æ²¡æœ‰èƒŒå›è¿‡æ´¸å¤ªéƒï¼Œåªæ˜¯å¥¹æ— æ³•ä¼ è¾¾å‡ºè‡ªå·±çš„çˆ±æ‹ï¼Œä¸èƒ½å°†å¿ƒä¸­çš„æƒ³æ³•å’Œæ„Ÿæƒ…ä¼ è¾¾ç»™æ´¸å¤ªéƒæ‰ä¼šå¯¼è‡´è¿™æ ·ä¸€è€Œå†å†è€Œä¸‰çš„é»˜é»˜ç¦»å¼€ä»¥è‡³äºè¢«ç†è§£ä¸ºã€ŒèƒŒå›ã€ã€‚è¯šç„¶ï¼Œå¤§éƒ¨åˆ†äºŒæ¬¡å…ƒä½œå“ä¸­ï¼Œå¥³ä¸»åœ¨æ¢¦æƒ³ä¸çˆ±æƒ…ä¸­ä¸€å®šä¼šæ¯«æ— æ‚¬å¿µçš„é€‰æ‹©ä¸ç”·ä¸»åœ¨ä¸€èµ·ï¼Œä½†æ˜¯æ˜Ÿå¥å´ä¸€åå¸¸æ€å¤šæ¬¡éƒ½é€‰æ‹©äº†è¿½é€è™šæ— ç¼¥ç¼ˆçš„æ¢¦æƒ³ï¼Œåœ¨é˜Ÿå‹ä¸äº‹åŠ¡æ‰€çš„å¤§äººçš„ PUA é€‰æ‹©å¦¥åï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿæ˜¯æ— å¯åšéçš„ï¼Œæ€€æŠ±å¹¼ç¨šçš„æƒ³æ³•å¤§èƒ†è¿½æ¢¦çš„å¦„æƒ³æˆ˜å£«ä»¬åˆæœ‰ä»€ä¹ˆé”™å‘¢ï¼Ÿé—®é¢˜çš„æ ¹æºè¿˜æ˜¯åœ¨äºã€Œæƒ³è¦ä¼ è¾¾ç»™ä½ çš„çˆ±æ‹ã€ï¼Œæ¨å®Œäº†æ•´ä¸ªæ˜Ÿå¥çº¿ï¼Œè¿™å¥è¯å¤§æ¦‚æ›´é€‚åˆç”¨æ¥å½¢å®¹æ˜Ÿå¥å§ï¼Œå°å¿ƒç¿¼ç¿¼åœ°ã€ç¬¨æ‹™åœ°ä¼ è¾¾ç»™ä½ çš„çˆ±æ‹ï¼Œæœ€åå´ä»ç„¶æ²¡èƒ½é¼“èµ·å‹‡æ°”ä»¥è¯è¯­çš„æ–¹å¼ä¼ è¾¾ã€‚\næ€»è€Œè¨€ä¹‹ï¼Œä»æ¥æ²¡æƒ³è¿‡ä¼šä¸ºä»–äººçš„çˆ±æƒ…æ•…äº‹æ„ŸåŠ¨åˆ°è½æ³ªï¼Œç©çš„ç¬¬ä¸€éƒ¨ galgame ATRI æ²¡èƒ½ç»™æˆ‘ç•™ä¸‹å¤ªå¤šçš„æ„ŸåŠ¨ï¼Œåè€Œè®©æˆ‘æ„Ÿåˆ°æœ‰ç‚¹æ— èŠï¼Œæ–­æ–­ç»­ç»­èŠ±äº†å¾—æœ‰ 1 å¹´å¤šæ‰ç»ˆäºæ¨å®Œï¼Œè€Œã€Šæƒ³è¦ä¼ è¾¾ç»™ä½ çš„çˆ±æ‹ã€‹åˆ™ä¸åŒï¼Œæœ€ç»ˆç« çš„æ•…äº‹å®åœ¨æ˜¯æœ‰ç‚¹å¤ªè¿‡å¥½å“­ï¼Œç»™æˆ‘å¸¦æ¥çš„ååŠ²å±…ç„¶å¦‚æ­¤ä¹‹å¤§ï¼Œè¿™å¤§æ¦‚æ˜¯æˆ‘çš„ç¬¬ä¸€éƒ¨é’æ˜¥ä¼¤ç—›æ–‡å­¦äº†ç½¢ã€‚\næˆ‘ä»¬Â·Â·Â·Â·Â·Â·æˆ‘å’Œä½ Â·Â·Â·Â·Â·Â·\næ²¡å‡†è¿˜æŒºåƒçš„\nç‰ºç‰²äº†ä¸€åˆ‡è¿½å¯»ç€ä½ ï¼Œæœ€åç­‰å¾…æˆ‘çš„æˆ–è®¸åªæœ‰å¯‚å¯\nå…¨åŠ›è¿½æ±‚ç€ä½ çš„æˆ‘ï¼Œæœ€ååŒæ ·å˜å¾—ä¸€æ— æ‰€æœ‰\nä½†æ˜¯å›å¤´ä¸€æƒ³ï¼Œé‚£ä¸ªå­£èŠ‚æ˜¯å¤šä¹ˆè€€çœ¼åŠ¨äºº\nçœŸæ˜¯æ— å¯æ›¿ä»£çš„è‡³å®\nä½ æ²¡æœ‰ç»™æˆ‘å›ä¿¡ï¼Œä¸€è¨€ä¸å‘åœ°ç¦»å¼€æˆ‘ã€‚åˆ°äº†ç°åœ¨ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±èƒ½ç†è§£ä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆåšäº†\nä½ åªæ˜¯å°½äº†è‡ªå·±çš„å…¨åŠ›\nä¸€å¿ƒä¸ºç€é‚£äº›ä½ åº”å½“ä»˜å‡ºå…¨åŠ›çš„äº‹ç‰©\næ­£å› ä¸ºè¿™æ˜¯å°±æ˜¯ä½ ï¼Œæ‰€ä»¥ä½ æœ€åçš„æœ€åå†™åœ¨ä¿¡é‡Œçš„è¯è¯­ï¼Œè‚¯å®šæ»¡å«ç€æ— æ¯”çš„å†³å¿ƒå§\nä½ å‘èª“ä¸ä¼šå†æ¥è§æˆ‘äº†\nå¦‚æœè¿™æ˜¯ä½ çš„å†³æ„ï¼Œé‚£æˆ‘ä¼šéƒ‘é‡æ¥å—\nä½†æ˜¯å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯æƒ³å†å°½ä¸€äº›å…¨åŠ›è¯´å‡ºæ¥\næˆ‘æƒ³è§ä½ \næˆ‘å–œæ¬¢ä½ \nå†ä¸€æ¬¡æ‰“å¼€æœ€ç»ˆç« ï¼Œçœ¼ä¸­ä¸çŸ¥ä½•æ—¶å™™æ»¡äº†æ³ªæ°´Â·Â·Â·Â·Â·Â·\n","description":"æ­¤æƒ…å¯å¾…æˆè¿½å¿† åªæ˜¯å½“æ—¶å·²æƒ˜ç„¶","tags":["Galgame"],"title":"ã€Œæ‹Ã—ã‚·ãƒ³ã‚¢ã‚¤å½¼å¥³ã€: å±Šä¸åˆ°çš„çˆ±æ‹","uri":"/posts/koikakeru/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Soundness and Soundiness éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nSoundness and Soundiness å‰é¢æåˆ° static program analysis è¿½æ±‚çš„ goal æ˜¯ soundnessï¼Œä½†æ˜¯æ— è®ºæ˜¯åœ¨å­¦æœ¯ç•Œè¿˜æ˜¯åœ¨å·¥ä¸šç•Œï¼Œç”±äºä¸€äº›è¯­è¨€çš„ hard language features çš„å­˜åœ¨ï¼Œå¯¹ç°å®ä¸–ç•Œçš„å¤§å‹ program æƒ³è¦å®ç°å®Œå…¨çš„ soundness æ˜¯ï¼ˆç›®å‰ï¼‰åšä¸åˆ°çš„ã€‚\nHard-to-analyze features: an aggressively conservative treatment to these features will likely make the analysis too imprecise to scale, rendering the analysis useless.\näºæ˜¯ï¼Œä¸ºäº†é¿å… papers ä¸­å†™ soundness ä¼šè¯¯å¯¼è¯»è€…ï¼Œæ‰€ä»¥å¼•å…¥äº† soundy çš„æ¦‚å¿µï¼ša soundy analysis typically means that the analysis is mostly sound, with well-identified unsound treatments to hard/specific language features.\nHard Language Feature: Java Reflection java reflection ä¼šåœ¨ run-time å°† classã€methodã€field ç­‰è½¬æ¢ä¸º metaobjectï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ª string ä½œä¸ºå®ƒä»¬çš„ identifierï¼Œå¦‚å›¾æ‰€ç¤ºã€‚\nåœ¨ run-time å¯¹ä»£ç ä½œå‡ºä¸€äº›æ”¹å˜ä¼šäº§ç”Ÿä¸€äº› static analysis æ— æ³•é¢„æµ‹çš„è¡Œä¸ºï¼Œè¿™ä¹Ÿæ˜¯ static analysis çš„ç¡¬ä¼¤ã€‚\nstring mName æ— æ³•åˆ†æï¼Œé‚£ä¹ˆ m.invoke å…·ä½“è°ƒç”¨äº†å“ªä¸ªæ–¹æ³•ä¹Ÿå°±æ— æ³•å¾—çŸ¥ï¼Œäºæ˜¯å¯¹æŸäº›å¯èƒ½çš„ method çš„å¿½ç•¥ä¼˜åŒ–å¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬å°‘æ£€æµ‹åˆ°ä¸€äº› bug åœ¨è¿›è¡Œ verification optimization æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¿½ç•¥ reflection äº§ç”Ÿçš„ä½œç”¨ç­‰åŒäº a.fld = a çš„è¯­å¥ f.set(a, a)ï¼Œé‚£ä¹ˆåœ¨åˆ†æ B b = (B) a.fld å°±ä¼šå¾—åˆ° false negative è€ƒè™‘åˆ° reflection äº§ç”Ÿçš„å¾ˆå¤šä¸ç¡®å®šè¡Œä¸ºéƒ½æ˜¯ç”±äº string å…·ä½“å€¼çš„æœªçŸ¥è€Œå¯¼è‡´çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ string constant analysis + pointer analysis1 æ¥å®Œæˆå¯¹ reflection çš„åˆ†æã€‚\nä½†æ˜¯å®é™…ä¸Šçš„å¾ˆå¤š string éƒ½æ˜¯ statically unknownï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä»ç„¶å…·æœ‰å¾ˆå¤§çš„å±€é™æ€§ã€‚\né™¤äº†ç›´æ¥å¯¹ string è¿›è¡Œåˆ†æï¼Œæˆ‘ä»¬è¿˜åœ¨ usage points å¯¹å¯èƒ½çš„ reflective targets è¿›è¡Œæ¨æ–­ï¼Œæ¦‚æ‹¬æ¥è¯´å°±æ˜¯ type inference + string analysis + pointer analysisï¼Œå®è·µä¸Šï¼Œè¿™ç§æ–¹æ³•çš„å‡†ç¡®åº¦ä¹Ÿå¾ˆé«˜ã€‚2\nä¸ä»…ä»…æ˜¯æ ¹æ® usage point æ—¶çš„ parameters å¯¹ method è¿›è¡Œæ¨æ–­ï¼Œå¯¹å…¶ä»–çš„ metaobject ä¹Ÿæ˜¯æœ‰æ•ˆçš„3ã€‚\nå¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ® run-time çš„ç‰¹æ€§åˆ©ç”¨ dynamic analysis è¾…åŠ© static analysis4ã€‚å…·ä½“ä¸€ç‚¹è¯´å°±æ˜¯åˆ©ç”¨ä¸€éƒ¨åˆ†ç¨‹åºè¿›è¡Œ dynamic analysis åˆ†æå¾—åˆ°çš„æ•°æ®è¿›è¡Œ static analysisï¼Œä½†æ˜¯æœ‰é™çš„ç¨‹åºé‡å¾ˆéš¾ cover æ‰€æœ‰å¯èƒ½çš„ dataã€‚\nHard Language Feature: Native Code åœ¨ java ä¸­å¦‚æœæƒ³è¦ printï¼Œå°±éœ€è¦ä¸ OS è¿›è¡Œäº¤äº’ï¼Œäºæ˜¯å°±ä¸å¾—ä¸è°ƒç”¨ä¸€äº›åº•å±‚çš„ C/C++ ä»£ç ï¼Œè¿™äº›ä»£ç è¢«ç§°ä¸º native codeã€‚\nç”±äº java æ˜¯è¿è¡Œåœ¨ jvm ä¸Šçš„ï¼Œæ‰€ä»¥ jvm éœ€è¦ä¸€ä¸ª function module ä½œä¸º interface ä¾¿äºå®ƒ (jvm) ä¸ native code è°ƒç”¨çš„ native libraries è¿›è¡Œäº¤äº’ï¼Œä¹Ÿå¯ä»¥ä¸ OS è¿›è¡Œäº¤äº’ã€å¤ç”¨å·²æœ‰çš„ C/C++ ä»£ç ï¼Œè¿™ä¸ª interface å°±æ˜¯ JNIã€‚\nç”±äºæˆ‘ä»¬çš„ analyzer é’ˆå¯¹çš„æ˜¯ java ä»£ç ï¼Œè€Œ native code ç”¨çš„æ˜¯ C/C++ ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•è¿›è¡Œåˆ†æã€‚\nç›®å‰å¯¹äºè¿™ä¸ªé—®é¢˜ä½¿ç”¨æœ€å¹¿æ³›çš„æ–¹æ³•æ˜¯ manually models critical native codeï¼Œæ¯”å¦‚è°ƒç”¨ arraycopy æ–¹æ³•å°±å°†å…¶æ”¹å†™ä¸º java è¯­è¨€çš„å¾ªç¯èµ‹å€¼è¯­å¥ç„¶åå†è¿›è¡Œåˆ†æã€‚\næœ€è¿‘çš„ç ”ç©¶å·¥ä½œæœ‰ä½¿ç”¨ binary scanning åœ¨ native code ä¸­è¯†åˆ« java calls çš„5ã€‚\næœ€åï¼Œæƒ³è¦äº†è§£æ›´å¤š soundinessï¼Œå¯ä»¥è®¿é—® soundiness.org.\nBenjamin Livshits, John Whaley, Monica S. Lam. Stanford University, \"Reflection Analysis for Java\". APLAS, 2005.Â â†©ï¸\nYue Li, Tian Tan, Yulei Sui, Jingling Xue. UNSW Sydney, \"Self-Inferencing Reflection Resolution for Java\". ECOOP, 2014.Â â†©ï¸\nYue Li, Tian Tan, Jingling Xue, \"Understanding and Analyzing Java Reflection\". TOSEM, 2019.Â â†©ï¸\nEric Bodden, Andreas Sewe, Jan Sinschek, Hela Oueslati, Mira Mezini. Technische UniversitÃ¤t Darmstadt, \"Taming reflection: Aiding static analysis in the presence of reflection and custom class loaders\". ICSE, 2011.Â â†©ï¸\nGeorge Fourtounis, Leonidas Triantafyllou, Yannis Smaragdakis, University of Athens, \"Identifying Java Calls in Native Code via Binary Scanning\". ISSTA, 2020.Â â†©ï¸\n","description":"Soundness and Soundiness","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šSoundness and Soundiness","uri":"/posts/nju-spa-soudiness/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ CFL-Reachability and IFDS éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nFeasible and Realizable Paths infeasible paths æŒ‡çš„æ˜¯åœ¨ CFG å¹¶ä¸ä¼šå®é™…æ‰§è¡Œåˆ°çš„è·¯å¾„ï¼Œä¾‹å¦‚ if è¯­å¥ä¸­æŸäº›ä¸å¯èƒ½åˆ°è¾¾çš„åˆ†æ”¯ã€‚ç”±äº infeasible paths çš„åˆ¤å®šä¸ç¨‹åºçš„ semantics ç›¸å…³ï¼Œæ‰€ä»¥æ€»ä½“ä¸Šæ˜¯ undecidable çš„ã€‚\nrealizable paths æŒ‡çš„æ˜¯ â€œreturnsâ€ ä¸ â€œcallâ€ ç›¸å¯¹åº”çš„è·¯å¾„ï¼Œä¾‹å­å‚è€ƒ slidesã€‚realizable paths ä¸ä¸€å®šæ˜¯ executable çš„ (feasible paths)ï¼Œä½†æ˜¯ unrealizable paths ä¸€å®šä¸æ˜¯ executable çš„ (infeasible paths)ã€‚\nCFL-Reachability ä½¿ç”¨ context sensitive çš„æŠ€æœ¯å¯ä»¥å»é™¤ unrealizable pathsï¼Œä½†æ˜¯è¿™é‡Œè¦ä»‹ç»çš„æŠ€æœ¯æ˜¯ CFL-Reachabilityã€‚\nCFG-reachability: A path is considered to connect two nodes A and B, or B is reachable from A, only if the concatenation of the labels on the edges of the path is a word in a specified context-free language.ï¼ˆæ‡’å¾—ç¿»è¯‘æˆä¸­æ–‡äº†ï¼‰\nCFG-reachability å…¶å®é‡‡ç”¨çš„å°±æ˜¯ä¸€ç§æ‹¬å·åŒ¹é…çš„æŠ€æœ¯æ¥åˆ¤æ–­ A åˆ° B çš„è·¯å¾„æ˜¯å¦åˆæ³•ï¼Œå¦‚æœåˆæ³•å°±è¯´ A åˆ° B æœ‰ä¸€æ¡è¾¹ï¼Œæœ‰ç‚¹è·¯å¾„å‹ç¼©çš„æ„Ÿè§‰ğŸ¤”ã€‚\nA valid sentence in language L must follow Lâ€™s grammar.ï¼ˆå³æ‹¬å·åŒ¹é…çš„è§„åˆ™ï¼šå·¦æ‹¬å·ä¸å³æ‹¬å·åŒ¹é…ï¼‰ A context-free language is a language generated by a context-free grammar (CFG). é€šè¿‡ CFL è§£å†³ partially balanced-parenthesis problemï¼š\næ¯ä¸ªå³æ‹¬å· $)_i$ éœ€è¦ç›¸åº”çš„å·¦æ‹¬å· $(_i$ æ¥å¹³è¡¡ï¼Œä½†æ˜¯å·¦æ‹¬å·ä¸éœ€è¦ï¼Œå¦‚ä¸‹å›¾ä¸­ realizable çš„ç¬¬äºŒç§å¯èƒ½æ‰€ç¤º å¯¹äº call edge å’Œ return edgeï¼Œæˆ‘ä»¬ç”¨æ‰“ä¸Šæ ‡è®°çš„å·¦å³æ‹¬å·æ¥æ ‡è¯† å…¶ä»–çš„æ™®é€š edge ç”¨ $e$ æ ‡è¯† realizable çš„å¯èƒ½å½¢å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œmatched è¡¨ç¤ºçš„æ˜¯ fully balanced-parenthesisï¼Œå¯èƒ½å½¢å¼å¦‚ä¸‹ï¼š\nOverview of IFDS IFDS1 (Interprocedural, Finite, Distributive, Subset Problem) ä½¿ç”¨ distributive flow functions over finite domains æ¥è§£å†³ interprocedural dataflow analysisã€‚\nMRP IFDS æä¾›äº†ä¸€ç§åä¸º meet-over all realizable paths (MRP) çš„æ–¹æ³•ï¼Œä¸å‰é¢çš„ MOP ç›¸ä¼¼ã€‚\nä½†æ˜¯ CFG ä¸­æŸäº› path æ˜¯ not executable çš„ï¼Œä¹Ÿä¼šæœ‰ unboundedã€not enumerable çš„è·¯å¾„ï¼Œæ‰€ä»¥æ˜¾ç„¶ MOP æ˜¯ not fully preciseã€impractical çš„ã€‚2\nç”±äº MRP é’ˆå¯¹çš„æ˜¯ realizable pathsï¼Œä¸€äº›æ²¡æœ‰å‡ºå£çš„å‡½æ•°éƒ½æ˜¾ç„¶ä¸ä¼šæ˜¯ realizable pathsï¼Œè¿™ä¿è¯äº† MRP æ˜¯å¯ä»¥ç»ˆæ­¢çš„ã€more precise than MOPã€practical çš„ï¼Œå¹¶ä¸”å¯ä»¥çœ‹å‡º MRP $\\subseteq$ MOPã€‚\n$$ \\mathrm{MRP_n}=\\bigcup_{p\\in\\mathrm{RPaths}(start, n)}pf_p(\\bot) $$\nIFDS ç»™å®šä¸€ä¸ª program P å’Œä¸€ä¸ª dataflow analysis problem Qï¼ŒIFDS è§£å†³æ­¥éª¤å¦‚ä¸‹ï¼š\nåŸºäº Q ç»™ P å»ºç«‹ä¸€ä¸ª supergraph G*ï¼Œç»™æ¯æ¡è¾¹å®šä¹‰ä¸€ä¸ª flow function å°† flow function è½¬æ¢ä¸ºå®ƒè¡¨ç¤ºçš„æ˜ å°„å…³ç³»å»ºç«‹ä¸€ä¸ª exploded supergraph G# æ­¤æ—¶ Q å·²ç»è¢«è½¬åŒ–ä¸º graph reachability problemï¼Œé€šè¿‡åœ¨ G# ä¸Šåº”ç”¨ tabulation algorithm æ¥è§£å†³ graph reachability problem: Let $n$ be a program point, data fact $d \\in \\mathrm{MRP_n}$ , iff there is a realizable path in G# from $\u003cs_{main}, 0\u003e$ to $\u003cn, d\u003e$ Supergraph and Flow Functions Supergraph supergraph ä»¥ G* = (N*, E*) çš„å½¢å¼è¡¨ç¤ºï¼Œå®ƒç”±å¤šä¸ª flowgraph G ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ª Gp éƒ½è¡¨ç¤ºäº†ä¸€ä¸ª procedureï¼Œåœ¨æ¯ä¸€ä¸ª Gp ä¸­éƒ½æœ‰ä¸€ä¸ª start node $s_p$ å’Œ exit node $e_p$ï¼Œå¯¹äº procedure callï¼Œå®ƒä½¿ç”¨ä¸€ä¸ª call node $Call_p$ å’Œä¸€ä¸ª return-site node $Ret_p$ æ¥è¡¨ç¤º nodesï¼Œè¿˜ä½¿ç”¨äº† call-to-return-site edge (denoted by purple)ã€call-to-start edge (green)ã€exit-to-return-site edge (blue) è¡¨ç¤º edgesã€‚\nDesign Flow Functions ä»¥ Q = \"Possibly-uninitialized variables\": for each node n âˆˆ N*, determine the set of variables that may be uninitialized before execution reaches n. ä¸ºä¾‹ã€‚\nflow functions ä»¥ lambda è¡¨è¾¾å¼çš„å½¢å¼è¡¨ç¤ºï¼š$\\lambda e_{param}.e_{body}$ã€‚\nåœ¨ IFDS ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯æ¡è¾¹éƒ½è®¾è®¡ä¸€ä¸ª flow functionï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº global variable $g$ï¼Œåœ¨ call-to-return edge çš„ flow function ä¸­æˆ‘ä»¬éœ€è¦è®¾è®¡ä¸º $\\lambda S.S-\\{g\\}$ï¼š\nå¦‚æœ $g$ åœ¨å¦ä¸€ä¸ª procedure ä¸­è¢« initialize äº†ï¼Œé‚£ä¹ˆè¿™ä¹ˆåšæ˜¾ç„¶æ²¡é—®é¢˜ å¦‚æœ $g$ æ²¡æœ‰è¢« initializeï¼Œé‚£ä¹ˆ call-to-return edge å’Œ exit-to-return edge çš„ facts åˆå¹¶åä¼šåŠ ä¸Š $g$ äºæ˜¯è¿™æ ·åšå¯ä»¥å‡å°‘ false positive ä»è€Œæé«˜ precisionã€‚\nExploded Supergraph and Tabulation Algorithm Build Exploded Supergraph åœ¨ exploded supergraph G# ä¸­ï¼ŒG* ä¸­çš„æ¯ä¸ª node éƒ½è¢«æ‹†åˆ†æˆ D+1 ä¸ª nodesï¼Œå¹¶ä¸” edge $n_1\\to n_2$ ä¹Ÿä¼šè¢«æ‹†åˆ†ä¸ºè¿™æ¡è¾¹çš„ flow function çš„ representation relationï¼Œç±»ä¼¼äºä¸€ç§å‡½æ•°æ˜ å°„å…³ç³»ã€‚\ndefault edge: $0\\to 0$ S è¡¨ç¤º statement D è¡¨ç¤ºçš„æ˜¯ flow function çš„ domain $\\lambda S.S$ è¡¨ç¤º identity functionï¼Œå³è¾“å‡º = è¾“å…¥ å…³äºä¸ºä»€ä¹ˆè¦åŠ ä¸€ä¸ª 0 ç»“ç‚¹ï¼Œä¸ªäººç†è§£æ˜¯ä¸ºäº†å‡å°‘ç±»ä¼¼äº $\\lambda S.\\{a\\}$ è¿™æ ·çš„æ’ç­‰å‡½æ•°éœ€è¦å¤šè¿å‡ºæ¥çš„å¾ˆå¤šè¾¹ï¼Œäºæ˜¯æä¸€ä¸ª default é€‰é¡¹ 0ï¼Œå°†è¿™ D æ¡è¾¹æ”¹æˆ $0\\to a$ è¿™ä¸€æ¡è¾¹ä»è€Œå‡å°æ—¶ç©ºå¤æ‚åº¦ï¼Œè¿™æ ·ä¸€æ¥å°±æœ‰å¯èƒ½å‡ºç°å›¾ä¸è¿é€šçš„æƒ…å†µï¼Œä¸ºäº†ä¿è¯å›¾çš„è¿é€šæ€§æ‰€ä»¥æ¯æ¬¡å¿…é¡»åŠ ä¸€ä¸ª $0\\to 0$ çš„è¾¹ã€‚\nä¸€ä¸ªå¯èƒ½çš„ exploded supergraph å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nTabulation Algorithm tabulation algorithm å¯ä»¥åœ¨ exploded supergraph G# ä¸Šé€šè¿‡æ‰¾å‡ºæ‰€æœ‰çš„ä» $\u003cs_{main}, 0\u003e$ å¼€å§‹çš„ realizable paths æ¥ç»™å‡º MRP solutionï¼Œæ—¶é—´å¤æ‚åº¦ $\\mathcal{O}(ED^3)$ã€‚\ncore working mechanism:\nåœ¨ $\u003cCall_p, d_m\u003e$ å’Œ $\u003cRet_p, d_n\u003e$ ä¹‹é—´ä¼šæœ‰ä¸€æ¡ summary edge (denoted by pink)ï¼Œè¿™æ¡è¾¹ç”¨æ¥è¡¨æ˜ $d_n$ is reachable from $d_m$ï¼Œå½“æˆ‘ä»¬èµ° call-to-return edge æ—¶å°±å¯ä»¥è·³è¿‡ procedure $p$ ä¸­çš„ redundant work äº† å¤„ç† exit node ($e_{p^1}$) æ—¶ä¼šè¿›è¡Œ call-to-return matching: å…ˆæ‰¾å‡º call $p^1$ çš„ call sitesï¼Œå†æ ¹æ® call sites çš„ä¿¡æ¯æ‰¾å‡ºå®ƒä»¬åˆ†åˆ«å¯¹åº”çš„ return sitesï¼Œè¿™ä¸€æ­¥ä¿è¯äº† IFDS æ˜¯ context sensitive çš„ åœ¨æœ€å¼€å§‹ï¼Œæ‰€æœ‰è¡¨ç¤º data fact çš„ circle éƒ½æ˜¯ç™½è‰²çš„ï¼Œå½“ä¸€ä¸ª circle å˜ä¸ºè“è‰²çš„æ—¶å€™å°±è¡¨æ˜ $\u003cn, d\u003e$ is reachable from $\u003cs_{main}, 0\u003e$ï¼ˆç±»ä¼¼äºæŸ“è‰²æ³•ï¼‰ Understanding the Distributivity of IFDS è€ƒè™‘ä¸¤ä¸ªé—®é¢˜ï¼š\nIFDS å¯ä»¥è§£å†³ constant propagation å—ï¼Ÿ constant propagation çš„ domain æ˜¯ infinite çš„ï¼Œè¿™ä¸ IFDS è¦æ±‚çš„ flow function çš„ domain åº”è¯¥æ˜¯ finite çš„çŸ›ç›¾ï¼Œå› æ­¤ä¸è¡Œ IFDS å¯ä»¥è§£å†³ pointer analysis å—ï¼Ÿ ä¹Ÿä¸è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ IFDS çš„ distributivity æ¥è§£é‡Š ç”¨ $f(x\\land y)=f(x)\\land f(y)$ å¯ä»¥æŠ½è±¡çš„è¡¨è¾¾ distributivity çš„å«ä¹‰ï¼Œæ„Ÿæ€§ç†è§£ä¸€ä¸‹å§ï¼ˆ\nè§‚å¯Ÿ IFDS çš„ flow functionï¼Œå¯ä»¥å‘ç°å®ƒçš„è¾“å…¥ä¸è¾“å‡ºæ˜¯ $1\\colon n$ çš„å…³ç³»ï¼Œè€Œ constant propagation çš„ flow function åˆ™æ˜¯ $n\\colon 1$ çš„å…³ç³»ï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚\nç°åœ¨æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªç®€å•çš„ pointer analysisï¼Œå°è¯•ç”¨ IFDS æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚\nä»å›¾ä¸­çš„çº¢è¾¹å¯ä»¥çœ‹å‡º IFDS ä¼šæ¼æ‰ alias informationï¼Œæƒ³è¦åŒ…å« alias information å°±å¿…ç„¶ä¼šè¦æœ‰ multiple inputsï¼Œè¿™ä¸ IFDS çš„ flow functions çš„è®¾è®¡æ˜¯ä¸ç¬¦åˆçš„ï¼Œæ‰€ä»¥ standard IFDS æ˜¯ä¸èƒ½è§£å†³ pointer analysis çš„ã€‚\nä¸€ä¸ªç®€å•çš„ rule æ¥åˆ¤æ–­ä¸€ä¸ªé—®é¢˜æ˜¯å¦èƒ½ç”¨ IFDSï¼šå¯¹äºä¸€ä¸ª statement $s$ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è€ƒè™‘ multiple input data facts æ¥å¾—åˆ°æ­£ç¡®çš„ output data factsï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±ä¸èƒ½é‡‡ç”¨ IFDSã€‚\nå¦å¤–ï¼ŒIFDS è¿˜æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š\næ— åæ•ˆæ€§ï¼šæ¯ä¸ª data fact (circle) å’Œå®ƒçš„ propagation (edges) éƒ½å¯ä»¥è¢«ç‹¬ç«‹è§£å†³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¸€ä¸ª circle æˆ–è€… edge çš„åˆ†æç»“æœä¸ä¼šå¯¹å½“å‰è¿™ä¸ª circle æˆ– edge çš„åˆ†æé€ æˆå½±å“ å¦ä¸€ç§æ„ä¹‰ä¸Šçš„ã€Œå•å°„ã€ï¼šrepresentation relation çš„ rule ä¿è¯äº†æ¯ä¸ª output node æœ€å¤šåªä¼šè¢«ä¸€ä¸ª input node æŒ‡å‘ Thomas Reps, Susan Horwitz, and Mooly Sagiv, \"Precise Interprocedural Dataflow Analysis via Graph Reachability\". POPL'95Â â†©ï¸\nNJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šData Flow AnalysisÂ â†©ï¸\n","description":"CFL-Reachability and IFDS","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šCFL-Reachability and IFDS","uri":"/posts/nju-spa-ifds/"},{"categories":["Study Notes","Program Analysis"],"content":"æ–°å¹´ç¬¬ä¸€å¤©ï¼Œä»ã€Œæ‹Ã—ã‚·ãƒ³ã‚¢ã‚¤å½¼å¥³ã€å¼€å§‹ï¼\næ–°å¹´ç¬¬ä¸€å¤©ï¼Œä» Program Analysis å¼€å§‹ï¼\nInfo\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Datalog-Based Program Analysis éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nMotivation imperative: how to do (~implementation) E.g. C. éœ€è¦å‘Šè¯‰æœºå™¨è¦å¦‚ä½•å»å®ç° declarative: what to do (~specification) E.g. SQL. ä»…ä»…éœ€è¦æŒ‡æ˜ä½ æƒ³è¦ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°åˆ™äº¤ç»™ç¨‹åºï¼ˆDBMSï¼‰è‡ªè¡Œé€‰æ‹© åœ¨ program analysis ä¸­ï¼Œæˆ‘ä»¬æŒ‡æ˜å¯¹äºä¸åŒçš„ statement å¯¹åº”ä¸åŒçš„ ruleï¼Œè¿™å°±æ˜¯ä¸€ç§ specificationï¼Œè€Œåœ¨ algorithm ä¸­ï¼Œæˆ‘ä»¬åˆ™æŒ‡æ˜äº†æ¯ä¸€æ­¥å…·ä½“è¦æ€ä¹ˆåšï¼Œåœ¨å®é™…çš„ä»£ç å®ç°é‡Œæ›´æ˜¯è¦è€ƒè™‘æ›´å¤šçš„ implementation detailsã€‚å¯ä»¥çœ‹å‡ºï¼Œå‰é¢æ‰€å­¦çš„ program analysis å³æ˜¯ declarative ä¹Ÿæ˜¯ imperative çš„ã€‚\nåœ¨ tai-e assignments ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ imperative çš„æ–¹å¼å®ç° program analysisï¼ŒåŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ declarative çš„æ–¹å¼æ¥å®ç°ã€‚(via Datalog)\nIntroduction to Datalog datalog æœ€æ—©æ˜¯ä»¥ database language çš„èº«ä»½å‡ºç°çš„1ï¼Œç°åœ¨æœ‰äº†æ›´å¹¿æ³›çš„åº”ç”¨ã€‚\nDatalog = Data + Logic (and, or, not) no side-effects no control flows no functions not turing-complete Predicates (Data) åœ¨ datalog ä¸­ï¼Œä¸€ä¸ª predicate (relation) å°±æ˜¯å€¼ä¸€ç³»åˆ—çš„ statemetnsï¼Œæœ¬è´¨ä¸Šå…¶å®æ˜¯ a table of dataã€‚è€Œ fact åˆ™æ˜¯æŒ‡è¿™ä¸ª table ä¸­æŸä¸ª tupleã€‚\natoms æ˜¯ datalog çš„ basic elementsã€‚\nP(X1, X2, ..., Xn) çš„å½¢å¼è¡¨ç¤ºä¸€ä¸ª relation atomï¼Œå…¶ä¸­ P æ˜¯ predicate çš„åå­—ï¼ŒXi åˆ™æ˜¯ argumentsï¼Œ å®ƒçš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ª variable ä¹Ÿå¯ä»¥æ˜¯ constantã€‚ä¸€ä¸ª relation atom çš„å€¼ä¸º true å½“ä¸”ä»…å½“ P ä¸­å­˜åœ¨ (X1, X2, ..., Xn) è¿™ä¸ª tupleã€‚\né™¤äº† relation atomsï¼Œdatalog è¿˜æœ‰ arithmetic atomsã€‚\nDatalog Rules (Logic) rule ç”¨æ¥è¡¨ç¤º logic inferencesï¼Œå¹¶ä¸”è¡¨æ˜ facts æ˜¯å¦‚ä½•è¢« deduced çš„ï¼Œå®ƒçš„å½¢å¼ä¸º H \u003c- B1, B2, ,,,, Bn ï¼Œå…¶ä¸­ head å’Œ body ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯ atomï¼ŒBi ä¹Ÿè¢«ç§°ä¸º subgoalã€‚\nä¸€ä¸ª datalog program ç”± facts å’Œ rules ç»„æˆã€‚æ›´å¤šçš„è¯­æ³•ç›´æ¥çœ‹ slides å§ï¼Œæ‡’å¾—å†™äº†ï¼ˆ\ndatalog çš„ predicates è¢«åˆ†ä¸º EDB å’Œ IDB ä¸¤ç§ï¼š\nEDB (extensional database) æå‰å®šä¹‰å¥½çš„ predicates relations are immutable å¯ä»¥çœ‹ä½œ input relations IDB (intensional database) ç”± rules æ¨å¯¼å‡ºçš„ predicates å¯ä»¥çœ‹ä½œæ˜¯ output relations datalog æ”¯æŒ recursive rulesï¼Œä»è€Œå¯ä»¥ä»è‡ªèº«è¿›è¡Œ deduceã€‚\nè€ƒè™‘ä»¥ä¸‹ä¸¤æ¡ rulesï¼š\nA(x) \u003c- B(y), x \u003e y. A(x) \u003c- B(y), !C(x, y). å¯ä»¥å‘ç°å®ƒä»¬éƒ½æœ‰å¯èƒ½ä½¿å¾— A ç§°ä¸ºä¸€ä¸ª infinite relationï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬ä½¿ç”¨ datalog æƒ³è¦å¾—åˆ°çš„ç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¿å… infinite relationï¼Œä¹Ÿå°±å› æ­¤å¼•å…¥äº† rule safety çš„æ¦‚å¿µã€‚\næ³¨æ„åˆ° EDB çš„å…ƒç´ æ˜¯æœ‰é™ä¸ªçš„ï¼Œå› æ­¤å¯¹äºä¸€ä¸ª non-negated realtion atomï¼Œå®ƒèƒ½ deduce çš„å…ƒç´ ä¹Ÿä¼šæ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¿è¯ head ä¸­çš„æ¯ä¸€ä¸ª variable è‡³å°‘è¢«ä¸€ä¸ª non-negated atom relation ç»™é™åˆ¶ä½äº†å³å¯ã€‚åœ¨ datalog ä¸­ï¼Œåªæœ‰æ»¡è¶³ safe rules æ˜¯è¢«å…è®¸çš„ã€‚\nå†è€ƒè™‘è¿™æ¡ ruleï¼š\nA(x) \u003c- B(x), !A(x) æ˜¾ç„¶è¿™æ˜¯ä¸€æ¡è‡ªç›¸çŸ›ç›¾çš„ ruleï¼Œä½†æ˜¯å®ƒæ»¡è¶³äº† safe rule çš„æ¡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¦å¤–æ·»åŠ é™åˆ¶ã€‚è§‚å¯Ÿå¯ä»¥å‘ç°è¿™ç§ contradictory rule å¿…ç„¶ä¹Ÿæ˜¯ recursive çš„å½¢å¼ï¼Œå¹¶ä¸”æ˜¯åœ¨ body ä¸­å¯¹ head è¿›è¡Œ negateï¼Œå› æ­¤ï¼Œåœ¨ datalog ä¸­ï¼Œæˆ‘ä»¬è§„å®š recursion and negation of an atom must be separatedã€‚\nExecution of Datalog Programs datalog ä½¿ç”¨ datalog engine æ ¹æ® EDB å’Œ rules è¿›è¡Œ deduce å¹¶è¾“å‡º IDB monotonicity: facts åªä¼šä» rules ä¸­äº§ç”Ÿè€Œä¸ä¼šå› ä¸º deduction è€Œå‡å°‘ termination: é€šè¿‡ rule safety ä¿è¯äº†èƒ½è¢« deduce çš„ facts å¿…ç„¶æ˜¯ finite çš„ï¼Œå› æ­¤ datalog program å¿…ç„¶æ˜¯å¯ä»¥ç»ˆæ­¢çš„ Pointer Analysis via Datalog å…¶å®åªè¦ç”¨ datalog çš„è¯­è¨€æè¿°å‡ºå‰é¢ pointer analysis çš„ rules å³å¯ï¼ŒåŒæ ·ä¹Ÿéœ€è¦è€ƒè™‘ä¸€äº›ç»†èŠ‚ä»¥åŠæ¯ä¸ª atom çš„ arguments è¦å¦‚ä½•è®¾è®¡ã€‚\nTaint Analysis via Datalog ä½¿ç”¨ datalog æ¥å®ç° program analysis æœ‰ä»¥ä¸‹ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š\npros ç®€æ´ã€å¯è¯»æ€§é«˜ å®¹æ˜“å®ç°ï¼Œå†™ bug çš„æ¦‚ç‡ä¹Ÿå°å¾ˆå¤š off-the-shelf optimized datalog engines å¯ä»¥è®©ä½ å°‘è€ƒè™‘ä¸€äº›ä¼˜åŒ–ä¸Šçš„ç»†èŠ‚ï¼Œmake your life easier cons è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼ŒæŸäº› logics å¾ˆéš¾ç”¨ datalog è¡¨ç¤ºç”šè‡³æ ¹æœ¬è¡¨ç¤ºä¸äº† datalog engine ä½œä¸ºä¸€ä¸ª black box çš„å­˜åœ¨ä½¿å¾—æˆ‘ä»¬å¾ˆéš¾ç”¨æ›´ä¼˜ç§€ã€æ›´æœ‰é’ˆå¯¹æ€§çš„ algorithm æ¥å®ç°æ›´ä¼˜è¶Šçš„æ€§èƒ½ David Maier, K. Tuncay Tekle, Michael Kifer, and David S. Warren, \"Datalog: Concepts, History, and Outlook\". Chapter, 2018.Â â†©ï¸\n","description":"Datalog-Based Program Analysis","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šDatalog-Based Program Analysis","uri":"/posts/nju-spa-datalog/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Static Analysis for Security éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nsecurity æŒ‡çš„æ˜¯åœ¨å­˜åœ¨ adversaries çš„æƒ…å†µä¸‹èƒ½å¤ŸæˆåŠŸè¾¾åˆ°ä¸€äº› goalsã€‚\ncomputer security ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ª topic å°±æ˜¯ information flowã€‚\nInformation Flow Security information flow security çš„ç›®çš„å°±æ˜¯é˜»æ­¢é€šè¿‡é˜»æ­¢ unwanted information flow æ¥ä¿æŠ¤ information securityã€‚\nä¿æŠ¤ sensitive data çš„æ–¹å¼ä¸»è¦æœ‰ access control å’Œ information flow security ä¸¤ç§ã€‚\naccess control: a standard way æ£€æŸ¥ç¨‹åºæ˜¯å¦æœ‰æƒåˆ© access æŸäº› information how information is accessed ä¸å…³å¿ƒç¨‹åºæ˜¯å¦‚ä½•ä½¿ç”¨è¿™äº› information çš„ information flow security: end-to-end è·Ÿè¸ª information flow how information is propagated \"A practical system needs both access and flow control to satisfy all security requirements\"\nâ€” D.Denning, 1976\ninformation flow1 æŒ‡çš„æ˜¯å¦‚æœæœ‰ information ä» variable $x$ æµå…¥ variable $y$ï¼Œå°±è¯´å­˜åœ¨ä¿¡æ¯æµ $x\\to y$ã€‚\nè€Œ information flow security åˆ™é€šè¿‡å°† variables åˆ†ä¸ºä¸åŒçš„ security levelsã€æŒ‡å®šè¿™äº› levels ä¹‹é—´å“ªäº› information flow æ˜¯å…è®¸çš„æ¥è¾¾åˆ° safe çš„ç›®çš„ã€‚\nSecurity Levels (Classes) ä¸åŒ levels çš„ classification å¯ä»¥è¢«åˆ’åˆ†æˆä¸€ä¸ª topo å›¾çš„ç»“æ„ï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œå¯ä»¥è¢« modeled as lattice2.\nInformation Flow Policy information flow security ç”¨æ¥é™åˆ¶åœ¨ä¸åŒçš„ security levels ä¹‹é—´çš„ information flowã€‚\nä¸€ä¸ªç»å…¸çš„ policy æ˜¯ noninterference policy3ï¼Œå®ƒè¦æ±‚é€šè¿‡ low variables ä¸èƒ½æ¨æ–­å‡ºä»»ä½• high informationï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ç¦æ­¢ä» high variable åˆ° low variable çš„ inforrmation flowï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä¿è¯ information åªä¼šåœ¨ lattice ä¸Šå‘ä¸Šèµ°ã€‚ä½†æ˜¯å®ƒå…è®¸äº† low variable åˆ° high variable çš„ information flowï¼Œè¿™ä½¿å¾—å®ƒä»ç„¶ä¸èƒ½åˆ°è¾¾å®ƒçš„ç›®çš„ã€‚\nConfidentiality and Integrity confidentiality æŒ‡çš„æ˜¯é˜»æ­¢ secret information æ³„æ¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ noninterference policy åšåˆ°çš„ã€‚\nè€Œ integrity æŒ‡çš„æ˜¯é˜»æ­¢ untrusted information ç ´å critical information4ï¼Œæœ‰å…³çš„æœ€å¹¿æ³›çš„ vulnerabilities çš„é€ æˆåŸå› å°±æ˜¯ injection errors5 (SQL injection etc.)ã€‚\nintegrity çš„å¹¿æ³›çš„å®šä¹‰æ˜¯æŒ‡ä»¥ä¸‹ä¸‰ç‚¹ï¼š\ncorrectness: E.g. critical data ä¸åº”è¯¥è¢« untrusted data ç ´å completeness (broader than consistency): E.g. ä¸€ä¸ª DBS åº”è¯¥å®Œæ•´ä¿å­˜æ•´ä¸ª data consistency: E.g. ä¸€ä¸ªæ–‡ä»¶ä¼ è¾“ç³»ç»Ÿä¸€ä¸ªä¿è¯ sender å’Œ receiver ä¹‹é—´ä¼ è¾“çš„æ–‡ä»¶å†…å®¹æ˜¯ä¸€è‡´çš„ Explicit Flows and Covert Channels é€šè¿‡ç›´æ¥ copy è¿›è¡Œçš„ information flow ç§°ä¸º explicit flowã€‚ç›¸åº”åœ°ï¼Œç”± secret information å½±å“çš„ control flow é€ æˆçš„ information flow ç§°ä¸º implicit flowï¼Œimplicit flow åŒæ ·å¯ä»¥äº§ç”Ÿ information leakã€‚\nä¸Šé¢è¿™ä¸ªç¨‹åºå­˜åœ¨ä¸€ä¸ªä» secret åˆ° publik çš„ä¸€ä¸ª implicit flow å¹¶ä¸”ä¼šé€ æˆ leakageï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä» secret åˆ° publik çš„ data flowï¼Œå¯ä»¥çœ‹å‡º information flow å’Œ data flow çš„åŒºåˆ«æ‰€åœ¨ã€‚\né€šè¿‡ä¸€ä¸ª computing system æ¥ signal information çš„ mechanisms è¢«ç§°ä¸º channelsã€‚è€Œç›®çš„ä¸æ˜¯ information transfer çš„ channels è¢«ç§°ä¸º covert channels6ã€‚\nå¸¸è§çš„å‡ ç§ covert channels åŒ…æ‹¬ implicit flowsã€termination channelsã€timing channelsã€exceptionsã€‚\nç”±äº explicit flows é€šå¸¸ä¼šæ¯” covert channels ä¼ é€’æ›´å¤šçš„ critical informationï¼Œæ‰€ä»¥ä¸»è¦è€ƒè™‘ explicit flowsã€‚\nTaint Analysis taint analysis æ˜¯æœ€å¸¸ç”¨çš„ information flow analysisã€‚å®ƒå°† data åˆ†ä¸ºä¸¤ç±»ï¼š\ntainted data: ä¸ critical information æœ‰å…³çš„ dataï¼Œåœ¨ taint analysis ä¸­å°†å…¶æ‰“ä¸Šä¸€ä¸ª label untainted data tainted data çš„ sources å°±è¢«ç§°ä¸º sourcesï¼Œå®è·µä¸­å®ƒä»¬å¾€å¾€æ˜¯æŸäº› methods (E.g. getPassword()) çš„è¿”å›å€¼ã€‚\ntaint analysis çš„åŸç†å°±æ˜¯è·Ÿè¸ª tainted dataï¼Œå¹¶è§‚å¯Ÿå®ƒä»¬æ˜¯å¦æœ‰å¯èƒ½ flow åˆ°æŸäº› sensitive methodsï¼ˆå¯èƒ½é€ æˆ unsafe çš„ methodsï¼Œè¢«ç§°ä¸º sinksï¼‰ã€‚\ntaint analysis æ—¢èƒ½åº”ç”¨äº confidentiality ä¹Ÿèƒ½åº”ç”¨äº integrity çš„æ£€æµ‹ï¼š\nconfidentiality source: source of secret data sink: leakage validation: information leaks integrity source: source of untrusted data sink: critical computation validation: injection errors å°† tainted data çœ‹ä½œ objectsï¼Œsources çœ‹ä½œ allocation sitesï¼Œå¯ä»¥çœ‹å‡ºæ¥ taint analysis è¦åšçš„äº‹å°±æ˜¯ pointer analysis çš„å·¥ä½œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ²¿ç”¨ pointer analysis çš„æ–¹æ³•æ¥å®Œæˆ taint analysis7ã€‚\nåœ¨ domain and notations ä¸­ï¼Œæˆ‘ä»¬åªéœ€é¢å¤–å¢åŠ ä¸€æ  tainted dataï¼Œå…¶ä½™çš„ä¿æŒä¸å˜ï¼š\nå¯¹äº inputs \u0026 outputsï¼Œtaint analysis éœ€è¦æˆ‘ä»¬è¾“å…¥ sources å’Œ sinksï¼Œç„¶åä¼šè¾“å‡ºä¸€ç³»åˆ—ç”± source å’Œ sink calls ç»„æˆçš„ tuples çš„ taintflowsã€‚\nä¸ºäº†æ ‡è®° tainted data å¹¶è¾“å‡º taintflowsï¼Œtaint analysis å¯¹äº call çš„ rules ä¹Ÿæœ‰æ‰€ä¸åŒï¼š\nDorothy E. Denning and Peter J. Denning, \"Certification of Programs for Secure Information Flow\". CACM 1977.Â â†©ï¸\nDorothy E. Denning, \"A Lattice Model of Secure Information Flow\". CACM 1976.Â â†©ï¸\nJ. A. Goguen and J. Meseguer, \"Security policies and security models\". S\u0026P 1982.Â â†©ï¸\nKen Biba, \"Integrity Considerations for Secure Computer Systems\". Technical Report, ESD-TR-76-372, USAF Electronic Systems Division, Bed-ford, MA, 1977.Â â†©ï¸\nNational Vulnerability Database, https://nvd.nist.gov/Â â†©ï¸\nButler W. Lampson, \"A Note on the Confinement Problem\". CACM 1973.Â â†©ï¸\nNeville Grech and Yannis Smaragdakis, \"P Taint: Unified Points-to and Taint Analysis\". OOPSLA 2017.Â â†©ï¸\n","description":"Static Analysis for Security","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šStatic Analysis for Security","uri":"/posts/nju-spa-security/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Pointer Analysis éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nIntroduction Motivation CHA åªå…³æ³¨ class hierarchy å­˜åœ¨å¾ˆå¤§çš„å±€é™æ€§ï¼Œåœ¨å½¢å¦‚ Number n = new One() çš„å£°æ˜åè°ƒç”¨ n çš„æŸä¸ª method ä¼šå¾—åˆ°å¤šä¸ª call targetï¼Œå®é™…å…¶ä¸­åªæœ‰ä¸€ä¸ª target æ˜¯çœŸçš„ï¼ŒåŒæ—¶è¿ç”¨ constant propagation ä¼šå¾—åˆ° NAC çš„ç»“æœï¼Œæ˜¯ inefficient ä¸” imprecise çš„ã€‚\nè€Œ pointer analysis æ˜¯åŸºäº point-to relation çš„ï¼Œä¸ä¼šå‡ºç°ä¸Šè¿°æƒ…å†µã€‚\nIntroduction to Pointer Analysis pointer analysis æ˜¯ä¸€ä¸ª fundamental çš„ analysisï¼Œå¯¹äº OOPLï¼Œå®ƒéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯èƒ½æŒ‡å‘å“ªäº› objectï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸ºäº† safetyï¼Œä½¿ç”¨çš„æ˜¯ä¸€ç§ may-analysis (over-approximation)ã€‚\nalias analysis è§£å†³çš„é—®é¢˜æ˜¯ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ª objectï¼Œå¯ä»¥ä» pointer analysis ä¸­æ¨å¯¼å¾—å‡ºã€‚\n\"Pointer analysis is one of the most fundamental static program analyses, on which virtually all others are built.\"1\nKey Factors of Pointer Analysis pointer analysis æ˜¯ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ç³»ç»Ÿæ€§çš„åˆ†æï¼Œä¸åŒçš„ factors ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„ efficiency å’Œ precisionã€‚\nfactors ä¸»è¦æœ‰å››ç§ï¼šheap abstractionã€context sensitivityã€flow sensitivityã€analysis scopeã€‚\nHeap Abstraction heap abstraction è§£å†³çš„æ˜¯ how to model heap memory çš„é—®é¢˜ã€‚\nåœ¨ dynamic execution ä¸­ï¼Œå †æ ˆå¤§å°å¯èƒ½æ˜¯ unbounded çš„ï¼ˆä¾‹å¦‚ non-tail-recursionï¼‰ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯å°† dynamically allocatedã€unbounded concrete objects ä¾ç…§å®ƒä»¬çš„ä¸€äº›å…±æ€§æŠ½è±¡ä¸º finite abstract objectsã€‚\n2\nè§£å†³æ–¹å¼ä¸»è¦åˆ†ä¸ºä¸¤å¤§æµæ´¾ï¼šstore baesd å’Œ storelessï¼Œå…¶ä¸­ store based model ä¸‹çš„ allocation sites æ–¹æ³•ä½¿ç”¨æœ€ä¸ºå¹¿æ³›ã€‚\nallocation-site ä¾ç…§ allocation site æ¥è¿›è¡Œ abstractï¼Œå¯ä»¥ç†è§£ä¸ºè¿›è¡Œ allocate çš„ä»£ç æ‰€åœ¨ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­ $o_2$ è¡¨ç¤ºç¬¬äºŒè¡Œçš„ allocate çš„ objectï¼š\nWhy Allocation-Site æ¯ä¸€æ¬¡ allocation å¿…ç„¶å¯¹åº”ä¸€ä¸ª allocation siteï¼Œè€Œ allocation sites å¿…ç„¶æ˜¯æœ‰é™çš„ï¼Œå› æ­¤å¯ä»¥ä¾æ®è¿™ä¸ªå…±æ€§æ¥è¿›è¡Œ abstractã€‚ Context Sensitivity context sensitivity è§£å†³çš„æ˜¯ how to model calling contexts çš„é—®é¢˜ã€‚\nContext-sensitive Context-insensitive Distinguish different calling contexts of a method Merge all calling contexts of a method Analyze each method multiple times, once for each context Analyze each method once context-sensitive æ˜¯éå¸¸æœ‰ç”¨çš„æŠ€æœ¯ï¼Œè€Œ context-insensitive åˆ™æ˜¯æé«˜äº† efficiency ä½†æ˜¯ä¸¢æ‰äº† precision çš„æŠ€æœ¯ã€‚\nFlow Sensitivity flow sensitivity è§£å†³çš„æ˜¯ how to model control flow çš„é—®é¢˜ã€‚\nFlow-sensitive Flow-insensitive Respect the execution order of the statements Ignore the control-flow order, treat the program as a set of unordered statements Maintain a map of points-to relations at each program location Maintain one map of points-to relations for the whole program ç”±äº flow-insensitive å¿½ç•¥äº† statements çš„ orderï¼Œæ‰€ä»¥ä¸‹å›¾ä¸­å¯¹ s çš„æ±‚è§£æœ‰ä¸¤ä¸ªå€¼ï¼ˆæ©™è‰²ï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªä¸º false positiveã€‚ å¯¹äº C è¯­è¨€ï¼Œflow-sensitive æ˜¯ååˆ†æœ‰æ•ˆçš„æŠ€æœ¯ï¼Œä½†æ˜¯å¯¹äº Javaï¼Œç›®å‰æ²¡æœ‰è¯æ®è¡¨æ˜ flow-sensitive æ˜æ˜¾ä¼˜äº flow-insensitiveï¼Œå¹¶ä¸” flow-sensitive çš„å¼€é”€è¾ƒå¤§ï¼Œæ‰€ä»¥å¯¹äº Java é€šå¸¸é€‰æ‹©åè€…ã€‚\nAnalysis Scope analysis scope è§£å†³çš„æ˜¯ what parts of program should be analyzed çš„é—®é¢˜ã€‚\nWhole-program Demand-driven Compute points-to information for all pointers in the program Only compute points-to information for the pointers that may affect specific sites of interest (on demand) Provide information for all possible clients Provide information for specific clients åœ¨ demand-driven ä¸­å¯¹ç‰¹å®š clients çš„æ±‚è§£å¯èƒ½éœ€è¦ traverse æ•´ä¸ª program çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”ä¸€éƒ¨åˆ† clients çš„æ±‚è§£ä¾èµ–äºé demanded clients çš„æ±‚è§£ï¼Œæ‰€ä»¥å®é™…ä¸Š demand-driven çš„ efficiency å¹¶ä¸è§å¾—ä¼˜ç§€å¤šå°‘ã€‚\nPointer Analysis in This Course Concerned Statements åœ¨ pointer analysis ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨ pointer-affecting statementsã€‚\nåœ¨ Java ä¸­ï¼Œpointers å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\nlocal variable: x\nstatic field: C.f $\\leftarrow$ sometimes referred as global variable\ninstance field: x.f $\\leftarrow$ modeled as an object with a field\narray element: array[i] $\\leftarrow$ ignore indexes. modeled as an object with a single field (may point to any value in array)\nç”±äºåœ¨å®é™…çš„ä»£ç ä¸­ï¼Œarray çš„ä¸‹æ ‡å¾€å¾€æ˜¯ä»¥å˜é‡çš„å½¢å¼åœ¨å¾ªç¯ä¸­è¿›è¡Œè®¿é—®çš„ï¼Œè¿™åœ¨ static analysis ä¸­æ˜¯æ— æ³•è¿›è¡Œåˆ†æçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¿½ç•¥ä¸‹æ ‡æŠ½è±¡ä¸ºä¸€ä¸ª object with a single field è¿›è¡Œ may-analysisã€‚ pointer-affecting statement å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\nnew: x = new T() assign: x = y store: x.f = y load: y = x.f call: r = x.k(a, ...) $\\leftarrow$ Complex memory-accesses will be converted to three-address code focus on virtual call Foundations Rules How to Implement Pointer Analysis pointer analysis çš„æœ¬è´¨æ˜¯åœ¨ pointers ä¹‹é—´ propagate point-to informationï¼Œæ‰€ä»¥å®ƒçš„å…³é”®åœ¨äºå½“ $pt(x)$ æ”¹å˜æ—¶ï¼Œè¦å¦‚ä½•å°† changed part propagate åˆ°ç›¸å…³çš„ pointersã€‚\nAndersen style analysis: Pointer analysis as solving a system of inclusion constraints for pointers.3\nç±»ä¼¼äºå‰é¢ control-flow çš„è§£å†³æ–¹æ³•ï¼Œæˆ‘ä»¬åŒæ ·æ„å»ºä¸€å¼ æœ‰å‘å›¾ï¼Œpoint-to information å¯ä»¥é€šè¿‡æœ‰å‘è¾¹è¿›è¡ŒæµåŠ¨ä»è€Œæ›´æ–°ç»“ç‚¹ä¿¡æ¯ã€‚\nnodes: Pointer = $V\\cup (O\\times F)$ edges: Ponter $\\times$ Pointer (may flow to) æ³¨æ„å‰é¢æåˆ°çš„è¿™é‡Œçš„ pointer analysis æ˜¯ flow-insensitive çš„ã€‚ å¯¹äº c.f = a è¿™ç§æ¶‰åŠ $o_i.f$ çš„è¯­å¥ï¼Œ $o_i.f$ æ‰æ˜¯çœŸæ­£çš„ \"variable\"ï¼Œå› æ­¤åœ¨å›¾ä¸Šä½¿ç”¨ $o_i.f$ è¡¨ç¤ºä¸€ä¸ª nodeã€‚\næ„å»ºå¥½ PGF ä¹‹åï¼Œpointer analysis å¯ä»¥é€šè¿‡è®¡ç®— PGF ä¸Šçš„ transitive closure å¾—åˆ°ã€‚\nç”±äºå‰é¢æåˆ°çš„ $o_i.f$ åœ¨å›¾ä¸Šçš„è¡¨ç¤ºé—®é¢˜ï¼ˆvariable å’Œ $o_i.f$ ä¹‹é—´è¿è¾¹æˆ–è€… $o.f$ ä¹‹é—´è¿è¾¹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ build PFG å’Œ propagate point-to information on PFG ä¸¤è€…æ˜¯äº’ç›¸ä¾èµ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPGF æ˜¯åœ¨ pointer analysis çš„è¿‡ç¨‹ä¸­ dynamically updatedã€‚\nAlogorithms ç›®å‰çš„è¿™ä¸ª context-insensitive çš„ç®—æ³•è¿˜æ˜¯æ¯”è¾ƒ trivial çš„ï¼Œä»ç„¶æ˜¯ä¸€ä¸ª SPFAï¼ˆé‚£ä¸ªå·²ç»æ­»æ‰äº†çš„ç®—æ³•ï¼‰çš„æ€è·¯ï¼Œä¸è¿‡è¿™é‡Œå°† 4 ä¸ª rules åˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œanalysis å’Œ build PGF çš„è¿‡ç¨‹æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œanalysis çš„åˆå§‹åŒ–å¯¹åº” x = new T() ruleï¼Œè€Œ build PGF çš„åˆå§‹åŒ–å¯¹åº” x = y ruleï¼Œå¤„ç†å®Œä¹‹ååˆ©ç”¨ worklist å¯¹ x.f = y å’Œ y = x.f ä¸€è¾¹ analysis ä¸€è¾¹ buildã€‚\néœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„ differencial propagation $\\Delta=pts-pt(n)$ ï¼Œè¿™æ˜¯ä¸€ç§åœ¨ program analysis ä¸­å¸¸è§ä¸”éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå¯ä»¥é™ä½æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚\nPointer Analysis with Method Calls æ˜¾ç„¶ï¼Œinter-procedural pointer analysis éœ€è¦å»ºç«‹ call graphã€‚åœ¨ call graph çš„å»ºç«‹ä¸Šï¼ŒCHA æ ¹æ® declared type of $a$ æ¥è§£å†³ call targetsï¼Œè€Œ pointer analysis æ ¹æ® $pt(a)$ æ¥åˆ¤æ–­ã€‚ç”±å‰é¢å¯¹ CHA çš„åˆ†æå¯ä»¥çŸ¥é“ï¼ŒCHA ä¼šå¼•å…¥ spurious call graph edges å’Œ point-to relationsã€‚\nPFG ä¸­å¯¹äº call statement çš„ rule å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nç”±äºåœ¨ $pt(x)$ ä¸­ä¸åŒçš„ $o_i$ å¯¹åº”çš„ method å¯èƒ½ä¸åŒï¼Œæ‰€ä»¥ PFG ä¸­ä¸ä¼šæ·»åŠ  $x\\to m_{this}$ è¿™æ¡è¾¹ã€‚\nä¸ PFG çš„ build ä¸€æ ·ï¼Œcall graph å’Œ pointer analysis ä¹Ÿæ˜¯äº’ç›¸ä¾èµ–ã€åŒæ—¶è¿›è¡Œçš„ï¼ˆä¹Ÿè¢«ç§°ä¸º on-the-fly call graph constructionï¼‰ã€‚åœ¨ pointer analysis ä¸­ï¼Œcall graph å½¢æˆçš„æ˜¯ä¸€ä¸ªã€Œreachable worldã€ï¼Œé™¤äº† entry methods ä»¥å¤–æ‰€æœ‰çš„ reachable methods éƒ½æ˜¯åœ¨ pointer analysis çš„è¿‡ç¨‹ä¸­é€æ¸å‘ç°çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬åªä¼šåˆ†æ reachable methodsã€‚\npointer analysis with method calls çš„ç®—æ³•ä¸å‰é¢çš„ç®—æ³•å¤§ä½“ç›¸åŒï¼Œé™¤äº†å›¾ä¸­çš„é»„è‰²éƒ¨åˆ†æ˜¯æ–°åŠ å…¥çš„ã€‚\nContext Sensitivity Introduction åœ¨åŠ¨æ€æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ª method å¯èƒ½åœ¨ä¸åŒçš„ context ä¸­è¢« callï¼Œä½¿ç”¨ context insensitive (C.I.) çš„åˆ†ææ–¹æ³•ä¼šä½¿å¾—ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„ä¸åŒçš„ object æµå…¥ä¸€ä¸ª method é€ æˆ spurious data flowï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦å¼•å…¥ context sensitive (C.S.) çš„åˆ†ææ–¹æ³•æ¥æå‡ç²¾åº¦ã€‚\nC.S. åŒºåˆ†ä¸Šä¸‹æ–‡æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œä¸‹é¢ä»¥ call site æ–¹æ³•ä¸ºä¾‹ã€‚åœ¨ C.S. ä¸­ï¼Œæœ€ç›´æ¥çš„å¼•å…¥ä¸Šä¸‹æ–‡çš„åˆ†ææ–¹å¼æ˜¯ clone-based context sensitive analysisï¼šå°† variables å’Œ methods é€šè¿‡ contexts è¿›è¡Œ qualifyï¼Œåœ¨æ¯ä¸€ä¸ª context ä¸‹éƒ½ç»´æŠ¤ variables å’Œ methods çš„ cloneã€‚\nOOPs é€šå¸¸æ˜¯ heap-intensive çš„ï¼Œå¯¹äºæ¯ä¸€ä¸ª object ä¹Ÿç”¨ context (heap-context) è¿›è¡Œ qualifyï¼Œé€šå¸¸ä½¿ç”¨è¢« allocate æ—¶çš„ context ä½œä¸ºæ ‡è¯†ã€‚\nRules åœ¨ context sensitive çš„åˆ†æçš„è¡¨ç¤ºæ–¹æ³•ä¸­ï¼Œæ¯ä¸ª domain éƒ½åŠ å…¥äº†ä¸€ç»´ contextã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯¹ call çš„å¤„ç†ä¸­åŠ å…¥äº†ä¸€ä¸ª Select(c, l, c': o_i) å‡½æ•°ï¼ŒåŸºäº call site $l$ æ—¶çš„ä¿¡æ¯æ¥é€‰æ‹©å¯¹åº”çš„ context\nAlgorithms context sensitive pointer analysis å…¶å®å°±ç›¸å½“äºåœ¨ C.I. çš„åŸºç¡€ä¸ŠåŠ å…¥ä¸€ç»´ä¿¡æ¯ä½œä¸º contextï¼ŒåŒæ—¶åœ¨å¤„ç† method call æ—¶éœ€è¦ä½¿ç”¨ä¸€ä¸ª select å‡½æ•°é€‰å–è¿™ä¸ª method çš„ contextã€‚\nä»¥ä¸Šè¿™å¼ å›¾æ˜¯ä¸€ä¸ª exampleï¼Œå¦‚æœæˆ‘ä»¬å°†ç¬¬äºŒè¡Œçš„ y = id(n2) æ”¹æˆ x = id(n2) é‚£ä¹ˆä½¿ç”¨ C.S. æ–¹æ³•åˆ†æå¾—åˆ°çš„ i å¯èƒ½çš„ pointers ä¸­ä»ç„¶ä¼šæœ‰ spurious targetï¼Œè¿™ç§é—®é¢˜å¯¹åº”çš„åˆ™æ˜¯ flow sensitivityã€‚\nC.S. çš„ç®—æ³•å¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹å‡º C.S. çš„å¤„ç†æ–¹æ³•å’Œ C.I. çš„å¤„ç†æ–¹æ³•å‡ ä¹ä¸€è‡´ï¼Œè€Œ AddEdge å’Œ Propagate æ›´æ˜¯ä¸€æ ·ã€‚\nContext Sensitivity Variants context sensitivity variants å¯ä»¥æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œä»…ä»…ä»‹ç»äº† call-siteã€objectã€type è¿™ä¸‰ç§ã€‚\nCall-Site Sensitivity4 åœ¨ call-site sensitivity ä¸­ï¼Œcontext è¢«çœ‹ä½œæ˜¯ä¸€ç³»åˆ— call sites ç»„æˆçš„ stack (call chain)ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ª method call å°±å°†è¿™ä¸ª call site åŠ å…¥ stack ä¸­ç„¶åä¼ å…¥è¿™ä¸ª methodï¼ˆç›¸å½“äº select å¾—åˆ°çš„ç»“æœå°±æ˜¯åŸæ¥çš„ call chain åŠ ä¸Šå½“å‰çš„ call siteï¼‰ã€‚\ncall-site sensitivity ä¹Ÿè¢«ç§°ä¸º call-string sensitivity æˆ–è€… $k$-CFAã€‚\nå½“é‡åˆ°é tail-recursion çš„é€’å½’å‡½æ•°æ—¶ï¼Œcall-site sensitivity å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸²å¾ˆé•¿çš„ call chainï¼Œç”šè‡³å¯èƒ½ä¼šå‡ºç° unbounded çš„ call chain ä»è€Œå¯¼è‡´ PA æ— æ³• terminateã€‚ä½†æ˜¯ï¼ŒçœŸæ­£èµ·ä½œç”¨çš„ call sites ç»ˆç©¶æ˜¯ bounded çš„ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡é™åˆ¶ call chain çš„æœ€å¤§é•¿åº¦ï¼ˆ$k$ï¼‰æ¥é¿å…å‡ºç°è¿™ç§æƒ…å†µã€‚\nåœ¨å®é™…ä¸­ï¼Œ$k$ å¾€å¾€æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ•°ï¼ˆ$\\le 3$ï¼‰ï¼Œå¹¶ä¸” method context å’Œ heap context çš„ $k$ å¯èƒ½ä¸åŒï¼Œä¾‹å¦‚ $k_{\\mathrm{method}}=2, k_{\\mathrm{heap}}=1$ã€‚\nC.I. vs. C.S.(1-Call-Site) Object Sensitivity5 åœ¨ object sensitivity ä¸­ï¼Œå°†ä¸€ç³»åˆ—çš„ä½¿ç”¨ allocation site è¡¨ç¤ºçš„ objects ä½œä¸º contextï¼Œæ¯æ¬¡é‡åˆ°ä¸€ä¸ª method call å°±å°† receiver object åŠ åˆ°å®ƒçš„ heap context åé¢ä½œä¸ºè¿™ä¸ª method çš„ contextã€‚\nä¸ call-site sensitivity ä¸åŒçš„æ˜¯ï¼Œobject sensitivity é’ˆå¯¹çš„æ˜¯æµå…¥æ¯ä¸ª object çš„ dataï¼Œå¯ä»¥è¯´ object sensitivity æ˜¯é’ˆå¯¹ OOPLs è®¾è®¡çš„æ–¹æ³•ï¼Œç”±äºä½¿ç”¨ allocation site æ¥è¯†åˆ«ä¸€ä¸ª objectï¼Œæ‰€ä»¥å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ allocation-site sensitivityã€‚\nC.S. (1-Object) vs. C.S. (1-Call-Site) ä¸åŒæƒ…å†µä¸‹ä»–ä»¬çš„ precision ä¹Ÿä¼šä¸åŒï¼Œå› æ­¤è¿™ä¸¤ç§æ–¹æ³•ä¸èƒ½ç›´æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯åœ¨å¤§é‡çš„æ•°æ®ä¹‹ä¸‹è¿›è¡Œå¯¹æ¯”ï¼Œobject sensitivity å¯¹äº Java è¿™æ ·çš„ OOPLs æ˜¯è¦ä¼˜äº call-site sensitivity çš„ï¼Œè€ƒè™‘åˆ° Java çš„ç‰¹æ€§ï¼Œå¹¶ä¸” object sensitivity é’ˆå¯¹çš„æ˜¯ OOPLsï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯å¾ˆ intuitive çš„å˜›ã€‚ï¼ˆä¹Ÿè®¸å¯ä»¥è®¤ä¸ºæ˜¯ object sensitivity ä¸€å®šç¨‹åº¦ä¸Šä¸¢å¤±äº† generalization ä½†æ˜¯æ¢æ¥äº†åœ¨ OOPLs ä¸Šæ›´å¥½çš„æ€§èƒ½ğŸ¤”ï¼‰\nType Sensitivity6 type sensitivity å°† context çœ‹ä½œæ˜¯ä¸€ç³»åˆ—åŒ…å«äº† allocation-site of the receiver object çš„ type çš„é›†åˆï¼Œå¾ˆæ˜¾ç„¶å®ƒçš„ç²¾åº¦ä¸€å®šæ˜¯ä¸¥æ ¼å°äºç­‰äº object sensitivity çš„ï¼Œç›¸å½“äºä¸€ç§å°†åœ¨åŒä¸€ä¸ª class ä¸‹ allocate çš„ objects åˆå¹¶äº†çš„ä¸€ç§ object sensitivityï¼Œä½†æ˜¯å°½ç®¡ä¸¢å¤±äº†ç²¾åº¦ï¼Œå®ƒæ¢æ¥äº†æ›´å¥½çš„é€Ÿåº¦ã€‚\nCall-Site vs. Object vs. Type Sensitivity 7\nä¸‰è€…å¯¹æ¯”ä¹‹ä¸‹ï¼Œå¯ä»¥çœ‹å‡º type sensitivity ä»ç„¶æ˜¯ç”±äº call-site sensitivity çš„ã€‚\nPrecision: object \u003e type \u003e call-site Efficiency: type \u003e object \u003e call-site Pointer Analysis - Report from Dagstuhl Seminar 13162. 2013.Â â†©ï¸\nVini Kanvar, Uday P. Khedker, \"Heap Abstractions for Static Analysis\". ACM CSUR 2016.Â â†©ï¸\nLars Ole Andersen, 1994. \"Program Analysis and Specialization for the C Programming Language\". Ph.D. Thesis. University of Copenhagen.Â â†©ï¸\nOlin Shivers, 1991. \"Control-Flow Analysis of Higher-Order Languages\". Ph.D. Dissertation. Carnegie Mellon University.Â â†©ï¸\nAna Milanova, Atanas Rountev, and Barbara G. Ryder. \"Parameterized Object Sensitivity for Points-to and Side-Effect Analyses for Java\". ISSTA 2002.Â â†©ï¸\nYannis Smaragdakis, Martin Bravenboer, and Ondrej LhotÃ¡k. \"Pick Your Contexts Well: Understanding Object-Sensitivity\". POPL 2011.Â â†©ï¸\nYue Li, Tian Tan, Anders MÃ¸ller, and Yannis Smaragdakis. \"A Principled Approach to Selective Context Sensitivity for Pointer Analysis\". TOPLAS 2020.Â â†©ï¸\n","description":"Pointer Analysis","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šPointer Analysis","uri":"/posts/nju-spa-pa/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Interprocedural Analysis éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nMotivation ä¸ºäº†å¤„ç† method callsï¼Œæˆ‘ä»¬å¯ä»¥åšæœ€ conservative assumptions æ¥ç›´æ¥ä¸ç®¡è¿™ä¸ª method çš„å…·ä½“å½¢æ€ï¼Œä½†æ˜¯è¿™æ ·ä¼šäº§ç”Ÿå¾ˆå¤§çš„ imprecisionï¼Œäºæ˜¯ï¼Œé’ˆå¯¹ method calls è¿™ç§ç‰¹æ®Šå½¢æ€ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Interprocedural Analysisã€‚\nCall Graph Construction (CHA) call graph: a representation of calling relationships in the program.\nå¯¹äº OOPLsï¼Œcall graph construction ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š\nMethod Call åœ¨ Java ä¸­ï¼Œæœ‰ 3 ä¸­ method callsï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º\nå…¶ä¸­ virtual call æ˜¯æœ€å¤§çš„éš¾ç‚¹ä¹Ÿæ˜¯ call graph construction çš„é‡ç‚¹ã€‚\nåœ¨ run-timeï¼Œvirtual call åŸºäºä»¥ä¸‹ä¸¤ç‚¹å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼š\ntype of the receiver object $\\to c$ method signature(identifier of a method) at the call site: \u003cC: T foo(P, Q, R)\u003e $\\to m$ signature = class type(C) + method name(foo) + descriptor(T, P, Q, R) descriptor: return type + parameter types æˆ‘ä»¬ä½¿ç”¨ $Dispatch(c, m)$ å‡½æ•°æ¥æè¿° run-time æ—¶ virtual call çš„ dispatch è¿‡ç¨‹ï¼Œå®é™…å°±æ˜¯é€’å½’å‘ parent å¯»æ‰¾å¯¹åº”çš„ method call çš„è¿‡ç¨‹ã€‚\nClass Hierarchy Analysis class hierarchy analysis (CHA) æ˜¯ä¸€ç§ç”¨æ¥è§£å†³ method call çš„æ–¹æ³•ï¼Œå®ƒéœ€è¦æ•´ä¸ªç¨‹åºçš„ class hierarchy informationï¼Œå¹¶åŸºäº declared type of receiver variable ($a$) of call site å’Œ $a$ å¯èƒ½æŒ‡å‘ä»»æ„å­ç±»æˆ–çˆ¶ç±»çš„å‡è®¾æ¥è§£å†³ virtual callã€‚\nCHA åªè€ƒè™‘ declared type of receiver variable at the call-site å’Œå®ƒçš„ inheritance hierarchyï¼Œå®Œå…¨å¿½ç•¥ data- he control-flow çš„ä¿¡æ¯ï¼Œå› æ­¤å®ƒå…·æœ‰ fast çš„ä¼˜åŠ¿ä¹Ÿæœ‰ imprecision çš„åŠ£åŠ¿ï¼Œå®ƒçš„ä¸€ä¸ªè¿ç”¨åœºæ™¯å°±æ˜¯ IDEAã€‚\nCall Graph Construction Interprocedural Control-Flow Graph CFG å±•ç¤ºçš„åªæ˜¯ä¸€ä¸ª individual method çš„ structureï¼Œè€Œ ICFG åˆ™æ˜¯åœ¨ CFG çš„åŸºç¡€ä¸ŠåŠ å…¥äº† call edges, return edges æ¥å±•ç¤ºæ•´ä¸ªç¨‹åºçš„ structureã€‚\nå¯ä»¥çœ‹åˆ°å›¾ä¸­é»„è‰²éƒ¨åˆ†çš„è¾¹è¿æ¥äº† call edge å’Œ return edge çš„èµ·ç‚¹ä¸ç»ˆç‚¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®©å½“å‰ CFG ä¸­çš„ data-flow ä¿¡æ¯å¯ä»¥ç›´æ¥æµå‘ä¸‹ä¸€ä¸ª BB è€Œä¸æ˜¯ä» call edge ç„¶åç»è¿‡ä¸€å¤§æ®µå†—ä½™çš„è·¯å¾„æ‰åˆ°è¾¾ä¸‹ä¸€ä¸ª BBã€‚\nInterprocedural Data-Flow Analysis interprocedural data-flow analysis å°±æ˜¯åŸºäº ICFG å¯¹æ•´ä¸ªç¨‹åºè¿›è¡Œåˆ†æã€‚ç›¸æ¯”äº intraprocedural çš„ CFGï¼ŒICFG åŠ å…¥äº† call å’Œ return edgesï¼Œç›¸åº”çš„ transfer function ä¹Ÿè¦ä» node transfer åŠ ä¸Š edge transferã€‚\ncall edge transfer: transfer data flow from call site to the entry node of callee return edge: transfer: transfer data flow from the exit node of the callee to the return site å¯¹äº intraprocedural çš„ constant propagationï¼Œinterprocedural çš„ node transfer function åªåœ¨ call nodes ä¸Šæœ‰æ‰€ä¸åŒï¼šç›¸æ¯”äºç›´æ¥å°† LHS variable è®¾ç½®ä¸º NACï¼Œæˆ‘ä»¬å…ˆå°†è¿™ä¸ª variable kill æ‰ï¼Œç„¶åå°†å…¶ flow åˆ° edge transferï¼Œæœ€åç»ç”± return edge transfer è¿›è¡Œåˆå¹¶ã€‚\nin summary:\nnode transfer call nodes: identity other nodes: same as intraprocedural edge transfer normal edges: identity call-to-return edges: kill the LHS variable, then propagate others call edges: pass argument values return edges: pass return values ä»¥ä¸‹æ˜¯ä¸€ä¸ª interprocedural data-flow analysis çš„ example:\nå†ä¸ intraprocedural data-flow analysis è¿›è¡Œï¼Œå¯¹æ¯”ï¼Œå¾ˆæ˜¾ç„¶ interprocedural çš„ç»“æœæ˜¯æ›´ precise çš„ã€‚\n","description":"Interprocedural Analysis","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šInterprocedural Analysis","uri":"/posts/nju-spa-ia/"},{"categories":["CS"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ä½œä¸šè¸©å‘è®°å½•ã€‚\næœ¬æ¥æƒ³ä¸€æ­¥æ­¥ git commit ä¼ åˆ° github ä¸Šçš„ï¼Œåæ¥å‘ç°ä¸èƒ½ç›´æ¥ä¸Šä¼ è§£é¢˜ä»£ç ï¼Œé‚åˆ åº“è·‘è·¯ï¼ˆåœ¨å†™å®Œ A1 ä¹‹å‰ qwqï¼‰ã€‚\nå†™åˆ° A2 çš„æ—¶å€™å°±å·²ç»è¸©äº†ä¸å°‘å‘ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰å¿…è¦è®°å½•ä¸€ä¸‹ï¼Œä¸‡ä¸€çœŸæœ‰å¹¸è¿è¯»è€…çœ‹åˆ°è¿™ä¸ªè¾£é¸¡çš„åšå®¢ä¹‹åå°±æˆåŠŸ AC äº†å‘¢ï¼ˆ\nA1: æ´»è·ƒå˜é‡åˆ†æå’Œè¿­ä»£æ±‚è§£å™¨ æ´»è·ƒå˜é‡åˆ†æ SetFact newBoundaryFact(CFG) å’Œ SetFact newInitialFact() è¿”å›ä¸€ä¸ªç©ºçš„ SetFact å³å¯ boolean transferNode(Stmt,SetFact,SetFact) æ³¨æ„æ‹·è´è¦ç”¨ out.copy() æ–¹æ³•è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼ è¦å°†ä¸€ä¸ª interface å®ä¾‹å½“æˆæŸä¸ª implementation class çš„å®ä¾‹ä½¿ç”¨éœ€è¦å…ˆç”¨ instanceof åˆ¤æ–­ç„¶åç”¨ (Var) å¼ºåˆ¶è½¬æ¢ è¿­ä»£æ±‚è§£å™¨ Solver.initializeBackward(CFG,DataflowResult) ä¸ºäº†å®ç° meetInto æ–¹æ³•ï¼Œéœ€è¦å°† IN å’Œ OUT éƒ½èµ‹ä¸Šåˆå€¼ A2: å¸¸é‡ä¼ æ’­å’Œ Worklist æ±‚è§£å™¨ å¸¸é‡ä¼ æ’­ CPFact newBoundaryFact(CFG) ä¸ºäº† safety çš„è€ƒè™‘ï¼Œè¿™é‡Œè¦åˆå§‹åŒ–ä¸º NAC æˆ‘ä»¬è¦å°†æ‰€æœ‰å‡ºç°åœ¨ CFG ä¸­çš„ variables å…¨éƒ¨åˆå§‹åŒ–ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ° cfg.getIR().getParams() åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå¯¹äº variable $v$ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å±äº Integer å†è¿›è¡Œåˆå§‹åŒ– Value meetValue(Value,Value) å°±æ˜¯è¯¾ä¸Šè®²åˆ°çš„ lattice ä¸Šçš„ $\\cap$ æ“ä½œï¼Œåˆ†ç±»è®¨è®ºä¸€ä¸‹å³å¯ boolean transferNode(Stmt,CPFact,CPFact) åªéœ€è¦è€ƒè™‘ DefinitionStmt å¯ä»¥ä½¿ç”¨ CPFact çš„ copyFrom() æ–¹æ³•æ›´æ–°çš„åŒæ—¶è¿”å›æ˜¯å¦æ”¹å˜ åŒæ ·è¦è€ƒè™‘ variable æ˜¯å¦æ»¡è¶³ canHoldInt Value evaluate(Exp,CPFact) æ ¹æ®è¿™ä¸ªåˆ¤æ–­ exp åˆ†ç±»è®¨è®ºè¿›è¡Œå¤„ç† å¯¹åº” Var ç±»å‹åº”è¯¥è°ƒç”¨ in.get(v) æ¥å¾—åˆ° variable $v$ çš„å€¼ å¯¹åº” ArithmeticExp ç±»å‹ä¸­çš„ DIV æˆ–è€… REM æ—¶æ³¨æ„åˆ¤æ–­é™¤æ•°/æ¨¡æ•°å¦‚æœæ˜¯ 0 è¦è¿”å› NAC å¯¹äº exp çš„ operand lhs å’Œ rhsï¼Œä¸¤ä¸ªä¸­æœ‰ä¸€ä¸ªä¸º NAC æ—¶ä¹Ÿè¦è€ƒè™‘å¦‚æœ rhs æ˜¯ Constant å¹¶ä¸”ä¸º 0 çš„æƒ…å†µ æœ€åå¦‚æœ exp ä¸å±äºä¸Šå›¾ä¸­çš„ä»»ä¸€ç±»å‹ï¼Œåº”è¯¥è¿”å› NAC è€Œä¸æ˜¯ Undefï¼Œä½œä¸šç½‘ç«™ä¸Šæœ‰æåˆ°ä½†æ˜¯æˆ‘æ²¡æ³¨æ„åˆ°ï¼ˆ Worklist æ±‚è§£å™¨ Solver.initializeForward(CFG,DataflowResult) å’Œ A1 ä¸€æ ·è®°å¾— IN å’Œ OUT éƒ½è¦èµ‹å€¼ WorkListSolver.doSolveForward(CFG,DataflowResult) worklist æœ¬è´¨åªæ˜¯ä¸€ä¸ªå…ƒç´ ä¸é‡å¤çš„æ™®é€šçš„å®¹å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»æ„æ»¡è¶³ä¸Šè¿°è¦æ±‚æ•°æ®ç»“æ„å­˜å‚¨ï¼Œä½†æ˜¯ç”¨ä¸€ä¸ª HashSet æ›´çœå¿ƒï¼ˆ A3: æ­»ä»£ç æ£€æµ‹ æ­»ä»£ç æ£€æµ‹å™¨ Preparation: æŠŠå‰ä¸¤æ¬¡ä½œä¸šçš„ä»£ç è’¯è¿›æ¥ï¼Œè®°å¾—åˆå¹¶ä¸€ä¸‹ backward å’Œ forward çš„éƒ¨åˆ† Set\u003cStmt\u003e analyze(IR) ä¸»è¦æ³¨æ„ä¸€ä¸‹ switch è¯­å¥å¯èƒ½ä¼š fall through çš„æƒ…å†µï¼Œæœ¬æ¥ä»¥ä¸ºè¿™é‡Œéœ€è¦ç”¨åˆ° dfsï¼Œä½†æ˜¯çœ‹äº†ä¸€çœ¼ CFG å›¾ï¼Œè²Œä¼¼ hit åˆ°çš„ case åé¢ä¼šæœ‰è¾¹è¿æ¥åˆ°ä¼š fall through çš„ caseï¼Œæ‰€ä»¥ç›´æ¥æŠŠ hit çš„ case åŠ è¿›æ¥ä¹‹åä¸ç®¡å°±è¡Œäº† å…¶ä»–åŸºæœ¬å°±æ˜¯ä¸€ä¸ªå¤§æ¨¡æ‹Ÿäº†ï¼Œå»ºè®®å…ˆåšä¸€éçŒªå›½æ€ç»ƒç»ƒæ‰‹ï¼ˆbushi ","description":"è¸©å‘è®°å½•","tags":["Program Analysis"],"title":"Tai-e Assignments è¸©å‘è®°å½•","uri":"/posts/tai-e-assignments/"},{"categories":["Algorithm"],"content":"ç”±äº 4 å¹´åŠå‰ï¼ˆæƒŠäº†ï¼Œå±…ç„¶å·²ç»è¿‡äº†è¿™ä¹ˆä¹…äº†å— QAQï¼‰å­¦è¿‡ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™ä¸¥æ ¼ä¸Šæ¥è¯´åº”è¯¥æ˜¯ Re: ä»é›¶å¼€å§‹çš„ mancher é‡æ‹¾ç¬”è®°ï¼ˆè¯è¯´æˆ‘æ€ä¹ˆå’Œåˆå­¦çš„çŠ¶æ€ä¸€æ ·å•Šï¼‰\nIntroduction æˆ‘ä»¬è¿˜æ˜¯å¥—è·¯å¼çš„ä» intro å¼€å§‹å§ï¼ˆ\nå¦‚æœæƒ³è¦å•ç‹¬æ±‚å‡ºæŸä¸€ä¸ªå›æ–‡ä¸²ï¼Œæ˜¾ç„¶å¼„ä¸¤ä¸ªæŒ‡é’ˆ $\\mathcal{O}(n)$ æ¯”è¾ƒä¸€éå°±å¥½äº†ï¼Œä½†æ˜¯å¦‚æœè¦æ±‚å‡ºæ‰€æœ‰çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿæœ€å®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªä¼˜åŒ–å°±æ˜¯ï¼Œåªè¦æ±‚å‡ºäº†ä»¥ä¸‹æ ‡ $i$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…¶å®ä¹Ÿå°±æ±‚å‡ºäº†ä»¥ä¸‹æ ‡ $i$ ä¸ºä¸­å¿ƒçš„æ‰€æœ‰å›æ–‡ä¸²ã€‚åœ¨è€ƒè™‘äº†è¿™ä¸ªä¼˜åŒ–ä¸‹çš„æš´åŠ›ç®—æ³•å¤æ‚åº¦æ˜¯ $\\mathcal{O}(n^2)$ çš„ï¼Œä½†æ˜¯è¿™è¿˜æ˜¯ä¸å¤Ÿä¼˜ç§€ã€‚\nå¦‚æœä½¿ç”¨å­—ç¬¦ä¸²å“ˆå¸Œå‘¢ï¼Ÿä»ç„¶é‡‡ç”¨ä¸Šé¢çš„ trickï¼Œè¦æ±‚æœ€é•¿çš„é•¿åº¦æˆ‘ä»¬å°±å†å¥—ä¸€ä¸ªäºŒåˆ†ï¼Œè¿™æ ·å¯ä»¥åœ¨ $\\mathcal{O}(n\\log n)$ çš„æ—¶é—´å†…æ±‚å‡ºæ¥ã€‚\nä½†æ˜¯å•Šï¼Œè¿™ç©æ„æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„ç®—æ³•å¯ä»¥åœ¨ $\\mathcal{O}(n)$ çš„æ—¶é—´å†…æ±‚å‡ºæ¥ï¼Œé‚£å°±æ˜¯ manacher ç®—æ³•ï¼ˆç‚¹é¢˜ï¼ï¼‰ã€‚é“ç†å’Œ KMP æ˜¯ç±»ä¼¼çš„ï¼Œå……åˆ†åˆ©ç”¨å›æ–‡ä¸²çš„æ€§è´¨ï¼Œéœ€è¦æœ‰å¼ºå¤§çš„æ³¨æ„åŠ›ã€‚\nManacher è¿‡ç¨‹å¾ˆç®€å•ï¼Œç”±äºå¶æ•°é•¿åº¦çš„å›æ–‡ä¸²çš„æ±‚è§£å¯ä»¥é€šè¿‡åœ¨åŸå­—ç¬¦ä¸²ä¸­æ·»åŠ å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦è½¬åŒ–ä¸ºå¯¹å¥‡æ•°é•¿åº¦çš„å›æ–‡ä¸²çš„æ±‚è§£ï¼Œå› æ­¤ä¸‹é¢åªè€ƒè™‘å¯¹å¥‡æ•°é•¿åº¦çš„å›æ–‡ä¸²çš„æ±‚è§£ã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå³ç«¯ç‚¹å…·æœ‰æœ€å¤§ä¸‹æ ‡çš„å›æ–‡ä¸²çš„ä¸­å¿ƒä¸‹æ ‡ $id$ å’Œå³ç«¯ç‚¹ä¸‹æ ‡ $r$ï¼Œè®° $d[i]$ è¡¨ç¤ºä»¥ä¸‹æ ‡ $i$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å¥‡æ•°é•¿åº¦å›æ–‡ä¸²çš„åŠå¾„å¤§å°ã€‚\næšä¸¾ä¸­å¿ƒ $i$ï¼Œå‡å¦‚å½“å‰æšä¸¾çš„ä¸‹æ ‡ $i\u003cr$ï¼Œé‚£ä¹ˆç”±å›æ–‡ä¸²çš„æ€§è´¨ï¼Œå°† $i$ ä»¥ $id$ ä¸ºä¸­å¿ƒå¯¹ç§°è¿‡å»å¾—åˆ°å¯¹åº”çš„ä¸‹æ ‡ $j=id*2-i$ï¼Œåˆ™å‡ ä¹å¯ä»¥è®¤ä¸º $d[i]=d[j]$ï¼Œåœ¨ä¸‹å›¾ä¸­è¿™æ˜¯å¾ˆæ˜¾ç„¶çš„ï¼ˆå›¾ç‰‡æ¥è‡ª oi-wikiï¼‰ï¼š\nä¸è¿‡è€ƒè™‘åˆ° $j$ çš„æœ€é•¿å›æ–‡ä¸²çš„å·¦ç«¯ç‚¹å¯èƒ½è½åœ¨ $id$ çš„æœ€é•¿å›æ–‡ä¸²ä¹‹å¤–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç æ‰å¤šå‡ºå»çš„éƒ¨åˆ†ï¼Œç„¶åå†æš´åŠ›å‘å¤–æ‰©å±• $d[i]$ã€‚\nå¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¦‚æœå½“å‰æšä¸¾çš„ä¸‹æ ‡ $i\\ge r$ï¼Œé‚£ä¹ˆå°±ç›´æ¥æš´åŠ›æšä¸¾ã€‚\næœ€åéƒ½è¦è®°å¾—ç”¨ $i$ çš„ç»“æœæ›´æ–° $id$ å’Œ $r$ã€‚\nComplexity åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œåªè¦ $i$ çš„æœ€é•¿å›æ–‡ä¸²æ˜¯å®Œæ•´è½åœ¨ $id$ çš„æœ€é•¿å›æ–‡ä¸²å†…éƒ¨çš„ï¼Œé‚£ä¹ˆå¯¹äº $i$ çš„æ±‚è§£æ˜¯ $\\mathcal{O}(1)$ çš„ï¼Œè€Œä¸€æ—¦ $i$ çš„æœ€é•¿å›æ–‡ä¸²è½åœ¨äº† $id$ çš„æœ€é•¿å›æ–‡ä¸²å¤–ï¼Œæˆ‘ä»¬åªä¼šæšä¸¾è½åœ¨å¤–é¢çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”æšä¸¾å®Œæˆåä¼šç«‹å³æ›´æ–° $id$ å’Œ $r$ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªä¸‹æ ‡æœ€å¤šåªä¼šè¢«æšä¸¾ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯æˆä¸ºå·¦ç«¯ç‚¹ï¼Œå¦ä¸€æ¬¡æ˜¯æˆä¸ºå³ç«¯ç‚¹ï¼Œæ‰€ä»¥ manacher ç®—æ³•æ˜¯ $\\mathcal{O}(n)$ çš„ã€‚\nSome Naive Thoughts æ€»è§‰å¾—è¿™ç§å­—ç¬¦ä¸²ä¸­ KMP å’Œ manacher è§£å†³çš„é—®é¢˜å’Œå¯¹æ•°ç»„è¿›è¡Œæ’åºçš„é—®é¢˜æœ‰ç‚¹åƒï¼ˆå¼ºè¡Œè”æƒ³ï¼‰ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²ä¸­è¿™ä¸¤ä¸ªç®—æ³•éƒ½èƒ½åšåˆ° $\\mathcal{O}(n)$ è€Œæ’åºçš„ä¸Šé™å¹³å‡å°±æ˜¯ $\\mathcal{O}(n\\log n)$ çš„å‘¢ï¼Ÿ\næƒ³èµ·ä¹‹å‰åœ¨çŸ¥ä¹ä¸Šåˆ·åˆ°è¿‡ä¸ºä»€ä¹ˆæ’åºç®—æ³•çš„ä¸Šé™æ˜¯ $\\mathcal{O}(n\\log n)$ çš„é—®é¢˜ï¼Œåº•ä¸‹å…³äºä¿¡æ¯è®ºçš„å›ç­”ä»¤æˆ‘å¤§å‘¼å¦™å“‰ï¼Œå±…ç„¶è¿˜æœ‰è¿™ç§è§’åº¦ï¼Ÿï¼è‡ªæ­¤ä¹‹åï¼Œä¿¡æ¯è®ºæˆä¸ºäº†æˆ‘å¿ƒä¸­çš„ä¸€æœ¬åœ£ç»ï¼Œæ€»è§‰å¾—è¿™ç©æ„ç®€ç›´å°±æ˜¯è¿™ä¸–ç•Œçš„çœŸç†ï¼Œå®ƒå¯ä»¥å›ç­”ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥æ±‚å‡ºä»»ä½•ä¼˜åŒ–çš„æé™ï¼Œç”¨ä¿¡æ¯è®ºçœ‹é—®é¢˜ç®€ç›´å’Œå¼€äº†ç¥ä¹‹çœ¼ä¿¯è§†ä¸–ç•Œä¸€æ ·ã€‚\næˆ‘ä»¬å†å›åˆ°è¿™ä¸ªä¾‹å­ï¼Œç”¨ï¼ˆæˆ‘ä»¥ä¸ºçš„ï¼‰ä¿¡æ¯è®ºæ¥è€ƒè™‘ï¼Œé‚£ä¸€å®šæ˜¯ $d[]$ å’Œ $next[]$ æ•°ç»„ç›¸æ¯”äºæ’åºé—®é¢˜ä»…ä»…æä¾›äº†å¤§å°å…³ç³»ï¼Œä»–ä»¬æä¾›äº†æ›´ä¸°å¯Œçš„ä¿¡æ¯æ¥é™ä½ä¸ç¡®å®šæ€§ï¼Œä¿¡æ¯é‡æ›´å¤§ï¼Œå› æ­¤ä¼˜åŒ–çš„ç†è®ºæé™å¤æ‚åº¦ä¼šæ›´ä½ã€‚è¯è¯´è¿™ä¸æ˜¯æ‰¯äº†ä¸€å †æœ€åç»“è®ºæ˜¯å¥åºŸè¯å˜›\nä½†æ˜¯å˜›ï¼Œä¸€ç›´æ²¡æ‰¾åˆ°æ—¶é—´å¥½å¥½å­¦å­¦ä¿¡æ¯è®ºï¼Œæ‰€ä»¥è¿™ä»…ä»…æ˜¯ä¸€äº›ã€Œnaive thoughtsã€QwQ\næœ‰ç©ºçš„æ—¶å€™ä¸€å®šä¼šè®¤çœŸå­¦ä¿¡æ¯è®ºçš„ï¼ˆç¡®ä¿¡\nProblems æ¿å­å°±ä¸ç‰¹æ„æ”¾ä¸Šæ¥äº†ï¼Œä»…ä»…å¤„ç†å¥‡æ•°é•¿åº¦å›æ–‡ä¸²çš„æ¿å­å’Œä½¿ç”¨ trick æ±‚å‡ºå¥‡å¶é•¿åº¦å›æ–‡ä¸²çš„æ¿å­éƒ½åœ¨è¿™ä¸¤é¢˜é‡Œæœ‰ä½“ç°ã€‚\nã€ŒLuogu P4555ã€[å›½å®¶é›†è®­é˜Ÿ]æœ€é•¿åŒå›æ–‡ä¸² Luogu\né€’æ¨æ±‚å‡ºä¸‹æ ‡ $i$ åˆ†åˆ«ä½œä¸ºå›æ–‡ä¸²ï¼ˆä¸ä¸€å®šæ˜¯ manacher ä¸­çš„æœ€é•¿å›æ–‡ä¸²ï¼‰çš„å·¦å³ç«¯ç‚¹æ—¶çš„æœ€é•¿çš„å›æ–‡ä¸²é•¿åº¦ï¼Œç„¶åæšä¸¾å‰²ç‚¹å– max å³å¯ã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥äºŒåˆ†ç­”æ¡ˆã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #include \u003cbits/stdc++.h\u003e using std::cin;\tusing std::cout; using std::string;\tusing std::vector; const int N = 1e5 + 5; int n; char s[N], t[N \u003c\u003c 1]; vector \u003cint\u003e l(N \u003c\u003c 1), r(N \u003c\u003c 1), R(N \u003c\u003c 1); int modify() { int len = 0; t[++len] = '$', t[++len] = '#'; for (int i = 0; i \u003c strlen(s); ++i) t[++len] = s[i], t[++len] = '#'; t[++len] = '\\0'; return len; } void manacher() { int mx = 0, mid = 0; for (int i = 1; i \u003c= n; ++i) { R[i] = (i \u003c mx) ? std::min(R[(mid \u003c\u003c 1) - i], mx - i + 1) : 1; while (i - R[i] \u003e 0 \u0026\u0026 i + R[i] \u003c= n \u0026\u0026 t[i + R[i]] == t[i - R[i]]) R[i]++; if (R[i] + i - 1 \u003e mx) mx = R[i] + i - 1, mid = i; l[i - R[i] + 1] = std::max(l[i - R[i] + 1], R[i] - 1); r[i + R[i] - 1] = std::max(r[i + R[i] - 1], R[i] - 1); } } int main() { std::ios::sync_with_stdio(false); cin.tie(0), cout.tie(0); cin \u003e\u003e s; n = modify(); manacher(); for (int i = 2; i \u003c= n; i += 2) l[i] = std::max(l[i], l[i - 2] - 2); for (int i = n - 2; i \u003e 0; i -= 2) r[i] = std::max(r[i], r[i + 2] - 2); int ans = 0; for (int i = 2; i \u003c= n; i += 2) if (l[i] \u0026\u0026 r[i]) ans = std::max(ans, l[i] + r[i]); cout \u003c\u003c ans; return 0; } ã€ŒLuogu P1659ã€[å›½å®¶é›†è®­é˜Ÿ]æ‹‰æ‹‰é˜Ÿæ’ç»ƒ Luogu\nåªéœ€è¦æ±‚å‡ºå¥‡æ•°é•¿åº¦çš„æœ€é•¿å›æ–‡ä¸²ï¼ŒæŒ‰ç…§é•¿åº¦ sort ä¸€éæšä¸¾å³å¯ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦ç”¨åˆ°å¿«é€Ÿå¹‚ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 #include \u003cbits/stdc++.h\u003e using std::cin;\tusing std::cout; using std::string;\tusing std::vector; using i64 = long long; const int mod = 19930726; const int N = 1e6 + 5; int n; i64 k, ans; string s; vector \u003cint\u003e r, d; void manacher() { r = vector \u003cint\u003e (n); for (int i = 0, id = 0, rr = -1; i \u003c n; ++i) { r[i] = (i \u003c rr) ? std::min(r[(id \u003c\u003c 1) - i], rr - i + 1) : 1; while (i - r[i] \u003e= 0 \u0026\u0026 i + r[i] \u003c n \u0026\u0026 s[i - r[i]] == s[i + r[i]]) ++r[i]; if (i + r[i] - 1 \u003e rr) id = i, rr = i + r[i] - 1; } } i64 qpow(i64 a, int b) { i64 ret = 1; while (b) { if (b \u0026 1) ret = ret * a % mod; a = a * a % mod; b \u003e\u003e= 1; } return ret; } void count() { int cnt = 0; i64 tot = 0; ans = 1; for (int len = r[0], p = 0; len \u003e 0 \u0026\u0026 tot \u003c k; len -= 2) { while (p \u003e= 0 \u0026\u0026 r[p] == len) cnt++, p++; if (cnt \u003e k - tot) cnt = k - tot; ans = ans * qpow(1ll * len, cnt) % mod; tot += cnt; } } int main() { std::ios::sync_with_stdio(false); cin.tie(0), cout.tie(0); cin \u003e\u003e n \u003e\u003e k; cin \u003e\u003e s; manacher(); std::sort(r.begin(), r.end(), [](int a, int b) { return a \u003e b; }); for (int i = 0; i \u003c n; ++i) r[i] = (r[i] \u003c\u003c 1) - 1; count(); cout \u003c\u003c ans; return 0; } ","description":"çº¿æ€§æ±‚æ‰€æœ‰é•¿åº¦çš„å›æ–‡ä¸²ï¼šmanacher","tags":["Palindrome","String"],"title":"manacher ç®—æ³•å­¦ä¹ ç¬”è®°","uri":"/posts/manacher-study-notes/"},{"categories":["Study Notes","Program Analysis"],"content":" Info\nå—äº¬å¤§å­¦ã€Œè½¯ä»¶åˆ†æã€è¯¾ç¨‹ Data Flow Analysis éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°ã€‚\nData Flow Analysis - Applications Overview of Data Flow Analysis data flow analysis çš„æ ¸å¿ƒå°±æ˜¯ how data flows on CFG?ï¼Œå°†è¿™å¥è¯æ‹†å¼€äº†è®²å°±æ˜¯ï¼š\nhow application-specific dataï¼šå¯¹æ•°æ®çš„ abstractionï¼Œä¾‹å¦‚ +ã€-ã€0 ç­‰ flows through theï¼šæ ¹æ®åˆ†æçš„ç±»å‹ä½œå‡º approximation may-analysis: outputs information that may be true. æ˜¯ä¸€ç§ over-approximationï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°é™æ€åˆ†æé‡‡ç”¨çš„ç±»å‹ must-analysis: output information that must be true. æ˜¯ä¸€ç§ under-approximation nodes and: æ•°æ®å¦‚ä½• transferï¼Œç”¨ transfer function è¡¨ç¤ºï¼Œä¾‹å¦‚ + op - = - ç­‰ edges of: æ•°æ®æµå¦‚ä½•å¤„ç†ï¼Œä¾‹å¦‚ä¸¤ä¸ªæ§åˆ¶æµæ±‡å…¥ä¸€ä¸ªç»“ç‚¹ CFG Preliminaries of Data Flow Analysis Each execution of an IR statement transforms an input state to a new output state.\nEvery input/output state is associated with a program point, corresponds to an edge of CFG.\nå¯¹äºæ¯ä¸€ä¸ª program pointï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª data-flow value è¡¨ç¤ºå¯¹äºå½“å‰æ‰€æœ‰å¯èƒ½çš„ program states çš„ abstractionã€‚\ntransfer function's contraints: åˆ†ä¸º forward analysis å’Œ backward analysis ä¸¤ç§ï¼Œç”¨ $f_s$ è¡¨ç¤ºç»è¿‡ definition $s$ çš„ transfer function\ncontrol flow's contraints:\nwithin a BB: IN[$s_{i+1}$] = OUT[$s_i$] among BBs: OUT[B] = $f_B($IN[B]$)$ï¼Œå…¶ä¸­ $f_B$ æ˜¯ $f_{s_i}$ çš„å¤åˆå‡½æ•° Reaching Definitions Analysis ä¸ºäº†å‡å°‘å¤æ‚æ€§ï¼Œè¿™é‡Œçš„ RDA ä¸åŒ…æ‹¬ method calls å’Œ aliasesã€‚\nä¸€ä¸ª definition $d$ å¯ä»¥ reach program point $q$ å½“ä¸”ä»…å½“å­˜åœ¨ä¸€æ¡è·¯å¾„ $p$ åˆ° $q$ ä½¿å¾— $d$ ä¸ä¼šåœ¨è¿™æ¡è·¯å¾„ä¸Šè¢« kill æ‰ã€‚\nå¯¹äºå˜é‡ $v$ çš„ definition å°±æ˜¯æŒ‡å¯¹ $v$ çš„èµ‹å€¼è¯­å¥ï¼Œå¦‚æœåŸæ¥çš„ definition $d_1$ å¯¹ $v$ï¼Œç»è¿‡çš„æŸä¸ª BB ä¸­æœ‰å¦ä¸€ä¸ª $d_2$ ä¹Ÿå¯¹ $v$ è¿›è¡Œäº†èµ‹å€¼ï¼Œé‚£ä¹ˆå°±è¯´ $d_1$ è¢« kill æ‰äº†ã€‚\nåœ¨ reaching definition analysis ä¸­ï¼Œdata flow value è¢«è®¾ç½®ä¸ºé•¿åº¦ä¸ definitions çš„æ•°é‡ç›¸ç­‰çš„ bit vectorï¼Œæ¯ä¸ª bit å¯¹åº”ä¸€ä¸ª definitionï¼Œ0/1 è¡¨ç¤ºåˆ°è¾¾è¿™ä¸ª program point æ—¶å¯¹åº”çš„ definition æ˜¯å¦è¢« kill äº†ã€‚\nç”±äºæ¯ä¸ª definition éƒ½è¢«å®šä¹‰ä¸ºç‹¬ä¸€æ— äºŒçš„ï¼Œæ‰€ä»¥æ¯ç»è¿‡ä¸€ä¸ª BB å°±ä¼šâ€œäº§ç”Ÿæ–°çš„ definitionâ€ï¼Œå› æ­¤ transfer function è¢«å®šä¹‰ä¸º $\\mathrm{OUT[B]}=gen_B\\cup(\\mathrm{IN[B]}-kill_B)$ã€‚\nRDA çš„ algorithm å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nç”±äº $gen_B$ å’Œ $kill_B$ æ˜¯å§‹ç»ˆä¸å˜çš„ï¼Œå› æ­¤åªè¦ $\\mathrm{IN[B]}$ ä¸å˜é‚£ä¹ˆ $\\mathrm{OUT[B]}$ ä¹Ÿä¸€å®šä¸ä¼šå˜ã€‚æ¯æ¬¡ç»è¿‡ä¸€è½®è¿­ä»£ï¼Œä¸Šä¸€è½® $\\mathrm{IN[B]}$ ä¸­ä¸º 1 çš„ bit ä»ç„¶ä¼šæ˜¯ 1ï¼Œä»è€Œ $\\mathrm{IN[B]}$ \"never shrinks\"ï¼Œå› æ­¤ $\\mathrm{OUT[B]}$ ä¹Ÿä¼šæ˜¯ \"never shrinks\" çš„ï¼Œè€Œ bit çš„æ•°ç›®æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ $\\mathrm{OUT[B]}$ è¿Ÿæ—©ä¼š reach a fixed pointï¼Œä»è€Œè¿™ä¸ªç®—æ³•ä¸€å®šå¯ä»¥ç»ˆæ­¢ã€‚\nLive Variables Analysis å¦‚æœå­˜åœ¨ä¸€æ¡ä»¥ program point $p$ ä¸ºèµ·ç‚¹çš„è·¯å¾„ï¼Œä½¿å¾— variable $v$ åœ¨è¿™æ¡è·¯å¾„ä¸Šèƒ½å¤Ÿè¢«ä½¿ç”¨ï¼ˆ$use(v)$ï¼‰ï¼ŒåŒæ—¶æ²¡æœ‰åœ¨è¢«ä½¿ç”¨å‰ redefinedï¼Œå°±ç§° $v$ is live at $p$ï¼Œå¦åˆ™å°±ç§° $v$ is dead at $p$.\nLVA å¯¹äº data flow values çš„è®¾ç½®æ˜¯ä¸ RDA ç±»ä¼¼çš„ï¼Œåªæ˜¯å°† definition æ¢æˆäº† variableã€‚\nåŸºäºä»¥ä¸Šå®šä¹‰ï¼ŒLVA çš„ algorithm æ˜¯ä¸€ç§ backward analysisï¼Œæˆ‘ä»¬æ ¹æ® $\\mathrm{OUT[B]}$ æ¥æ±‚å‡º $\\mathrm{IN[B]}$ï¼Œå¯¹åº”çš„ transfer function ä¸º $\\mathrm{IN[B]}=use_B\\cup(\\mathrm{OUT[B]}-def_B)$ã€‚\nLVA çš„ algorithm å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nAvailable Expressions Analysis è¡¨è¾¾å¼ x op y($e$) åœ¨ program point $p$ æ˜¯ available çš„å½“ä¸”ä»…å½“ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æˆç«‹ï¼š\nä» Entry åˆ° $p$ çš„æ‰€æœ‰è·¯å¾„éƒ½éœ€è¦ç»è¿‡ the evaluation of $e$ åœ¨ç»è¿‡æœ€åä¸€æ¬¡ evaluation of $e$ ä¹‹åæ²¡æœ‰å†å¯¹ $x$ æˆ–è€… $y$ è¿›è¡Œ redefine AEA çš„ flow data values ä¹Ÿæ˜¯ bit vector çš„å½¢å¼ã€‚\næ˜¾ç„¶ AEA ä¸­çš„ $gen_B$ æ˜¯æŒ‡ B ä¸­æ–°çš„ expressionï¼Œ$kill_B$ æŒ‡çš„æ˜¯ B ä¸­å¯¹ $\\mathrm{IN[B]}$ çš„ expressions çš„ variables çš„ redefine è¯­å¥ã€‚\nAEA å…è®¸æˆ‘ä»¬åœ¨æœ‰å¤šæ¡è·¯å¾„å¯ä»¥åˆ°è¾¾ $p$ æ—¶ï¼Œæ— éœ€é‡å¤è®¡ç®— expression $e$ï¼Œè€Œæ˜¯ç›´æ¥ç”¨ last evaluation of $e$ çš„å€¼è¿›è€Œè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚\nä» AEA çš„å®šä¹‰ä¸­ï¼Œä¸éš¾çœ‹å‡ºè¿™æ˜¯ä¸€ç§ must-analysisï¼Œå¹¶ä¸” $\\mathrm{IN[B]}$ éœ€è¦å–çš„æ˜¯å‰ç»§çš„äº¤é›†ã€‚\nAEA çš„ algorithm å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ$\\mathrm{OUT[B]}$ çš„åˆå§‹åŒ–ä¸å‰é¢çš„ may-analysis æ˜¯ä¸åŒçš„ã€‚\nReaching Definitions Live Variables Available Expressions Domain Set of definitions Set of variables Set of expressions Direction Forwards Backwards Forwards May/Must May May Must Boundary OUT[entry]=âˆ… IN[exit]=âˆ… OUT[entry]=âˆ… Initialization OUT[B]=âˆ… IN[B]=âˆ… OUT[B]=U Transfer function $\\mathrm{OUT[B]}=gen_B\\cup(\\mathrm{IN[B]}-kill_B)$ $\\mathrm{IN[B]}=use_B\\cup(\\mathrm{OUT[B]}-def_B)$ $\\mathrm{OUT[B]}=gen_B\\cup(\\mathrm{IN[B]}-kill_B)$ Meet $\\cup$ $\\cup$ $\\cap$ Data Flow Analysis - Foundations Iterative Algorithm, Another View åœ¨å‰é¢ DFA çš„è¿­ä»£ç®—æ³•ä¸­ï¼Œä»¥ forward analysis ä¸ºä¾‹ï¼Œå‡è®¾ä¸€å…±æœ‰ k ä¸ª nodeï¼Œæ¯æ¬¡è¿­ä»£åæ‰€æœ‰çš„ $\\mathrm{OUT[B]}$ å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ª k-tupleï¼Œä»¤ domain ä¸º $V$ï¼Œè¿­ä»£çš„è¿‡ç¨‹å¯ä»¥çœ‹ä½œä¸€ä¸ªå‡½æ•° $F\\colon V^k\\to V^k$ï¼Œè€Œè¿­ä»£çš„å‡ºå£å°±æ˜¯åˆ°è¾¾è¿™ä¸ªå‡½æ•°çš„ä¸åŠ¨ç‚¹ $X=F(X)$ã€‚\nç”±ä»¥ä¸Šçš„æŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š\nè¿™ä¸ªå‡½æ•°æ˜¯å¦ä¸€å®šå­˜åœ¨ä¸åŠ¨ç‚¹ï¼Ÿ æ˜¯å¦ä¼šå­˜åœ¨å¤šä¸ªä¸åŠ¨ç‚¹ï¼Ÿå¦‚æœæ˜¯ï¼Œæˆ‘ä»¬çš„ç®—æ³•æ±‚å‡ºçš„ä¸åŠ¨ç‚¹æ˜¯å¦æ˜¯æœ€ä¼˜è§£ï¼Ÿ ä»€ä¹ˆæ—¶å€™æ‰èƒ½åˆ°è¾¾ä¸åŠ¨ç‚¹ï¼Ÿ Data Flow Analysis Framework via Lattice ä¸€ä¸ª data flow analysis framework $(D,L,F)$ ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n$D$: forward / backward analysis $L$: lattice, includes the domain and the meet/join operator $F$: a family of transfer functions from $V$ to $V$ ä» lattice çš„è§’åº¦æ¥çœ‹ï¼Œdata flow analysis çš„ç®—æ³•ç›¸å½“äºè¿­ä»£åœ°åœ¨ä¸€ä¸ª lattice ä¸Šè¿ç”¨ transfer function å’Œ meet/join æ“ä½œã€‚\nMonotonicity and Fixed Point Theorem å†å›åˆ°å‰é¢æå‡ºçš„å‡ ä¸ªé—®é¢˜ã€‚\nç”± $\\mathrm{OUT}$ æ˜¯ â€œnever shrinksâ€ çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºè¿™ä¸ª transfer function ä¸€å®šå­˜åœ¨ä¸åŠ¨ç‚¹ã€‚\nå…³äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»…ä»…ä»å‡½æ•°çš„è§’åº¦ä¸Šè€ƒè™‘ï¼Œä¸€ä¸ªå‡½æ•°çš„ä¸åŠ¨ç‚¹å®åˆ™æ˜¯å®ƒä¸ç›´çº¿ $y=x$ çš„äº¤ç‚¹ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œä¸åŠ¨ç‚¹æ˜¯å¯èƒ½å­˜åœ¨å¤šä¸ªçš„ã€‚\nä½†æ˜¯è¿™é‡Œçš„å‡½æ•°æ˜¯ lattice ä¸Šçš„å‡½æ•°ï¼Œè‡ªç„¶ä¹Ÿä¼šå…·æœ‰ä¸€äº›ç‰¹æ€§ã€‚\nmonotonicity: å¦‚æœå‡½æ•° $f\\colon L\\to L(L\\ is\\ a\\ lattice)$ æ»¡è¶³ä»»ç»™ $x,y\\in L$ï¼Œæœ‰ $x\\le y\\rArr f(x)\\le f(y)$ å°±ç§°å®ƒæ˜¯ monotonic çš„ fixed point theorem: å¯¹äºä¸€ä¸ª complete lattice $(L,\\le)$ï¼Œå¦‚æœ $L$ ä¸Šçš„å‡½æ•° $f$ æ˜¯ monotonic çš„ï¼Œå¹¶ä¸” $L$ æ˜¯ finite çš„ï¼Œé‚£ä¹ˆ æœ€å°çš„ fixed point å¯ä»¥é€šè¿‡ä¸æ–­è¿­ä»£ $f(\\bot),f(f(\\bot)),\\dots,f^k(\\bot)$ ç›´åˆ° reach a fixed point çš„æ–¹å¼æ‰¾åˆ° æœ€å¤§çš„ fixed point å¯ä»¥é€šè¿‡ä¸æ–­è¿­ä»£ $f(\\top),f(f(\\top)),\\dots,f^k(\\top)$ ç›´åˆ° reach a fixed point çš„æ–¹å¼æ‰¾åˆ° è¯æ˜ fixed point theorem å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œè¯æ˜ï¼š\nexistence of fixed point: ç”±äº $f$ æ˜¯ monotonic çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯¹ $\\bot$ è¿›è¡Œæ¯æ¬¡è¿­ä»£çš„å€¼éƒ½æ˜¯é€’å¢çš„ï¼Œè€Œè¿™ä¸ª lattice åˆæ˜¯ finite çš„ï¼Œé‚£ä¹ˆä¸€å®šä¼šè¾¾åˆ°ä¸€ä¸ªæœ€å¤§å€¼ä¸åŠ¨ï¼Œè¿™ä¸ªæœ€å¤§å€¼å°±æ˜¯ä¸€ä¸ªä¸åŠ¨ç‚¹ï¼Œå¯¹ $\\top$ åšçš„è¿­ä»£ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚ least fixed point: åè¯æ³•ã€‚å‡è®¾ $x$ æ˜¯æœ€å°çš„ fixed pointï¼Œç”± $\\bot$ çš„å®šä¹‰ï¼Œå¿…ç„¶æœ‰ $\\bot \\le x$ï¼Œç„¶åå¯¹ä¸¤è¾¹ä¸€ç›´åšè¿­ä»£ï¼Œå·¦è¾¹ä¼šè¾¾åˆ°ä¸€ä¸ªéæœ€å°çš„ä¸åŠ¨ç‚¹ $p$ï¼Œå³è¾¹ä»ç„¶æ˜¯ $x$ï¼Œç”± monotonicity çš„å®šä¹‰å¯çŸ¥ï¼Œ$p\\le x$ï¼Œè¿™ä¸ $x$ æ˜¯æœ€å°çš„ fixed point çš„å‡è®¾çŸ›ç›¾ï¼Œå› æ­¤ least fixed point çš„ç®—æ³•æ˜¯æ­£ç¡®çš„ï¼ŒåŒç†ï¼Œgreatest fixed point çš„ç®—æ³•ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚ æˆ‘ä»¬ä¹‹å‰è®¾è®¡çš„ DFA çš„ç®—æ³•éƒ½æ˜¯ä» $\\bot$ æˆ–è€… $\\top$ å¼€å§‹è¿­ä»£ï¼Œå› æ­¤æ±‚å‡ºçš„ä¸åŠ¨ç‚¹ä¸€å®šæ˜¯ least/greatest fixed pointï¼Œåœ¨æŸäº›å®šä¹‰ä¸Šå¯ä»¥è®¤ä¸ºæˆ‘ä»¬çš„ç®—æ³•æ±‚å‡ºæ¥çš„æ˜¯æœ€ä¼˜è§£ã€‚\nä»¥ä¸Šå…³äºå‡½æ•°æ€§è´¨çš„è®ºè¯éƒ½æ˜¯åŸºäº lattice çš„ï¼Œè¦è¯æ˜æˆ‘ä»¬çš„ DFA è¿­ä»£ç®—æ³•ä¹Ÿæœ‰åŒæ ·çš„æ€§è´¨ï¼Œè¿˜éœ€è¦ï¼ˆå°½å¯èƒ½ï¼‰å°†æˆ‘ä»¬çš„ç®—æ³•ä¸ fixed point theorem å»ºç«‹å…³è”ã€‚\nRelate Iterative Algorithm to Fixed Point Theorem æ ¹æ® fixed point theorem çš„æ¡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆ relate iterative algorithm ä¸­çš„ fact å’Œ latticeã€‚\nå‡è®¾æœ‰ $k$ ä¸ª nodeï¼Œé‚£ä¹ˆç»è¿‡ $i$ è½®è¿­ä»£åå¾—åˆ°çš„ fact çš„å½¢å¼ä¸º $(v_1^i,v_2^i,\\dots,v_k^i)$ï¼Œå¯¹äº node $j$ï¼Œæ¯è½®è¿­ä»£äº§ç”Ÿçš„ $v_j^i$ ç»„æˆçš„é›†åˆä¸é›†åˆçš„ $\\subset$ å…³ç³»å¯ä»¥çœ‹ä½œä¸€ä¸ª finite ä¸” complete çš„ lattice $L$ï¼Œä»è€Œæ•´ä¸ª fact å°±æ˜¯è¿™äº› lattice çš„ç¬›å¡å°”ç§¯ $L^k$ï¼Œä»è€Œ fact ä¹Ÿæ˜¯ä¸€ä¸ª finite ä¸” complete çš„ latticeã€‚\nä¹‹ååªéœ€ relate transfer + meet/join function ä¸ monotonic çš„å‡½æ•° $f\\colon L\\to L(L\\ is\\ a\\ lattice)$ã€‚\nä»å‰é¢è¯æ˜ $\\mathrm{OUT}$ æ˜¯ never shrinks çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥çŸ¥é“ transfer function æ˜¯æ»¡è¶³ monotonic çš„æ¡ä»¶çš„äº†ã€‚è€Œå¯¹äº meet/join functionï¼Œæˆ‘ä»¬æ ¹æ® monotonic çš„å®šä¹‰å¯ä»¥å¾ˆç®€å•çš„è¯æ˜ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ relate the algorithm to the fixed point theoremã€‚ä¹Ÿå°±å¯ä»¥å¾ˆè‡ªä¿¡çš„è®¤ä¸ºå¯¹å‰ä¸¤ä¸ªé—®é¢˜çš„å›ç­”æ˜¯æ­£ç¡®çš„äº†ã€‚\nç°åœ¨æˆ‘ä»¬å›ç­”ç¬¬ä¸‰ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å®šä¹‰ lattice çš„é«˜åº¦æ˜¯ä» $\\top$ åˆ° $\\bot$ çš„æœ€é•¿è·¯å¾„çš„é•¿åº¦ï¼Œå‡è®¾å•ä¸ªç»“ç‚¹çš„ lattice çš„é«˜åº¦æ˜¯ $h$ï¼ŒCFG çš„ç»“ç‚¹æ•°ä¸º $j$ï¼Œæ¯æ¬¡è¿­ä»£è‡³å°‘å¯ä»¥è®©ä¸€ä¸ªç»“ç‚¹å¾€ä¸Šçˆ¬ä¸€ä¸ªé«˜åº¦ï¼Œæ‰€ä»¥æœ€åçš„æƒ…å†µä¸‹çš„è¿­ä»£æ¬¡æ•°æ˜¯ $h\\cdot k$ã€‚\nMay and Must Analysis, a Lattice View MOP and Distributivity Meet Over All Paths Solution (MOP) æ˜¯è€ƒè™‘æ‰€æœ‰å¯èƒ½åˆ°è¾¾ç»“ç‚¹ $s_i$ çš„è·¯å¾„ï¼Œå°†è¿™äº›è·¯å¾„çš„ OUT å– meet/join æ¥å¾—åˆ° $s_i$ çš„ IN æˆ–è€…è¯´ MOP[$s_i$]ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®æ‰€æœ‰è·¯å¾„çš„è®¡ç®—ç»“æœå– lub/glbã€‚\nä½†æ˜¯ CFG ä¸­æŸäº› path æ˜¯ not executable çš„ï¼Œä¹Ÿä¼šæœ‰ unboundedã€not enumerable çš„è·¯å¾„ï¼Œæ‰€ä»¥æ˜¾ç„¶ MOP æ˜¯ not fully preciseã€impractical çš„ã€‚\nå¯¹æ¯” iterative algorithmï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬ç®—æ³•çš„å½¢å¼æ˜¯ $F(x\\cup y)$ çš„ï¼Œè€Œ MOP çš„å½¢å¼æ˜¯ $F(x)\\cup F(y)$ çš„ï¼Œç”± $F$ æ˜¯ monotonic çš„å’Œ lattice çš„æ€§è´¨å¯ä»¥æ¨å‡º $F(x)\\cup F(y)\\le F(x\\cup y)$ ï¼Œæ‰€ä»¥ iterative algorithm çš„ç²¾åº¦æ˜¯ä¸å¦‚ MOP çš„ã€‚\nä½†æ˜¯ï¼Œå½“ $F$ æ˜¯ distributive æ—¶ï¼Œiterative algorithm çš„ç²¾åº¦æ˜¯å’Œ MOP ä¸€æ ·çš„ã€‚å†åˆ†æ iterative algorithm çš„ $F$ï¼Œå¯ä»¥å‘ç° bit-vector æˆ– gen/kill problems éƒ½æ˜¯ distributive çš„ï¼Œæ‰€ä»¥å‰é¢ä»‹ç»çš„å‡ ç§ç®—æ³•ç²¾åº¦éƒ½æ˜¯ä¸ MOP ç›¸å½“çš„ã€‚\nConstant Propagation å†³ç­–åœ¨ program point $p$ çš„ä¸€ä¸ª variable $x$ æ˜¯å¦æ˜¯ä¸€ä¸ªå¸¸é‡çš„é—®é¢˜å°±æ˜¯ constant propagationã€‚\ndirection: forward analysis lattice: OUT: a set of pairs $(x,v)$ domain of $v$: UNDEF / values(-2, -1, 0â€¦) / NAC $\\cap$: NAC $\\cap$ $v$ = NAC UNDEF $\\cap$ $v$ = $v$ transfer function: $F\\colon \\mathrm{OUT}[s]=gen\\cup (\\mathrm{IN}[s]-{(x,_)})$ s: x = c or x = y or x = y op z ä»ä¸‹å›¾ä¸­çš„ç®€å•ä¾‹å­å¯ä»¥çœ‹å‡º constant propagation çš„ $F$ æ˜¯ non-distributive çš„ï¼š\nWorklist Algorithm worklist algorithm å®ç°äº†å¯¹ iterative algorithm çš„ä¼˜åŒ–ï¼šå¦‚æœç»è¿‡ä¸€ä¸ª BBï¼Œå®ƒçš„ IN æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆä¹‹åè¿™ä¸ª BB çš„ OUT ä¸€å®šä¸ä¼šå˜åŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€ç»´æŠ¤ä¸€ä¸ª worklist of BBsï¼Œå¦‚æœå½“å‰çš„ BB çš„ OUT å‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬æ‰å°†å®ƒæ‰€æœ‰çš„åç»§åŠ å…¥ worklistã€‚\n","description":"Data Flow Analysis","tags":["Program Analysis"],"title":"NJUã€Œè½¯ä»¶åˆ†æã€å­¦ä¹ ç¬”è®°ï¼šData Flow Analysis","uri":"/posts/nju-spa-dfa/"},{"categories":["Math"],"content":" Note\nå»å¹´åˆšå­¦ä¸å®šç§¯åˆ†çš„æ—¶å€™æ•²çš„è¡¨ï¼Œä¹‹å‰æ‡’å¾—æ¬ï¼Œæœ€è¿‘ä¸Šæ¦‚ç‡è®ºéœ€è¦ç”¨åˆ°æ„Ÿè§‰è¿˜æ˜¯æœ‰å¿…è¦å†æŠŠè¿™ç¯‡æ—§æ–‡ç»™æ¬ä¸Šæ¥çš„ QwQ\nè®¾ $k, \\mu, a(a\u003e0, a\\not ={1})$ æ˜¯å¸¸æ•°.\n$\\int k \\ \\mathrm{d}x=kx+C$ $\\int\\dfrac{1}{x}\\mathrm{d}x=\\ln{|x|}+C$ $\\int x^{\\mu}\\ \\mathrm{d}x=\\dfrac{x^{\\mu+1}}{\\mu+1}+C$, ç‰¹ä¾‹ $\\int\\dfrac{1}{x^2}\\mathrm{d}x=-\\dfrac{1}{x}+C, \\int\\dfrac{1}{\\sqrt{x}}\\mathrm{d}x=2\\sqrt{x}+C$ $\\int a^x\\ \\mathrm{d}x=\\dfrac{a^x}{\\ln{a}}+C$, ç‰¹ä¾‹ $\\int e^x\\ \\mathrm{d}x=e^x+C$ $\\int\\cos{x} \\ \\mathrm{d}x=\\sin{x}+C$ $\\int\\sin{x} \\ \\mathrm{d}x=-\\cos{x}+C$ $\\int\\dfrac{1}{\\cos^2{x}}\\mathrm{d}x=\\int\\sec^2{x}\\ \\mathrm{d}x=\\tan{x}+C$ $\\int\\dfrac{1}{\\sin^2{x}}\\mathrm{d}x=\\int\\csc^2{x}\\ \\mathrm{d}x=-\\cot{x}+C$ $\\int\\dfrac{1}{a^2+x^2}\\mathrm{d}x=\\dfrac{1}{a}\\arctan{\\dfrac{x}{a}}+C$, ç‰¹ä¾‹ $\\int\\dfrac{1}{1+x^2}\\mathrm{d}x=\\arctan{x}+C$ $\\int\\dfrac{1}{a^2-x^2}\\mathrm{d}x=\\dfrac{1}{2a}\\ln{\\left|\\dfrac{a+x}{a-x}\\right|}+C$, ç‰¹ä¾‹ $\\int\\dfrac{1}{1-x^2}\\mathrm{d}x=\\mathrm{arth}\\ x+C$ $\\int\\dfrac{1}{\\sqrt{a^2-x^2}}\\mathrm{d}x=\\arcsin{\\dfrac{x}{a}}+C$, ç‰¹ä¾‹ $\\int\\dfrac{1}{\\sqrt{1-x^2}}\\mathrm{d}x=\\arcsin{x}+C$ $\\int\\dfrac{1}{\\sqrt{x^2\\pm a^2}}\\mathrm{d}x=\\ln{\\left|x+\\sqrt{x^2\\pm a^2}\\right|+C}$, ç‰¹ä¾‹ $\\int\\dfrac{1}{\\sqrt{x^2+1}}\\mathrm{d}x=\\mathrm{arsh}\\ x+C$ $\\int\\ch{x}\\ \\mathrm{d}x=\\sh{x}+C$ $\\int\\sh{x}\\ \\mathrm{d}x=\\ch{x}+C$ $\\int\\sec{x}\\ \\mathrm{d}x=\\ln{\\left|\\sec{x}+\\tan{x}\\right|}+C$ $\\int\\csc{x}\\ \\mathrm{d}x=\\ln{\\left|\\csc{x}-\\cot{x}\\right|}+C$ å…¶ä¸­,\n$\\sh{x}(\\sinh{x})=\\dfrac{e^x-e^{-x}}{2}$ ä¸ºåŒæ›²æ­£å¼¦å‡½æ•°\n$\\ch{x}(\\cosh{x})=\\dfrac{e^x+e^{-x}}{2}$ ä¸ºåŒæ›²ä½™å¼¦å‡½æ•°\n$\\th{x}(\\tanh{x})=\\dfrac{\\sh{x}}{\\ch{x}}=\\dfrac{e^x-e^{-x}}{e^x+e^{-x}}$ ä¸ºåŒæ›²æ­£åˆ‡å‡½æ•°\n","description":"Infinite Integral Formula Table","tags":["Calculus"],"title":"ä¸å®šç§¯åˆ†å…¬å¼è¡¨","uri":"/posts/infinite-integral-formula-table/"},{"categories":["Algorithm","Writeup"],"content":"ä¸æƒ³å¤ä¹ è®¡ç½‘å°±æ¥å†™ç®—æ³•é¢˜è§£äº†ï¼ˆ\nä¸Šä¸€æ¬¡å†™ç®—æ³•ç›¸å…³çš„åšå®¢æ˜¯ä»€ä¹ˆæ—¶å€™å‘¢ğŸ¤”\nä¹‹å‰ç«‹ä¸‹çš„å¥½å¥½åˆ·é¢˜çš„ flag æ‰§è¡Œäº†æ²¡æœ‰ä¸€å¤©å°±è¢«å›æ”¶äº†å—ï¼ˆæ‚²ï¼‰\nä»ä»Šå¤©å¼€å§‹ä¸€å®šè®¤çœŸæ‰§è¡ŒğŸ˜¤\né¢˜ç›® Sue å’Œ Sandy æœ€è¿‘è¿·ä¸Šäº†ä¸€ä¸ªç”µè„‘æ¸¸æˆï¼Œè¿™ä¸ªæ¸¸æˆçš„æ•…äº‹å‘åœ¨ç¾ä¸½ç¥ç§˜å¹¶ä¸”å……æ»¡åˆºæ¿€çš„å¤§æµ·ä¸Šï¼ŒSue æœ‰ä¸€æ”¯è½»ä¾¿å°å·§çš„å°èˆ¹ã€‚ç„¶è€Œï¼ŒSue çš„ç›®æ ‡å¹¶ä¸æ˜¯å½“ä¸€ä¸ªæµ·ç›—ï¼Œè€Œæ˜¯è¦æ”¶é›†ç©ºä¸­æ¼‚æµ®çš„å½©è›‹ï¼ŒSue æœ‰ä¸€ä¸ªç§˜å¯†æ­¦å™¨ï¼Œåªè¦å¥¹å°†å°èˆ¹åˆ’åˆ°ä¸€ä¸ªå½©è›‹çš„æ­£ä¸‹æ–¹ï¼Œç„¶åä½¿ç”¨ç§˜å¯†æ­¦å™¨ä¾¿å¯ä»¥åœ¨ç¬é—´æ”¶é›†åˆ°è¿™ä¸ªå½©è›‹ã€‚ç„¶è€Œï¼Œå½©è›‹æœ‰ä¸€ä¸ªé­…åŠ›å€¼ï¼Œè¿™ä¸ªé­…åŠ›å€¼ä¼šéšç€å½©è›‹åœ¨ç©ºä¸­é™è½çš„æ—¶é—´è€Œé™ä½ï¼ŒSue è¦æƒ³å¾—åˆ°æ›´å¤šçš„åˆ†æ•°ï¼Œå¿…é¡»å°½é‡åœ¨é­…åŠ›å€¼é«˜çš„æ—¶å€™æ”¶é›†è¿™ä¸ªå½©è›‹ï¼Œè€Œå¦‚æœä¸€ä¸ªå½©è›‹æ‰å…¥æµ·ä¸­ï¼Œå®ƒçš„é­…åŠ›å€¼å°†ä¼šå˜æˆä¸€ä¸ªè´Ÿæ•°ï¼Œä½†è¿™å¹¶ä¸å½±å“ Sue çš„å…´è¶£ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå½©è›‹éƒ½æ˜¯ä¸åŒçš„ï¼ŒSue å¸Œæœ›æ”¶é›†åˆ°æ‰€æœ‰çš„å½©è›‹ã€‚\nç„¶è€Œ Sandy å°±æ²¡æœ‰ Sue é‚£ä¹ˆæµªæ¼«äº†ï¼ŒSandy å¸Œæœ›å¾—åˆ°å°½å¯èƒ½å¤šçš„åˆ†æ•°ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å…ˆå°†è¿™ä¸ªæ¸¸æˆæŠ½è±¡æˆäº†å¦‚ä¸‹æ¨¡å‹ï¼š\nå°†å¤§æµ·è¿‘ä¼¼çš„çœ‹åš $x$ è½´ï¼Œä»¥ Sue æ‰€åœ¨çš„åˆå§‹ä½ç½®ä½œä¸ºåæ ‡åŸç‚¹å»ºç«‹ä¸€ä¸ªç«–ç›´çš„å¹³é¢ç›´è§’åæ ‡ç³»ã€‚\nä¸€å¼€å§‹ç©ºä¸­æœ‰ $N$ ä¸ªå½©è›‹ï¼Œå¯¹äºç¬¬ $i$ ä¸ªå½©è›‹ï¼Œä»–çš„åˆå§‹ä½ç½®ç”¨æ•´æ•°åæ ‡ $(x_{i}, y_{i})$ è¡¨ç¤ºï¼Œæ¸¸æˆå¼€å§‹åï¼Œå®ƒåŒ€é€Ÿæ²¿ $y$ è½´è´Ÿæ–¹å‘ä¸‹è½,é€Ÿåº¦ä¸º $v_{i}$ å•ä½è·ç¦»/å•ä½æ—¶é—´ã€‚Sue çš„åˆå§‹ä½ç½®ä¸º $(x_{0}, 0)$ï¼ŒSue å¯ä»¥æ²¿ $x$ è½´çš„æ­£æ–¹å‘æˆ–è´Ÿæ–¹å‘ç§»åŠ¨ï¼ŒSue çš„ç§»åŠ¨é€Ÿåº¦æ˜¯ $1$ å•ä½è·ç¦»/å•ä½æ—¶é—´ï¼Œä½¿ç”¨ç§˜å¯†æ­¦å™¨å¾—åˆ°ä¸€ä¸ªå½©è›‹æ˜¯ç¬é—´çš„ï¼Œå¾—åˆ†ä¸ºå½“å‰å½©è›‹çš„ $y$ åæ ‡çš„åƒåˆ†ä¹‹ä¸€ã€‚\nç°åœ¨ï¼ŒSue å’Œ Sandy è¯·ä½ æ¥å¸®å¿™ï¼Œä¸ºäº†æ»¡è¶³ Sue å’Œ Sandy å„è‡ªçš„ç›®æ ‡ï¼Œä½ å†³å®šåœ¨æ”¶é›†åˆ°æ‰€æœ‰å½©è›‹çš„åŸºç¡€ä¸Šï¼Œå¾—åˆ°çš„åˆ†æ•°æœ€é«˜ã€‚\nLuogu\nåˆ†æ ä¸€å¼€å§‹ä¸€ç›´åœ¨æƒ³æ™®é€šçš„ dp ç©¶ç«Ÿè¦æ€ä¹ˆè®¾çŠ¶æ€ï¼Œå¯æ˜¯æ— è®ºæ€ä¹ˆè®¾éƒ½æ— æ³•åœ¨é¿å…å‰é¢çš„å½©è›‹å¯¹åé¢æ‰€æœ‰å½©è›‹é€ æˆçš„å½±å“ï¼Œå¦‚æœè¦é¿å…çš„è¯å¤æ‚åº¦é‡Œæ€»æ˜¯ä¼šæœ‰ä¸ªåæ ‡è½´å€¼åŸŸå¤§å°ï¼Œæ˜¾ç„¶ä¼š Tï¼Œè€Œä¸”åˆå§‹ä½ç½®åœ¨å½©è›‹çš„ä¸­é—´æ›´ä¸å¥½æŒ‰ç…§å½©è›‹çš„é¡ºåºè½¬ç§»äº†ï¼Œäºæ˜¯åªå¥½çœ‹é¢˜è§£ã€‚\nç¬¬ä¸€ç¯‡é¢˜è§£å¼•ç”¨äº†è®ºæ–‡ã€Œå¯¹ä¸€ç±»åŠ¨æ€è§„åˆ’é—®é¢˜çš„ç ”ç©¶ã€By æ¹–å—çœé•¿æ²™å¸‚ç¬¬ä¸€ä¸­å­¦ å¾æºç›› ï¼Œä¸»æ—¨æ˜¯å¦‚æœå½“å‰çš„å†³ç­–å¯¹æœªæ¥çš„è¡ŒåŠ¨ä¼šé€ æˆå½±å“ï¼Œé‚£ä¹ˆå†³ç­–çš„æ—¶å€™å°±æŠŠå½±å“è®¡ç®—å‡ºæ¥å°±æ˜¯äº†ã€‚\nä¸è¿‡åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ³¨æ„åˆ°ä¸€ç‚¹ï¼šä»èµ·ç‚¹åˆ°å½“å‰ä½ç½®çš„è·¯å¾„ä¸Šçš„å½©è›‹æ˜¯å¿…ç„¶ä¼šæ‹¿çš„ï¼Œè¿™æ˜¯å¾ˆæ˜¾ç„¶çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘å½“æ—¶æ²¡æœ‰æ³¨æ„åˆ°å•Š koraï¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ‹¿å–åˆ°çš„å½©è›‹å¿…ç„¶æ˜¯ä¸€æ®µåŒºé—´ï¼Œæ‰€ä»¥å½“ç„¶è¦ç”¨åŒºé—´ DP è€Œä¸æ˜¯æ™®é€šçš„ DP å•¦ï¼\nç„¶åæˆ‘ä»¬å°†è®ºæ–‡ä¸­çš„æ€æƒ³è¿ç”¨åˆ°è¿™é“é¢˜ä¸­ï¼Œå…¶å®æ€æƒ³ä¹Ÿå¾ˆ intuitiveï¼Œæ„Ÿè§‰ä¸»è¦å›°æ‰°æˆ‘çš„æ˜¯æ²¡æœ‰æƒ³åˆ°ç”¨åŒºé—´ DPï¼ˆå“­ï¼‰ã€‚åœ¨è¿™é“é¢˜ä¸­ï¼Œæˆ‘ä»¬è®¾ $f[i][j]$ è¡¨ç¤ºå·²ç»å–å¾—äº†åŒºé—´ i åˆ° j çš„å½©è›‹çš„å¾—åˆ†ï¼Œä½†æ˜¯å¾ˆå¿«å‘ç°ä¸‹ä¸€æ­¥æ‹“å±•åˆ° $i-1$ å’Œ $j+1$ çš„è®¡ç®—ç»“æœä¼šå’Œå½“å‰çš„ä½ç½®æ˜¯åœ¨ $i$ è¿˜æ˜¯ $j$ æœ‰å…³ï¼Œè¿™ä¸ªç®€å•ï¼ŒåŠ ä¸€ç»´åˆ†åˆ«è¡¨ç¤ºæœ€åæ˜¯åœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹å°±å¥½äº†ï¼Œäºæ˜¯æœ‰äº† $f[0][i][j]$ å’Œ $f[1][i][j]$ åˆ†åˆ«è¡¨ç¤ºåœ¨ $i$ å’Œåœ¨ $j$ã€‚\nè¿™æ ·ä¸€æ¥ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±å¾ˆç®€å•äº†ï¼Œå¦‚æœæ˜¯æ±‚ $f[0][i][j]$ï¼Œåˆ†åˆ«è€ƒè™‘æ˜¯ä» $f[0][i+1][j]$ è¿˜æ˜¯ $f[1][i+1][j]$ æ‹“å±•æ¥çš„å°±å¥½äº†ã€‚\nå‡è®¾å½©è›‹çš„æ”¶ç›Šæ˜¯ $y$ï¼Œä½ç½®ä¸º $x$ï¼Œæˆ‘ä»¬å·²ç»å–å¾—äº†çš„å½©è›‹åŒºé—´ä¸º $[i,j]$ï¼Œå»å–å½©è›‹ $i$ æ‰€éœ€è¦çš„æ—¶é—´ä¸º $t$ï¼Œé‚£ä¹ˆå¯¹æ‰€æœ‰æœªå–å¾—çš„å½©è›‹çš„å½±å“ä¸º $cost=(\\sum_{k=1}^nv_k-\\sum_{k=i+1}^jv_k)t$ï¼Œäºæ˜¯æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n$$ f[0][i][j]=y_i+\\max(f[0][i+1][j]-cost*(x_{i+1}-x_i)),f[1][i+1][j]-cost*(x_j-x_i)) $$\nç¬¬ä¸€ç»´å–å€¼ä¸º 1 çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚\næœ€åè¦åæ§½çš„æ˜¯æˆ‘å±…ç„¶å¿˜äº†åŒºé—´ DP æšä¸¾çš„ç¬¬ä¸€ç»´æ˜¯åŒºé—´é•¿åº¦è€Œä¸æ˜¯åŒºé—´å·¦è¾¹çš„å€¼ï¼Œå¦‚æœæŒ‰ç…§åŒºé—´ $[i,j]$ è¿™æ ·æ¥æšä¸¾ $i$ å’Œ $j$ ä¼šå¯¼è‡´ä¸¤ä¸ªéƒ½éœ€è¦æ±‚çš„ $f$ äº’ç›¸è°ƒç”¨å¯¹æ–¹çš„å€¼æ¥æ±‚å¾—è‡ªå·±çš„å€¼ï¼Œè¿™æ ·å°±å‡äº†ï¼Œå› ä¸ºæ¯æ¬¡è½¬ç§»æ˜¯ä»åŒºé—´é•¿åº¦å° 1 çš„çŠ¶æ€è½¬ç§»æ¥çš„ï¼ŒæŠŠåŒºé—´é•¿åº¦ä½œä¸ºç¬¬ 1 ç»´è¿›è¡Œæšä¸¾çš„è¯å°±å¯ä»¥ä¿è¯æ¯æ¬¡è½¬ç§»ä¾èµ–çš„å€¼éƒ½æ˜¯å·²ç»æ±‚è§£è¿‡çš„çœŸå€¼ã€‚\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #include \u003cbits/stdc++.h\u003e using std::cin;\tusing std::cout; using std::max; using i64 = long long; const int N = 1005; struct egg { i64 x, y, v; } e[N]; int n; i64 m; i64 f[2][N][N], s[N]; int main() { std::ios::sync_with_stdio(false); cin.tie(0), cout.tie(0); cin \u003e\u003e n \u003e\u003e m; for (int i = 1; i \u003c= n; ++i) cin \u003e\u003e e[i].x; for (int i = 1; i \u003c= n; ++i) cin \u003e\u003e e[i].y; for (int i = 1; i \u003c= n; ++i) cin \u003e\u003e e[i].v; e[++n] = (egg){ m, 0, 0 }; std::sort(e + 1, e + 1 + n, [](egg T1, egg T2) { return T1.x \u003c T2.x; }); int pos = 0; for (int i = 1; i \u003c= n; ++i) { if (e[i].x == m) pos = i; s[i] = s[i - 1] + e[i].v; } memset(f, -0x3f3f3f3f, sizeof(f)); f[0][pos][pos] = f[1][pos][pos] = 0; auto cost = [](int i, int j) { return s[n] - (s[j] - s[i - 1]); }; for (int k = 1; k \u003c= n; ++k) { for (int i = 1, j; i + k \u003c= n; ++i) { j = i + k; f[0][i][j] = e[i].y + max(f[0][i + 1][j] - (e[i + 1].x - e[i].x) * cost(i + 1, j), f[1][i + 1][j] - (e[j].x - e[i].x) * cost(i + 1, j)); f[1][i][j] = e[j].y + max(f[0][i][j - 1] - (e[j].x - e[i].x) * cost(i, j - 1), f[1][i][j - 1] - (e[j].x - e[j - 1].x) * cost(i, j - 1)); } } printf(\"%.3lf\", 1.0 * max(f[0][1][n], f[1][1][n]) / 1000); return 0; } ","description":"","tags":["åŒºé—´DP"],"title":"ã€ŒLuogu P2466ã€[SDOI2008] Sue çš„å°çƒ","uri":"/posts/luogu-p2466/"},{"categories":["Study Notes","CNATDA"],"content":"Introduction control plane è®¡ç®— forwarding å’Œ flow tables æœ‰ä¸¤ç§æ–¹å¼ï¼š\nper-router control: router ä¹‹é—´è¿›è¡Œäº¤æµï¼Œåˆ†åˆ«è®¡ç®—è‡ªå·±çš„ forwarding table logically centralized control: ç”±ä¸€ä¸ª remote controller æ”¶é›†ä¿¡æ¯ï¼Œè®¡ç®—å¹¶åˆ†å‘ç»“æœ Routing Algorithms åœ¨ routing algorithms ä¸­ï¼Œnetwork è¢«æŠ½è±¡ä¸ºä¸€å¼ å›¾ï¼Œç»¼åˆè€ƒè™‘ physical lengthã€link speedã€monetary cost ç­‰ä½œä¸ºè¾¹æƒã€‚\nrouting algorithm å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\ncentralized / decentralized: è®¡ç®—è¿‡ç¨‹ä¸­æ˜¯å¦çŸ¥é“æ•´å¼ å›¾çš„ä¿¡æ¯ static / dynamic: æ˜¯å¦å¯¹ç½‘ç»œè´Ÿè½½ã€æ‹“æ‰‘ç»“æ„ç­‰çš„å˜åŒ–ä½œå‡ºå“åº” load-sensitive / load-insensitive: æ˜¯å¦è€ƒè™‘ congestion çš„çŠ¶å†µ The Link-State (LS) Routing Algorithm LS æ˜¯ centralized routing algorithmï¼Œéœ€è¦æ¯ä¸ªç»“ç‚¹å°† attached links çš„ä¿¡æ¯è¿›è¡Œå¹¿æ’­ (link-state broadcast) è®©æ‰€æœ‰ç»“ç‚¹æ‹¥æœ‰æ•´å¼ å›¾çš„ä¿¡æ¯ï¼Œå†ç”¨ Dijkstra ç­‰ç®—æ³•è®¡ç®—æœ€çŸ­è·¯ã€‚\nå¯¹äº load-sensitive routing algorithmï¼Œtraffic load çš„æ”¹å˜å¯èƒ½ä¼šå¯¼è‡´å‡ºç° oscillationsï¼Œè§£å†³åŠæ³•å°±æ˜¯æ”¹æˆ load-insensitive çš„æˆ–è€…ä¿è¯ä¸æ˜¯æ‰€æœ‰ç»“ç‚¹éƒ½åœ¨åŒæ—¶è¿è¡Œ LSã€‚\nThe Distance-Vector (DV) Routing Algorithm DV æ˜¯ distributedã€ iterativeã€decentralized çš„ routing algorithmã€‚\næ¯ä¸ªç»“ç‚¹ç»´æŠ¤è‡ªå·±åˆ°å…¶ä»–æ¯ä¸ªç»“ç‚¹çš„ distance vectorï¼Œå½“è‡ªå·±çš„ distance vector æ›´æ–°äº†å°±å°†è‡ªå·±çš„ distance vector å‘é€ç»™ neighborï¼Œå¹¶ä¸”ä¹Ÿä¼šç”± neighbor çš„ distance vector æ›´æ–°è‡ªå·±çš„ï¼Œå½“ link state å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒDV ä¼šç»è¿‡å¤šè½®è¿­ä»£å¹¶è¿›è¡Œä¼ æ’­æœ€ç»ˆæ”¶æ•›ã€‚\nå½“ link-cost å‡å°æ—¶ï¼Œæ”¶æ•›è¾ƒå¿«ã€‚ä½†æ˜¯å½“ link-cost å¢å¤§æ—¶ï¼Œç”±äºä¸åœ¨è¿™ä¸ª link ä¸Šçš„é‚£ä¸ªç»“ç‚¹çš„æ¶ˆæ¯æ»åæ€§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ $y$ ç”¨ $z$ æ¥æ›´æ–° $D_y(x)$ï¼Œç„¶å $z$ ç”¨ $y$ æ¥æ›´æ–° $D_z(x)$ï¼Œä¸¤è€…äº’ç›¸æ›´æ–°æœ€ç»ˆéœ€è¦è¾¹æƒå€¼åŸŸå¤§å°æ¬¡çš„è¿­ä»£ï¼ˆç§°ä¸º count to infinity problemï¼‰ï¼Œå¹¶åœ¨è¿‡ç¨‹ä¸­äº§ç”Ÿ routing loopï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä½¿ç”¨ poisoned reverse å¯ä»¥é¿å…å‡ºç°äºŒå…ƒç¯ï¼šå¦‚æœ $u$ é€šè¿‡ $v$ èµ°äº† $(u, w)$ è¿™æ¡è·¯å¾„ï¼Œåˆ™åœ¨ $u$ é€šçŸ¥ $v$ çš„æ—¶å€™å°† $D_u(w)$ æ”¹æˆ $\\infty$ã€‚\nå½“å‡ºç°å¤§äº 2 ä¸ªç»“ç‚¹çš„ loop æ—¶ï¼Œpoisoned reverse ä¼šå¤±æ•ˆã€‚\nA Comparison of LS and DV Routing Algorithms message complexity: LS éœ€è¦æ¯ä¸ªç»“ç‚¹è·å¾—å…¨å±€çš„ä¿¡æ¯ï¼Œè€Œä¸”éœ€è¦ç»“ç‚¹å°†ä¿¡æ¯é€åˆ°å¾ˆè¿œçš„åœ°æ–¹ï¼›DV ä»…ä»…éœ€è¦ç»“ç‚¹çŸ¥é“ neighbor çš„ä¿¡æ¯ã€‚ speed of convergence: LS æ—¶é—´å¤æ‚åº¦è¾ƒä½ï¼ˆDijkstra å¯ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–åˆ° $\\mathcal{O}(n\\log n)$ ï¼‰ï¼› DV åˆ™è¾ƒæ…¢ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç° routing loopï¼Œè¿˜æœ‰ count-to-infonity problemã€‚ robustness: åœ¨ LS ä¸­æ¯ä¸ªç»“ç‚¹å¯ä»¥å‘é€é”™è¯¯çš„ link state ç»™å…¶ä»–ç»“ç‚¹ï¼Œä½†æ˜¯ç”±äºæ¯ä¸ªç»“ç‚¹åªè®¡ç®—è‡ªå·±çš„ forwarding tableï¼Œä¸ä¾èµ–äºå…¶ä»–ç»“ç‚¹çš„ï¼Œæ‰€ä»¥å½±å“è¾ƒå°ï¼›DV ä¸­æ¯ä¸ªç»“ç‚¹çš„è®¡ç®—ç»“æœéƒ½æ˜¯å…¶ä»–ç»“ç‚¹çš„ç»“æœçš„ä¸€éƒ¨åˆ†ï¼Œå½±å“è¾ƒå¤§ã€‚ å®é™…ä¸Š Internet åŒæ—¶é‡‡ç”¨äº†è¿™ä¸¤ç§ç®—æ³•ã€‚\nIntra-AS Routing in the Internet: OSPF å¦‚æœç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„ routersï¼Œä¼šè§„æ¨¡è¿‡å¤§æ€§èƒ½æ— æ³•æ¥å—ï¼Œä¹Ÿä¸èƒ½æ»¡è¶³è‡ªæ²»çš„éœ€æ±‚ã€‚å› æ­¤ï¼Œrouters è¢«åˆ’åˆ†æˆäº†å¾ˆå¤šä¸ª autonomous system (AS)ï¼Œæ¯ä¸ª AS æœ‰ä¸€ä¸ª ICANN èµ‹äºˆçš„ç¼–å·ï¼Œæ¯ä¸ª ISP å¯èƒ½ç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ª ASã€‚\næ¯ä¸ª AS å†…éƒ¨éƒ½ä¼šä½¿ç”¨ä¸€ç§ intra-AS routing protocolï¼Œä¾‹å¦‚ OSPF (Open Shortest Path First)ã€‚\nOSPF ä½¿ç”¨ LS routing algorithmï¼Œè¾¹æƒç”±ç®¡ç†å‘˜è®¾å®šï¼Œrouter å‘æ•´ä¸ª AS å†…éƒ¨ broadcast link stateï¼ˆå½“ link state å‘é€æ”¹å˜æ—¶/å‘¨æœŸæ€§åœ°ï¼‰ã€‚\nOSPF æœ‰ä»¥ä¸‹ä¸€äº› advances:\nsecurity: routers ä¹‹é—´çš„ä¿¡æ¯å¯ä»¥åˆ©ç”¨ MD5 è¿›è¡Œ authentication multiple same-cost paths: å½“æœ‰å¤šæ¡è·¯å¾„çš„ cost ç›¸åŒæ—¶å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™äº›è·¯å¾„ æœ‰ MOSPF æ‹“å±•æ¥æ”¯æŒ unicast å’Œ multicast hierarchy within a single AS: å¯ä»¥å°† AS åˆ’åˆ†æˆå¤šä¸ª area æ¥å½¢æˆ AS å†…éƒ¨çš„ hierarchyï¼Œæ¯ä¸ª area å†…éƒ¨èµ°æœ€æ®µè·¯ï¼Œä¸åŒ area ä¹‹é—´é€šè¿‡èµ° area çš„ border router æ¥èµ° backbone area Routing Among the ISPs: BGP BGP (Border Gateway Protocol) æ˜¯ä¸€ä¸ª decentralizedã€asynchronous çš„ inter-AS routing protocolã€‚\nThe Role of BGP åœ¨ BGP ä¸­ï¼Œdestination çš„ä¸æ˜¯ç¡®å®šçš„ IP åœ°å€ï¼Œè€Œæ˜¯ CIDR prefixã€‚\nBGP ä½¿å¾—ä¸€ä¸ª AS å¯ä»¥å‘å…¶ä»– AS advertise prefixï¼Œå¹¶è®¡ç®—å‡ºåˆ°è¾¾å„ä¸ª prefix çš„ routeã€‚\nAdvertise BGP Route Information ä¸åŒçš„ router ä¹‹é—´ä¼šå»ºç«‹ç§°ä¸º BGP connection çš„ TCP connectionï¼Œè´Ÿè´£è¿æ¥ä¸¤ä¸ª AS çš„ gateway router ä¹‹é—´ä¼šå»ºç«‹ external BGP (eBGP) connectionï¼ŒAS å†…éƒ¨çš„ router ä¸¤ä¸¤ä¹‹é—´ä¼šå»ºç«‹ internal BGP (iBGP)ã€‚\nå‡è®¾è¦å‘æ‰€æœ‰ router advertise å‰å¾€ prefix $x$ çš„è·¯å¾„ï¼š\n$x$ æ‰€åœ¨çš„ AS çš„ gateway router ä¼šå‘å‘¨å›´ AS çš„ gateway router å‘é€ eBGP messageï¼Œç±»ä¼¼äº AS3 x å…¶ä»– AS çš„ gateway router æ”¶åˆ°åä¼šå‘ AS å†…éƒ¨å¹¿æ’­ iBGP message: AS3 x ä¹‹åå…¶ä»–çš„ gateway router ä¼šç»§ç»­å‘ç›¸é‚»çš„ AS çš„ gateway router å‘é€ eBGP messageï¼Œå¹¶åœ¨ advertisement ä¸­åŠ å…¥è‡ªå·±æ‰€åœ¨çš„ ASï¼Œç±»ä¼¼äº AS2 AS3 xã€‚ Determining the Best Routes ä¸€æ¡ BGP advertisement åŒ…å« AS-PATH å’Œ NEXT-HOP ç­‰ä¿¡æ¯ï¼ˆç§°ä¸º BGP attributesï¼ŒåŠ ä¸Š prefix å°±ç§°ä¸ºä¸€ä¸ª routeï¼‰ï¼š\nAS-PATH è¡¨ç¤ºåˆ°è¾¾ç›®çš„åœ°éœ€è¦ç»è¿‡çš„ ASï¼Œä¸€ä¸ª AS æ”¶åˆ°æ¥è‡ªå…¶ä»– AS çš„ route åå¯ä»¥åœ¨å…¶ä¸­åŠ ä¸Šè‡ªå·±ï¼Œç„¶åç»§ç»­å‘é€ç»™ neighbor NEXT-HOP è¡¨ç¤ºç¦»å¼€å½“å‰ AS å»å¾€ç›®çš„åœ°éœ€è¦èµ°åˆ°çš„ä¸‹ä¸€ä¸ª AS çš„ç¬¬ä¸€ä¸ª router çš„ IP åœ°å€ ä»ä¸€ä¸ª AS å‡ºå‘åˆ°è¾¾æŸä¸ª prefix æœ‰å¾ˆå¤šç§è·¯å¾„ï¼Œåœ¨å®è·µä¸­ï¼ŒBGP é‡‡ç”¨çš„æ˜¯ route- selection algorithmï¼Œrouter æŒ‰ç…§é¡ºåºä½¿ç”¨ä»¥ä¸‹å‡ æ¡è§„åˆ™æ¥é€‰æ‹© best routeï¼š\nç”±ç®¡ç†å‘˜è®¾ç½®æˆ–è€…ä»å…¶ä»– AS è·å¾—çš„ local preferenceï¼ˆä½œä¸ºä¸€ä¸ª attributeï¼‰ shortest AS-PATHï¼ˆç»è¿‡æœ€å°‘çš„ ASï¼‰ï¼Œå½“è¿™æ¡ rule æˆä¸ºå”¯ä¸€çš„ rule æ—¶é‡‡ç”¨ DV ç®—æ³•ï¼Œè¾¹æƒè®¾ç½®ä¸º AS hops çš„æ•°é‡ã€‚ hot patato routing: åœ¨ AS å†…èµ°æœ€çŸ­è·¯ï¼ˆé€šè¿‡ intra-AS protocol ä»¥åŠ NEXT-HOP å¾—åˆ°ï¼‰åˆ°è¾¾ gateway router æ ¹æ® BGP identifier é€‰ IP-anycast BGP å¯ä»¥ä¸ºå‰å¾€æŸä¸ª prefix å¯»æ‰¾ best routeï¼Œå¦‚æœç»™å¤šä¸ª host è®¾ç½®ç›¸åŒçš„ IP åœ°å€ï¼Œå³å¯å®ç° IP-anycastï¼Œä¾‹å¦‚ CDN ä¸ºå®¢æˆ·å¯»æ‰¾æœ€åˆé€‚çš„ serverï¼Œè¿™ä¸€è¿‡ç¨‹æ˜¯åœ¨ router çš„æŒ‘é€‰ä¸­å®ç°çš„ã€‚\nIP-anycast å¦‚æœç”¨äº TCP å¯èƒ½ä¼šå¯¼è‡´åŒä¸€ä¸ª TCP connection ä¸­çš„ message å‘é€ç»™ä¸åŒçš„ hostï¼Œæ‰€ä»¥ CDN ä¸€èˆ¬ä¸é‡‡ç”¨ IP-anycastï¼Œè€Œ DNS root server åˆ™é‡‡ç”¨ï¼ˆä½¿ç”¨ UDPï¼‰ã€‚\nRouting Policy local preference çš„å­˜åœ¨ä¸ºç®¡ç†å‘˜å†³å®šå¦‚ä½•é€‰æ‹© route ä»¥åŠå®ç°æŸäº› policy æä¾›äº†å¯èƒ½ã€‚\nThe SDN Control Plane Info\nå› ä¸ºæ—¶é—´å¾ˆç´§ + è€ƒè¯•ä¸è€ƒï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†™çš„æ¯”è¾ƒç®€ç•¥ï¼Œè€Œä¸”åŸºæœ¬å…¨é æŠ„ ouuan dalao çš„ç¬”è®°ï¼Œè¦æœ‰æ›´å¥½çš„ç†è§£è¿˜æ˜¯å»çœ‹ä¹¦æˆ–è€…çœ‹ ouuan dalao çš„ç¬”è®°ã€‚\nSDN åˆ†ä¸º SDN controllerã€network management applicationsï¼ˆä¾‹å¦‚ routingã€access controlã€load balancingï¼‰ å’Œ controlled devices ä¸‰ä¸ªéƒ¨åˆ†ã€‚\nSDN ä½¿ç”¨ generalized forwardingï¼Œé€šè¿‡ network-control application æä¾› network control functionsï¼Œå®ç°äº† programmable networkã€‚\nSDN å°† network functionality è¿›è¡Œäº† unbundleï¼Œä½¿å¾— packet switchesã€SDN controllerã€network management applications å¯ä»¥æ¥è‡ªä¸åŒä¾›åº”å•†ã€‚\ncommunication layer (northbound API): controlled devices å’Œ SDN controller è¿›è¡Œé€šä¿¡ã€‚ network-wide state-management layer: SDN controller ç»´æŠ¤çš„ä¸€äº›ä¿¡æ¯ã€‚ interface to the network-control application layer (southbound API): è®© network-control applications èƒ½å¤Ÿè¯»å†™ network state å’Œ flow tables ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ RESTful API ç­‰æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚ åœ¨ OpenFlow ä¸­ï¼ŒSDN controller å¯ä»¥å‘ controlled device å‘é€ï¼š\nconfiguration modify/read-state send packet controlled device å¯ä»¥å‘ SDN controller å‘é€ï¼š\nflow-removed port-status packet-in ICMP: The Internet Control Message Protocol ICMP è¢«ç”¨æ¥è¿›è¡Œ router å’Œ host ä¹‹é—´çš„é€šä¿¡ï¼Œä½œä¸º IP payload è¿›è¡Œä¼ è¾“ã€‚\nICMP çš„ message æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼š\nping ä½¿ç”¨çš„ echo request å’Œ echo reply destination network/host/protocol/port unreachable destination network/host unknown router advertisement/discovery TTL expired IP header bad traceroute ä½¿ç”¨ ICMP é€šè¿‡å‘é€ TTL é€’å¢çš„ UDP segment with an unlikely port number ç»™ hostï¼Œé€šè¿‡ TTL expired å¾—çŸ¥æ¯ä¸€ä¸ª router çš„ä¿¡æ¯ï¼Œé€šè¿‡ port unreachable å¾—åˆ°ç»ˆç‚¹çš„ä¿¡æ¯ã€‚\nNetwork Management and SNMP, NETCONF/YANG network management åŒ…æ‹¬ managing serverï¼ˆåŒ…æ‹¬ network managersï¼‰ã€managed deviceã€dataï¼ˆæ¯ä¸ª device æœ‰ configuration dataã€operational dataã€device statisticsï¼Œè€Œ managing server ä¼šç»´æŠ¤æ¯ä¸ª device å’Œæ•´ä¸ª network çš„ dataï¼‰ã€network management agentã€network management protocolã€‚\nè¿›è¡Œ network management æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\nCLI: error-proneï¼Œä¸èƒ½ scale to larger-sized networkã€‚ SNMP/MIB: æ¯ä¸ª device æœ‰ management information base (MIB) objectsï¼Œå¯ä»¥ä½¿ç”¨ simple network management protocol (SNMP) æ¥è·å–/è®¾ç½® MIB objects çš„ dataï¼Œdevice å¯ä»¥å‘é€ trap message å‘ managing server é€šçŸ¥çŠ¶æ€å˜åŒ–ã€‚ç”±äº SNMP/MIB é’ˆå¯¹çš„æ˜¯å•ä¸ªçš„ deviceï¼Œä¹Ÿéš¾ä»¥ scaleã€‚ NETCONF/YANG: NETCONF æ¯” SNMP æ›´æ³¨é‡é…ç½®ç®¡ç†ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ“æ§å¤šä¸ª deviceï¼Œè®¾ç½® constraint æ¥æ£€æŸ¥é…ç½®çš„æ­£ç¡®æ€§ï¼Œä½¿ç”¨ YANG ä½œä¸º data modeling languageï¼Œä»¥ XML æ ¼å¼é€šè¿‡ TLS è¿›è¡Œé€šä¿¡ã€‚ ","description":"The Network Layer: Control Plane","tags":["Computer Network","CNATDA"],"title":"CNATDA ç¬¬äº”ç« å­¦ä¹ ç¬”è®°","uri":"/posts/cnatda-ch5/"},{"categories":["Study Notes","CNATDA"],"content":"Introduction and Transport-Layer Services transport layer å°† application layer messages å°è£…æˆ segmentsï¼Œç„¶åäº¤ç»™ network layer è¿›è¡Œä¼ è¾“ï¼Œå°† network layer æä¾›çš„ logical communication between hosts æ‰©å±•ä¸º logical communication between processesã€‚\næœ€ä¸»è¦çš„ä¸¤ä¸ª transport layer protocol æ˜¯ TCP å’Œ UDPï¼Œå…¶ä¸­ UDP unreliableã€connectionless çš„ï¼ŒTCP reliableã€connection-oriented çš„ã€‚\nUDP ä»…ä»…æä¾› data delivery å’Œ error checking çš„æœåŠ¡ï¼Œä¸ä¿è¯ datagram æ˜¯å¦é€è¾¾ã€æ˜¯å¦æœ‰åºï¼Œæ˜¯å¦å®Œæ•´ã€æ­£ç¡®ï¼Œä¹Ÿä¸ä¼šæ§åˆ¶ä¼ è¾“é€Ÿåº¦ã€‚\nTCP åˆ™æä¾› reliable data transferã€flow controlã€ä¿è¯ datagram æ­£ç¡®ã€æœ‰åºé€è¾¾ï¼Œè¿˜ä¼šæä¾› congestion controlã€‚\nè€Œ network layer protocol æœ€é‡è¦çš„ IP protocol æä¾›çš„æ˜¯ä¸€ä¸ª best-effort delivery (unreliable) æœåŠ¡ã€‚\nMultiplexing and Demultiplexing åœ¨ transport layer ä¸­ï¼Œmultiplexing æŒ‡ sender çš„ transport layer å°†ä¸åŒ socket çš„ message æ”¶é›†å¹¶å‘é€ç»™ network layer çš„è¿‡ç¨‹ï¼Œè€Œ demultiplexing æŒ‡ receiver çš„ transport layer å°† network layer å‘é€æ¥çš„ datagrams æ‹†åˆ†åä¼ é€’ç»™å¯¹åº”çš„ socket çš„è¿‡ç¨‹ã€‚\nmultiplexing å’Œ demultiplexing éœ€è¦æ¯ä¸ª socket æœ‰ unique identifierã€‚\nUDP socket çš„ identifier ä¸ºäºŒå…ƒç»„ (dest IP addr, dest port num) ï¼Œå®ƒä¹Ÿä¼šå­˜æœ‰ source port number ç­‰å…¶ä»– fieldï¼Œä½†æ˜¯ä¸ä½œä¸º identifierã€‚\nTCP socket çš„ identifier ä¸ºå››å…ƒç»„ (src IP addr, src port num, dest IP addr, dest port num)ã€‚\nConnectionless Transport: UDP UDP ä»…æä¾› multiplexing/demultiplexing å’Œ error checkingã€‚ä¸€äº› application é€‰æ‹© UDP ä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š\næ›´å¥½åœ°æ§åˆ¶å‘é€ä»€ä¹ˆæ•°æ®ã€ä»€ä¹ˆæ—¶å€™å‘é€ï¼šTCP æœ‰ congestion controlï¼Œå¯ä»¥ä¼šå»¶è¿Ÿå‘é€æ•°æ®ï¼Œè€Œä¸”ä¼šé”™è¯¯é‡ä¼ å¯¼è‡´å‘é€è¾ƒæ…¢ã€‚ ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼šå»ºç«‹è¿æ¥çš„è¿‡ç¨‹ä¼šäº§ç”Ÿ delayã€‚ æ— è¿æ¥çŠ¶æ€ï¼šå¯ä»¥å‡å°ç³»ç»Ÿèµ„æºæ¶ˆè€—ã€‚ è¾ƒå°çš„ headerï¼šTCP segment header é•¿åº¦é€šå¸¸ä¸º 20 bytesï¼Œè€Œ UDP åªæœ‰ 8 bytesã€‚ ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨ UDP ä¼ è¾“å¤§é‡æ•°æ®æ—¶ï¼Œä¼šå¯¼è‡´ packet overflow at routersï¼ŒUDP ä¸¢åŒ…ä¸¥é‡ï¼ŒTCP ä¼ è¾“è¿‡æ…¢ã€‚\nUDP datagram header å…±æœ‰ 4 ä¸ª fieldsï¼Œæ¯ä¸ªé•¿åº¦éƒ½æ˜¯ 2 bytesã€‚\nlengthï¼šè®°å½• UDP segment çš„æ€»é•¿åº¦ã€‚ checksumï¼šå¯¹æ‰€æœ‰ 16-bit çš„æ•°æ®æ±‚å’Œåä½¿ç”¨ 1s complement æ£€æµ‹æ˜¯å¦å…¨ä¸º 1ã€‚ source port destination port UDP çš„ checksum ä»…ä»…è¿›è¡Œ error detectingï¼Œä¸ä¼šè¿›è¡Œ error correctingï¼Œå½“æ£€æµ‹åˆ°é”™è¯¯æ—¶å¯ä»¥é€‰æ‹©ä¸¢å¼ƒ/é€šçŸ¥ applicationã€‚\nå°½ç®¡å¾ˆå¤š link layer protocol ä¹Ÿæä¾›äº† error checkingï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯è·¯ä¸Šæ‰€æœ‰çš„ link layer éƒ½æä¾›äº†ï¼ŒåŒæ—¶ error ä¹Ÿä¸ä¸€å®šæ˜¯ link-to-link çš„è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ï¼Œå› æ­¤ UDP ä»ç„¶éœ€è¦æä¾› checksum çš„æœåŠ¡ã€‚\nPrinciples of Reliable Data Transfer Stop-And-Wait åœ¨ stop-and-wait ä¸­ï¼Œsender æ¯æ¬¡éœ€è¦æ”¶åˆ° receiver å‘é€çš„å¯¹åº”çš„ ACK/NAK æ‰ä¼šå‘é€ä¸‹ä¸€ä¸ª packetã€‚\nchecksumï¼šä¼ è¾“è¿‡ç¨‹å¯èƒ½å‡ºé”™ï¼Œéœ€è¦è¿›è¡Œ error detectionã€‚ acknowledgmentï¼šreceiver éœ€è¦å‘ŠçŸ¥ sender æ˜¯å¦ä¸¢åŒ…ã€å‡ºç°é”™è¯¯ã€‚ retransmissionï¼šä¸¢åŒ…ï¼ˆè¶…æ—¶ï¼‰æˆ–è€…æ”¶åˆ° NAK æ—¶éœ€è¦é‡ä¼ ã€‚ timeoutï¼šå‡ºç°ä¸¢åŒ…ç°è±¡éœ€è¦ä½¿ç”¨ timeout æ¥è¿›è¡Œåˆ¤æ–­ã€‚timeout çš„æ—¶é—´å¤ªé•¿ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬è®¾ç½®ä¸ºæœ‰å¯èƒ½ä¸¢åŒ…ä½†æ˜¯ä¸èƒ½å®Œå…¨ç¡®å®šæ˜¯å¦æ˜¯ä¸¢åŒ…çš„å€¼ã€‚ sequence numberï¼šsender å‘é€çš„ packet ä¸ receiver å‘é€çš„ ACK éƒ½æœ‰ç›¸åº”çš„ sequence numberã€‚åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼ŒACK ä¹Ÿæœ‰å¯èƒ½å‡ºé”™ï¼Œä»è€Œå¯¼è‡´ duplicate packetï¼Œå› æ­¤åŠ ä¸Š sequence number æ¥è¯†åˆ« duplicate packetã€‚å¦å¤–ï¼Œåœ¨ stop-and-wait ä¸­ï¼Œsequence number ä»…ç”± 0/1 ç»„æˆï¼Œå› æ­¤åˆè¢«ç§°ä¸º alternating-bit protocolã€‚ Pipelined Reliable Data Transfer ç”±äºæ˜¯ stop-and-wait çš„æœºåˆ¶ï¼Œæ‰€ä»¥æ€§èƒ½ä¸é«˜ã€‚\nå®šä¹‰ sender çš„ utilization çš„å¤§å°ä¸º sender å®é™…åœ¨ä¼ è¾“çš„æ—¶é—´ä¸æ€»æ—¶é—´çš„æ¯”å€¼ï¼Œåœ¨ stop-and-wait protocol ä¸­ï¼Œå¤§å°çº¦ä¸º $U_{\\mathrm{sender}}=\\dfrac{L/R}{RTT+L/R}$ ï¼Œå®é™…å€¼éå¸¸å°ã€‚\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯è®© sender æ— éœ€ç­‰å¾…å³å¯ä¸€æ¬¡ä¼ è¾“å¤šä¸ª packetsï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå« pipeliningï¼Œä½¿ç”¨è¿™ç§åŠæ³•ä¹Ÿæ„å‘³ç€ï¼š\nsequence number æ•°é‡å¢å¤§ã€‚ sender å’Œ receiver éƒ½éœ€è¦ buffer æ›´å¤šçš„ packetsã€‚ æœ‰ä¸¤ç§åŸºç¡€çš„å®ç°æ–¹æ³•ï¼šGo-Back-N å’Œ selective repeatã€‚\nGo-Back-N (GBN) window çš„å¤§å°æ”¶åˆ° packet ä¸­ sequence number çš„ field çš„é™åˆ¶ï¼Œè‹¥ sequence number field çš„é•¿åº¦ä¸º $k$ï¼Œåˆ™ window size ä¸º $2^k$ï¼Œsequence number èŒƒå›´ä¸º $[0,2^k-1]$ã€‚\nsender:\nä½¿ç”¨ä¸€ä¸ª sliding window è¡¨ç¤ºå½“å‰æœ‰æ•ˆçš„ sequence number çš„èŒƒå›´ã€‚ å¦‚æœ window å†…æ‰€æœ‰ sequence number éƒ½è¢«ä½¿ç”¨äº†å°±ä¸èƒ½å‘é€æ–°çš„ packetã€‚ æ”¶åˆ°çš„ ACK è¢«ç§°ä¸º cumulative acknowledgementï¼Œå³ sequence number å°äºå½“å‰ ACK çš„ number çš„æœªè¢« ACK çš„ packets ä¹Ÿä¼šè¢«è§†ä¸º ACKâ€™d ã€‚ æ”¶åˆ°ä¸€ä¸ª ACK å°±ä¼šå°† window æ»‘åˆ°å®ƒå¯¹åº” sequence number åé¢ã€‚ æ‰€æœ‰çš„æœªè¢« ACK çš„ packets å…±ç”¨ä¸€ä¸ª timerã€‚ retransmit æ—¶ä¼šé‡å‘æ‰€æœ‰æœªè¢« ACK çš„ packetsã€‚ receiver: åªæ¥æ”¶é¡ºåºæ­£ç¡®çš„ packetï¼Œå¦åˆ™ä¼šç›´æ¥ä¸¢å¼ƒï¼Œè€Œå¦‚æœæ˜¯é¡ºåºæ­£ç¡®ä½†æ˜¯å‡ºç°é”™è¯¯çš„ packet åˆ™ä¼šé€šè¿‡å‘é€ä¸Šä¸€ä¸ª packet çš„ ACK è¿›è¡Œ NAKã€‚\nGBN ç›¸å¯¹ selective repeat çš„ä¼˜åŠ¿åœ¨äº receiver ä¸éœ€è¦ bufferï¼Œä½†æ˜¯ç›¸åº”çš„ï¼Œä¸€ä¸ª packet å‡ºé”™å°±è¦é‡å‘æ‰€æœ‰æœªè¢« ACK çš„ packetsï¼Œé€ æˆäº†å¾ˆå¤šæµªè´¹ã€‚\nSelective Repeat (SR) sender:\nwindow é™¤äº†ç¬¬ä¸€ä¸ªä¸€å®šæ˜¯æœªè¢« ACK çš„å…¶ä½™éƒ½æœ‰å¯èƒ½æ˜¯ ACK æˆ–è€…æœªè¢« ACK çš„ã€‚ æ¯ä¸ª packet çš„ ACKï¼Œtimerï¼Œretransmission éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ æ”¶åˆ°å¼€å¤´çš„ ACK æ—¶ window æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªæœªè¢« ACK å¤„ã€‚ receiverï¼š\nåŒæ ·ç»´æŠ¤ä¸€ä¸ª sliding windowï¼Œwindow size å¯èƒ½ä¸ sender ä¸åŒï¼Œç¬¬ä¸€ä¸ªæ˜¯å°šæœªæ”¶åˆ°çš„æœ€å°çš„ packetã€‚ æ”¶åˆ°é window å¼€å¤´çš„ä¼š buffer ä¸‹æ¥ã€‚ æ”¶åˆ° window å¼€å¤´çš„ä¼šå°†å…¶ä¸ buffer ä¸­å­˜å‚¨çš„è¿ç»­çš„ä¸€æ•´æ®µä¼ ç»™ application layerï¼Œç„¶åæ»‘åŠ¨ windowã€‚ æ”¶åˆ°æ¯” window å¼€å¤´å°çš„ packet æ—¶è¯´æ˜ä¹‹å‰çš„ ACK ä¼ è¾“å‡ºäº†é—®é¢˜ï¼Œä»ç„¶éœ€è¦å‘é€ ACKã€‚ å¦‚æœæ”¶åˆ° packet å­˜åœ¨ errorï¼Œåˆ™ä¸¢å¼ƒä¸ç®¡ éœ€è¦æ³¨æ„çš„æ˜¯ sender å’Œ receiver çš„ window size ä¸ä¸€å®šç›¸åŒï¼Œä½†æ˜¯éƒ½ä¸èƒ½è¶…è¿‡ sequence number å¤§å°èŒƒå›´çš„ä¸€åŠã€‚\nä¸ç®¡æ˜¯ GBN è¿˜æ˜¯ SRï¼Œsequence number çš„èŒƒå›´éƒ½æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥æ˜¯å¾ªç¯ä½¿ç”¨çš„ï¼Œå¦‚æœä¸€ä¸ª duplicate packet/ACK çš„ä¼ è¾“è€—æ—¶è¿‡ä¹…å¯¼è‡´å ç”¨äº†ç°æœ‰çš„ sequence numberï¼Œå®è·µä¸­çš„è§£å†³åŠæ³•æ˜¯è®¤å®šä¸€ä¸ª packet/ACK åœ¨ä¼ è¾“å‡ åˆ†é’Ÿä¹‹åå°±æ²¡äº†ã€‚\nConnection-Oriented Transport: TCP The TCP Connection TCP è¢«ç§°ä¸º connection-oriented æ˜¯å› ä¸ºå½“ä¸¤ä¸ª process ä¹‹é—´èƒ½å¤Ÿä¼ è¾“ data ä¹‹å‰éœ€è¦å…ˆè¿›è¡Œ handshakeã€‚\nTCP éœ€è¦å…ˆå»ºç«‹ connectionï¼Œè¿™ä¸ª connection åªæ˜¯ logical çš„ï¼Œæ˜¯åœ¨ä¸¤ä¸ª end system ä¸Šå»ºç«‹ä¸€äº› state variableï¼Œæ²¡æœ‰ physical ä¸Šçš„è¿æ¥ã€‚\nTCP connection æ˜¯ full-duplex çš„ï¼Œå³åŒæ–¹å»ºç«‹è¿æ¥ä¹‹åäº’ç›¸å¯ä»¥å‘é€ä¿¡æ¯ï¼›æ˜¯ point-to-point çš„ï¼Œä¸èƒ½è¿›è¡Œ multicastingã€‚\nTCP connection é€šè¿‡ three-way handshake å»ºç«‹ï¼Œåœ¨ handshake è¿‡ç¨‹ä¸­ä¹Ÿä¼šå»ºç«‹ send/receive bufferï¼Œå‘é€/æ”¶åˆ° message æ—¶ä¼šå…ˆæ”¾å…¥ send/receive buffer ç„¶åå†ä¼ é€’ç»™ application/link layerã€‚\nTCP ä¼šæ ¹æ® MTU (maximum transmission unitï¼Œæœ€å¤§çš„èƒ½ä¼ è¾“çš„ link layer frame size) è®¡ç®—å‡ºåˆé€‚çš„ MSS (maximum segment sizeï¼Œsegment åŒ…å« data çš„æœ€å¤§ size) ä½¿å¾— data åŠ ä¸Š TCP header å’Œ IP header åä¸è¶…è¿‡ MTUã€‚\nTCP Segment Structure TCP çš„ header é•¿åº¦é€šå¸¸æ˜¯ 20 bytesï¼Œä½†æ˜¯ Options æ˜¯å¯å˜é•¿åº¦çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¸€å®šã€‚\nSequence Numbers and Acknowledgment Numbers TCP å°† data è§†ä¸ºä¸€ä¸ªæ— ç»“æ„ä½†æœ‰åºçš„ byte streamã€‚sequence number æŒ‡çš„æ˜¯å½“å‰ segment çš„ data çš„ç¬¬ä¸€ä¸ª byte åœ¨ byte stream ä¸­çš„åºå·ï¼›acknowledgment number æŒ‡çš„æ˜¯æœŸå¾…å¯¹æ–¹ä¸‹ä¸€ä¸ªä¼ é€æ¥çš„ segment çš„ sequence numberã€‚\nç”±äº TCP åªä¼š acknowledge å®ƒé‡æ–°ç»„æˆçš„ byte stream ä¸­çš„ç¬¬ä¸€ä¸ª missing byteï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸º cumulative acknowledgmentsã€‚\nå½“ TCP æ”¶åˆ° out-of-order segments æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸¢å¼ƒæˆ–è€…å°†å…¶ buffer ä¸‹æ¥å¹¶ç­‰å¾… missing bytesï¼Œæ˜¾ç„¶åè€…å¯¹äºç½‘ç»œå¸¦å®½çš„åˆ©ç”¨æ›´é«˜æ•ˆï¼Œä¹Ÿæ˜¯å®è·µä¸­é‡‡ç”¨çš„åŠæ³•ã€‚\nä¸ºäº†å°½å¯èƒ½å‡å°æ”¶åˆ°çš„ä¸Šä¸€ä¸ªå·²ç»å…³é—­çš„ connection ä¸­ä»ç„¶ç•™å­˜åœ¨ network ä¸­çš„ segment çš„ sequence number ä¸ç°åœ¨åˆæ³•çš„ sequence number ææ··ï¼ŒTCP ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹çš„ sequence numberã€‚\nRound-Trip Time Estimation and Timeout ä¸€ä¸ª segment çš„ sample RTT ($s$) æŒ‡çš„æ˜¯ä»å‘é€åˆ°æ”¶åˆ°å¯¹åº”çš„ ACK çš„ç”¨æ—¶ã€‚\nTCP ä¸€èˆ¬åœ¨è®¡ç®—æŸä¸ª segment çš„ sample RTT åä¸ä¼šå†è®¡ç®—åŒæ—¶ä¹Ÿåœ¨ä¼ è¾“çš„å…¶ä»– segment çš„ sample RTTï¼Œè€Œä¸”åªä¼šè®¡ç®—ä¸€ä¸ªå°±ä¼ è¾“æˆåŠŸçš„ segmentï¼Œä¸ä¼šè®¡ç®— retransmitted segment çš„ sample RTTã€‚\nç”±äº network çš„æ‹¥å µæƒ…å†µä¼šå˜åŒ–ï¼Œæ‰€ä»¥å¦å¤–è¿˜éœ€è¦è®¡ç®—è¿™äº› sample RTT çš„ EWMA (exponential weighted moving average) ä½œä¸º estimated RTT ($e$) æ¥å¹³ç¼“ RTT çš„æ³¢åŠ¨ï¼š$e=(1-\\alpha)\\cdot e+\\alpha\\cdot s$ ã€‚\nä½¿ç”¨ dev RTT ($d$) æ¥è¡¡é‡ RTT çš„æ³¢åŠ¨ï¼š$d=(1-\\beta)\\cdot d+\\beta\\cdot |s-e|$ ã€‚\n$\\alpha$ å’Œ $\\beta$ çš„å»ºè®®å–å€¼ä¸º 0.125 å’Œ 0.25 ã€‚\ntime interval ($t$) åœ¨ estimated RTT çš„åŸºç¡€ä¸Šæ ¹æ® dev RTT æä¾›äº†ä¸€å®šçš„å†—ä½™ï¼š$t=e+4\\cdot d$ ã€‚\nReliable Data Transfer TCP ä¸€èˆ¬åªä½¿ç”¨ä¸€ä¸ª timerï¼Œæ˜¯ç”¨æ¥ç»™æœ€æ—©çš„æœªè¢« ACK çš„ packet è®¡æ—¶çš„ï¼Œå¹¶ä¸”æ¯æ¬¡ timeout åªä¼š retransmit è¿™ä¸€ä¸ª packetã€‚\ndoubling the timeout intervalï¼šæ¯æ¬¡å‘ç”Ÿ retransmission æ—¶ï¼ŒTCP ä¼šå°†ä¸‹ä¸€ä¸ª time interval ç¿»å€ï¼Œè€Œä¸æ˜¯ç”± estimated RTT å’Œ dev RTT è®¡ç®—å¾—åˆ°ã€‚ä½†æ˜¯ä¸€æ—¦åœ¨æ”¶åˆ° application ä¼ æ¥çš„ data æˆ–è€…æ”¶åˆ° ACK åé‡å¯çš„ timer çš„ time interval çš„å€¼ä»ç„¶è®¾ç½®ä¸º $t=e+4\\cdot d$ ã€‚\nfast retransmitï¼šdoubling the timeout interval è™½ç„¶èƒ½å‡å°å› é¡ºåºé”™è¯¯å¯¼è‡´æ”¶åˆ° duplicate ACK çš„æ¬¡æ•°ï¼Œä½†æ˜¯å¢åŠ äº† end-to-end delayã€‚ç”±äºå¤šäº 2 ä¸ª duplicate ACKs å¯ä»¥è¡¨æ˜é”™è¯¯åŸå› ä¸æ˜¯é¡ºåºé—®é¢˜ï¼ˆè¾ƒå¤§ number çš„ packet å…ˆåˆ°è¾¾ï¼‰è€Œæ˜¯ä¸¢åŒ…ï¼Œå› æ­¤ TCP åœ¨æ”¶åˆ° 3 ä¸ª duplicate ACKsï¼ˆç›¸åŒ sequence number çš„ç¬¬å››ä¸ª ACKï¼‰æ—¶ä¼šåœ¨ time out å‰ç«‹å³é‡å‘ã€‚\nTCP åªç»´æŠ¤æœ€å°çš„æœªè¢« ACK çš„ sequence number (sender) å’Œé¡ºåºæ­£ç¡®çš„ sequence number (receiver)ï¼Œè¿™ç‚¹ä¸Šçœ‹ç±»ä¼¼ GBNï¼Œä½†æ˜¯ TCP æ¯æ¬¡åªä¼šé‡ä¼ ä¸€ä¸ª packetï¼Œè€Œ receiver ä¹Ÿä¼š buffer é¡ºåºé”™è¯¯çš„ packetsã€‚\nFlow Control sender å’Œ receiver éƒ½ä¼šå¦å¤–ç»´æŠ¤ä¸€ä¸ª buffer å­˜å‚¨ packetsï¼Œsender æ”¶åˆ° application çš„ data ä¼š buffer ä¸‹æ¥ä¸ä¸€å®šç«‹å³å‘é€ï¼Œreceiver æ”¶åˆ° packet ä¹Ÿä¼š buffer ä¸‹æ¥ç­‰å¾… application è¯»å–ã€‚\nä¸ºäº†é˜²æ­¢ sender å‘é€è¿‡å¿«å¯¼è‡´ receiver çš„ buffer overflowï¼ŒTCP æä¾›äº† flow control çš„æœåŠ¡ã€‚\nTCP çš„ header éœ€è¦åŒ…å« rwnd (receive window) ç”¨æ¥è¡¨ç¤º buffer çš„å‰©ä½™ç©ºé—´ï¼Œsender åˆ™éœ€è¦ä¿è¯å‘å‡ºçš„æœªè¢« ACK çš„ packets æ•°é‡ä¸è¶…è¿‡ rwndã€‚\nå¯¹äº receiverï¼š$\\mathrm{rwnd=RcvBuffer-[lastByteRcvd-LastByteRead]}$\nå¯¹äº senderï¼š$\\mathrm{LastByteSent-LastByteAcked\\le rwnd}$\nå½“ $\\mathrm{rwnd}=0$ æ—¶ä¼šå¯¼è‡´ sender æ— æ³•å‘é€ packet å³ä½¿ receiver ä¹‹åæ‹¥æœ‰äº†å¯ç”¨ bufferï¼Œå› æ­¤éœ€è¦ sender åœ¨è¿™ä¹‹åç»§ç»­å‘é€å¤§å°ä¸º 1 byte çš„ segmentï¼Œè€Œ receiver æœ‰äº†å¯ç”¨çš„ buffer åä¼š ACK è¿™ä¸ª segmentã€‚\nTCP Connection Management three-way handshakeï¼š\nclient å‘é€ SYN bit ä¸º 1 çš„ SYN segmentï¼Œå¹¶ä¸” data ä¸ºç©ºï¼Œrand ä¸€ä¸ª initial sequence number (client_isn) ã€‚ server æ¥æ”¶åˆ° SYN segment ååˆ†é… TCP buffer å’Œ variables ç»™è¿™ä¸ª connectionï¼Œç„¶åå‘é€ SYN bit ä¸º 1ï¼Œacknowledge number ä¸º client_isn + 1 ï¼Œdata ä¸ºç©ºçš„ SYNACK segmentï¼Œå¹¶ä¸” rand ä¸€ä¸ª initial sequence number (server_isn) ã€‚ client æ”¶åˆ° SYNACK segment ååˆ†é… buffer å’Œ variables ç»™è¿™ä¸ª connectionï¼Œç„¶åå‘é€ SYN bit ä¸º 0ï¼Œacknowledge number ä¸º sever_isn + 1 ï¼Œdata ä¸ºç©ºçš„ ACK segmentï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ  dataã€‚ æ–­å¼€è¿æ¥æ—¶ï¼ŒåŒæ–¹éƒ½è¦äº’å‘ FIN bit ä¸º 1 çš„ FIN segmentï¼Œæ”¶åˆ°ä¹‹åéƒ½éœ€è¦å‘é€å¯¹åº”çš„ ACKï¼Œå¹¶ä¸”æå‡ºæ–­å¼€è¿æ¥çš„ä¸€æ–¹ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ–­å¼€è¿æ¥æ¥è®©å¯¹æ–¹æœ‰æœºä¼šåœ¨ ACK ä¸¢åŒ…æ—¶é‡ä¼  FIN segmentã€‚\nå¦‚æœå°è¯•è¿æ¥ä¸€ä¸ªä¸æ¥å— TCP connection çš„ç«¯å£ï¼Œä¼šæ”¶åˆ° RST bit ä¸º 1 çš„ RST segmentã€‚\nPrinciples of Congestion Control congestion ä¼šå¯¼è‡´ï¼š\nlarge queue delay router buffer overflow å¯¼è‡´ä¸¢åŒ…å’Œ retransmission large delay å¯¼è‡´ premature timeout ä»è€Œå¯¼è‡´ unneeded retransmission ä¼ è¾“è¿‡ç¨‹ä¸­ä¸€ä¸ª router å‡ºç°ä¸¢åŒ…ï¼Œåˆ™å‰é¢æ‰€æœ‰ router çš„å·¥ä½œéƒ½æµªè´¹äº† congestion control ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š\nend-to-end: network layer ä¸æä¾›ä»»ä½•æœ‰å…³ congestion çš„ä¿¡æ¯ï¼Œä»…ç”± retransmission å’Œ delay çš„å¢åŠ æ¥æ¨æ–­å‡º congestion network-assisted: router æä¾› congestion feedbackï¼ˆä¾‹å¦‚ç”¨ä¸€ä¸ª bit è¡¨ç¤ºæ˜¯å¦ congestedï¼Œæˆ–è€…æä¾›æ›´å¤æ‚çš„ä¿¡æ¯ï¼Œå¦‚ maximum host sending rateï¼‰ï¼Œå¯ä»¥æ˜¯ç”± router å‘é€ä¸€ä¸ªæ–°çš„ packetï¼Œä¹Ÿå¯ä»¥æ˜¯ router ä¿®æ”¹æ­£åœ¨ä¼ è¾“çš„æŸä¸ª packet çš„ç›¸å…³ fieldï¼Œç„¶åç”± receiver é€šçŸ¥ senderã€‚ TCP Congestion Control Classic TCP Congestion Control sender ä¼šä½¿ç”¨ä¸€ä¸ª congestion window ($\\mathrm{cwnd}$) æ¥é™åˆ¶å‘é€çš„é€Ÿç‡ï¼Œä½¿å¾— $\\mathrm{LastByteSent-LastByteAcked\\le \\min{cwnd, rwnd}}$ï¼Œä»è€Œå‘é€çš„é€Ÿç‡å¤§çº¦ä¸º $\\mathrm{cwnd/RTT}$.\nclassic TCP congestion control ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸåˆ™ï¼š\nä¸¢åŒ…æ„å‘³ç€ congestionï¼Œå› è€Œ sender åº”è¯¥è¦å‡å° $\\mathrm{cwnd}$ ACK è¡¨æ˜æ²¡æœ‰ congestionï¼Œå› è€Œ sender å¯ä»¥å¢å¤§ $\\mathrm{cwnd}$ å¯ä»¥ä¸æ–­å¢å¤§ $\\mathrm{cwnd}$ æ¥è¯•æ¢ä»€ä¹ˆæ—¶å€™ä¼šå‘é€ congestion TCP congestion-control algorithm ä¸»è¦æœ‰ 3 ä¸ªéƒ¨åˆ†ï¼š\nslow start: åˆå§‹çŠ¶æ€ä»¥åŠ timeout ååˆ°è¾¾çš„çŠ¶æ€ã€‚ä» $\\mathrm{cwnd=1,MSS}$ å¼€å§‹ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ª ACK å°±å¢å¤§ $\\mathrm{1,MSS}$ï¼Œç›¸å½“äºæ¯ä¸ª RTT $\\mathrm{cwnd}$ ç¿»å€ï¼Œç›´åˆ° $\\mathrm{cwnd\\ge ssthresh}$ è¿›å…¥ congestion avoidanceã€‚ congestion avoidance: æ¯ä¸ª ACK å¢å¤§ $\\mathrm{MSS\\cdot (MSS/cwnd)}$ï¼Œç›¸å½“äºæ¯ä¸ª RTT å¢å¤§ $\\mathrm{1,MSS}$ã€‚ fast recovery: æ”¶åˆ° 3 ä¸ª duplicate ACK åä¼šè¿›è¡Œ fast retransmitï¼Œä¹‹åè½¬ç§»åˆ° fast recoveryã€‚ä» $\\mathrm{cwnd=ssthresh+3, MSS}$ å¼€å§‹ï¼Œæ¯æ¬¡å†æ”¶åˆ°ä¸€ä¸ª duplicate ACK å°±å¢å¤§ $\\mathrm{1, MSS}$ï¼Œæ”¶åˆ° new ACK åˆ™è½¬ç§»åˆ° congestion avoidanceã€‚ æ­£å¸¸æƒ…å†µä¸‹ä¼šåœ¨ congestion avoidance å’Œ fast recovery ä¹‹é—´åå¤åˆ‡æ¢ï¼Œæ­¤æ—¶ cwnd çš„å¢é•¿æ˜¯çº¿æ€§çš„ï¼Œå‡å°‘åˆ™æ˜¯å‡åŠï¼Œç§°ä¸º additive-increase, multiplicateive-decrease (AIMD)ï¼ŒAIMD çš„ congestion control ä¼šå¯¼è‡´ cwnd å‘ˆç°é”¯é½¿çŠ¶çš„å˜åŒ–ã€‚\nä¸Šé¢æè¿°çš„æ‰€æœ‰å†…å®¹åŠ èµ·æ¥æ˜¯ TCP Renoï¼Œå¦‚æœç”¨ slow start æ›¿ä»£ fast recovery åˆ™æ˜¯æ›´å¤è€çš„ TCP Tahoeã€‚\nTCP Reno çš„ä¸Šå‡æ›²çº¿æ˜¯çº¿æ€§çš„ï¼Œä¸èƒ½å¿«é€Ÿæ¢å¤åˆ°æ¥è¿‘ congestion çš„ä¸´ç•Œå€¼ï¼Œå¯¹å¸¦å®½çš„åˆ©ç”¨ä¸æ˜¯å¾ˆé«˜æ•ˆï¼ŒTCP CUBIC åˆ™æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–åçš„ç‰ˆæœ¬ã€‚\nè®° $W_{max}$ ä¸º TCP æ£€æµ‹åˆ°ä¸¢åŒ…æ—¶çš„ cwnd çš„å¤§å°ï¼Œ$k$ ä¸º cwnd é‡æ–°å¢é•¿åˆ° $W_{max}$ çš„å¤§æ¦‚æ—¶é—´ï¼Œå½“å½“å‰æ—¶é—´è·ç¦» $k$ è¾ƒè¿œçš„æ—¶å€™åˆ™å¿«é€Ÿå¢åŠ  cwndï¼Œæ¥è¿‘ $k$ çš„æ—¶å€™åˆ™ç¼“æ…¢å¢åŠ ï¼Œå³ä¾¿è¶…è¿‡äº† $W_{max}$ ä½†æ˜¯æ²¡æœ‰æ£€æµ‹åˆ°ä¸¢åŒ…æ—¶ä¹Ÿéµå¾ªåŒæ ·çš„è§„åˆ™ã€‚\næ ¹æ® TCP Reno çš„çº¿æ€§å¢é•¿çš„ç‰¹æ€§å¯ä»¥è®¡ç®—å‡ºå¤§è‡´çš„å¹³å‡ throughput ä¸º $\\dfrac{0.75\\cdot W}{RTT}$ã€‚\nNetwork-Assisted Explicit Congestion Notification and Delayed-based Congestion Control Explicit Congestion Control (ECN) æ˜¯ä¸€ç§ network-assisted congestion controlï¼Œå®ƒå¯¹ TCP å’Œ IP çš„ header éƒ½è¿›è¡Œäº†æ‰©å±•ã€‚\nECN åœ¨ IP datagram header ä¸­ä½¿ç”¨äº†ä¸¤ä¸ª bitï¼Œä¸€ä¸ªç»™ router æ¥è¡¨ç¤ºæ˜¯å¦ congestedï¼ˆä¸€èˆ¬åœ¨å®é™…å‘ç”Ÿå‰è®¾ç½®ï¼‰ï¼Œå¦ä¸€ä¸ªç»™ sender è®¾ç½®æ¥å‘Šè¯‰ router è‡ªå·±å’Œ receiver æ˜¯å¦æ˜¯ ECN-capable çš„ã€‚\nå½“ receiver æ”¶åˆ° router çš„ congestion ä¿¡æ¯åï¼Œä¼šåœ¨ ACK ä¸­è®¾ç½® ECE (explicit congestion notification echo) flagï¼Œsender æ”¶åˆ°åä¼šå°† cwnd å‡åŠï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ª segment ä¸­è®¾ç½® CWR (congestion window reduced) flagã€‚\nDelayed-based Congestion Control delay-based congestion control ä¹Ÿèƒ½åœ¨ä¸¢åŒ…å‘ç”Ÿå‰å°±æ£€æµ‹åˆ° congestionã€‚\nTCP Vegas ä¼šç»´æŠ¤å†å²æœ€å¤§çš„ throughput ($\\mathrm{cwnd/RTT}$)ï¼Œå¦‚æœå½“å‰çš„ throughput å°äºè¿™ä¸ªå€¼ï¼Œåˆ™è¯´æ˜å‘ç”Ÿäº† congestionã€‚\nFairness å‡è®¾å½“å‰æœ‰ $K$ ä¸ª TCP connection å…±ç”¨ä¸€ä¸ª transmission rate ä¸º $R$ çš„ bottleneck linkï¼Œå¹¶ä¸”æ²¡æœ‰å…¶ä»–æ•°æ®ä¼ è¾“ã€‚å¦‚æœæ¯ä¸ª connection çš„å¹³å‡ throughput éƒ½æ˜¯ $R/K$ï¼Œåˆ™ç§°ä½¿ç”¨çš„ congestion control mechanism æ˜¯ fair çš„ã€‚\nåœ¨å„æ–¹çš„ RTT ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒAIMD æ˜¯ fair çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nä½†æ˜¯å½“å„æ–¹ RTT ä¸åŒæ—¶ï¼ŒRTT æ›´å°çš„å¾€å¾€å¯ä»¥è·å¾—æ›´å¤§çš„ throughputã€‚\nUDP æ˜¯æ²¡æœ‰ congestion control çš„ï¼Œä¼šå¯¼è‡´ unfairnessã€‚å¦å¤–ï¼Œapplication layer å¯èƒ½ä¼šä½¿ç”¨å¤šä¸ª parallel TCP connection ä¹Ÿä¼šå¯¼è‡´ unfairnessã€‚\nEvolution of Transport-Layer Functionality ç°åœ¨æœ‰è®¸å¤šç§ä¸åŒçš„ TCP/UDP ç‰ˆæœ¬ï¼Œä¸¢å¼ƒäº†æŸäº›åŸæœ‰çš„åŠŸèƒ½/æ–°å¢åŠ ä¸€äº›åŠŸèƒ½æ¥é€‚åº”æ–°çš„ç¯å¢ƒã€‚\nQUIC æ˜¯ä¸€ä¸ªåŸºäº UDP çš„ application layer protocolï¼Œå…·æœ‰ä»¥ä¸‹ feature:\nconnection-oriented and secureã€‚éœ€è¦ handshake æ¥å»ºç«‹è¿æ¥ï¼Œå¹¶ä¸”æ‰€æœ‰æ•°æ®åŠ å¯†ã€‚connection-establishment handshake å’Œ authentication and encryption handshake è¢«åˆå¹¶åœ¨äº†ä¸€èµ·ï¼Œä»è€Œæ¯” TLS æ›´å¿«ã€‚ streamã€‚ä»¥ stream ä¸ºå•ä½ä¼ è¾“ application dataï¼Œè€Œå¤šä¸ª stream å¯ä»¥æ”¾åœ¨å•ä¸ª packet ä¸­ä¼ è¾“ã€‚ reliable, TCP-friendly congestion-controlled data transferã€‚å…¶ä¸­ in-order delivery æ˜¯å¯¹æ¯ä¸ª stream åˆ†åˆ«ä¿åºï¼Œè€Œä¸€ä¸ª stream å¯ä»¥æ”¾åœ¨ä¸åŒçš„ packet ä¸­ï¼Œæ‰€ä»¥ä¸åŒ stream ä¹‹é—´ä¸ä¼šå¸¦æ¥é˜»å¡ (HOL blocking)ã€‚å¦å¤–ä¹Ÿé‡‡å–äº†ä¸ TCP ç±»ä¼¼çš„ congestion controlã€‚ ","description":"Transport Layer","tags":["Computer Network","CNATDA"],"title":"CNATDA ç¬¬ä¸‰ç« å­¦ä¹ ç¬”è®°","uri":"/posts/cnatda-ch3/"},{"categories":["Study Notes","CNATDA"],"content":"Introduction to the Link Layer link layer çš„ä¸»è¦ä»»åŠ¡æ˜¯å°† datagram ä»å½“å‰ node ä¼ è¾“åˆ°å¦ä¸€ä¸ª nodeï¼Œè¿˜å¯ä»¥æä¾›ä»¥ä¸‹æœåŠ¡ï¼š\nframingï¼šå°† network layer çš„ datagram encapsulate æˆ link layer çš„ frame ç„¶åè¿›è¡Œä¼ è¾“ã€‚ link accessï¼šä½¿ç”¨ medium access controlï¼ˆMACï¼‰åè®®æ¥å†³å®šä¼ è¾“å“ªä¸€ä¸ª frameã€‚å¯¹äº point-to-point çš„ä¼ è¾“æ˜¯å¾ˆç®€å•çš„ï¼Œä½†æ˜¯å¯¹äº multiple access problem æ¥è¯´ï¼Œåˆ™éœ€è¦ MAC protocol æ¥è¿›è¡Œåè°ƒã€‚ reliable deliveryï¼šä½¿ç”¨ acknowledgments å’Œ retransmission ï¼Œä¸ transport layer çš„å¯é ä¼ è¾“æœåŠ¡ç±»ä¼¼ã€‚reliable delivery åœ¨å‡ºé”™ç‡è¾ƒé«˜çš„ linksï¼ˆå¦‚ wireless linkï¼‰ä¸­é‡‡ç”¨è¾ƒå¹¿ï¼Œä½†æ˜¯åœ¨å‡ºé”™ç‡è¾ƒä½çš„ links ä¸­åˆ™ä¼šé€ æˆä¸å¿…è¦çš„ overheadï¼Œé‡‡ç”¨è¾ƒå°‘ã€‚ error detection and correctionï¼šé€šè¿‡åœ¨ transmitting node çš„ frame ä¸­åŠ å…¥ error-detection bits å’Œåœ¨ receiving node ä¸­è¿›è¡Œ error check æ¥å®ç°ã€‚link layer çš„ error detection ä¸»è¦åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç°ã€‚ åœ¨ host ä¸­ï¼Œlink layer ä½¿ç”¨åä¸º network adapterï¼ˆnetwork interface controllerï¼ŒNICï¼‰ çš„ chip å®ç°ï¼Œå±äºç¡¬ä»¶å±‚é¢çš„å®ç°ã€‚å¦å¤–ï¼Œè¿˜ä¼šæœ‰ä¸€éƒ¨åˆ†ç”± CPU ä¸Šçš„è½¯ä»¶å®ç°ã€‚\nError-Detection and -Correction Techniques error-detection and -correction å…è®¸æ¥æ”¶ç«¯å¶å°”çš„å·®é”™æ£€æµ‹ï¼Œä½†æ˜¯ä¸æ˜¯æ°¸è¿œéƒ½ä¼šè¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šå­˜åœ¨æœªæ£€æµ‹åˆ°çš„ error bitsã€‚\nParity Checks å®ç° bit å±‚é¢ä¸Šçš„ error detection æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æ·»åŠ ä¸€ä¸ª parity bit æ¥è®°å½•åŸæ¥å€¼ä¸º 1 çš„ bits çš„æ•°ç›®ã€‚è¿™åœ¨åªæœ‰ä¸€ä¸ª bit ä¼šå‡ºé”™çš„æƒ…å†µä¸‹æ˜¯ work çš„ï¼Œä½†æ˜¯äº‹å®ä¸Š error æ€»æ˜¯ clustered together in â€œburstsâ€ï¼Œä»è€Œå•ä¸ªçš„ parity bit è¡Œä¸é€šã€‚\nè€ƒè™‘é‡‡ç”¨ two-diminutional parity ï¼Œå°†è¦ä¼ è¾“çš„ bits åˆ†æˆä¸€ä¸ªäºŒç»´çŸ©é˜µï¼Œæ¯ä¸€æ¨ªã€æ¯ä¸€åˆ—éƒ½è®¾ç½®ä¸€ä¸ª parity bitï¼Œè¿™æ ·ä»¥æ¥ï¼Œä¸ä»…å¯ä»¥ç¡®å®š error bit çš„ä½ç½®ï¼Œè¿˜èƒ½è¿›è¡Œ correctionã€‚\nè¿™ç§æ—¢èƒ½ detect ä¹Ÿèƒ½ correct çš„èƒ½åŠ›å«åš forward error correctionï¼ˆFECï¼‰ã€‚\nChecksumming Methods åœ¨ checksumming methods ä¸­ï¼Œd bits çš„ data ä¼šè¢«åˆ†æˆ k bit å¤§å°çš„æ•´æ•°åºåˆ—ï¼Œç„¶åå°†è¿™äº›æ•´æ•°çš„å’Œä½œä¸º error-detection bitsã€‚ Internet checksum å°±æ˜¯è¿™æ ·çš„ä¸€ç§æ–¹æ³•ã€‚åœ¨ TCP å’Œ UDP ä¸­ï¼Œæ‰€æœ‰ fields åŒ…æ‹¬ header å’Œ data éƒ½ä¼šè¿›è¡Œ Internet checksum ï¼Œè€Œ IP protocol ä¸­åªæœ‰ header ä¼šè¿›è¡Œã€‚\nchecksumming methods éœ€è¦ç›¸å¯¹å°‘çš„ packet overheadï¼Œä½†æ˜¯å¯¹ errors çš„ä¿æŠ¤èƒ½åŠ›ç›¸å¯¹ link layer é‡‡ç”¨ cyclic redundancy check è¾ƒå¼±ã€‚ç”±äº transport layer ä¸»è¦åœ¨è½¯ä»¶ä¸Šå®ç°ï¼Œéœ€è¦çš„æ˜¯ simple and fast çš„å·®é”™æ£€æµ‹èƒ½åŠ›ï¼Œè€Œ link layer åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç°ä½¿å¾—èƒ½è¿›è¡Œæ›´å¤æ‚çš„ CRC è¿ç®—ï¼Œæ‰€ä»¥ transport layer é‡‡ç”¨çš„æ˜¯ Internet checksumming è€Œ link layer é‡‡ç”¨çš„æ˜¯ CRCã€‚\nCyclic Redundancy Check (CRC) ç”Ÿæˆä¸€ä¸ªå¤šé¡¹å¼æ¥å®ç°ï¼Œè¯¦ç»†çš„å¯ä»¥çœ‹ UCB CS70 Error Correcting Codes æˆ–è€…çœ‹ä¹¦ï¼Œå…¶å®å°±æ˜¯ CS 70 è¿™ä¸ªçš„ bit ç‰ˆæœ¬ã€‚\nMultiple Access Links and Protocols network links åˆ†ä¸ºä¸¤ç§ï¼špoint-to-point å’Œ braodcastã€‚åœ¨ broadcast link ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ª nodes åŒæ—¶å‘é€ä¿¡æ¯ï¼Œåˆ™ä¼šäº§ç”Ÿ collision ã€‚\nä¸ºäº†è§£å†³ multiple access problemï¼Œéœ€è¦ä¸€ä¸ª multiple access protocol ï¼Œä¸»è¦æœ‰ä¸‰ç±» multiple access protocolsï¼šchannel partitioning protocolsï¼Œrandom access protocols å’Œ taking-turs protocolsã€‚\nä¸€ä¸ªåˆç†çš„ multiple access protocol éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š\nåªæœ‰ä¸€ä¸ªç»“ç‚¹å‘é€æ¶ˆæ¯åˆ™å®Œå…¨ä½¿ç”¨å¸¦å®½ å¤šä¸ªç»“ç‚¹å‘é€åˆ™å¹³åˆ†å¸¦å®½ decentralized simpleï¼Œinexpensive to implement Channel Partitioning Protocols TDM å°† time åˆ†æˆ frames ç„¶åæ¯ä¸ª frame åˆåˆ†æˆ slotsï¼Œæ¯ä¸€ä¸ª time slot åˆ†é…ç»™ä¸€ä¸ª nodeã€‚\nFDM åˆ™å°†é¢‘ç‡åˆ†ä¸º frames å†ç»†åˆ†ä¸º slots ã€‚\nFDM å’Œ TDM éƒ½èƒ½ä¿è¯æ¯ä¸ª node éƒ½èƒ½å¾—åˆ°å‡åˆ†çš„ä¼ è¾“é€Ÿç‡ï¼Œå¹¶ä¸”å®Œå…¨é¿å…äº† collisionï¼Œä½†æ˜¯ä¹Ÿä¼šå¯¼è‡´åªæœ‰ä¸€ä¸ª sender æ—¶ä¸èƒ½ä½¿ç”¨åˆ†é…ç»™å…¶ä»– nodes çš„ slotsã€‚\ncode division multiple accessï¼ˆCDMAï¼‰ç»™æ¯ä¸ª node åˆ†é…ä¸€ä¸ªä¸åŒçš„ codeï¼Œnode å°† data é€šè¿‡åˆ†é…çš„ code è¿›è¡Œ encode ä¹‹åå†å‘é€ã€‚CDMA åœ¨ wireless channel ä¸­è¾ƒå¸¸ç”¨ã€‚\nRandom Access Protocols æ¯ä¸ªé­é‡ collision çš„ç»“ç‚¹éƒ½ç‹¬ç«‹é€‰å–ä¸€ä¸ª random delayï¼Œåœ¨ delay ä¹‹åè¿›è¡Œ retransmissionã€‚\nALOHA å‡è®¾æ¯ä¸ª frame å¤§å°ç›¸åŒï¼Œå°† slot çš„å¤§å°ç­‰äºä¼ è¾“ä¸€ä¸ª frame çš„æ—¶é—´ï¼Œæ¯ä¸ªç»“ç‚¹åªä¼šåœ¨ slot çš„å¼€å§‹ä¼ è¾“ï¼Œå¹¶ä¸”æ‰€æœ‰ç»“ç‚¹æ˜¯åŒæ­¥çš„ï¼Œç»“ç‚¹ä¼šåœ¨ slot ç»“æŸä¹‹å‰æ£€æµ‹åˆ° collisionã€‚\nåœ¨ slotted ALOHA ä¸­ï¼Œç»“ç‚¹åœ¨æ£€æµ‹åˆ° collision ä¹‹åç«‹å³åœæ­¢ä¼ è¾“ï¼Œå¹¶ä¸”åœ¨ä¹‹åçš„ slots çš„å¼€å¤´ä»¥æ¦‚ç‡ $p$ è¿›è¡Œä¼ è¾“ç›´åˆ°æˆåŠŸï¼Œæ˜¯ decentralized ã€‚\næ°å¥½ä¸€ä¸ªç»“ç‚¹è¿›è¡Œä¼ è¾“çš„ slot è¢«ç§°ä¸º successful slotï¼Œslotted multiple access protocol çš„ efficiency è¢«å®šä¹‰ä¸º successful slot çš„å æ¯”ã€‚æ˜¾ç„¶ï¼Œæœ‰ $n$ ä¸ª active nodes çš„æ—¶å€™ï¼Œefficiency ä¸º $np(1-p)^{n-1}$ ï¼Œå½“ $n$ å¾ˆå¤§æ—¶ï¼Œå®ƒçš„æœ€å¤§å€¼ä¸º $1/e\\approx 0.37$ã€‚\nåœ¨ pure ALOHA ä¸­ï¼Œä¸è¿›è¡Œ slot çš„åˆ’åˆ†ï¼Œæ˜¯ fully decentralized çš„ï¼Œå¹¶ä¸”æ¯ä¸ªç»“ç‚¹é­é‡ collision ä¹‹åä¼šä»¥æ¦‚ç‡ $p$ ç«‹å³é‡ä¼ ï¼Œå°½ç®¡æ›´åŠ å»ä¸­å¿ƒåŒ–ï¼Œä½†æ˜¯å®ƒçš„ efficiency ä¹Ÿåªæœ‰ slotted ALOHA çš„ä¸€åŠäº†ã€‚\nCarrier Sense Multiple Access with Collision Detection (CSMA/CD) CSMA åŸºäº â€œListen before speakingâ€ çš„åŸåˆ™è¿›è¡Œ carrier sensingï¼Œè€Œ CSMA/CD åˆ™æ˜¯ CSMA åŠ ä¸Š â€œIf someone else begins talking at the same time, stop talkingâ€ çš„åŸåˆ™è¿›è¡Œ collision detectionã€‚\nç”±äº channel propagation delay çš„å­˜åœ¨ï¼Œä¸€ä¸ªç»“ç‚¹åœ¨æ£€æµ‹åˆ°å¦ä¸€ä¸ªç»“ç‚¹å‘é€è¿‡æ¶ˆæ¯å‰å¯èƒ½å·²ç»å‘é€è¿‡ä¸€æ®µæ¶ˆæ¯äº†ã€‚\nåœ¨ CSMA/CD ä¸­ï¼Œç»“ç‚¹é‡åˆ° collision ä¼šéšæœºç­‰åˆ°ä¸€æ®µæ—¶é—´å†è¿›è¡Œé‡ä¼ ï¼Œè¿™ä¸ªç­‰å¾…æ—¶é—´ç”± binary exponential backoff ç®—æ³•è¿›è¡Œè®¡ç®—ï¼šå½“å‰å¦‚æœç´¯è®¡æ£€æµ‹åˆ°äº† $n$ æ¬¡ collisionï¼Œåˆ™åœ¨ ${0,1,2,\\dots,2^n-1}$ ä¸­éšæœºå–ä¸€ä¸ªæ•°ä½œä¸º $K$ ï¼Œç„¶åç­‰å¾…ä¼ è¾“ $K\\cdot 512$ bit çš„ç”¨æ—¶ï¼Œå½“ $n$ è¶…è¿‡ 10 çš„æ—¶å€™åˆ™å– 10ã€‚å¦‚æœç­‰å¾…ä¹‹åä¼ è¾“æˆåŠŸï¼Œåˆ™ $n$ é‡æ–°å˜ä¸º 0ã€‚\nCSMA/CD çš„ efficiency çº¦ä¸º $\\dfrac{1}{1+5d_{\\mathrm{prop}}/d_{\\mathrm{trans}}}$ ï¼Œå…¶ä¸­ $d_{\\mathrm{prop}}$ è¡¨ç¤º propogation delayï¼Œ$d_{\\mathrm{trans}}$ è¡¨ç¤ºä¸€ä¸ª maximum-size frame çš„ä¼ è¾“ç”¨æ—¶ã€‚\nTaking-Turns Protocols taking-turns protocol çš„ä¸»è¦æ€æƒ³æ˜¯è®©ç»“ç‚¹è½®æµå‘é€æ¶ˆæ¯ã€‚\npolling protocol ä¸­å­˜åœ¨ä¸€ä¸ª master nodeï¼Œå®ƒè½®æµ poll æ¯ä¸ªç»“ç‚¹è®©å…¶å‘é€ä¸è¶…è¿‡ maximum number ä¸ª frameï¼Œå‘é€å®Œå†ç»§ç»­ poll ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚polling protocol æ˜¯ centralized çš„ï¼Œmaster node å€’ä¸‹äº†æ•´ä¸ªç³»ç»Ÿå°±ä¼šå´©æºƒï¼ŒåŒæ—¶ä¹Ÿå¼•å…¥äº† polling delayï¼šå¯¹ inactive nodes è¿›è¡Œ poll ä¼šæµªè´¹æ—¶é—´ã€‚\ntoken-passing protocol ä¸­æ¯ä¸ªç»“ç‚¹ä»¥å›ºå®šé¡ºåºå‘ä¸‹ä¸€ä¸ªç»“ç‚¹å‘é€ tokenï¼Œå½“ç»“ç‚¹éœ€è¦ä¼ è¾“æ—¶åˆ™ä¼šå…ˆä¼ è¾“ä¸è¶…è¿‡ maximum number ä¸ª frame å†ä¼ é€’ tokenã€‚token-passing protocol æ˜¯ decentralized å¹¶ä¸”é«˜æ•ˆçš„ï¼Œä½†æ˜¯å½“ä¸€ä¸ªç»“ç‚¹å´©æºƒäº†åŒæ ·ä¼šä½¿å¾—æ•´ä¸ª channel å´©æºƒï¼Œéœ€è¦é‡‡å– recovery procedureã€‚\nDOCSIS: The Link-Layer Protocol for Cable Internet Access DOCSIS ç”¨äº cable access networkï¼Œå°†ä¸€ä¸ª residential cable modems è¿æ¥åˆ° cable modem termination systemï¼ˆCMTSï¼‰ï¼ŒåŒæ—¶ç”¨åˆ°äº†å¤šç§ multiple access protocolã€‚\nDOCSIS ä½¿ç”¨ FDM åˆ†ä¸º downstream å’Œ upstream ä¸¤ä¸ª channelï¼Œdownstream channel çš„å†…å®¹ç”± CTMS å‘ cable modem å‘é€ï¼Œä¸å­˜åœ¨ multiple access problemã€‚upstream channel åˆ™è¢«åˆ†ä¸ºäº†å¤šä¸ª mini-slotsï¼Œè¿™äº› slots ç”± CMTS é€šè¿‡ downstream åŠ¨æ€åˆ†é…ï¼Œéœ€è¦ç”± cable modem å‘é€ mini-slot-request-frameï¼Œè¿™äº› requests é€šè¿‡ä¸€äº›ç‰¹æ®Šçš„ mini-slots ä»¥ random access çš„æ–¹å¼å‘é€ï¼Œé€šè¿‡æ˜¯å¦æ”¶åˆ° CMTS å›å¤çš„ mini-slots æ¥åˆ¤å®š collision çš„å­˜åœ¨ï¼Œä½¿ç”¨ binary exponential backoffã€‚\nSwitched Local Area Networks Link-Layer Addressing and ARP host å’Œ router çš„æ¯ä¸ª adapter éƒ½æœ‰ä¸€ä¸ª LAN address (physical address/MAC address) ï¼Œå¯¹äºæœ‰å¤šä¸ª interface çš„ router æ¥è¯´ï¼Œæ¯ä¸ª interface éƒ½ä¼šæœ‰ä¸€ä¸ª MAC addressã€‚\nMAC address çš„é•¿åº¦ä¸º 6 bytesï¼Œç”± IEEE è¿›è¡Œåˆ†é…ï¼Œæ¯ä¸ª adapter çš„ MAC address éƒ½æ˜¯å›ºå®šä¸å˜çš„ã€‚\nå½“ adapter éœ€è¦å‘é€ frame ç»™ç›®çš„ adapter æ—¶ä¼šå°†ç›®çš„ MAC address æ’å…¥ frame ç„¶åé€å¾€ LANï¼Œç”± switch å°†å…¶å‘æ‰€æœ‰çš„ interfaces è¿›è¡Œ broadcastï¼Œä¸ç›®çš„ MAC address åŒ¹é…çš„å°±ä¼šæ¥æ”¶ï¼Œå¦åˆ™ä¸¢å¼ƒã€‚\nMAC broadcast address ä¸º ff:ff:ff:ff:ff:ffã€‚\nAddress Resolution Protocol ARP æ˜¯ç”¨æ¥å°† subnet å†…éƒ¨çš„ IP address è½¬æ¢æˆ MAC address çš„ã€‚\næ¯ä¸ª host/router å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª ARP tableï¼Œå­˜å‚¨ IP åˆ° MAC åœ°å€çš„æ˜ å°„ï¼ŒåŒæ—¶ä¼šæœ‰ä¸€ä¸ª TTLï¼Œåˆ°æœŸåˆ™ä¼šä¸¢å¼ƒè¿™æ¡è®°å½•ã€‚\nå½“ ARP table ä¸­æ²¡æœ‰å¯¹åº”çš„ MAC åœ°å€æ—¶ï¼Œsender ä¼šå‘é€ä¸€ä¸ª ARP requestï¼Œå…¶ä¸­ç›®çš„ MAC åœ°å€ä¸º MAC broadcast addressï¼Œå¯¹åº”çš„ receiver æ”¶åˆ°åä¼šå‘é€ ARP responseï¼Œä¸€èˆ¬ä¸æ˜¯ broadcastã€‚sender æ”¶åˆ° response åæ›´æ–° ARP tableã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒARP table å¯ä»¥è‡ªåŠ¨æ„å»ºï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚\nå¦‚æœéœ€è¦å‘ subnet å¤–å‘é€ä¿¡æ¯ï¼Œåˆ™æ˜¯éœ€è¦å‘é€ç»™ gatewayï¼ˆfirst-hop routerï¼‰ï¼Œéœ€è¦æŸ¥è¯¢çš„ä¹Ÿæ˜¯ gateway çš„ MAC åœ°å€ï¼Œgateway æ”¶åˆ° frame åä¼šä¼ é€’ç»™å®ƒçš„ network layer å°† source IP address ä¿®æ”¹ä¸ºå®ƒçš„ IP addressã€‚\nARP æ˜¯ä¸€ä¸ªä½äº network layer å’Œ link layer ä¹‹é—´çš„ protocolã€‚\nEthernet Ethernet é€šå¸¸ä½¿ç”¨ hub æˆ– switch æ¥è¿æ¥å„ä¸ª interfaceã€‚hub ä¼šå°†æ”¶åˆ°çš„æ¯ä¸ª bit è½¬å‘ç»™æ‰€æœ‰ interfacesï¼Œå®¹æ˜“é€ æˆ collisionã€‚switch æ ¹æ® MAC protocol è¿›è¡Œè½¬å‘ï¼Œé¿å…äº† collisionã€‚\nEthernet çš„ frame é€šå¸¸ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š\ndata fieldï¼ˆ46 to 1500 bytesï¼‰ï¼šIP datagramã€‚å¦‚æœ IP datagram çš„é•¿åº¦å°äº 46 bytesï¼Œåˆ™ä¼šå¡«å……è‡³ 46 bytesï¼Œnetwork layer é€šè¿‡ IP datagram çš„ length field æ¥å»é™¤å¡«å……ã€‚ destination fieldï¼ˆ6 bytesï¼‰ source fieldï¼ˆ6 bytesï¼‰ type fieldï¼ˆ2 bytesï¼‰ï¼šæ ‡è¯† upper layer protocolã€‚ CRC checksumï¼ˆ4 bytesï¼‰ preambleï¼ˆ8 bytesï¼‰ï¼šæ ‡è¯† frame çš„å¼€å¤´å¹¶åŒæ­¥æ—¶é’Ÿã€‚ Ethernet technologies æä¾›çš„æ˜¯ connectionlessã€unreliable çš„æœåŠ¡ã€‚\nLink-Layer Switches switch çš„ä¸»è¦ä»»åŠ¡æ˜¯å°† incoming frames forward åˆ° outgoing linksã€‚switch æ˜¯ transparent çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œhost å’Œ router å¹¶ä¸çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œå®ƒä¹Ÿä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œæ˜¯ plug-and-play çš„ã€‚\nswitch çš„æ¯ä¸ª interface éƒ½æœ‰ä¸€ä¸ª output bufferï¼Œä¸ router ç±»ä¼¼ã€‚\nswitch ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼šfiltering å’Œ forwardingã€‚å®ƒä»¬é€šè¿‡ç»´æŠ¤ä¸€ä¸ª switch table æ¥å®ç°ï¼šå­˜å‚¨ MAC åœ°å€å’Œå¯¹åº”çš„åœ°å€ï¼Œå¦å¤–è¿˜æœ‰è¿‡æœŸæ—¶é—´ã€‚\nå½“ä» interface $x$ ä¸­æ”¶åˆ° destination MAC address ä¸º $\\alpha$ çš„ frame æ—¶ï¼š\nè‹¥ $\\alpha$ ä¸åœ¨ switch table ä¸­ï¼Œåˆ™ broadcastã€‚ è‹¥ $\\alpha$ å¯¹åº”çš„ interface ä¸º $x$ æ—¶ï¼Œåˆ™ discardã€‚ è‹¥ $\\alpha$ å¯¹åº”çš„ interface ä¸ç­‰äº $x$ æ—¶ï¼Œåˆ™ forwardã€‚ switch æ˜¯ self-learning çš„ï¼šå¦‚æœåœ¨ intreface $x$ ä¸­æ”¶åˆ°äº† source MAC address ä¸º $x$ çš„ frame ä¼šåœ¨ table ä¸­æ·»åŠ ç›¸åº”çš„è®°å½•ã€‚\nç›¸æ¯” hubï¼Œswitch å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\næ¶ˆé™¤äº† collisionã€‚ å¯ä»¥å°†ä¸åŒ technology çš„ links è¿æ¥åœ¨ä¸€èµ·ã€‚ æä¾› network management æœåŠ¡ï¼Œå¦‚ enhanced security ç­‰ã€‚ switch å’Œ router å„è‡ªå…·æœ‰ pros å’Œ consï¼š\nswitch å³æ’å³ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼›åªæœ‰ 2 layersï¼Œæ€§èƒ½æ›´å¥½ï¼›åªèƒ½ç»ƒæˆ spanning treeï¼Œä¸èƒ½å½¢æˆç¯ï¼›å¦‚æœ subnet å†… host å¤ªå¤šä¼šå½±å“æ€§èƒ½ï¼›å¯èƒ½é­å— broadcast stormã€‚ router éœ€è¦æ‰‹åŠ¨é…ç½®ï¼›æœ‰ 3 layersï¼Œæ€§èƒ½ç•¥å·®ï¼›å¯ä»¥éšä¾¿è¿ï¼Œä»è€Œæä¾›å¤šä¸ª route ä¾› routing protocol ä½¿ç”¨ï¼Œå®ç° best pathï¼›æä¾› firewall é˜²æ­¢ broadcast stormã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå‡ åä¸Šç™¾ä¸ª host ä½¿ç”¨ switch å³å¯ï¼Œæ›´å¤šçš„éœ€è¦ router è¿›è¡Œä¸­è½¬ã€‚\nVirtual Local Area Networks (VLANs) LANs å­˜åœ¨ä»¥ä¸‹ä¸€äº›é™åˆ¶ï¼š\nç¼ºå°‘å¯¹ traffic çš„é™åˆ¶ï¼Œä¾‹å¦‚æœªè¢«å­¦ä¹ åˆ°çš„ MAC åœ°å€å‘é€çš„ ARP ä»éœ€ traverse æ•´ä¸ª subnetï¼Œé™ä½äº†æ€§èƒ½ã€‚ switch çš„ ports æ•°é‡ä¸è¶³ä»¥åŒ¹é… subnet å†… host çš„æ•°é‡ã€‚ è¦åœ¨ä¸åŒçš„ subnet ä¹‹é—´ç§»åŠ¨ host éœ€è¦æ›´æ”¹ç‰©ç†æ¥çº¿ã€‚ VLAN å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚å®ƒé€šè¿‡è½¯ä»¶å¯¹ switch çš„ ports è¿›è¡Œé…ç½®ï¼Œå°† ports åˆ’åˆ†ä¸ºä¸åŒçš„ groupï¼Œæ¯ä¸ª group éƒ½å±äºä¸€ä¸ª subnetã€‚ä¸ºäº†å°†ä¸åŒ subnet ç›¸è¿ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª router å°†è¿™ä¸¤ä¸ª switch è¿æ¥èµ·æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå¾ˆå¤š switch éƒ½è‡ªå¸¦ä¸€ä¸ª routerã€‚\nå¯ä»¥ä½¿ç”¨ VLAN trunking å°†åˆ†å±äºä¸åŒ switch ä¸Šçš„ port è¿æ¥èµ·æ¥ä½œä¸ºä¸€ä¸ª VLANï¼šæ¯ä¸€ä¸ª switch ä¸Šæœ‰ä¸€ä¸ª trunk portï¼Œå°†éœ€è¦ trunking çš„ switch é€šè¿‡ trunk port ç›¸è¿ï¼Œå‘é€åˆ°å¯¹é¢ switch çš„ VLAN çš„ frame ä¼šè¢« forward åˆ° trunk portã€‚ trunking æ—¶ä½¿ç”¨çš„æ˜¯ extended Ethernet frame format 802.1Qï¼Œç”±å‘é€ç«¯çš„ switch å°†å¯¹åº”çš„ VLAN tag åŠ å…¥ header æ¥å¯¹ VLAN è¿›è¡Œæ ‡è¯†ã€‚\né™¤äº†åŸºäº switch port çš„ VLANï¼Œè¿˜æœ‰åŸºäº MAC address å’Œ network protocol çš„ VLANã€‚\nMultiprotocol Label Switching (MPLS) MPLS é‡‡å–äº†ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼šå®šé•¿çš„ label æ¥ä¼˜åŒ– IP router è¿›è¡Œ forward çš„é€Ÿåº¦ã€‚å®ƒä»ç„¶ä½¿ç”¨çš„æ˜¯ IP addressing å’Œ routingï¼Œä½†æ˜¯åœ¨ link layer header å’Œ network layer header ä¹‹é—´åŠ å…¥äº†ä¸€ä¸ª MPLS headerï¼Œå®ƒç”± labelã€expã€sã€TTL ç»„æˆã€‚\nMPLS frame ä»…ä»…èƒ½åœ¨æ”¯æŒ MPLS çš„ router ä¹‹é—´è¿›è¡Œä¼ è¾“ï¼Œåœ¨å¤„ç† MPLS datagram æ—¶ï¼Œrouter ä¸éœ€è¦å°† destination IP å±•å¼€å¹¶åœ¨ forwarding table ä¸­ look up æ¥è¿›è¡Œ longest prefix matchã€‚\nMPLS å¯ä»¥æ½œåœ¨æå‡ switching speedï¼Œä¹Ÿå¸¦æ¥äº†æ–°çš„ traffic management çš„èƒ½åŠ›ï¼Œå¦‚ VPNsã€‚\nData Center Networking å¤§å‹äº’è”ç½‘å…¬å¸å»ºé€ äº†è®¸å¤š data centersï¼Œå®ƒä»¬å¯¹å¤–æ¥å…¥ Internetï¼Œå¯¹å†…å­˜åœ¨ä¸€å¥— data center networksã€‚\ndata center ä¸»è¦æä¾› 3 ç§æœåŠ¡ï¼šprovide contentã€distributed computingã€cloud computingã€‚\ndata center å†…çš„ hosts ç§°ä¸º bladesï¼Œå‡ åä¸ª blades ç»„æˆä¸€ä¸ª rackï¼Œæ¯ä¸ª rack æœ‰ä¸€ä¸ª switchï¼Œè¢«ç§°ä¸º Top of Rack (ToR) switchã€‚\ndata center network æ”¯æŒä¸¤ç§ trafficï¼šå¤–éƒ¨çš„ clients ä¸å†…éƒ¨çš„ hosts ä¹‹é—´çš„ trafficã€å†…éƒ¨çš„ hosts ä¹‹é—´çš„ trafficï¼Œä¸ºäº†æ”¯æŒç¬¬ä¸€ç§ trafficï¼Œè®¾æœ‰ border routers æ¥è¿æ¥ Internetã€‚\nå¦å¤–ï¼Œä¸ºäº†åˆ†é…å¤–ç•Œå¤§é‡çš„ requestsï¼Œdata center network ä¸­è®¾æœ‰ load balancer æ¥åˆ†é…è¿™äº› requests ç»™ä¸åŒçš„ä½†æ˜¯æä¾›ç›¸åŒå†…å®¹çš„ hosts ä»è€Œå¹³è¡¡ loadï¼ŒåŒæ—¶ load balancer è¿˜èµ·åˆ°äº†ä¸€ä¸ª NAT-like çš„åŠŸèƒ½ã€‚\næ ‘çŠ¶çš„ç½‘ç»œç»“æ„ä½¿å¾— data center å¯ä»¥æ‹¥æœ‰ä¸Šä¸‡ä¸ª serversï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ç€ limited host-to-host capacity çš„é—®é¢˜ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ 3 ç§æ–¹æ³•ï¼š\néƒ¨ç½²æ›´é«˜é€Ÿç‡çš„ switch å’Œ routerï¼Œè¿™æ ·å¼€é”€ä¼šå¾ˆå¤§ã€‚ å°†éœ€è¦äº’ç›¸é€šä¿¡çš„ host å°½é‡æ”¾åœ¨ä¸€ä¸ªå­æ ‘ä¸‹ï¼Œè¿™æ ·ä¸å®¹æ˜“åšåˆ°ä¸”çµæ´»æ€§è¾ƒä½ã€‚ å°†ç›¸é‚»ä¸¤å±‚çº§çš„ switch ä¹‹é—´äº’ç›¸è¿é€šï¼Œå¢åŠ  interconnection çš„æ•°é‡ï¼Œè¿™æ ·åœ¨ä¼˜åŒ–æ€§èƒ½çš„åŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚ data center é€šå¸¸ä½¿ç”¨ SDN æ¥å¯¹ç½‘ç»œè¿›è¡Œé›†ä¸­å¼ç®¡ç†ã€‚\nä¸ºäº†æ–¹ä¾¿ cloud computing å’Œç½‘ç»œç®¡ç†ï¼Œdata center ä½¿ç”¨ virtual machine æ¥å°†è½¯ä»¶ä¸ç¡¬ä»¶è¿›è¡Œ decoupleã€‚ä¸ºäº†æ–¹ä¾¿ VM åœ¨ä¸åŒ host ä¹‹é—´ç§»åŠ¨ï¼Œå¯ä»¥å°†æ•´ä¸ª data center network çœ‹æˆæ˜¯ä¸€ä¸ª singleã€flatã€layer-2 networkã€‚è¦ä½¿æ‰€æœ‰çš„ hosts çœ‹ä¸Šå»æ˜¯ä¸å•ä¸ªçš„ switch ç›¸è¿ï¼Œå¯ä»¥å°† ARP çš„æœºåˆ¶æ”¹æˆä¸€ä¸ªç±»ä¼¼ DNS query çš„æœºåˆ¶ï¼Œå¹¶ä¸”ç»´æŠ¤ä¸€å¼ åˆ†é…ç»™ VM çš„ IP åœ°å€åˆ° VM å¯¹åº”çš„ ToR switch çš„æ˜ å°„è¡¨ã€‚\ndata center å†…éƒ¨çš„ hosts æœ‰é™ï¼Œå› æ­¤å†…éƒ¨ network çš„ buffer size å’Œ delay ä¹Ÿå¾ˆå°ï¼Œå¹¶ä¸” congestion control ä¼šé™ä½æ€§èƒ½ï¼Œå› æ­¤ä¸€èˆ¬ä½¿ç”¨é’ˆå¯¹ data center çš„ TCP protocolsã€‚\nmodular data center (MDC) æ˜¯ä¸€ä¸ªç”±è‡³å¤šæ•°åƒä¸ª hosts ç»„æˆçš„ containerï¼Œå½“ MDC å†…éƒ¨çš„æŸä¸ª component åæ‰æ—¶ï¼ŒMDC å¯ä»¥ä»¥ degraded performance ç»§ç»­å·¥ä½œï¼Œå½“å¾ˆå¤š components éƒ½åæ‰çš„æ—¶å€™ï¼Œæ•´ä¸ª MDC å°±ä¼šè¢«ä¸¢å¼ƒã€‚\nå¾ˆå¤šå…¬å¸ä¼šå®šåˆ¶ä»–ä»¬çš„ data center å†…çš„å‡ ä¹ä¸€åˆ‡å†…å®¹ã€‚\nAmazon ä½¿ç”¨ â€œavailable zonesâ€ å°† data center åœ¨é‚»è¿‘ä½†æ˜¯ä½ç½®ä¸åŒçš„åœ°æ–¹è¿›è¡Œå¤åˆ¶ï¼Œä»è€Œæä¾› fault toleranceï¼Œä¹Ÿä¿è¯äº† low latencyï¼Œæé«˜äº†æœåŠ¡çš„å¯é æ€§ã€‚\n","description":"The Link Layer and LANs","tags":["Computer Network","CNATDA"],"title":"CNATDA ç¬¬å…­ç« å­¦ä¹ ç¬”è®°","uri":"/posts/cnatda-ch6/"},{"categories":["Study Notes","CNATDA"],"content":"ä½ å£å®‰è®¡ç½‘æ€ä¹ˆå†…å®¹åˆå¤šè¯¾æ—¶åˆå°‘è€ƒçš„è¿˜æ—©å•Šï¼ˆæ¼ï¼‰\nç¬¬ä¸‰ç« è®²çš„å¤ªå¿«æ²¡æ¥åŠçœ‹ä¹¦ï¼Œå°±å…ˆå’•å’•å’•äº†ã€‚\nç°åœ¨è¡¥å®Œç¬¬ä¸‰ç« äº†\nOverview of Network Layer Network layer å¯ä»¥ç»†åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šdata plane å’Œ control planeã€‚\ndata plane çš„ä¸»è¦åŠŸèƒ½æ˜¯ forwardingï¼ˆä¹Ÿå«åš switching ï¼‰ï¼Œä¹Ÿå°±æ˜¯ç”± router å†³å®šå°† input link æ”¶åˆ°çš„æ•°æ®è½¬å‘åˆ°å“ªä¸ª output linkã€‚\nrouter ä¸­ä½¿ç”¨ä¸€ä¸ª forwarding tableï¼Œæ ¹æ® packet header ä¸­çš„æŸäº› fields æ¥ index forwarding tableï¼Œä»è€Œå¾—åˆ° outgoing link interfaceã€‚\ncontrol plane çš„ä¸»è¦åŠŸèƒ½æ˜¯ routingï¼Œå³å†³å®šä» sending host åˆ° receiving host åˆ°è·¯å¾„ã€‚\nè®¡ç®— forwarding table ä¹Ÿæ˜¯ control plane çš„ä»»åŠ¡ï¼Œå®ƒæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š\nthe traditional approachï¼šrouter ä¹‹é—´é€šè¿‡ router protocol è¿›è¡Œé€šä¿¡ï¼Œç„¶åä½¿ç”¨ routing algorithm è®¡ç®—å¾—åˆ° forwarding tableã€‚ the SDN approachï¼šrouter åªè¿›è¡Œ forwardingï¼Œrouting ç”±ä¸€ä¸ª remote controller å®Œæˆâ€”â€”router å‘ remote controller å‘é€ä¿¡æ¯ï¼Œç”± remote controller è®¡ç®—å¾—åˆ° forwarding table å‘é€ç»™ routerã€‚è¿™ä¸ª remote controller é€šå¸¸ç”±è½¯ä»¶å®ç°ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸º software-defined networkingã€‚ Whatâ€™s Inside a Router? router åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\ninput ports: incoming link çš„ physical layer å’Œ link layer look up: ä» forwarding table æŸ¥æ‰¾å¯¹åº”çš„ output port å°† control packets forward åˆ° routing processor å­˜åœ¨ input queue switching fabric: è¿æ¥ input ports å’Œ output ports output ports: outgoing link çš„ physical layer å’Œ link layer å­˜åœ¨ output queue routing processor: æ‰§è¡Œ control-plane çš„åŠŸèƒ½ï¼Œè®¡ç®— forwarding tableï¼Œè¿›è¡Œ network management traditional: æ‰§è¡Œ routing protocols SDN: ä¸ remote controller è¿›è¡Œé€šä¿¡ input portsã€output ports å’Œ switching fabric é€šå¸¸ä½¿ç”¨ç¡¬ä»¶å®ç°ï¼Œè¿™æ ·ä½¿å¾— forwarding çš„é€Ÿç‡åœ¨ ns çº§ä»è€Œä¿è¯é€šä¿¡é€Ÿç‡ã€‚è€Œ control plane çš„åŠŸèƒ½ä¸€èˆ¬åªéœ€ä¿æŒåœ¨ ms æˆ– s çº§ï¼Œå¯ä»¥ç”¨è½¯ä»¶å®ç°ã€‚\nInput Port Processing and Destination-Based Forwarding forwarding table ä¸€èˆ¬ç”± routing processors æ›´æ–°æˆ–è€…æ¥æ”¶è‡ªä¸€ä¸ª remote SDN controllerã€‚\nå¤šä¸ª input ports å¯ä»¥åˆå¹¶åœ¨ä¸€ä¸ª line card ä¸Šï¼Œforwarding table ä¼šä» routing processor ç»™æ¯ä¸ª line card å¤åˆ¶ä¸€ä»½ï¼Œä»è€Œå¯ä»¥åœ¨æ¯ä¸ªå±€éƒ¨åˆ†åˆ«è®¡ç®—ã€‚\ndestination-based forwarding çš„ forwarding table ä¸€èˆ¬ä»¥ IP åœ°å€å‰ç¼€ä¸º indexï¼Œlink interface ä¸º value è¿›è¡Œ longest prefix matchingã€‚\nlookup éœ€è¦åœ¨ ns çº§åˆ«å®ç°ï¼Œè€Œ forwarding table ä¸€èˆ¬å¾ˆå¤§ï¼Œå› æ­¤è¿˜éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„ç®—æ³•æˆ–å­˜å‚¨å™¨ã€‚\ninput ports çš„ processing è¿˜éœ€è¦åŒ…æ‹¬ physical-layer å’Œ link-layer processingï¼Œå¯¹ packets çš„ version numberã€checksumã€TTL çš„æ£€æŸ¥ä¸æ›´æ”¹ï¼Œå¯¹ network management çš„ couters è¿›è¡Œæ›´æ–°ã€‚\nSwitching switching æœ‰å¤šç§å½¢å¼ï¼š\nvia memory: ä» input port å¤åˆ¶åˆ° memory å†å¤åˆ¶åˆ° output portï¼Œå¦‚æœä½¿ç”¨é›†ä¸­çš„ memory è€Œä¸æ˜¯æ¯ä¸ª line card å•ç‹¬çš„ memory ä¼šå¯¼è‡´ä¼ è¾“é€Ÿç‡æ”¶åˆ° memory çš„é€Ÿç‡é™åˆ¶ï¼Œè€Œä¸”ä¸€æ¬¡åªèƒ½ä¼ è¾“ä¸€ä¸ª packet via a bus: å°† packet åŠ ä¸Šä¸€ä¸ª label ç„¶åé€šè¿‡ bus ä¼ è¾“åˆ°æ‰€æœ‰çš„ output portï¼Œæ ¹æ® label å†³å®šæ˜¯å¦ç•™ä¸‹ï¼Œä¼ è¾“é€Ÿç‡æ”¶åˆ° bus çš„é€Ÿç‡é™åˆ¶ï¼Œä¸€æ¬¡åªèƒ½ä¼ è¾“ä¸€ä¸ª packet via an interconnection network: æ¯ä¸ª input port å¯¹åº”ä¸€ä¸ª busï¼Œæ¯ä¸ª output port å¯¹åº”ä¸€ä¸ª busï¼Œæ¯å¯¹ input port bus å’Œ output port bus ä¹‹é—´éƒ½æœ‰ crosspointï¼Œé€šè¿‡æ§åˆ¶ crosspoint æ¥æ§åˆ¶ä»å“ªä¼ åˆ°å“ªã€‚è¿™æ˜¯ non-blocking çš„ï¼Œåªè¦ä¸¤ä¸ª pakcet çš„ output port ä¸åŒå°±èƒ½åŒæ—¶ä¼ è¾“ã€‚ Input Queuing å¦‚æœ switching fabric çš„é€Ÿç‡å¤§äºæ‰€æœ‰ input port çš„é€Ÿç‡ä¹‹å’Œï¼Œåˆ™ä¸€èˆ¬ä¸ä¼šå‘ç”Ÿ input queuingï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬çš„ output port éƒ½ç›¸åŒçš„è¯è¿˜æ˜¯ä¼šå­˜åœ¨ queuingã€‚\nä»¥ switching via interconnection network ä¸ºä¾‹ï¼Œä¸€ä¸ª packet å³ä½¿æ²¡æœ‰å’Œå®ƒ output port ç›¸åŒçš„ packet ä¹Ÿå¯èƒ½å› ä¸º input queue ä¸­åœ¨å®ƒå‰é¢çš„å…¶ä»– packet è€Œè¢« blockï¼Œå³ HOL blockingã€‚\nOutput Queueing å¦‚æœ packet åˆ°è¾¾ output port çš„é€Ÿç‡è¶…è¿‡äº† output line çš„é€Ÿç‡åˆ™ä¼šå‘ç”Ÿ output queuingã€‚\nå½“ packet åˆ°è¾¾ output port çš„æ—¶å€™ buffer æ»¡äº†åˆ™éœ€è¦è€ƒè™‘ä¸¢å¼ƒå“ªä¸ª packetã€‚åœ¨ buffer æ»¡ä¹‹å‰è¿›è¡Œ pakcet dropping æˆ–è€… marking ç§°ä¸º active queue management (AQM)ã€‚\nHow Much Buffer Is â€œEnoughâ€ ? å­˜åœ¨ $N$ ä¸ª TCP connection flow ç»è¿‡ä¸€ä¸ªå¸¦å®½ä¸º $C$ çš„ link æ—¶ï¼Œéœ€è¦çš„ buffer å¤§å°ä¸º $\\mathrm{B=RTT\\cdot C/\\sqrt{N}}$ã€‚\næ‹¥æœ‰æ›´å¤§çš„ buffer è™½ç„¶èƒ½å‡å°‘ lossï¼Œä½†æ˜¯ä¹Ÿä¼šå¸¦æ¥æ›´å¤§çš„ queuing delayã€‚TCP å¯èƒ½ä¼šä½¿å¾— buffer ä¸€ç›´ä¸è¢«æ¸…ç©ºï¼Œä»è€Œå¯¼è‡´ queuing delay æ˜¯ constant ä¸” persistent çš„ï¼Œè¿™è¢«ç§°ä¸ºæ˜¯ bufferfloatï¼Œå¯ä»¥é€šè¿‡é‡‡å– AQM æ¥å‡ç¼“ã€‚\nPacket Scheduling ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nFIFO (First In First Out) priority queuing: ä¼˜å…ˆçº§é«˜çš„å…ˆå¼€å§‹ä¼ è¾“ weight fair queuing (WFQ): ç»™æ¯ä¸ª class ä¸€ä¸ªæƒé‡æ¥ä¾æ¬¡ä¼ è¾“ï¼Œä¿è¯è¿™ä¸ª class çš„ä¼ è¾“é¢‘ç‡æ˜¯ $\\frac{w_i}{\\sum w}$ The Internet Protocol (IP) ç°åœ¨ä½¿ç”¨æœ€å¤šçš„ Internet protocol æ˜¯ IPv4 ï¼ŒåŒæ—¶ IPv6 ä¹Ÿåœ¨é€æ¸å–ä»£ IPv4 ã€‚\nIPv4 Datagram Format IPv4 çš„ datagram æ ¼å¼å¦‚ä¸‹ã€‚\nversion number: é•¿åº¦ä¸º 4 bit ï¼Œè¡¨ç¤º IP åè®®çš„ç‰ˆæœ¬ã€‚ header length: ç”±äºéå®šé•¿çš„ options field çš„å­˜åœ¨ï¼Œéœ€è¦ç”¨ header length è¡¨ç¤º header çš„é•¿åº¦ï¼Œä½†æ˜¯ä¸€èˆ¬ options ä¸ºç©ºï¼Œæ‰€ä»¥ header length ä¸€èˆ¬ä¸º 20 byte ã€‚ type of service (TOS) : ç”¨æ¥åŒºåˆ†ä¸åŒç±»åˆ«çš„ datagram ã€‚ datagram length: header + data çš„é•¿åº¦ã€‚ identifierã€flagsã€fragmentation offset: è¾ƒå¤§çš„ datagram ä¼šè¢«åˆ†æˆä¸€äº›è¾ƒå°çš„ datagram å¹¶åˆ†åˆ« forward ï¼Œè¿™äº›æ˜¯ç”¨æ¥è¯†åˆ«å®ƒä»¬çš„ã€‚ time-to-live: æ¯è¢«ä¸€ä¸ª router åŠ å·¥å°±ä¼šå‡å°‘ 1 ï¼Œæˆä¸º 0 çš„æ—¶å€™å°±ä¼šè¢«ä¸¢å¼ƒï¼Œç”¨æ¥é˜²æ­¢æ­»å¾ªç¯ã€‚ protocol: åªä¼šåœ¨åˆ°è¾¾ç»ˆç‚¹çš„ network layer æ—¶ä½¿ç”¨ï¼Œè¡¨æ˜åº”è¯¥äº¤ç»™å“ªä¸ª transport layer çš„åè®®ã€‚ header checksum: æ£€éªŒ bit errors ï¼Œheader éƒ¨åˆ†æ¯ 2 bytes ç´¯åŠ ï¼Œå¾—åˆ°çš„ç»“æœå†å–åï¼Œæ£€æŸ¥æ˜¯å¦ä¸å­˜å‚¨åœ¨è¿™ä¸ª field çš„å€¼ç›¸åŒã€‚è‹¥ä¸åŒï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒã€‚ source and destination IP address: èµ·ç‚¹ä¸ç»ˆç‚¹çš„ IP åœ°å€ã€‚ options: å…è®¸ IP header å¾—ä»¥æ‹“å±•ï¼Œä½†æ˜¯å¾ˆå°‘è¢«ä½¿ç”¨åˆ°ã€‚ data (payload): åŒ…æ‹¬ transport layer çš„ segment ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç±»å‹çš„ data ï¼Œå¦‚ ICMP messages ã€‚ å¦‚æœ options ä¸ºç©ºï¼Œåˆ™ä¸€ä¸ª IP header é•¿åº¦æ˜¯ 20 bytes ï¼Œå¦‚æœä½¿ç”¨ TCP åè®®ï¼Œåˆ™è¿™ä¸ª datagram çš„æ€»çš„ header é•¿åº¦ä¸º 40 bytes ã€‚\nIPv4 Addressing ä¸€ä¸ª host å’Œä»–çš„ physical link ä¹‹é—´çš„è¾¹ç•Œå°±æ˜¯ interface ï¼Œç±»ä¼¼çš„ï¼Œä¸€ä¸ª router å’Œå®ƒæ¯ä¸€ä¸ªè¿æ¥çš„ link ä¹‹é—´çš„è¾¹ç•Œä¹Ÿæ˜¯ä¸€ä¸ª interface ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®ç›¸æ¯”äºä¸€ä¸ª IP åœ°å€è¯†åˆ«çš„æ˜¯ä¸€ä¸ª host ï¼Œå®ƒè¯†åˆ«çš„æ˜¯ä¸€ä¸ª interface çš„è¯´æ³•æ›´å‡†ç¡®ã€‚\nIP åœ°å€é•¿åº¦ä¸º 32 bits ï¼Œç”¨ dotted-decimal notation è¡¨ç¤ºã€‚\nhost interfaces å’Œå®ƒä»¬è¿æ¥çš„ router çš„ interface å…±åŒç»„æˆä¸€ä¸ª subnet ï¼Œä¹Ÿç§°ä¸º network ã€‚\nIP åœ°å€æŒ‰ç…§ 223.1.1.0/24 çš„å½¢å¼åˆ†é…ç»™ subnet ï¼Œå…¶ä¸­ 24 ç§°ä¸º subnet mask ï¼Œæ˜¯ IP åœ°å€åŒ¹é…è¿‡ç¨‹ä¸­è‡³å°‘éœ€è¦åŒ¹é…çš„ prefix çš„é•¿åº¦ï¼Œè€Œ 223.1.1.0 çš„å‰ 24 bits å°±æ˜¯è¿™ä¸ª subnet çš„åœ°å€ã€‚\nInternet åˆ†é… IP åœ°å€çš„ç­–ç•¥æ˜¯ Classless Interdomain Routing (CIDR) ã€‚åœ¨ CIDR è¢«é‡‡ç”¨ä¹‹å‰ï¼Œæœ€å¸¸é‡‡ç”¨çš„æ˜¯ classful addressing ï¼Œsubnet mask length åªèƒ½ä¸º 8ã€16ã€24 bits ï¼Œåˆ†åˆ«ç§°ä¸º class A, B, C network ï¼Œå¯¼è‡´ä¸åŒ subnet å¯åˆ†é…åœ°å€æ•°é‡å·®å¼‚è¿‡å¤§ï¼Œéš¾ä»¥æŒ‰éœ€åˆ†é…ã€‚\nlongest prefix matching ä½¿å¾— address aggregation æˆä¸ºå¯èƒ½ï¼šæ‹¥æœ‰ç›¸åŒ prefix çš„ subnet å¯ä»¥åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„ subnet ã€‚\n255.255.255.255 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ IP åœ°å€ï¼Œè¡¨ç¤º broadcast åœ°å€ã€‚destination address ä¸º broadcast åœ°å€çš„ datagram ä¼šè¢«å‘é€ç»™ subnet å†…çš„æ‰€æœ‰ host ï¼Œä¹Ÿå¯èƒ½å‘é€ç»™ neighboring subnet ã€‚\nObtaining Addresses Obtaining a Block of Addresses IP address block ç”± ICANN ç®¡ç†å¹¶åˆ†é…ç»™ ISP å’Œä¸€äº› organizations ï¼Œå®ƒä»¬å¾—åˆ°ä¹‹åè¿˜å¯ä»¥å°† IP address block æ›´ç»†åˆ†ç„¶ååˆ†é…ç»™ç”¨æˆ·ã€‚\nObtaining a Host Address: DHCP router çš„ IP åœ°å€ä¸€èˆ¬æ˜¯æ‰‹åŠ¨è®¾ç½®çš„ï¼Œè€Œ host çš„åœ°å€åˆ™æ˜¯é€šè¿‡ Dynamic Host Configuration Protocol (DHCP) è·å¾—çš„ã€‚\næ¯ä¸ª subnet éƒ½ä¼šæœ‰è‡³å°‘ä¸€ä¸ª DHCP server æˆ–è€…ä¸€ä¸ªçŸ¥é“ DHCP server address çš„ DHCP relay agent (ä¸€ä¸ª router ) ï¼Œç”±å®ƒä»¬æ¥ç»™ host æä¾›ä¸´æ—¶çš„ IP åœ°å€ã€‚\nDHCP è·å– IP åœ°å€çš„æ­¥éª¤å¦‚ä¸‹ï¼š\nDHCP server discovery: æ–°æ¥çš„ host é€šè¿‡ UDP å‘é€ç»™ 255.255.255.255 ï¼Œport 67 ï¼Œä½¿ç”¨ transaction ID ä½œä¸º identifier ã€‚ DHCP server offer(s): DHCP server æ”¶åˆ° discover message åå‘é€ offer message ç»™ 255.255.255.255 ï¼Œport 68 ï¼ŒåŒ…å« yiaddr ã€transaction IP ã€DHCP server IP ã€Lifetime ã€‚ DHCP request: host æ”¶åˆ° DHCP offer åé€‰æ‹©å…¶ä¸­ä¸€ä¸ªä½œä¸º IP åœ°å€ï¼Œç„¶åä»¥ broadcast çš„æ–¹å¼å‘é€ DHCP requestï¼Œä¸ DHCP offer å…·æœ‰ç›¸ä¼¼çš„ç»“æ„ã€‚ DHCP ACK: DHCP server æ”¶åˆ° DHCP request åå‘é€ DHCP ACK ã€‚ Network Address Translation (NAT) subnet éœ€è¦ä¸€æ®µè¿ç»­çš„ IP åœ°å€ï¼Œå¦‚æœè®¾å¤‡æ•°é‡è¶…è¿‡äº†åŸå…ˆåˆ†é…çš„ IP address block çš„æ•°é‡å°±éš¾ä»¥åˆ†é…æ–°çš„åœ°å€ï¼Œäºæ˜¯å¼•å…¥äº† Network Address Translation (NAT) çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nä½¿ç”¨ NAT æ—¶ï¼Œsubnet å†…éƒ¨ä½¿ç”¨ IP address space reserved for private network ï¼ˆ10.0.0.0/8ã€172.168.0.0/16ã€192.168.0.0/16ï¼‰ï¼Œç”¨ä¸€ä¸ª router ä¸å¤–ç•Œè¿æ¥å¹¶è¿›è¡Œ NAT ï¼Œè¿™ä¸ª router å¯¹å¤–ç•Œè¡¨ç°ä¸º a single device with a single IP addressï¼Œé€šè¿‡ NAT translation table åœ¨ private address + port ä¸ WAN-side address + port ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼ˆç»™æ¯ä¸ª host ä»¥åŠ application port åˆ†é…ä¸€ä¸ª NAT port è¿›è¡ŒåŒºåˆ†ï¼‰ã€‚è¿™ä¸ª router çš„ public address ä» ISP è·å¾—ï¼ŒåŒæ—¶å®ƒä½œä¸º DHCP server ä¸º subnet å†…éƒ¨æä¾› private address ã€‚\nNAT åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ subnet å†…çš„ port ä¸€èˆ¬ä¼šå˜ï¼Œè€ŒæŸäº›æ—¶å€™éœ€è¦ç‰¹å®šçš„ä¸å˜çš„ port ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ NAT traversal æ¥è§£å†³ã€‚\nIPv6 ä¸ºäº†è§£å†³ IPv4 åœ°å€å³å°†è¢«è€—å°½çš„é—®é¢˜ï¼Œäººä»¬å‘æ˜äº† IPv6 ï¼Œé™¤äº†å°†åœ°å€é•¿åº¦ä» 32 bits æ‰©å±•åˆ°äº† 128 bits ï¼ŒIPv6 è¿˜è§£å†³äº† IPv4 ä¸­å…¶ä»–ä¸€äº›é—®é¢˜ã€‚\nIPv6 datagram çš„ä¸»è¦æ ¼å¼å¦‚ä¸‹ï¼š\nä¸»è¦å˜åŒ–æœ‰ï¼š\nåœ¨ unicast å’Œ broadcast çš„åŸºç¡€ä¸Šå¼•å…¥äº† anycast addressï¼Œå…è®¸äº†å‘å¤šä¸ªåœ°å€ä¹‹ä¸€å‘é€ datagramã€‚ ä½¿ç”¨å®šé•¿ä¸º 40 bytes çš„ headerã€‚ å¼•å…¥ flow table ä½¿å¾— router å¯ä»¥å¯¹ flow è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ åˆ é™¤ fragmentation æé«˜æ€§èƒ½ï¼Œå¦‚æœ datagram å¤ªå¤§åˆ™ç›´æ¥ä¸¢å¼ƒå¹¶å‘é€ç›¸åº”çš„ ICMP error messageã€‚ åˆ é™¤ header checksum å†—ä½™åŠŸèƒ½æé«˜äº†æ•ˆç‡ã€‚ åˆ é™¤ options ï¼Œå…¶ä¸­ next header ä¸ä¸€å®šæ˜¯ transport layer protocol ï¼Œä¹Ÿå¯ä»¥æ˜¯ optionã€‚ TOS æ”¹ä¸º traffic class ï¼ŒTTL æ”¹ä¸º hop limit ï¼Œdatagram length æ”¹ä¸º payload lengthï¼ˆä¸åŒ…å« header lengthï¼‰ï¼Œprotocol æ”¹ä¸º next headerã€‚ ç”±äº IPv4 åˆ° IPv6 çš„è½¬æ¢ä»åœ¨è¿›è¡Œä¸­ï¼Œä¸ºäº†å…¼å®¹æ—§çš„è®¾å¤‡ï¼Œé‡‡ç”¨ tunneling å°† IPv6 çš„ datagram ä½œä¸º IPv4 çš„ payload è¿›è¡Œä¼ è¾“ï¼Œå…¶ä¸­ä¸¤ä¸ª IPv6 router ä¹‹é—´çš„ IPv4 router è¢«ç§°ä¸º tunnel ã€‚\nGeneralized Forwarding and SDN Generalized Forwarding åŸºäº â€œmatch-plus-actionâ€ çš„åŸåˆ™ï¼Œç›¸å¯¹äº destination-based forwardingï¼Œâ€œmatchâ€ æ—¶è¿˜å¯ä»¥è€ƒè™‘ IP header field ä¸­ destination ä»¥å¤–çš„ fields ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ link-layer headerã€transport-layer header ç­‰ï¼Œè€Œ â€œactionâ€ é™¤äº† forward è¿˜å¯ä»¥ dropã€ä¿®æ”¹ header field ç­‰ã€‚\nOpenFlow æ˜¯ä¸€ä¸ª generalized forwarding çš„åè®®ï¼Œè§„å®šäº† match æ—¶å¯ä»¥/ä¸èƒ½ä½¿ç”¨å“ªäº› fieldï¼Œä»¥åŠå¯ä»¥é‡‡å–å“ªäº› actionã€‚\nMiddleboxes network ä¸­é™¤äº† forwarding ä¹‹å¤–ç”¨æ¥å®ç°ä¸€äº›å…¶ä»–åŠŸèƒ½çš„è®¾å¤‡ç§°ä¸º middleboxï¼Œå®ƒä»¬ä¸»è¦æä¾›ä¸€ä¸‹å‡ ç§åŠŸèƒ½ï¼š\nNAT translation security servicesï¼Œå¦‚ firewall performance enhancementï¼Œå¦‚ Web cache middlebox åœ¨ä¸€å®šç¨‹åº¦ä¸Šç ´åäº† network å±‚çš„ layered architecture ï¼Œä¹Ÿå°±æ˜¯ abstraction çš„æ¦‚å¿µã€‚\n","description":"The Network Layer: Data Plane","tags":["Computer Network","CNATDA"],"title":"CNATDA ç¬¬å››ç« å­¦ä¹ ç¬”è®°","uri":"/posts/cnatda-ch4/"},{"categories":["CS"],"content":"ä» 8 æœˆåˆåˆ°ç°åœ¨ï¼Œå†æ—¶å°†è¿‘ 3 ä¸ªæœˆï¼Œæˆ‘æ‰ç»ˆäºé€šå…³äº† CS61A, Summer 2020 ï¼Œå› ä¸º 8 æœˆæ—¶è¿‡äºæ€ æƒ°ï¼Œå¼€å­¦ä¹‹ååˆæœ‰ä¸°å¯Œå¤šå½©çš„è¯¾ç¨‹è¡¨ï¼ˆä¸æ„§æ˜¯ä½ å•Šï¼ŒHUSTï¼‰ï¼Œå¯¼è‡´æˆ˜çº¿æ‹‰çš„è¿™ä¹ˆé•¿ï¼ˆç¢ç¢å¿µï¼‰ã€‚\nåœ¨ CS61A è¿™é—¨è¯¾ä¸­ï¼Œæ”¶è·çš„è¿œè¿œä¸æ­¢æ˜¯ Pythonã€Schemeã€SQL è¯­æ³•ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªä¸ªç²¾å¿ƒè®¾è®¡çš„ labã€hwã€projï¼Œè®©æˆ‘èƒ½åˆ‡èº«å®é™…çš„æ„Ÿå—åˆ°ç¼–ç¨‹çš„é­…åŠ›ï¼Œå¦å¤–ï¼Œè®¤çœŸå®Œæˆè¿™äº›ä»»åŠ¡åï¼Œæˆ‘å¯¹ CS é¢†åŸŸä¸­çš„ä¸å°‘ç†å¿µï¼Œå¦‚ â€œabstractionâ€ ç­‰ï¼Œæœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ï¼Œè¿™ç»å¯¹æ˜¯ä¹–ä¹–è·Ÿç€ HUST ç­”è¾©è¯¾ç¨‹å­¦ä¹ æ‰€å¾—ä¸åˆ°çš„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼ŒCS61A ä¸ºæˆ‘æ‰“å¼€äº† CS çš„ç¬¬ä¸€æ‰‡é—¨ï¼Œå°½ç®¡å®ƒä¸æ˜¯æˆ‘çœ‹çš„ç¬¬ä¸€ä¸ªå›½å¤–ä¼˜è´¨è¯¾ç¨‹ã€‚\nä¸ä»…ä»…æ˜¯ CS æœ¬èº«çš„ä¹è¶£ï¼Œæ•™æˆè¿™é—¨è¯¾çš„ John DeNero æ•™æˆä¹Ÿæ˜¯å¹½é»˜é£è¶£ï¼Œèƒ½ä¼ æˆäººç”Ÿå“²ç†çš„è€å¸ˆã€‚æ¯”å¦‚ä¸‡åœ£èŠ‚æ—¶ DeNero æ•™æˆå€¾å¿ƒå½•åˆ¶çš„è§†é¢‘ï¼Œå¸¦ç€ææ€ªå—ç“œå¸½å­çš„æ•™æˆç€å®æœ‰è¶£ï¼Œä½†æ˜¯æ›´å€¼å¾—æ³¨æ„çš„æ˜¯ä»–çš„è¯ï¼šæˆ‘ä»¬ä¸åº”è¯¥ä¸º GPA æ‰€å›°æ‰°ï¼ŒCS çš„å­¦ä¹ æœ¬èº«æ˜¯ä¸€ä»¶å¾ˆæœ‰è¶£çš„äº‹æƒ…ã€‚\nComputers and science, how did they meet?\nComputers are cool, and science is neat.\nBut then, one day, they must have teamed up on the street.\nAnd created this course, in which I have a seat.\nAnd itâ€™s hard, the projects are tough to complete,\nAnd Scheme seems more like a trick than a treat.\nAnd the tests, the tests are the very worst part.\nI study, I practise, and Iâ€™m really smart.\nAnd I know all the rules of assignment by heart.\nBut the day of the midterm, the TA says start,\nAnd all of my test taking plans fall apart,\nBecause the problems are even more abstract than art,\nSometimes I canâ€™t even solve problem one,\nAnd why is problem named some stupid pun?\nAnd that jerk Fibonacci, heâ€™s so overdone.\nComputers and science has teamed up and won.\nBut hold onâ€¦, courses arenâ€™t lost, they arenâ€™t won,\nAnd learning to program is suppose to be fun.\nSo donâ€™t let these tests and these points get the best of you,\nGrades in your major count less than you think they do.\nIâ€™ve never heard them come up in an interview.\nAnd the faculty I know really likes students who might not aced every test, but donâ€™t quit\nThey focus on learning, improvement, and grit\nAnd soon they have learned about more than a few things\nAnd all their hard work made them able to do things\nAnd doing things, thatâ€™s what the world cares for.\nWhat you can do matters more than your score.\nä¹Ÿæ˜¯å› ä¸ºçœ‹è¿‡äº† CS61A ï¼Œè¿™æ›´åŠ åšå®šäº†æˆ‘ä¸€å®šè¦ç”³è¯·åˆ° PhD çš„æƒ³æ³•ï¼Œå¸Œæœ›å¤§ä¸‰çš„æ—¶å€™èƒ½æœ‰æœºä¼šæŠ¥å UCB çš„ BGA é¡¹ç›®ï¼Œæ‹¿ä¸€å°ä»½é‡è¶³å¤Ÿçš„æ¨èä¿¡ï¼ˆåšæ¢¦ä¹Ÿæƒ³å»å››å¤§ğŸ˜­\nå¥½äº†ï¼Œå›å½’æ­£é¢˜ï¼Œè¯´è¯´ CS61A ç©¶ç«Ÿè®²äº†äº›å•¥ã€‚\né¦–å…ˆï¼Œå½“ç„¶æ˜¯åŸºç¡€çš„ Python è¯­æ³•äº†ï¼Œä½†æ˜¯å’Œå›½å†…æ•™å­¦ C è¯­è¨€è¯­æ³•ä¸åŒï¼ŒCS61A é€šè¿‡ Python è¿˜è®²æˆäº† CS é¢†åŸŸé‡è¦çš„æ¦‚å¿µâ€”â€”abstractionï¼Œå¦å¤–ï¼Œé€šè¿‡ä»–çš„ labã€hw ï¼Œä½ èƒ½å¯¹é€’å½’æœ‰ä¸€ä¸ªæ›´æ·±åˆ»çš„ç†è§£ã€‚\nå…¶æ¬¡ï¼ŒPython ä½œä¸ºè‘—åçš„ OOP (Object-Oriented-Programming) ä¾‹å­ï¼Œå½“ç„¶è¦è®²è®² OOP ç©¶ç«Ÿæ˜¯ä¸ªå•¥ç©æ„äº†ã€‚æˆ‘ä¹‹å‰å¯¹é¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡çš„ç†è§£çº¯ç²¹æ¥è‡ªäºå»–é›ªå³°çš„ Java æ•™ç¨‹ä¸­æåˆ°çš„ã€Œå»ºé€ å‡³å­ã€çš„ä¾‹å­ï¼Œå¯ä»¥è¯´å¹¶æ²¡æœ‰å®Œå…¨ç†è§£ï¼Œä½†æ˜¯è¢«é—®åˆ°å¯ä»¥ç”¨è¿™ä¸ªä¾‹å­ç³Šå¼„è¿‡å»ï¼ˆæ‚è„¸ï¼‰ã€‚åœ¨çœ‹è¿‡ John DeNero æ•™æˆå¯¹ OOP çš„è§£é‡Šå¹¶ä¸”åšå®Œäº†ç›¸åº”çš„ç¼–ç¨‹ç»ƒä¹ ä¹‹åï¼Œæˆ‘è¿˜æ˜¯æŒºæœ‰è‡ªä¿¡åº”è¯¥ç†è§£äº† OOP çš„æ¦‚å¿µçš„ï¼Œç›¸æ¯”äºé¢å‘è¿‡ç¨‹ï¼ŒOOP è€ƒè™‘çš„æ˜¯ä¸€ä¸ªä¸ªçš„ object ï¼Œå®ƒå±äºä¸€ä¸ª class ï¼Œå¯ä»¥ç»§æ‰¿è¿™ä¸ª class çš„ attributes ï¼Œå®ƒä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ä¹Ÿå¯ä»¥æ‹¥æœ‰å±äºè‡ªå·±çš„ attributes ï¼ŒåŒæ—¶ï¼Œobject çš„æ‰€è°“çš„ã€Œå‡½æ•°ã€æ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ methodsï¼Œå®ƒçš„ä½œç”¨å¹¶ä¸æ˜¯è§£å†³æŸä¸€ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯å¯¹è¿™ä¸ª object åšæŸç§æ“ä½œçš„ã€Œæ–¹æ³•ã€ï¼Œè¯­è¨€çš„è¡¨è¾¾èƒ½åŠ›ç»ˆç©¶æœ‰é™ï¼Œè¦å®é™…ç†è§£ OOP ï¼Œè¿˜æ˜¯å¾—çœ‹çœ‹ DeNero æ•™æˆçš„è®²è§£ï¼Œç„¶ååšå®Œå¯¹åº”çš„ç»ƒä¹ ï¼Œget your hands dirty æ°¸è¿œæ˜¯å­¦ä¹  CS äº˜å¤ä¸å˜çš„çœŸç†ã€‚\nä¹‹åæ˜¯ schemeâ€”â€”lisp çš„ä¸€ç§æ–¹è¨€ï¼Œç”¨æ¥å­¦ä¹  functional programming å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç§€çš„æ ·ä¾‹ã€‚å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³å’Œå¦å¤–ä¸¤ç§ç¼–ç¨‹æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œæœ€å¤§çš„æ„Ÿå—æ˜¯ä½ ä¸å¾—ä¸æŠŠæ¯ä¸€ä¸ªæ­¥éª¤è€ƒè™‘æ¸…æ¥šæ‰èƒ½åŠ¨æ‰‹ coding ï¼Œä¸åƒæˆ‘å†™ Python å’Œ C++ ï¼Œæ€»æ˜¯æ²¡æƒ³æ¸…æ¥šå®ç°ç»†èŠ‚å°±å¼€å§‹å†™ä»£ç ã€‚è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯ recursionï¼Œåœ¨ scheme çš„ç»ƒä¹ ä¸­éœ€è¦å¤§é‡ç”¨åˆ° recursionï¼Œè¿™å¯ä»¥è¯´æ˜¯åœ¨é€¼è¿«ä½ åŠ æ·±å¯¹ recursionã€abstraction çš„ç†è§£ä¸è¿ç”¨äº†ã€‚å¦å¤–ï¼Œtail- recursion ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„ä¸œè¥¿ï¼Œè¿™ç©æ„è®©æˆ‘æ˜ç™½äº†å½“å¹´æ OI æ—¶å¬åˆ°çš„â€œå¼€ä¸å¼€æ— é™æ ˆï¼Ÿâ€ä¸­çš„æ— é™æ ˆåˆ°åº•æ˜¯å•¥ï¼ŒåŒæ—¶æ€è€ƒæŠŠä¸€ä¸ªæµªè´¹ä¸€å † frame çš„ recursion é€šè¿‡å¤šè®¾ç½®å‡ ä¸ªå¸¦çš„å˜é‡å˜æˆäº†åªæœ‰çº¿æ€§å¤§å°çš„ frame çš„ tail-recursion ä¹Ÿå¾ˆæœ‰æ„æ€ã€‚\næœ€åæ˜¯ä»¥ SQL ä½œä¸º declarative programming language çš„ä¾‹å­è®²äº† SQL çš„åŸºç¡€è¯­æ³•ä»¥åŠ declarative programming language çš„æ¦‚å¿µï¼Œè¿™å¯¹ä¹‹åæ•°æ®åº“çš„å­¦ä¹ èƒ½å¸¦æ¥ä¸å°‘å¸®åŠ©ã€‚\næ€»è€Œè¨€ä¹‹ï¼ŒCS61A ä¸€å®šæ˜¯ä¸€é—¨ä¼˜ç§€çš„ CS å…¥é—¨è¯¾ï¼Œæ— è®ºæ˜¯å¤§ä¸€è¿˜æ˜¯å¤§äºŒï¼ŒæŠ‘æˆ–æ˜¯ç ”ç©¶ç”Ÿï¼Œç”šè‡³æ˜¯åšå£«ç”Ÿï¼Œæˆ‘éƒ½ç›¸ä¿¡ CS61A æ˜¯å€¼å¾—èŠ±æ—¶é—´è®¤çœŸåˆ·å®Œçš„ä¸€é—¨è¯¾ï¼Œæ¯•ç«Ÿï¼Œå®ƒå¯æ˜¯èƒ½ç‚¹ç‡ƒå¯¹ CS çš„çƒ­æƒ…çš„ä¸€æŠŠç«å•Šï¼ï¼ˆæš´è®ºï¼‰\n","description":"CS61A, Summer 2020","tags":["CS61A"],"title":"CS61A é€šå…³æ„Ÿæƒ³","uri":"/posts/thoughts-on-completing-cs61a/"},{"categories":["Study Notes"],"content":" Info\nThis is my study note of the Stanford CS229 (Spring 2018), based on my understanding and the course notes released on the official website.\nThe note focuses on important ideas and formulas in machine learning, ignoring overt definitions and long derivations.\nLMS algorithm We now know that the cost function is $J(\\theta)=\\frac{1}{2}\\sum_{i=1}^{m}(h_{\\theta}(x^{(i)})-y^{(i)})^2$, then let's consider the gradient descent algorithm to minimize $J(\\theta)$. $$ \\theta_j:=\\theta_j-\\alpha\\dfrac{\\partial}{\\partial \\theta_j}J(\\theta) $$ Here, $\\alpha$ is called the learning rate.\nAnd we have $\\dfrac{\\partial}{\\partial \\theta_j}J(\\theta)=(h_{\\theta}(x)-y)x_j$ , then $$ \\theta_j:=\\theta_j+\\alpha\\left(y^{(i)} - h_{\\theta}(x^{(i)})x^{(i)}_j \\right) $$ The rule is called the LMS (least mean squares) update rule and is also known as the Widow-Hoff learning rule.\nOur first algorithm using LMS rule is batch gradient descent, it's main process is as follows:\nFor every $\\theta_j$, we have to run over the entire training set. Note that gradient descent algorithm can be susceptible to local minima in general.\nConsider another algorithm called stochastic (incremental) gradient descent, it is as follows:\nIn this algorithm, the $\\theta$ is updated every time we encounter a training example.\nCompare with batch gradient descent, stochastic gradient descent has several advantages:\nWhile batch gradient descent has to scan over the whole set to update a single $\\theta_j$, stochastic gradient descent can start making progress right away. It gets $\\theta$ close to the minimum much faster. (Note that it can never â€œconvergeâ€ to the minimum) For these reasons, we prefer stochastic gradient descent when the training set is large.\nThe normal equations The second way of minimizing $J$ is to do calculus with matrices.\nMatrix derivatives We define the derivative of $f: \\mathbb{R}^{m\\times n}\\mapsto\\mathbb{R}$ with respect to $A$ to be:\n$$ \\nabla_A f(A)=\\begin{bmatrix} \\frac{\\partial f}{\\partial A_{11}} \u0026 \\cdots \u0026 \\frac{\\partial f}{\\partial A_{1n}} \\\\ \\vdots \u0026 \\ddots \u0026 \\vdots \\\\ \\frac{\\partial f}{\\partial A_{n1}} \u0026 \\cdots \u0026 \\frac{\\partial f}{\\partial A_{nn}} \\end{bmatrix} $$\nFor trace operator, we have:\n$$ \\mathrm{tr}ABC=\\mathrm{tr}CAB=\\mathrm{tr}BCA \\\\ \\mathrm{tr}A=\\mathrm{A^T} \\\\ \\mathrm{tr}(A+B)=\\mathrm{A}+\\mathrm{B} \\\\ \\mathrm{tr}aA=a\\mathrm{tr}A $$\nFor combinations of these two operations, we have:\n$$ \\nabla_A \\mathrm{tr}AB=B^T \\\\ \\nabla_{A^T} f(A) = (\\nabla_A f(A))^T \\\\ \\nabla_A \\mathrm{tr}ABA^TC=CAB + C^T AB^T \\\\ \\nabla_A|A| = |A|(A^{-1})^T $$\nLeast squares revisited The training setâ€™s input can be written as the following matrix:\n$$ X = \\begin{bmatrix} - (x^{(1)})^T - \\\\ - (x^{(2)})^T - \\\\ \\vdots \\\\ - (x^{(m)})^T - \\end{bmatrix} $$\nAlso, let $\\vec{y}$ be\n$$ \\vec{y}=\\begin{bmatrix} y^{(1)} \\\\ y^{(2)} \\\\ \\vdots \\\\ y^{(m)} \\end{bmatrix} $$\nNow, since $h_{\\theta}(x^{(i)}) = (x^{(i)})^T\\theta$, we can verify that:\n$$ J(\\theta) = \\frac{1}{2}(X\\theta-\\vec{y})^T(X\\theta-\\vec{y}) $$\nTo minimize $J$, we can derive that:\n$$ \\partial_{\\theta}J(\\theta)=X^TX\\theta - X^T\\vec{y} $$\nThen we obtain the normal equations:\n$$ X^TX\\theta = X^T\\vec{y} $$\nThus, the value of $\\theta$ that minimizes $J$ is:\n$$ \\theta = (X^TX)^{-1}X^T\\vec{y} $$\nProbabilistic interpretation To discover whether $J$ is a reasonable choice, let us assume that the target variables and the inputs are related via the equation\n$$ y^{(i)} = \\theta^T x^{(i)} + \\epsilon^{(i)} $$\nLet us further assume that the $\\epsilon^{(i)}$ are distributed IID (independently and identically distributed) according to a Gaussian distribution. We can write this as following:\n$$ p(y^{(i)}|x^{(i)};\\theta)=\\dfrac{1}{\\sqrt{2\\pi}\\sigma}\\exp\\left(-\\dfrac{(y^{(i)} - \\theta^Tx^{(i)})^2}{2\\sigma^2}\\right) $$\nTo view this as a function of $\\theta$, we instead call it the likelihood function:\n$$ \\begin{align} L(\\theta) \u0026= L(\\theta;X,\\vec{y})=p(\\vec{y}|X;\\theta) \\\\ \u0026= \\prod_{i=1}^m p(y^{(i)}|x^{(i)};\\theta) \\end{align} $$\nThe principal of maximum likelihood says we should choose $\\theta$ to maximize $L(\\theta)$.\nTo make it simpler, we instead maximize the log likelihood $\\ell(\\theta)$:\n$$ \\begin{align} \\ell(\\theta) \u0026= \\log L(\\theta) \\\\ \u0026= m\\log\\frac{1}{\\sqrt{2\\pi}\\sigma}-\\frac{1}{\\sigma^2}\\cdot\\frac{1}{2}\\sum_{i=1}^{m}(y^{(i)} - \\theta^T x^{(i)})^2 \\end{align} $$\nHence, maximizing $\\ell$ is the same as minimizing $\\frac{1}{2}\\sum_{i=1}^m(y^{(i)}-\\theta^Tx^{(i)})^2=J(\\theta)$.\nNote that our final choice of $\\theta$ did not depend on $\\sigma^2$.\nLocally weighted linear regression In contrast to the original linear regression algorithm, the locally weighted regression gives every $\\epsilon^{(i)}$ a weight $w^{(i)}$, thus we can â€œignoreâ€ some bad training examples.\nA fair standard choice for the weights is:\n$$ w^{(i)}=\\exp\\left(-\\dfrac{(x^{(i)} - x)^2}{2\\tau^2}\\right) $$\nAs a non-parametric algorithm, to make predictions using locally weighted linear regressions, we need to keep the entire training set around for $h$ to grow linearly with the size of the training set.\n","description":"Part I Linear Regression","tags":["Machine Learning"],"title":"CS229 Linear Regression","uri":"/posts/cs229-linear-regression/"},{"categories":["Study Notes","CNATDA"],"content":" Note\nã€ŒComputer Networking: A Top Down Approachã€(8th Edition)\nå› ä¸ºè€å¸ˆè®²çš„å¤ªå¿«æ²¡åŠæ³•ç»†è¯»ä¹¦ä¸Šçš„å†…å®¹ï¼Œä¹Ÿå¾ˆéš¾æœ‰æ—¶é—´è®¤çœŸæ€è€ƒå†™ä¸€ä¸‹ä¸€ç¯‡æœ‰æ·±åº¦çš„ ï¼ˆCNATDA å¥½åƒä»‹ç»çš„æ·±åº¦ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼‰ å­¦ä¹ ç¬”è®°ï¼Œæ‰€ä»¥è¿™ç¯‡ç¬”è®°å¾ˆå¤§ç¨‹åº¦ä¸Š æŠ„è¢­ å€Ÿé‰´äº† ouuan dalao çš„ç¬”è®°ã€‚\nPrinciples of Network Applications ç°ä»£ä¸»è¦ä½¿ç”¨çš„ application architecture æœ‰ä¸¤ç§ï¼šclient-server å’Œ peer-to-peer (P2P) .\nprocess å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªåœ¨ end system ä¸Šè¿è¡Œçš„ program ï¼Œä¸åŒ end system ä¸Šçš„ process é€šè¿‡åœ¨ç½‘ç»œä¸Šäº¤æ¢ messages (application layer packets) è¿›è¡Œé€šä¿¡ã€‚\nprocess ä¸ transport layer ä¹‹é—´çš„ API æ˜¯ socket ã€‚\nhost ä½¿ç”¨ IP address è¯†åˆ«ï¼Œprocess (socket) ä¹‹é—´é€šè¿‡ IP + port number è¯†åˆ«ã€‚\ntransport layer ä¸­æœ€ä¸»è¦çš„ä¸¤ä¸ª protocol æ˜¯ TCP å’Œ UDP ã€‚TCP æä¾› connection-oriented service (é€šè¿‡ handshaking å»ºç«‹ connection) ã€reliable data transfer (data sent without error and in order) ã€congestion-control (æ§åˆ¶ sending rate æ¥å‡å°‘ network layer çš„æ‹¥å¡ä»¥å‡å°‘ä¸¢åŒ…é‡ä¼ ) ï¼Œè€Œ UDP åˆ™æ˜¯ connectionless (no handshaking) ã€unreliable (ä¸ä¿è¯ message é€åˆ°å’Œæ˜¯å¦æœ‰åº) ï¼Œå¹¶ä¸” sending rate æ˜¯å¾ˆéšæ„çš„ï¼Œä¹Ÿå¯ä»¥è¯´ UDP æä¾›çš„æ˜¯ã€Œbest effortã€service ã€‚\napplication layer åœ¨é€‰æ‹© transport layer protocol çš„æ—¶å€™éœ€è¦æ ¹æ®è‡ªèº«æ˜¯å¦ loss-tolerant ã€time-sensitive æ¥è€ƒè™‘ã€‚\napplication-layer protocol å†³å®šäº† process ä¹‹é—´äº¤æ¢çš„ messages çš„ type, syntax, semantics, rules ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œapplication-layer protocols åªæ˜¯ network application ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚\nThe Web and HTTP HTTP (Hyper Text Transfer Protocol) æ˜¯ Web çš„ application-layer protocol ã€‚\nHTTP ä¸ç»´æŠ¤ client çš„ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ª stateless protocol ã€‚\nHTTP/1.0 ã€HTTP/1.1 ã€HTTP/2 ä½¿ç”¨çš„éƒ½æ˜¯ TCP ï¼Œè€Œ HTTP/3 ä½¿ç”¨çš„æ˜¯ UDP ã€‚\nç”±äº TCP æ˜¯ connection-oriented ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘æ¯ä¸€å¯¹ req/res éœ€è¦å»ºç«‹åœ¨ä¸åŒè¿˜æ˜¯ç›¸åŒçš„ connection ä¸Šï¼Œä»è€Œåˆ†ä¸ºäº† non-persistent connection å’Œ persistent connection ä¸¤ç§ã€‚\nnon-persistent: æ¯ä¸€æ¬¡ req/res éƒ½ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ TCP connection ï¼Œç»“æŸä¹‹åéƒ½ä¼šå…³é—­ connection ã€‚éœ€è¦çš„æ—¶é—´æ˜¯ RTT * 2 (handshaking + req/res) + æ–‡ä»¶ä¼ è¾“ç”¨æ—¶ã€‚ persistent: åŒä¸€å¯¹ client-server ä¹‹é—´çš„æ‰€æœ‰ req/res å…±ç”¨ä¸€ä¸ª TCP connection ï¼Œå¹¶ä¸” client åœ¨æ”¶åˆ° response ä¹‹å‰å¯ä»¥ä¸€æ¬¡æ€§å‘é€å¤šä¸ª request (pipelining) ï¼Œçœä¸‹äº†å¤šæ¬¡å»ºç«‹ TCP connection çš„æ—¶é—´ã€‚ HTTP/1.0 ä½¿ç”¨çš„æ˜¯ non-persistent connection ï¼ŒHTTP/1.1 å’Œ HTTP/2 ä½¿ç”¨çš„æ˜¯ persistent connection ã€‚\nHTTP message æ˜¯ ASCII text ã€‚\nHTTP request:\n1 2 3 4 5 GET /somedir/page.html HTTP/1.1 Host: www.someschool.edu Connection: close User-agent: Mozilla/5.0 Accept-language: fr HTTP response:\n1 2 3 4 5 6 7 8 HTTP/1.1 200 OK Connection: close Date: Tue, 18 Aug 2015 15:44:04 GMT Server: Apache/2.2.3 (CentOS) Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT Content-Length: 6821 Content-Type: text/html (data data data data data ...) server å¯ä»¥é€šè¿‡ cookies æ¥è¯†åˆ«ç”¨æˆ·ï¼Œé€šè¿‡åœ¨ response çš„ header lines ä¸­åŠ å…¥ Set-cookie æ¥å‘é€ç”¨æˆ·çš„ cookiesï¼Œä¹‹å client æ¯æ¬¡å‘é€ request åˆ™åœ¨ header lines ä¸­åŠ å…¥ cookie: 1678 ã€‚\nISP å¯ä»¥è®¾ç½® Web Cache ï¼Œç”¨æˆ·å…ˆå‘ Web Cache å‘é€ request ï¼Œå¦‚æœ cache hit åˆ™ç›´æ¥å‘é€ response ï¼Œå¦åˆ™å°±ç”± web cache å…ˆå‘ origin server å‘é€ request ç„¶åå†å‘ç”¨æˆ·å‘é€ response ã€‚Web Cache çš„å­˜åœ¨å¯ä»¥å‡å°‘å»¶è¿Ÿï¼Œé™ä½å¸¦å®½å‹åŠ›ã€‚\nclient é€šè¿‡åœ¨ header ä¸­åŠ å…¥ If-Modified-Since:\u003cdate\u003e è¿›è¡Œ conditional GET ï¼Œå¦‚æœ server æ£€æŸ¥å¯¹åº”çš„æ–‡ä»¶åœ¨ \u003cdate\u003e ä¹‹å‰æ²¡æœ‰æ›´æ”¹è¿‡ï¼Œå°±å‘é€ body ä¸ºç©ºçš„ 304 Not Modified ã€‚\nHTTP/2 ä½¿ç”¨äº† request and response multiplexingã€prioritizationã€server push æ¥æé«˜ server ç«¯å‘é€çš„çµæ´»æ€§ã€‚\nmultiplexing: ä½¿ç”¨ persistent connection è™½ç„¶å‡å°äº† RTT çš„æ¬¡æ•°ï¼Œä½†æ˜¯å¸¦æ¥äº† Head of Line (HOL) blocking (è¾ƒå°çš„æ–‡ä»¶éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´ç­‰å¾…è¾ƒå¤§æ–‡ä»¶ä¼ è¾“å®Œæˆæ‰èƒ½ä¼ è¾“) ã€‚HTTP/1.1 å°½ç®¡ä½¿ç”¨ persistent connection ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºç«‹äº†å¤šä¸ª TCP connection æ¥é¿å… HOL ï¼Œè€Œ HTTP/2 åˆ™æ˜¯å°†æ–‡ä»¶åˆ†æˆè¾ƒå°çš„ frames ï¼Œäº¤æ›¿å‘é€ä¸åŒæ–‡ä»¶çš„ frame (interleaving) ä»è€Œå‡å°‘äº†å°æ–‡ä»¶çš„ç­‰å¾…æ—¶é—´ã€‚ prioritization: client å‘é€å¤šæ¬¡ request æ—¶ï¼Œå¯ä»¥ä¸ºä¸åŒçš„ response è®¾ç½®ä¼˜å…ˆçº§ï¼Œserver é€šè¿‡ä¼˜å…ˆçº§è°ƒæ•´ response çš„å‘é€é¡ºåºï¼Œå¦å¤–ï¼Œclient è¿˜å¯ä»¥è®¾ç½® response ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ push: server å¯ä»¥å¯¹ä¸€ä¸ª request å‘é€å¤šä¸ª response ï¼Œå°†å½“å‰é¡µé¢å¼•ç”¨çš„ä½†æ˜¯ unrequested çš„å…¶ä»–èµ„æºä¹Ÿ push è¿‡å»ã€‚ HTTP/3 ä½¿ç”¨åŸºäº UDP çš„ QUIC protocol æ›¿ä»£äº† TCP ã€‚\nElectronic Mail in the Internet mail system ä¸»è¦ç”± user agentã€mail servers å’Œ SMTP ç»„æˆã€‚\nå½“ Alice å‘é€ email ç»™ Bob æ—¶ï¼Œä¼šå°†å†™å¥½çš„é‚®ä»¶é€šè¿‡å¥¹çš„ user agent ä¼ é€’ç»™å¥¹çš„ mail server ï¼Œå†ç”± mail server å‘é€ç»™ Bob çš„ mail server ï¼ŒBob é€šè¿‡ä»–çš„ user agent ä» mail server ä¸­å–å‡ºé‚®ä»¶è¿›è¡Œé˜…è¯»ã€‚\nå‘é€ç«¯çš„ mail server ä¼šç»´æŠ¤ä¸€ä¸ª message queue ï¼Œå¦‚æœè¦å‘é€çš„ mail server åœ¨å½“æ—¶ä¸å¯ç”¨ï¼Œåˆ™ä¼šéš”ä¸€æ®µæ—¶é—´é‡æ–°å‘é€ï¼Œå¤šæ¬¡å¤±è´¥ååˆ™ä¼šé€€å›é‚®ä»¶ã€‚\nå‘é€ç«¯çš„ mail server å³ä¸º SMTP client ï¼Œæ¥æ”¶ç«¯çš„ mail server åˆ™æ˜¯ SMTP server ã€‚\nSMTP æ˜¯ä¸€ä¸ªä¸Šå¤åè®®ï¼Œå› æ­¤æ•´ä¸ª message éƒ½åªèƒ½æ˜¯ 7bit-ASCII æ ¼å¼ï¼ŒåŒæ—¶ï¼Œå®ƒä½¿ç”¨çš„ä¹Ÿæ˜¯ TCP åè®®ï¼Œé»˜è®¤ç«¯å£æ˜¯ 25 ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 S: 220 smtp.example.com ESMTP Postfix C: HELO relay.example.org S: 250 Hello relay.example.org, I am glad to meet you C: MAIL FROM:\u003cbob@example.org\u003e S: 250 Ok C: RCPT TO:\u003calice@example.com\u003e S: 250 Ok C: RCPT TO:\u003ctheboss@example.com\u003e S: 250 Ok C: DATA S: 354 End data with \u003cCR\u003e\u003cLF\u003e.\u003cCR\u003e\u003cLF\u003e C: From: \"Bob Example\" \u003cbob@example.org\u003e C: To: \"Alice Example\" \u003calice@example.com\u003e C: Cc: theboss@example.com C: Date: Tue, 15 Jan 2008 16:02:43 -0500 C: Subject: Test message C: C: Hello Alice. C: This is a test message with 5 header fields and 4 lines in the message body. C: Your friend, C: Bob C: . S: 250 Ok: queued as 12345 C: QUIT S: 221 Bye SMTP åœ¨å»ºç«‹å®Œ TCP connection (handshaking) ä¹‹åä¼šå…ˆè‡ªæˆ‘ä»‹ç»ä¸€é (HELO) å†ä¼ è¾“æ•°æ®ï¼Œä»–ä»¬ä¹‹é—´çš„è¿æ¥ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª TCP connection ã€‚\nemail çš„ä¼ é€’æ˜¯ user agent -\u003e mail server -\u003e mail server -\u003e user agent ï¼Œå¤šä¸€ä¸ª mail server ä½œä¸ºä¸­é—´åª’ä»‹æ˜¯å› ä¸º user agent ç»å¸¸ä¸åœ¨çº¿ï¼Œä¸€ä¸ª mail server çš„å­˜åœ¨å¯ä»¥æé«˜åœ¨çº¿ç‡å¹¶å®ç°å¤±è´¥é‡å‘ã€‚\nuser agent å‘é€åˆ° mail server çš„è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ SMTP/HTTP ï¼Œmail server åˆ° mail server ä½¿ç”¨ SMTP ï¼Œè€Œä» mail server æ‹‰å–é‚®ä»¶åˆ° user agent ä½¿ç”¨çš„æ˜¯ HTTP/IMAP ï¼Œä¸èƒ½ä½¿ç”¨ SMTP æ˜¯å› ä¸º SMTP æ˜¯ä¸€ä¸ª push protocol ã€‚\nDNSâ€”â€”The Internetâ€™s Directory Service host å¯ä»¥ç”± hostname å’Œ IP è¯†åˆ«ï¼Œå…¶ä¸­ hostname å¯¹äººç±»æ›´å‹å¥½ï¼Œè€Œ IP åˆ™å¯¹ routers æ›´å‹å¥½ã€‚\nDNS (Domain Name System) çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯å°† hostname ç¿»è¯‘æˆ IP ã€‚\nServices Provided by DNS DNS æ˜¯ç”±ä¸åŒå±‚çº§çš„ DNS servers å…±åŒæ„æˆçš„ä¸€ä¸ª distributed database ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè®© hosts å¯ä»¥è¯·æ±‚è¿™ä¸ª distributed database çš„ application-layer protocol ã€‚\nDNS ä½¿ç”¨ UDP åè®®ï¼Œé»˜è®¤ç«¯å£ä¸º 53 .\nDNS åœ¨æä¾› hostname åˆ° IP çš„ç¿»è¯‘ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š\nhost aliasing: ä¸€ä¸ª host åœ¨æ‹¥æœ‰ canonical hostname ä¹‹å¤–è¿˜èƒ½æ‹¥æœ‰å¤šä¸ª alias ã€‚ mail server aliasing: åŒä¸€ä¸ª hostname åœ¨ä½œä¸º Web server å’Œ mail server æ—¶å¯ä»¥åˆ†åˆ«æŒ‡å‘ä¸åŒçš„ host ã€‚ load distribution: åŒä¸€ä¸ª hostname å¯ä»¥æŒ‡å‘å¤šä¸ª host ï¼Œè¿”å›æŸ¥è¯¢ç»“æœçš„æ—¶å€™ rotate addresses çš„é¡ºåºã€‚ Overview of How DNS Works å•ç‚¹å¼çš„ DNS ä¼šé¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š\na single point of failure traffic volume distant centralized database maintainance å› æ­¤ï¼ŒDNS å¿…é¡»æ˜¯åˆ†å¸ƒå¼ã€å¤šå±‚çº§çš„ã€‚\nDNS ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š\nroot DNS server: åˆ†å¸ƒåœ¨å…¨çƒçš„ 13 ä¸ª root servers ä¸€å…±æœ‰è¶…è¿‡ 1000 ä¸ª copy ï¼Œç”¨æ¥æŸ¥è¯¢ TLD serverã€‚ top-level domain (TLD) servers: æ¯ä¸ª TLD éƒ½æœ‰è‡ªå·±çš„ TLD server ï¼Œç”¨æ¥æŸ¥è¯¢ authoritative DNS serversã€‚ authoritative DNS servers: æ¯ä¸ª subdomain éƒ½æœ‰è‡ªå·±çš„ authoritative DNS server ï¼Œç”¨æ¥æŸ¥è¯¢ hostname åˆ° IP çš„æ˜ å°„ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒTLD servers å’Œ authoritative DNS servers ä¹‹é—´è¿˜å¯èƒ½æœ‰ intermediate DNS server (IXP) ã€‚\nå¦å¤–ï¼ŒISP ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ª local DNS server (default name server) ï¼Œä½œä¸º proxy ä»£æ›¿ host å‘ DNS server è¿›è¡ŒæŸ¥è¯¢ã€‚\nåœ¨å‘ DNS server æŸ¥è¯¢æ—¶ï¼Œåˆ†ä¸º iterative query (åˆ†åˆ«å‘ä¸åŒçš„ DNS server æŸ¥è¯¢) å’Œ recursive query (ç”±å½“å‰æŸ¥è¯¢çš„ DNS server æ›¿ä½ å‘å…¶ä»– DNS server æŸ¥è¯¢) ï¼Œå®é™…ä¸­ï¼Œrequesting host åˆ° local DNS server çš„æŸ¥è¯¢æ˜¯ recursive çš„ï¼Œè€Œ local DNS server ä» root DNS server å¼€å§‹å‘ä¸‹æŸ¥è¯¢æ˜¯ iterative çš„ã€‚\nä¸ºäº†å‡å°‘æŸ¥è¯¢çš„æ•°é‡ï¼ŒDNS é‡‡ç”¨äº† caching çš„åŠæ³•ã€‚æ¯ä¸ªæŸ¥è¯¢çš„å‘èµ·è€…éƒ½ä¼šå°†æŸ¥è¯¢ç»“æœä¿å­˜ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ° cache miss æ‰ä¼šå‘èµ·æŸ¥è¯¢ã€‚\nDNS Records and Messages DNS distributed database çš„å­˜å‚¨å•å…ƒæ˜¯ RR (resource record) ã€‚\nRR æ˜¯ä¸€ä¸ªå››å…ƒç»„ (Name, Value, Type, TTL) ï¼ŒTTL è¡¨ç¤º cache å¤šä¹…è¿‡æœŸï¼ŒName å’Œ Value çš„å«ä¹‰ç”± Type å†³å®šã€‚å¸¸è§çš„ Type æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nA: name = hostname, value = IP address, ä»£è¡¨ä¸€ä¸ª hostname åˆ° IP åœ°å€çš„æ˜ å°„ã€‚ NS: name = domain, value = name server çš„ hostname ï¼Œä»£è¡¨å¯ä»¥åœ¨è¿™ä¸ª name server è¿›è¡Œè¿™ä¸ª domain çš„ä¸‹ä¸€æ­¥æŸ¥è¯¢ã€‚ CNAME: name = alias hostname, value = canonical hostname ï¼Œç”¨æ¥ä½¿ç”¨ host aliasing ã€‚ MX: name = alias hostname, value = canonical hostname ï¼Œç”¨æ¥ä½¿ç”¨ mail server aliasing ã€‚ hostname å¯¹åº”çš„ authoritative DNS server ä¼šåŒ…å«å¯¹åº”çš„ A record ï¼Œè€Œå…¶ä»–çš„ authoritative DNS servers åˆ™ä¼šåŒ…å«å®ƒçš„ NS record ã€‚\nä¸‹é¢çš„ä¾‹å­æ¥è‡ª ouuanâ€™s blog ã€‚\ntype name value NS . a.root-servers.net. A a.root-servers.net. 198.41.0.4 NS moe. ns1.dns.nic.moe. A ns1.dns.nic.moe. 156.154.144.114 NS ouuan.moe. amos.ns.cloudflare.com. A amos.ns.cloudflare.com. 172.64.35.120 A ouuan.moe. 172.67.181.123 DNS æœ€æ—©åªèƒ½é€šè¿‡æ›´æ”¹é…ç½®æ–‡ä»¶ç­‰æ–¹å¼é™æ€æ›´æ–°ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨ DDNS é€šè¿‡ DNS message è¿›è¡ŒåŠ¨æ€æ›´æ–°ã€‚\nDNS message æ ¼å¼å¦‚ä¸‹ï¼š\nidentification è¡¨ç¤ºè¿™æ˜¯ query è¿˜æ˜¯ reply ï¼Œç”± client è®¾ç½®ã€‚\nflags åŒ…æ‹¬ï¼š\nquery/reply: è¡¨ç¤ºè¿™æ¡ message æ˜¯ query è¿˜æ˜¯ reply ã€‚ authoritative or not: è¡¨ç¤ºè¿”å›çš„ç»“æœæ˜¯å¦æ˜¯æœ€ç»ˆç»“æœã€‚ recursion desired: client æ˜¯å¦å¸Œæœ› server è¿›è¡Œ recursive query ã€‚ recursion available: è¡¨ç¤º server æ˜¯å¦å¯ä»¥è¿›è¡Œ recursive query ã€‚ Peer-to-Peer File Distribution P2P æ¶æ„çš„ä¼˜åŠ¿åœ¨äºå®ƒæ˜¯ self-scalable çš„ã€‚\næœ€æµè¡Œçš„ P2P file distribution protocol æ˜¯ BitTorrent ï¼Œå®ƒä»¥ chunk ä¸ºåŸºæœ¬ä¸‹è½½å•ä½ã€‚åœ¨ä¸€ä¸ª peer åˆšåŠ å…¥ torrent æ—¶åªèƒ½ä»å…¶ä»– peer ä¸‹è½½ chunkï¼Œè·å–åˆ°ä¸€äº› trunk åå°±ä¼šä¸Šä¼ ç»™å…¶ä»– peer ã€‚\næ¯ä¸ª torrent éƒ½ä¼šæœ‰ä¸€ä¸ª tracker ï¼Œpeer çš„åŠ å…¥å’Œç¦»å¼€éƒ½ä¼šé€šçŸ¥ tracker ï¼Œå¹¶ä¸”ä¼šåœ¨è¿‡ç¨‹ä¸­å®šæœŸå‘ŠçŸ¥ tracker è‡ªå·±ä»åœ¨æ´»åŠ¨ï¼Œtracker ä¼šç»™æ¯ä¸ª peer å…¶ä»– peer çš„ IP åœ°å€ä¸ç«¯å£ã€‚\nVideo Streaming and Content Distribution Networks ä¸Šè¯¾çš„æ—¶å€™è€å¸ˆæ²¡è®²ï¼Œè™½ç„¶æˆ‘åæ¥è¿˜æ˜¯æŠŠè¿™éƒ¨åˆ†å†…å®¹çœ‹å®Œäº†ï¼Œä½†æ˜¯æ—¶é—´åŸå› ï¼Œå­¦ä¹ ç¬”è®°å°±å…ˆå’•äº†ï¼Œåé¢æœ‰ç©ºçš„æ—¶å€™å†å†™ã€‚\nCDN è¿˜æ˜¯æŒºé‡è¦çš„ä¸ºä»€ä¹ˆä¸è®²ï¼Ÿ\n","description":"Principles of Network Applications","tags":["Computer Network","CNATDA"],"title":"CNATDA ç¬¬äºŒç« å­¦ä¹ ç¬”è®°","uri":"/posts/cnatda-ch2/"},{"categories":["CS"],"content":"Overview åœ¨ Lab 0 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Linux å†…ç½®çš„ TCP åè®®å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„æŠ“å–ç½‘ç«™ä¿¡æ¯çš„ socket ï¼Œå³ webget ã€‚ä¹‹åï¼Œæˆ‘ä»¬ä¸º Internet ä¸­çš„é€šä¿¡å®ç°äº†ä¸€ä¸ªå¯é çš„ byte stream ï¼Œå°½ç®¡ Internet æœ¬èº«ä»…ä»…æä¾› ã€Œbest-effortã€ æœåŠ¡ã€‚\nGetting Started é¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»å¤‡ä»½å¥½äº† Lab 0 çš„ä»£ç ï¼Œå› ä¸ºåœ¨åˆå¹¶ Lab 1 çš„æ–‡ä»¶æ—¶å¯èƒ½ä¼šå‘ç”Ÿå†²çªå¯¼è‡´ä¸¢å¤±ã€‚ ç„¶å git fetch è·å–æœ€æ–°çš„ lab æ–‡ä»¶ã€‚ æ¥ç€ä½¿ç”¨ git merge origin/check1-startercode ä¸‹è½½ Lab 1 çš„ä»£ç æ–‡ä»¶ã€‚ ç¡®ä¿ä½ çš„ç¯å¢ƒå·²ç»æ­£ç¡®æ­å»ºå¥½ï¼šcmake -S . -B build ç¼–è¯‘æºä»£ç ï¼šcmake --build build å¼€å§‹ Lab 1 çš„æŒ‘æˆ˜ï¼ Putting substrings in sequence åœ¨è¿™ä¸ª Lab å’Œä¸‹ä¸€ä¸ª Lab ä¸­ï¼Œæˆ‘ä»¬å°†å®ç° TCP çš„ receiver æ¨¡å—ã€‚å¯¹äº TCP çš„ sender æ¨¡å—ï¼Œå®ƒå°†åº”ç”¨çš„ byte stream æ‹†åˆ†æˆä¸€ä¸ªä¸ªè¾ƒçŸ­çš„ segmentsï¼ˆé•¿åº¦ä¸å¤§äº 1460 bytes çš„å­ä¸²ï¼‰ï¼Œç„¶åä¼ é€’ç»™ Network å±‚ã€‚ä½†æ˜¯ Network å±‚å¯èƒ½å°†è¿™äº› segments ä¸¢å¼ƒã€é‡å¤ä¼ é€ã€æ‰“ä¹±é¡ºåºï¼Œå› æ­¤åœ¨ receiver æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª Reassembler ï¼Œå°†è¿™äº› segments é‡æ–°ç»„è£…æˆæœ€åˆçš„ byte stream ã€‚\nWhat should the Reassembler store internally? Reassembler éœ€è¦è§£å†³ 3 ç§é—®é¢˜ï¼š\nç«‹å³å°†è¦ push çš„ä¸‹ä¸€ä¸ª bytes ä¼ é€ç»™ Writer ã€‚ å°†åœ¨ available capability ä»¥å†…ä½†æ˜¯æš‚æ—¶è¿˜æ²¡è½®åˆ°å®ƒä¼ é€çš„ bytes å­˜å‚¨åœ¨ buffer ä¸­ã€‚ è¶…è¿‡ available capability çš„ bytes ç›´æ¥ä¸¢å¼ƒã€‚ åœ¨å®ç° Reassembler æ—¶çš„ä¸€ä¸ªé‡è¦åŸåˆ™å°±æ˜¯è¦é™åˆ¶å†…å­˜çš„ä½¿ç”¨é‡ã€‚\nFAQs è¯¦è§ lab_faq\nDevelopment æœ€å¤§çš„ä¸€ä¸ªéš¾ç‚¹å°±æ˜¯å¦‚ä½•å»é™¤é‡å¤çš„å­ä¸²ï¼Œå…¶ä½™éƒ¨åˆ†ä¸»è¦è¿˜æ˜¯æ³¨æ„è¦æ±‚å’Œç»†èŠ‚å¦‚ä½•æ¨¡æ‹Ÿã€‚\né¦–å…ˆï¼Œè¿™äº› substrings æ—¢æ˜¯æœ‰åºçš„åˆä¼šå‡ºç°é‡å¤ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä½¿ç”¨ set æ¥å­˜å‚¨ï¼Œä½†æ˜¯ set çš„æ’å…¥æ˜¯ $\\mathcal{O}(n\\log{n})$ çš„ï¼Œåœ¨ reassembler_win è¿™ä¸ªæ ·ä¾‹ä¸­ä¼šè¶…æ—¶ã€‚\näºæ˜¯æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ map æ¥å­˜å‚¨ï¼Œæ¯æ¬¡å­˜å…¥ä¸€ä¸ª substring æ—¶éƒ½éå†ä¸€é map å°†é‡å¤çš„éƒ¨åˆ†å»é™¤ï¼Œç„¶åå†æŠŠåˆ å‡åçš„ string æ’å…¥ map ä¸­å³å¯ã€‚\nè¿™é‡Œè¦æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨éå† map çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ç§å®¹æ˜“å¿½ç•¥çš„æƒ…å†µå°±æ˜¯å½“å‰éå†å¾—åˆ°çš„ string æ˜¯è¦æ’å…¥çš„ string çš„ substring ï¼Œè¿™æ—¶å€™éœ€è¦å°†ä¸¤å¤´éé‡å¤éƒ¨åˆ†çš„ substring åˆ†åˆ«æ’å…¥ map ã€‚\nOutcome ByteStream throughput: 0.61 Gbit/s\nReassembler throughput: 5.43 Gbit/s\nä¸ç®—å¿«ä¹Ÿä¸ç®—æ…¢å§â€¦â€¦\nSource Code reassembler.hhï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Reassembler { private: std::map \u003c uint64_t, std::string \u003e buffer_ {}; uint64_t first_index_in_buffer { 0 }; uint64_t buffer_size_ { 0 }; bool has_last_substring { 0 }; uint64_t first_unassembled_index { 0 }; void insert_into_buffer( uint64_t first_index, std::string data, bool is_last_substring ); void insert_from_buffer( Writer\u0026 ouput ); }; reassembler.ccï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include \"reassembler.hh\" using namespace std; void Reassembler::insert( uint64_t first_index, string data, bool is_last_substring, Writer\u0026 output ) { // Your code here. (void)first_index; (void)data; (void)is_last_substring; (void)output; if (data.empty()) { if (is_last_substring) output.close(); return; } if (output.available_capacity() == 0) return; uint64_t last_index = first_index + data.size(); uint64_t first_unacceptable_index = first_unassembled_index + output.available_capacity(); if (first_index \u003e= first_unacceptable_index || last_index \u003c= first_unassembled_index) return; if (last_index \u003e first_unacceptable_index) { data = data.substr(0, first_unacceptable_index - first_index); is_last_substring = false; } if (first_index \u003c first_unassembled_index) { data = data.substr(first_unassembled_index - first_index); first_index = first_unassembled_index; } else if (first_index \u003e first_unassembled_index) { insert_into_buffer(first_index, data, is_last_substring); return; } first_unassembled_index += data.size(); output.push(move(data)); if (is_last_substring) { output.close(); return; } if (!buffer_.empty() \u0026\u0026 buffer_.begin()-\u003efirst \u003c= first_unassembled_index) insert_from_buffer(output); } void Reassembler::insert_into_buffer( uint64_t first_index, string data, bool is_last_substring ) { uint64_t l = first_index, r = first_index + data.size(); for (auto it = buffer_.begin(); it != buffer_.end() \u0026\u0026 l \u003c r; ) { if (it-\u003efirst \u003c= l) { l = max(l, it-\u003efirst + it-\u003esecond.size()); ++it; continue; } if (l == first_index \u0026\u0026 r \u003c= it-\u003efirst) { buffer_[l] = move(data); buffer_size_ += data.size(); if (is_last_substring) has_last_substring = 1; return; } uint64_t rr = min(r, it-\u003efirst); buffer_[l] = data.substr(l - first_index, rr - l); buffer_size_ += rr - l, l = rr; } if (l \u003c r) { buffer_size_ += r - l; buffer_[l] = data.substr(l - first_index); } if (is_last_substring) has_last_substring = 1; } void Reassembler::insert_from_buffer( Writer\u0026 output ) { for (auto it = buffer_.begin(); it != buffer_.end(); ) { if (it-\u003efirst \u003e first_unassembled_index) break; uint64_t l = it-\u003efirst, r = l + it-\u003esecond.size(); if (r \u003c= first_unassembled_index) { buffer_size_ -= it-\u003esecond.size(); } else { string data = move(it-\u003esecond); buffer_size_ -= data.size(); data = data.substr(first_unassembled_index - it-\u003efirst); first_unassembled_index += data.size(); output.push(move(data)); } it = buffer_.erase(it); } if (buffer_.empty() \u0026\u0026 has_last_substring) output.close(); } uint64_t Reassembler::bytes_pending() const { // Your code here. return buffer_size_; } Referrence CS144 2023 Lab Checkpoint 1: stitching substrings into a byte stream cs144ç½‘ç»œè¯¾ç¨‹0 çƒ­èº« ","description":"stitching substrings into a byte stream","tags":["CS144","Computer Network"],"title":"CS144 Lab 1","uri":"/posts/cs144-lab1/"},{"categories":["ACG"],"content":" ã€Œ ç§ãŸã¡ã®\u003céŸ³æ¥½(å«ã³)\u003eã€å‚·ã ã‚‰ã‘ã§ã¿ã™ã¼ã‚‰ã—ã„ã€‚ ã€\næˆ‘ä»¬çš„ \u003céŸ³ä¹(å‘å–Š)\u003e ï¼Œä¼¤ç—•ç´¯ç´¯è€Œå……æ»¡ç‹¼ç‹ˆã€‚\nã€Œ è¿·ã£ã¦ã‚‚ã„ã„ã€è¿·ã„ãªãŒã‚‰ã‚‚å‰ã«é€²ã‚€ã€‚ã€\nè¿·èŒ«ä¹Ÿæ— æ‰€è°“ï¼Œè¿·èŒ«ä¹Ÿè¦å‰è¿›ã€‚\nä¸ã€Œå­¤ç‹¬æ‘‡æ»šã€ä¸­è½»æ¾åºŸèŒçš„ä¹é˜Ÿå°‘å¥³æ—¥å¸¸ä¸åŒï¼Œã€ŒBanG Dream! It's My GO!!!!!ã€åˆ™æ˜¯ä»¥å°‘å¥³é—´çš„é‡é‡çŸ›ç›¾æ¥æ¨è¿›å‰§æƒ…çš„ã€‚\näº”ä½æ€§æ ¼ä¸åŒçš„ã€Œè¿·å­ã€äºè¿·é€”ä¸­ç›¸é‡ï¼Œå¥¹ä»¬ä¹‹é—´æ¿€å‘å‡ºçš„åŒ–å­¦ååº”ç»å†äº†ä¸€æ³¢ä¸‰æŠ˜è€Œæœ€ååˆå³°å›è·¯è½¬ï¼Œä¸ºä»€ä¹ˆè¯´ã€ŒMy GOã€æ˜¯è¿‘å¹´æ¥æœ€ä¼˜ç§€çš„ã€Œå°‘å¥³ä¹é˜Ÿã€ç•ªï¼Ÿæˆ‘æƒ³ï¼Œè¿™æ­£æ˜¯å› ä¸ºå®ƒæ‰“ç ´äº†ã€Œå°‘å¥³ä¹é˜Ÿç•ªéƒ½æ˜¯å‰§æƒ…å¹³æ·¡çš„åºŸèŒç•ªã€çš„æ¡æ¢ç½¢ã€‚\nå°½ç®¡å…¨ç•ªæ˜¯ç”±ä¸€ä¸ªåˆä¸€ä¸ªæ›´å¤§çš„çŸ›ç›¾ç»„æˆçš„ï¼Œä½†æ˜¯ï¼Œã€ŒMy GOã€æç»˜çš„ä¸€å®šè¿˜æ˜¯ä¸€ä¸ªå……æ»¡ç€æµªæ¼«ä¸»ä¹‰è‰²å½©çš„ç†æƒ³ä¸–ç•Œã€‚\nã€Œ ä¸€ç”Ÿå‚·ã¤ã‹ãªã„ãªã‚“ã¦ ã‚ã‚Šãˆãªã„ ã€\nä¸€è¾ˆå­ä¸å—ä¼¤ï¼Œæ˜¯ä¸å¯èƒ½çš„\nå°‘å¥³ä»¬è¿·èŒ«ç€å¯¹ ã€ŒCrychicã€ çš„ç‰µæŒ‚ï¼Œå› ä¸ºå®³æ€•è€Œé©»è¶³ä¸å‰ï¼Œæˆä¸ºäº†ã€Œè¿·èŒ«çš„å­©å­ã€ï¼Œä½†æ˜¯åˆ°äº†æœ€åï¼Œå¥¹ä»¬æ‰¾åˆ°äº†ç­”æ¡ˆï¼šä¸è¦æ°¸è¿œæ‰§ç€äºã€Œè¿·ã€ã€‚\nå‡ºå£ç©¶ç«Ÿåœ¨å“ªä»€ä¹ˆçš„æ ¹æœ¬å°±æ— æ‰€è°“å§ï¼Œè¦æ˜¯ä¸€ç›´ä¸æ•¢å‰è¿›æ‰æ˜¯çœŸæ­£çš„æ‰§è¿·ä¸æ‚Ÿäº†å•Šï¼Œæ‰€ä»¥ï¼Œæ¯”èµ·ä¸€èµ·åœ¨åŸåœ°åœç•™ï¼Œä¸å¦‚å¤§å®¶ä¸€èµ·æˆä¸ºã€Œè¿·å­ã€ï¼Œå¸¦ç€è¿·æƒ‘ä¸ä¸è§£ï¼Œæ‹¾èµ·ä¸­äºŒä¸çƒ­è¡€ï¼Œä¸€èµ·è¿·è·¯å¥½äº†ï¼Œæ¯•ç«Ÿï¼Œã€Œè¿·èŒ«ä¹Ÿæ— æ‰€è°“ï¼Œè¿·èŒ«ä¹Ÿè¦å‰è¿›ã€ã€‚\n","description":"","tags":["Anime"],"title":"ã€ŒBanG Dream! Itâ€™s MyGO!!!!!ã€: è¿·èŒ«ä¹Ÿè¦å‰è¿›","uri":"/posts/bang-dream-its-mygo/"},{"categories":["Algorithm"],"content":"æœ€å¤§å…¬çº¦æ•° GCD ï¼Œå³ Greatest Common Divisor .\nä¸€ç»„æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°å°±æ˜¯æŒ‡è¿™ç»„æ•´æ•°çš„æœ€å¤§çš„å…¬å…±çº¦æ•° .\næ€ä¹ˆå…¨æ˜¯åºŸè¯\né‚£ä¹ˆè¦å¦‚ä½•æ±‚è§£ä¸€ç»„æ•´æ•°çš„ gcd æï¼Ÿ\næˆ‘ä»¬å…ˆè€ƒè™‘ä¸¤ä¸ªæ•° $a,b$ çš„æƒ…å†µ .\nä»¤ $a=bq+r(q,r\\in\\mathbb{N})$ ï¼Œåˆ™ $a \\bmod b=r\\in[0,b)$ ï¼Œå‡è®¾ $d=\\gcd(a,b)$ ï¼Œæœ‰ $d\\mid a,~d\\mid b$ ï¼Œå› æ­¤ $d\\mid r$ï¼Œäºæ˜¯æˆ‘ä»¬å‘ç° $\\gcd(b,r)=d=\\gcd(a,b)$ .\nç»¼ä¸Šï¼Œ$\\gcd (a,b)=\\gcd(b,a\\bmod b)$ ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨ä¸æ–­é€’å½’æ±‚è§£ç›´åˆ° $b=0$ ï¼Œè¿™æ—¶å€™çš„ a å°±æ˜¯ gcd äº†.\n1 2 3 int gcd(int a, int b) { return b ? gcd(b, a % b) : a; } å½“æ•´æ•°çš„æ•°é‡å¤§äº 2 æ—¶ï¼Œæˆ‘ä»¬æ±‚è§£å‰ä¸¤ä¸ªæ•°çš„ gcd ä¸åä¸€ä¸ªæ•°çš„ gcd ï¼Œä¾¿å¾—åˆ°å‰ 3 ä¸ªæ•°çš„ gcd ï¼Œä¾æ¬¡è¿›è¡Œä¸‹å»ï¼Œæœ€åå¾—åˆ°çš„ä¾¿æ˜¯è¿™ n ä¸ªæ•°çš„ gcd .\nå¯¹äº†ï¼Œè¿™ä¸ªç®—æ³•å°±æ˜¯æ¬§å‡ é‡Œå¾—ç®—æ³• .\næœ€å°å…¬å€æ•° LCM ï¼Œå³ Least Common Multiple .\nä¸€ç»„æ•´æ•°çš„å…¬å€æ•°ï¼Œæ˜¯æŒ‡åŒæ—¶æ˜¯è¿™ç»„æ•°ä¸­æ¯ä¸€ä¸ªæ•°çš„å€æ•°çš„æ•° . 0 æ˜¯ä»»æ„ä¸€ç»„æ•´æ•°çš„å…¬å€æ•° .\nä¸€ç»„æ•´æ•°çš„æœ€å°å…¬å€æ•°ï¼Œæ˜¯æŒ‡æ‰€æœ‰æ­£çš„å…¬å€æ•°é‡Œé¢ï¼Œæœ€å°çš„ä¸€ä¸ªæ•° .\nè¯­è¨€è´«ç˜ ï¼Œç›´æ¥è’¯ oi-wiki ä¸Šçš„äº†\nåŒæ ·ä¹Ÿæ˜¯å…ˆè€ƒè™‘ä¸¤ä¸ªæ•° $a,b$ çš„æƒ…å†µ .\nå°† $a,b$ å†™æˆç´ æ•°çš„ä¹˜ç§¯çš„å½¢å¼ .\n$$a=p_1^{k_{a_1}}p_2^{k_{a_2}}\\cdots p_n^{k_{a_{n}}}$$\n$$b=p_1^{k_{b_1}}p_2^{k_{b_2}}\\cdots p_n^{k_{b_{n}}}$$\næ ¹æ®å®šä¹‰å¯çŸ¥ ï¼Œ\n$$\\operatorname{lcm}(a,b)=p_1^{\\min(k_{a_1},k_{b_1})}p_2^{\\min(k_{a_2},k_{b_2})}\\cdots p_n^{\\min(k_{a_n},k_{b_{n}})}$$\n$$\\gcd(a,b)=p_1^{\\max(k_{a_1},k_{b_1})}p_2^{\\max(k_{a_2},k_{b_2})}\\cdots p_n^{\\max(k_{a_n},k_{b_{n}})}$$\nè€Œ $\\max(a,b)+\\min(a, b)=a+b$ ï¼Œå› æ­¤ $\\gcd(a,b)\\times\\operatorname{lcm}(a,b)=a\\times b$ .\næ‰€ä»¥ $\\operatorname{lcm}(a,b)=\\dfrac{a\\times b}{\\gcd(a,b)}$ .\nå¯¹äºå¤šäº 2 çš„æ•´æ•°æ•°ç›®çš„æƒ…å†µï¼Œå¤„ç†æ–¹æ³•å’Œ gcd æ˜¯ä¸€æ ·çš„ .\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆExtended Euclidean algorithm, EXGCDï¼‰å¸¸ç”¨æ¥æ±‚è§£ $ax+by=\\gcd(a,b)$ çš„ä¸€ç»„å¯è¡Œè§£çš„æƒ…å†µ .\næˆ‘ä»¬è®¾ $ax_1+by_1=\\gcd(a,b)$ ï¼Œ$bx_2+(a\\bmod b)y_2=\\gcd(b,a\\bmod b)$ .\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ $x_1,y_1$ å’Œ $x_2,y_2$ ä¹‹é—´çš„å…³ç³» .\nå°† $a\\bmod b=a-\\lfloor\\frac{a}{b}\\rfloor\\times b$ å’Œ $\\gcd(a,b)=\\gcd(b,a\\bmod b)$ å¸¦å…¥ç¬¬äºŒä¸ªæ–¹ç¨‹ï¼Œå¾—åˆ°\n$$bx_2+ay_2-\\lfloor\\frac{a}{b}\\rfloor\\times b\\times y_2=\\gcd(a,b)$$\næ•´ç†å¾—åˆ°\n$$ay_2+b(x_2-\\lfloor\\frac{a}{b}\\rfloor y_2)=\\gcd(a, b)$$\nä¸ç¬¬ä¸€ä¸ªæ–¹ç¨‹æ¯”å¯¹å¯ä»¥å‘ç° $x_1=y_2,y_1=x_2-\\lfloor\\frac{a}{b}\\rfloor y_2$ .\nå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸æ–­é€’å½’æ±‚è§£ $\\gcd(a,b)$ ç›´åˆ° $b=0$ ï¼Œæ˜¾ç„¶æ­¤æ—¶çš„ $x_n=1$ ï¼Œç„¶åè€ƒè™‘ $x_{n-1},y_{n-1}$ çš„æƒ…å†µï¼Œæ­¤æ—¶çš„ $b=\\gcd(a,b)$ ï¼Œè€Œ $a\\not= 0$ ï¼Œæ‰€ä»¥ $x_{n-1}=y_n=0$ ï¼Œç»¼ä¸Šï¼Œæˆ‘ä»¬å¾—åˆ°è¾¹ç•Œæƒ…å†µ $x_n=1,y_n=0$ åŒæ—¶æ±‚å¾—äº† $\\gcd(a,b)$ .\næœ€åæˆ‘ä»¬åœ¨ä¸æ–­å›æº¯æ—¶ä¿®æ”¹ $x,y$ çš„å€¼å³å¯å¾—åˆ° $ax+by=\\gcd(a, b)$ çš„ä¸€ç»„å¯è¡Œè§£ .\n1 2 3 4 5 6 7 8 9 10 int exgcd(int a, int b, int \u0026x, int \u0026y) { if (!b) { x = 1, y = 0; return a; } int ret = exgcd(b, a % b, x, y); int tmp = x; x = y, y = tmp - a / b * y; return ret; } ","description":"æ—§æ–‡è¡¥æ¡£æ","tags":["Number Theory","Math","gcd","lcm"],"title":"gcd \u0026\u0026 lcm å¤ä¹ ç¬”è®°","uri":"/posts/gcdlcm/"},{"categories":["Study Notes","Assembly"],"content":"å…§ä¸­æ–­ ä¸­æ–­ç±»å‹ç ä¸º 1 byte çš„æ•°æ®ï¼Œå¯ä»¥è¡¨ç¤º 256 ç§ä¸­æ–­ä¿¡æ¯çš„æ¥æºï¼Œä½†æ˜¯å®é™…ä¸Šè£…è½½å¥½çš„è¿œå°‘äº 256 ç§ã€‚\nåœ¨ 8086CPU ä¸­ï¼Œä¸­æ–­å‘é‡è¡¨å­˜æ”¾åœ¨ 0000:0000~0000:03E8 å•å…ƒä¸­ï¼Œä¸€ä¸ªè¡¨é¡¹å  2 word ï¼Œåç§»åœ°å€ word å­˜åœ¨ä½åœ°å€ï¼Œæ®µåœ°å€ word å­˜åœ¨é«˜åœ°å€ä¸­ã€‚\nä¸­æ–­è¿‡ç¨‹å¦‚ä¸‹ï¼š\nå–å¾—ä¸­æ–­ç±»å‹ç  N pushf TF = 0, IF = 0 push CS push IP IP = (N * 4), CS = (N * 4 + 2) åœ¨ç¼–å†™ä¸­æ–­å¤„ç†ç¨‹åºæ—¶ï¼Œéœ€åœ¨ç»“å°¾ä½¿ç”¨ iret æŒ‡ä»¤è¿”å›ï¼Œä½œç”¨ä¸ ret ç›¸ä¼¼ã€‚\nCPU åœ¨æ‰§è¡Œå®Œä¸€æ¡æŒ‡ä»¤ä¹‹åï¼Œå¦‚æœæ£€æµ‹åˆ° TF = 1 ï¼Œå°±ä¼šäº§ç”Ÿç±»å‹ç ä¸º 1 çš„å•æ­¥ä¸­æ–­ï¼Œè½¬å»æ‰§è¡Œ 1 å·ä¸­æ–­å¤„ç†ç¨‹åºï¼Œä»è€Œä¸ºå•æ­¥è·Ÿè¸ªç¨‹åºçš„æ‰§è¡Œæä¾›äº†å¯èƒ½ã€‚\nä½†æ˜¯ä¸ºäº†é¿å…å‡ºç° 1 å·ä¸­æ–­ç¨‹åºçš„å¥—å¨ƒç°è±¡ï¼Œéœ€è¦åœ¨æ¯æ¬¡è¿›å…¥ä¸­æ–­ç¨‹åºä¹‹å‰éœ€è¦å°† TF ç½®ä¸º 0 ã€‚\nç‰¹æ®Šæƒ…å†µï¼šåœ¨æ‰§è¡Œå®Œ ss å¯„å­˜å™¨ä¼ é€æ•°æ®çš„æŒ‡ä»¤åï¼Œå³ä¾¿å‘ç”Ÿä¸­æ–­ï¼ŒCPU ä¹Ÿä¸ä¼šå“åº”ã€‚ -\u003e æˆ‘ä»¬åº”è¯¥å°†è®¾ç½® ss å’Œ sp çš„æŒ‡ä»¤è¿ç»­å­˜æ”¾ã€‚\nLab 12 ç¼–å†™ 0 å·ä¸­æ–­çš„å¤„ç†ç¨‹åº\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 assume cs:code code segment start: mov ax, cs mov ds, ax mov si, offset do0 mov ax, 0 mov es, ax mov di, 200h mov cx, offset do0end - offset do0 cld rep movsb mov ax, 0 mov es, ax mov word ptr es:[0], 200h mov word ptr es:[2], 0 mov ax, 4200h int 21h do0: jmp short do0start db \"divide error!\" do0start: mov ax, cs mov ds, ax mov si, 202h mov ax, 0b800h mov es, ax mov di, 12*160+36*2 mov cx, 13 s: mov al, [si] mov es:[di], al inc si add di, 2 loop s mov ax, 4200h int 21h do0end: nop code ends end start Lab 13 æ˜¾ç¤ºç”¨ 0 ç»“æŸçš„å­—ç¬¦ä¸² 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 assume cs:code data segment db \"welcome to masm!\", 0 data ends stack segment dw 8 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 16 mov ax, cs mov ds, ax mov si, offset showstr mov ax, 0 mov es, ax mov di, 200h mov cx, offset showstrend - offset showstr cld rep movsb mov ax, 0 mov es, ax mov word ptr es:[7ch*4], 200h mov word ptr es:[7ch*4+2], 0 mov dh, 10 mov dl, 10 mov cl, 2 mov ax, data mov ds, ax mov si, 0 int 7ch mov ax, 4c00h int 21h showstr: push ax push bx push cx push ds push es push di push si mov ax, 0b800h mov es, ax mov ah, 0 mov al, 160 mul dh mov dh, 0 add ax, dx mov di, ax mov al, cl mov cx, 0 s: mov cl, ds:[si] jcxz se mov es:[di], cl mov es:[di+1], al inc si add di, 2 loop s se: pop si pop di pop es pop ds pop cx pop bx pop ax iret showstrend: nop code ends end start å®Œæˆ loop æŒ‡ä»¤çš„åŠŸèƒ½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 assume cs:code stack segment dw 8 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 16 call load call setIVT mov ax, 0b800h mov es, ax mov di, 160*12 mov bx, offset s - offset se mov cx, 80 s: mov byte ptr es:[di], '!' add di, 2 int 7ch se: nop mov ax, 4c00h int 21h setIVT: push ax push es mov ax, 0 mov es, ax mov word ptr es:[7ch*4], 200h mov word ptr es:[7ch*4+2], 0 pop es pop ax ret load: push ax push cx push ds push es push di push si mov ax, 0 mov es, ax mov di, 200h mov ax, cs mov ds, ax mov si, offset myloop mov cx, offset myloopend - offset myloop cld rep movsb pop si pop di pop es pop ds pop cx pop ax ret myloop: push bp mov bp, sp dec cx jcxz myloopret add [bp+2], bx myloopret: pop bp iret myloopend: nop code ends end start æ˜¾ç¤ºå››å¥è‹±æ–‡è¯— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 assume cs:code code segment s1: db 'Good,better,best,', '$' s2: db 'Never let it rest,', '$' s3: db 'Till good is better,', '$' s4: db 'And better,best.', '$' s: dw offset s1, offset s2, offset s3, offset s4 row:db 2, 4, 6, 8 start: mov ax, cs mov ds, ax mov bx, offset s mov si, offset row mov cx, 4 ok: mov bh, 0 mov dh, ds:[si] mov dl, 0 mov ah, 2 int 10h mov dx, ds:[bx] mov ah, 9 int 21h inc si add bx, 2 loop ok mov ax, 4200h int 21h code ends end start ç«¯å£ CPU é€šè¿‡ä¸»çº¿ç›¸è¿çš„èŠ¯ç‰‡é™¤äº†å„ç§å­˜å‚¨å™¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ 3 ç§èŠ¯ç‰‡ï¼š\nå„ç§æ¥å£å¡çš„èŠ¯ç‰‡ ä¸»æ¿ä¸Šçš„æ¥å£èŠ¯ç‰‡ï¼Œç”¨æ¥è®¿é—®å¤–è®¾ å…¶ä»–èŠ¯ç‰‡ï¼Œå­˜å‚¨ç³»ç»Ÿç›¸å…³ä¿¡æ¯æˆ–è¿›è¡Œç›¸å…³è¾“å…¥è¾“å‡º in å’Œ out æŒ‡ä»¤ CPU ä½¿ç”¨åœ°å€çº¿å’Œæ§åˆ¶çº¿å‘ç«¯å£å‘é€æŒ‡ä»¤ï¼Œä»è€Œä¸èŠ¯ç‰‡è¿›è¡Œäº¤äº’ï¼Œé—´æ¥è®¿é—®èŠ¯ç‰‡çš„å­˜å‚¨å•å…ƒã€‚\nåœ¨ in å’Œ out æŒ‡ä»¤ä¸­ï¼Œåªèƒ½ä½¿ç”¨ ax æˆ– al æ¥å­˜æ”¾ç«¯å£è¯»/å†™çš„æ•°æ®ï¼Œå…¶ä¸­è®¿é—® 8 ä½ç«¯å£æ—¶ç”¨ al ï¼Œè®¿é—® 16 ä½ç«¯å£æ—¶ç”¨ ax ã€‚\nshl å’Œ shr æŒ‡ä»¤ å®ƒä»¬éƒ½æ˜¯é€»è¾‘ä½ç§»æŒ‡ä»¤ï¼Œéƒ½ä¼šå°†æœ€åç§»å‡ºçš„ä¸€ä½å†™å…¥ CF ä¸­ï¼Œå¦‚æœç§»åŠ¨ä½æ•°å¤§äº 1 ï¼Œåˆ™éœ€è¦å°†ç§»åŠ¨ä½æ•°æ”¾åœ¨ cl ä¸­ã€‚\nLab 14 è®¿é—® CMOS RAM\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 assume cs:code stack segment db 128 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 128 mov bx, 0b800h mov es, bx mov bx, 160*12+28*2 call show_ymd mov ah, ' ' call print_char call show_hms mov ax, 4c00h int 21h show_ymd: push ax push cx mov al, 9 call show_single mov ah, '/' call print_char mov al, 8 call show_single mov ah, '/' call print_char mov al, 7 call show_single pop cx pop ax ret show_hms: push ax push cx mov al, 4 call show_single mov ah, ':' call print_char mov al, 2 call show_single mov ah, ':' call print_char mov al, 0 call show_single pop cx pop ax ret ; al å­˜ç«¯å£å· show_single: call get_char call print_char mov ah, al call print_char ret ; ah å­˜è¦æ‰“å°çš„å­—ç¬¦ ; es:[bx] è¦æ‰“å°çš„å±å¹•ä½ç½® print_char: mov byte ptr es:[bx], ah add bx, 2 ret ; al å­˜æ”¾å•å…ƒ ; ah å­˜åä½æ•° ASCII ç  ; al å­˜ä¸ªä½æ•° ASCII ç  get_char: push cx out 70h, al in al, 71h mov ah, al mov cl, 4 shr ah, cl and al, 00001111b add ah, 30h add al, 30h pop cx ret code ends end start å¤–ä¸­æ–­ å¤–ä¸­æ–­ä¿¡æ¯æ¥è‡ª CPU å¤–éƒ¨ï¼Œå¤–ä¸­æ–­æºä¸€å…±æœ‰ä¸¤ç§ï¼š\nå¯å±è”½ä¸­æ–­ å¦‚æœ IF = 0 ï¼Œåˆ™ä¼šç¦æ­¢è¿›å…¥å¯å±è”½ä¸­æ–­ã€‚ è¿›å…¥å†…ä¸­æ–­æ—¶ä¼šå°† IF ç½®ä¸º 0 ã€‚ å¦‚æœåœ¨å…§ä¸­æ–­è¿‡ç¨‹ä¸­éœ€è¦å¤„ç†å¯å±è”½ä¸­æ–­ï¼Œåˆ™éœ€è¦ç”¨æŒ‡ä»¤å°† IF ç½®ä¸º 1 ã€‚ sti : IF = 1 cli : IF = 0 ä¸å¯å±è”½ä¸­æ–­ ä¸­æ–­ç±»å‹ç å›ºå®šä¸º 2 ä¸­æ–­è¿‡ç¨‹ä¸å…§ä¸­æ–­ä¸€è‡´ï¼Œé™¤äº†æœ€åæ˜¯ (IP) = (8), (CS) = (0AH) Lab 15 å®‰è£…æ–°çš„ int9 ä¸­æ–­ä¾‹ç¨‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 assume cs:code stack segment db 128 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 128 push cs pop ds mov si, offset int9 mov ax, 0 mov es, ax mov di, 204h mov cx, offset int9end - offset int9 cld rep movsb push es:[9*4] pop es:[200h] push es:[9*4+2] pop es:[202h] cli mov word ptr es:[9*4], 204h mov word ptr es:[9*4+2], 0 sti mov ax, 4c00h int 21h int9: push ax push bx push cx push es in al, 60h pushf call dword ptr cs:[200h] cmp al, 1eh jne int9ret pushf in al, 60h pushf call dword ptr cs:[200h] cmp al, 1eh+80h jne int9ret mov ax, 0b800h mov es, ax mov bx, 0 mov cx, 2000 s: mov byte ptr es:[bx], 'A' add bx, 2 loop s int9ret: pop es pop cx pop bx pop ax iret int9end: nop code ends end start ","description":"Chapter.12 ~ Chapter.15","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰","uri":"/posts/asm7/"},{"categories":["Study Notes","CS:APP"],"content":"æœ¬ç« ä¸»è¦å†…å®¹ä¸ºæ•´æ•°ã€æµ®ç‚¹æ•°çš„å­˜å‚¨ä¸é€»è¾‘è¿ç®—ã€‚\nInformation Storage 1 byte = 8 bits ï¼Œä¸º memory çš„æœ€å°å­˜å‚¨å•å…ƒçš„å¤§å°ã€‚\nword size æ˜¯ä¸»è¦çš„ pointer data çš„å¤§å°ï¼Œä¹Ÿæ˜¯ virtual address space çš„æœ€å¤§ size ã€‚\nC è¯­è¨€ä¸­ï¼Œåº”è¯¥ä½¿ç”¨ signed char æ¥å¾—åˆ°ä¸€ä¸ª 1 byte çš„æœ‰ç¬¦å·å€¼ã€‚\nByte Ordering å¯¹äºä¸€ä¸ªåå…­è¿›åˆ¶æ•° 0x01234567 ï¼Œåœ¨è®¡ç®—æœºä¸­æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼šBig endian å’Œ Little endian ã€‚\nBig endian ç›¸å¯¹æ¥è¯´æ›´ç¬¦åˆä¹ æƒ¯ï¼Œåœ¨å­˜å‚¨å•å…ƒä¸­ï¼Œä½ä½ address å­˜å‚¨é«˜ä½ byte ï¼Œå³ 01 23 45 67 è¿™æ ·ä¾æ¬¡å­˜å‚¨ã€‚\nLittle endian åˆ™æ˜¯é«˜ä½ address å­˜å‚¨é«˜ä½ byte ï¼Œè¿™æ ·çœ‹æ¥åˆæ˜¾å¾—æ¯”è¾ƒç¬¦åˆä¹ æƒ¯äº†ï¼Œå³ 67 45 23 01 ä¾æ¬¡å­˜å‚¨ã€‚\nå› ä¸ºæˆ‘ä»¬å°†å¯„å­˜å™¨æˆ–å­˜å‚¨å•å…ƒä¸­çš„ bytes è¡¨è¾¾å‡ºæ¥ä¹ æƒ¯å°† address å°çš„å†™åœ¨å‰é¢ï¼Œæ‰€ä»¥ Little endian ä¼šè®©äººæ„Ÿè§‰å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å®é™…è®¿é—®æŸä¸ªå­˜å‚¨å•å…ƒæ—¶ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ç±»ä¼¼äºæ ˆä¸€æ ·ä»é«˜ä½åœ°å€å¼€å§‹å‘ä½ä½åœ°å€ä¾æ¬¡è®¿é—®ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒLittle endian ä¾æ¬¡è®¿é—®åˆ°çš„ bytes å®é™…ä¸Šæ˜¯ä»å°åˆ°å¤§çš„äº†ã€‚\nè®¡ç®—æœºä½¿ç”¨å“ªç§è¡¨ç¤ºæ–¹å¼ï¼Œæ—¢ä¸ CPU æœ‰å…³åˆä¸ OS æœ‰å…³ã€‚\nstring çš„è¡¨ç¤ºä¸ byte ordering æ— å…³ã€‚\nShift Operations in C å·¦ç§»éƒ½æ˜¯å¾€ä½ä½è¡¥ 0 ï¼Œå³ç§»åˆ™åˆ†ä¸º logical å’Œ arithmetic ï¼Œlogical æ˜¯é«˜ä½è¡¥ 0 ï¼Œarithmetic æ˜¯æ ¹æ®æœ€é«˜ä½å†³å®šè¡¥ 0 è¿˜æ˜¯ 1 ã€‚\nå¯¹äº signed data ï¼Œä¸€èˆ¬ä½¿ç”¨ arithmetic ã€‚\nå¯¹äº unsigned data ï¼Œå¿…é¡»ä½¿ç”¨ logical ã€‚\nInteger Representations unsigned integer çš„è¡¨ç¤ºå°±æ˜¯ä¸€èˆ¬çš„äºŒè¿›åˆ¶å½¢å¼ã€‚\nsigned integer åˆ™é‡‡ç”¨è¡¥ç  (two's-complement encoding)ï¼Œæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œè‹¥ word size ä¸º $\\omega$ ï¼Œé‚£ä¹ˆæœ€é«˜ä½è¡¨ç¤ºä¸º $-2^{\\omega-1}\\cdot x_{\\omega-1}$ ï¼Œå…¶ä½™ä½çš„è¡¨ç¤ºä¸ unsigned ç›¸åŒã€‚\nConvertions between Signed and Unsigned word size ç›¸åŒæ—¶ï¼Œbit ä½çš„è¡¨ç¤ºä¸å˜ï¼Œä»…ä»…æ”¹å˜äºŒè¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢æ–¹å¼ã€‚\nå½“åˆ¤æ–­è¡¨è¾¾å¼çš„ç±»å‹æ˜¯ signed è¿˜æ˜¯ unsigned çš„æ—¶ï¼Œä¸€èˆ¬å‡ºç°äº† unsigned å°±æ˜¯ unsigned ï¼Œå¹¶ä¸”ä¼šå°† signed éšå¼è½¬æ¢ä¸º unsigned ï¼Œè¿™ç§æƒ…å†µä¸‹å¾ˆå®¹æ˜“å‘ç”Ÿæ„æƒ³ä¸åˆ°çš„é”™è¯¯ï¼Œæ‰€ä»¥ä¸€èˆ¬å°½é‡ä¸ä½¿ç”¨ unsigned integer ã€‚\nExpanding the Bit Representation å¯¹äº unsigned integer ï¼Œç›´æ¥åœ¨é«˜ä½è¡¥ 0 ã€‚\nå¯¹äº signed integer ï¼Œåˆ™åœ¨é«˜ä½è¡¥åŸæ¥çš„æœ€é«˜ä½çš„ bit ï¼Œç±»ä¼¼äº arithmetic right shift ã€‚\nå¦‚æœæ—¢è¦å¢åŠ é•¿åº¦ï¼Œåˆè¦ç±»å‹è½¬æ¢ï¼Œåˆ™ä¼šå…ˆå¢åŠ é•¿åº¦å†è¿›è¡Œç±»å‹è½¬æ¢ã€‚\nTruncating Numbers å¯¹äº unsigned integer ï¼Œç›´æ¥æŠŠå¤šä½™çš„é«˜ä½å»æ‰ï¼Œå‡è®¾åªä¿ç•™ä½ k ä½ bits ï¼Œåˆ™ç›¸å½“äº $\\bmod{\\ 2^k}$ ã€‚\nå¯¹äº signed integer ï¼Œå…ˆè½¬æ¢ä¸º unsigned å†åš unsigned truncation ï¼Œä¹‹åå†è½¬æ¢å› signed ï¼Œå…¶å®ä¹Ÿç›¸å½“äºå¯¹ $2^k$ å–æ¨¡ã€‚\nInteger Arithmetic Addition and Negation unsigned integer çš„åŠ æ³•ï¼Œç›´æ¥ä¸¢å¼ƒæº¢å‡ºçš„é‚£ä¸€ä½ï¼Œç›¸å½“äºæ¨¡ $2^{\\omega}$ ã€‚\nåˆ¤æ–­ overflow ï¼šçœ‹ s = x + y æ˜¯å¦æœ‰ s \u003c x æˆ– s \u003c y ã€‚\nunsigned integer çš„å–åï¼š\n$$ -x\\mapsto\\begin{cases} x, \u0026x=0 \\\\ 2^{\\omega}-x, \u0026x\u003e0 \\end{cases} $$\nsigned integer çš„åŠ æ³•ï¼Œè¿‡ç¨‹åŒ unsigned ï¼Œoverflow æœ‰ positive overflow å’Œ negative overflow ï¼Œä»ç„¶ç›¸å½“äºæ¨¡ $2^{\\omega}$ ã€‚\nåˆ¤æ–­ overflow ï¼šè®¾ s = x + y ï¼Œå‘ç”Ÿ positive overflow å½“ä¸”ä»…å½“ x \u003e 0 \u0026\u0026 y \u003e 0 \u0026\u0026 s \u003c= 0 ï¼Œå‘ç”Ÿ negative overflow å½“ä¸”ä»…å½“ x \u003c 0 \u0026\u0026 y \u003c 0 \u0026\u0026 s \u003e= 0 ã€‚\nsigned integer çš„å–åï¼šå½“æˆ unsigned æ¥å–åå³å¯ï¼Œæœ‰\n$$ -x\\mapsto\\begin{cases} TMin_{\\omega}, \u0026x=TMin_{\\omega} \\\\ -x, \u0026x\u003eTMin_{\\omega} \\end{cases} $$\nMultiplication éƒ½æ˜¯ä¸¢é«˜ä½ï¼Œç›¸å½“äºæ¨¡ $2^{\\omega}$ ã€‚\nå¦‚æœæŸä¸ªä¹˜æ•°æ˜¯å¸¸æ•°ï¼Œåˆ™ä¼šä¼˜åŒ–ä¸ºç§»ä½è¿ç®—ã€åŠ æ³•è¿ç®—å’Œå‡æ³•è¿ç®—çš„ç»“åˆã€‚\nä¼˜åŒ–çš„æ€§èƒ½ä¸è¿™äº›æŒ‡ä»¤çš„ç›¸å¯¹é€Ÿåº¦ã€æœºå™¨æœ¬èº«æœ‰å…³ã€‚å¤§éƒ¨åˆ†ç¼–è¯‘å™¨åªä¼šåœ¨åªæœ‰å°‘é‡ä½ç§»ã€åŠ æ³•ã€å‡æ³•çš„æƒ…å†µä¸‹é‡‡å–è¿™ç§ä¼˜åŒ–ã€‚\nDividing by Powers of 2 éƒ½ä¼šä¼˜åŒ–ä¸ºå³ç§»è¿ç®—ã€‚\nå…¶ä¸­ unsigned integer æ˜¯ç›´æ¥ logistcal right shift ï¼Œç›¸å½“äºå‘ä¸‹å–æ•´äº†ã€‚\nsigned integer åˆ™æ˜¯ arithmetic right shift ï¼Œæ•ˆæœä¹Ÿæ˜¯å‘ä¸‹å–æ•´ï¼Œå¦‚æœå¸Œæœ›å‘ä¸Šå–æ•´ï¼ˆå¯¹äºè´Ÿæ•°å°±æ˜¯å‘é›¶å–æ•´äº†ï¼‰ï¼Œåˆ™éœ€è¦å…ˆåŠ ä¸Š bias åœ¨å³ç§»ï¼Œå…¶ä¸­ bias å®šä¹‰ä¸º $2^k-1$ ï¼Œk æ˜¯è¦å³ç§»çš„ä½æ•°ã€‚\nSummary unsigned integer å’Œ signed integer åœ¨å¤„ç†è¿™äº›ç®€å•çš„è¿ç®—çš„æº¢å‡ºæ—¶ç›¸å½“äºäºæ¨¡ $2^{\\omega}$ ï¼Œè¡¥ç çš„è¡¨ç¤ºæ–¹å¼ä½¿å¾—äºŒè€…åœ¨ bit è¡¨ç¤ºå±‚é¢è¿›è¡Œè¿ç®—çš„å½¢å¼ä¸€è‡´ã€‚\nFloating Point æµ®ç‚¹æ•°çš„è¡¨ç¤ºä¸€ç›´æ˜¯ä¸ªéš¾é¢˜ã€‚\nIEEE floating point IEEE floating point å°†ä¸€ä¸ªæµ®ç‚¹æ•°è¡¨ç¤ºä¸º $V=(-1)^{s}\\times M\\times 2^{E}$ çš„å½¢å¼ã€‚\nsign bit ï¼Œä¸ºç¬¦å·ä½ $s$ $n$-bit fraction field ï¼Œä¸º $M$ ï¼Œä¸‹æ–‡è®° fraction field ä¸º $f=f_{n-1}\\cdots f_1 f_0$ $k$-bit exponent field ï¼Œä¸º $E$ ï¼Œä¸‹æ–‡è®° exponent field ä¸º unsigned number $e=e_{k-1}\\cdots e_1e_0$ æ ¹æ® $E$ çš„ä¸åŒï¼Œæµ®ç‚¹æ•°è¢«åˆ†ä¸ºä¸‰ç±»ï¼š\nNormalized values: exponent field ä¸å…¨ä¸º 0 ä¹Ÿä¸å…¨ä¸º 1 $M=1.f_{n-1}\\cdots f_1 f_0$ $E=e-Bias$ ï¼Œå…¶ä¸­ $Bias=2^{k-1}-1$ Denormalized values: exponent field å…¨ä¸º 0 $M=0.f_{n-1}\\cdots f_1 f_0$ $E=1-Bias$ Special values: exponent field å…¨ä¸º 1 å½“ fraction field å…¨ä¸º 0 æ—¶ï¼š s = 0 ï¼Œ$+\\infty$ s = 1 ï¼Œ$-\\infty$ å½“ fraction field ä¸å…¨ä¸º 0 æ—¶ï¼Œè¡¨ç¤º NaN å…¶ä¸­ï¼Œä¸åŒä½æ•°çš„æµ®ç‚¹æ•°çš„ä¸åŒ field æœ‰ä¸åŒçš„é•¿åº¦ï¼š\n64 ä½ ( double ) : k = 11, n = 52 32 ä½ ( float ) : k = 8, n = 23 å¦‚æœç®€å•åœ°ä½¿ç”¨äºŒè¿›åˆ¶è¡¨ç¤º $E$ å’Œ $M$ ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼š\n$E$ éœ€è¦æ˜¯è´Ÿæ•°æ‰èƒ½è¡¨ç¤ºæ¥è¿‘ 0 çš„æ•°ï¼Œå ç”¨äº† $e$ çš„ä¸€ä¸ªä½è€Œå¯¼è‡´èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°ç¼©å°ä¸€åŠ è‹¥ $M=0.f_{n-1}\\cdots f_1 f_0$ ï¼Œåˆ™ä¸åŒçš„ $E$ å¯èƒ½ä¼šå¾—åˆ°åŒä¸€ä¸ªå€¼ï¼Œä¸æ–¹ä¾¿è¿›è¡Œæµ®ç‚¹æ•°ä¹‹é—´çš„æ¯”è¾ƒ è€Œ IEEE é‡‡ç”¨çš„è¡¨ç¤ºæ–¹æ³•ï¼Œ\nåŠ å…¥äº† $Bias$ è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ ç‰¹æ®Šæƒ…å†µä¸‹è®© $M$ çš„ leading bit å˜ä¸º 1 ä½¿å¾—ä¸¤ä¸ªæµ®ç‚¹æ•°æœ¬èº«çš„å¤§å°ä¸å…¶äºŒè¿›åˆ¶ç¼–ç çœ‹ä½œ unsigned åçš„å¤§å°ä¸€è‡´ Example Numbers exponent field å’Œ fraction field å…¨ä¸º 0 ï¼Œè¡¨ç¤º $\\pm0.0$ ã€‚\nexponent field å…¨ä¸º 0 è€Œ fraction field æœ€ä½ä½ä¸º 1 å…¶ä»–ä½ä¸º 0 ï¼Œæ˜¯èƒ½è¡¨ç¤ºçš„æœ€æ¥è¿‘ 0 çš„æ•°ï¼Œä¸º $2^{2-2^k-n}$ ã€‚\nexponent field æœ€é«˜ä½ä¸º 0 å…¶ä»–ä½å…¨ä¸º 1 ï¼Œfraction field å…¨ä¸º 0 ï¼Œè¡¨ç¤º $\\pm1.0$ ã€‚\nexponent field æœ€ä½ä½ä¸º 0 å…¶ä»–ä½å…¨ä¸º 1 ï¼Œfraction field å…¨ä¸º 1 ï¼Œæ˜¯èƒ½è¡¨ç¤ºçš„æœ€å¤§çš„æ•°ã€‚\nRounding round-to-even ï¼šã€Œå››èˆå…­å…¥äº”æˆåŒã€çš„äºŒè¿›åˆ¶å½¢å¼ rounf-toward-zero round-down round-up Floating-Point Operations é™¤äº†ä¸€éƒ¨åˆ†ç‰¹æ®Šå€¼ï¼Œæµ®ç‚¹æ•°çš„è¿ç®—å®šä¹‰ä¸ºå…ˆè¿›è¡Œç²¾ç¡®çš„è¿ç®—ä¹‹åå†è¿›è¡Œèˆå…¥ã€‚\næµ®ç‚¹æ•°çš„åŠ æ³•ã€ä¹˜æ³•ä¼šå‘ç”Ÿæº¢å‡ºã€èˆå…¥ï¼Œå› æ­¤ä¸ç¬¦åˆç»“åˆå¾‹ã€åˆ†é…å¾‹ï¼Œä½†æ˜¯æ»¡è¶³äº¤æ¢å¾‹ã€‚\n","description":"Representing and Manipulating Information","tags":["CS:APP","OS"],"title":"CS:APP ç¬¬äºŒç« å­¦ä¹ ç¬”è®°","uri":"/posts/csapp2/"},{"categories":["CS"],"content":"Set up GNU/Linux on your computer ç…§ç€ check0 ä¸Šè¯´çš„åšå°±å¥½äº†ã€‚\nä¸€å¼€å§‹ç”¨çš„æ˜¯ Mac è£… UTM ï¼Œä½¿ç”¨å®˜æ–¹é•œåƒï¼Œå†è®¾å…±äº«æ–‡ä»¶å¤¹ï¼Œå¥½ä¸å®¹æ˜“æå®šè¿™ä¸€æ­¥ä¹‹å cmake å•¥çš„å„ç§æŠ¥é”™ï¼Œé‚æ”¾å¼ƒã€‚\nåªå¥½æå‡ºæˆ‘çš„æš—å½±ç²¾çµ 8 ï¼Œå®‰è£… Virtual Box ï¼Œä½¿ç”¨å®˜æ–¹é•œåƒï¼Œè®¾ç½®å…±äº«æ–‡ä»¶å¤¹ï¼Œæ³¨æ„è¿™é‡Œå…±äº«æ–‡ä»¶å¤¹æ¯æ¬¡å¼€æœºä¹‹åè¦è¾“å…¥ sudo mount -t vboxsf CS144 \u003cYourSharedFolderPath\u003e æ‰èƒ½å°†ä½ å–å CS144 çš„æ–‡ä»¶å¤¹æŒ‚è½½åˆ° \u003cYourSharedFolderPath\u003e ï¼Œå¥½å¥½å¥½ï¼Œè¿™ä¸‹ç¯å¢ƒç»ˆäºæ²¡é—®é¢˜äº†ã€‚\nNetworking by hand ç…§ç€åšï¼Œé™¤äº†åç§‘çš„ Email æ¯æ¬¡éƒ½ç»™æˆ‘å…³é—­ connection åŒæ—¶ä¸è®©ä½ ç”¨ smtp å‘é€é‚®ä»¶ã€‚\nListening and connecting è¿˜æ˜¯ç…§ç€åšã€‚\nWriting a network program using an OS stream socket Let's get startedâ€”â€”fetching and building the starter code ç¬¬ä¸€æ­¥ä½¿ç”¨å®˜æ–¹é•œåƒå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚\nModern C++: mostly safe but still fast and low-level C++ ä¸ä¼šæï¼Œåªä¼šåŸºç¡€ C with STL å‘œå‘œ\nReading the Minnow support code çœ‹çœ‹å¤´æ–‡ä»¶é‡Œå®šä¹‰äº†å“ªäº›å‡½æ•°ï¼Œå„è‡ªæœ‰ä»€ä¹ˆåŠŸèƒ½å’Œ API å³å¯ã€‚\nWriting webget ç½‘ä¸ŠæŸ¥æŸ¥ socket ç¼–ç¨‹å¤§æ¦‚æ˜¯ä¸ªä»€ä¹ˆæµç¨‹ï¼Œå†æ ¹æ® check0 æ–‡æ¡£å’Œå¤´æ–‡ä»¶çš„å†…å®¹å†™å°±å¥½äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 void get_URL( const string\u0026 host, const string\u0026 path ) { TCPSocket socket {}; socket.connect( Address(host, \"http\") ); string message = \"GET \" + path + \" HTTP/1.1\\r\\n\"; message += \"Host: \" + host + \"\\r\\n\"; message += \"Connection: close\\r\\n\\r\\n\"; socket.write(message); string rec_message; while (!socket.eof()) { socket.read(rec_message); cout \u003c\u003c rec_message; } socket.close(); cerr \u003c\u003c \"Function called: get_URL(\" \u003c\u003c host \u003c\u003c \", \" \u003c\u003c path \u003c\u003c \")\\n\"; cerr \u003c\u003c \"Warning: get_URL() has not been implemented yet.\\n\"; } An in-memory reliable byte stream è¿™ä¸€æ­¥ä¸€å¼€å§‹çœ‹åˆ°å·®ç‚¹æ²¡æŠŠæˆ‘æ„åäº†â€¦â€¦ä¸€åº¦è€ƒè™‘æ˜¯å¦éœ€è¦å…ˆå»è¡¥è¡¥ C++ çš„è¯­è¨€åŸºç¡€ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°äº† CS144 Lab0 ç¬”è®°ï¼šç¯å¢ƒé…ç½®å’Œçƒ­èº« ï¼Œæ„Ÿè§‰å¥½åƒè¿˜å¥½ï¼Ÿ\näºæ˜¯å…ˆå†™äº†ä¸ªä¸¤ä¸ª deque ï¼Œä¸€ä¸ªæ˜¯ string å¦ä¸€ä¸ªæ˜¯ string_view ï¼Œç»“æœå€’åœ¨äº† Test 8 ï¼Œä¹Ÿä¸çŸ¥é“åˆ°åº•é”™å“ªäº†ï¼Œè€Œä¸”ç¡®å®ä¸ä¼š string_view ï¼Œäºæ˜¯å»æ‰äº† string_view ï¼Œä¹‹åè²Œä¼¼ Test 4 åˆå¯„äº†ï¼Ÿ\nçœ‹äº†ä¸€ä¸‹ï¼Œå¥½åƒæ˜¯çˆ†æ ˆäº†è¿˜æ˜¯ string å­˜ä¸ä¸‹äº†æ¥ç€ï¼ˆå¿˜äº† qwqï¼‰ï¼Œåªå¥½åˆå»æ‰äº† deque ä½¿ç”¨çº¯ string ï¼Œç»ˆäºæ‰è¿‡æ‰äº†ã€‚\nbyte_stream.hh :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class ByteStream { protected: uint64_t capacity_; // Please add any additional state to the ByteStream here, and not to the Writer and Reader interfaces. std::string buffer {}; uint64_t buffered_bytes = 0; uint64_t pushed_bytes = 0; uint64_t poped_bytes = 0; bool _is_closed = 0; bool _has_error = 0; public: explicit ByteStream( uint64_t capacity ); // Helper functions (provided) to access the ByteStream's Reader and Writer interfaces Reader\u0026 reader(); const Reader\u0026 reader() const; Writer\u0026 writer(); const Writer\u0026 writer() const; }; byte_stream.cc :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 void Writer::push( string data ) { // Your code here. (void)data; uint64_t data_length = data.length(); if (is_closed() || data.empty()) return; if (available_capacity() \u003c data_length) { data_length = available_capacity(); } buffered_bytes += data_length; pushed_bytes += data_length; buffer += data.substr(0, data_length); } void Writer::close() { // Your code here. _is_closed = 1; } void Writer::set_error() { // Your code here. _has_error = 1; } bool Writer::is_closed() const { // Your code here. return _is_closed; } uint64_t Writer::available_capacity() const { // Your code here. return capacity_ - buffered_bytes; } uint64_t Writer::bytes_pushed() const { // Your code here. return pushed_bytes; } string_view Reader::peek() const { // Your code here. return buffer; } bool Reader::is_finished() const { // Your code here. return _is_closed \u0026\u0026 buffered_bytes == 0; } bool Reader::has_error() const { // Your code here. return _has_error; } void Reader::pop( uint64_t len ) { // Your code here. (void)len; if (len == 0) return; len = min(len, buffer.length()); buffer.erase(0, len); buffered_bytes -= len; poped_bytes += len; } uint64_t Reader::bytes_buffered() const { // Your code here. return buffered_bytes; } uint64_t Reader::bytes_popped() const { // Your code here. return poped_bytes; } References CS144 writeup - è®¡ç®—æœºç½‘ç»œ Lab0 CS144 2023 å®Œå…¨æŒ‡å— CS144 Lab0 ç¬”è®°ï¼šç¯å¢ƒé…ç½®å’Œçƒ­èº« ","description":"C++ ä¸ä¼šæğŸ˜­","tags":["CS144","Computer Network"],"title":"CS144 Lab 0","uri":"/posts/cs144-0/"},{"categories":["Study Notes","Assembly"],"content":"call å’Œ ret æŒ‡ä»¤ ret å’Œ retf ret å®ç°è¿‘è½¬ç§» pop IP retf å®ç°è¿œè½¬ç§» pop IP pop CS call æŒ‡ä»¤ ä¸èƒ½å®ç°çŸ­è½¬ç§» è½¬ç§»çš„ç›®çš„åœ°å€åœ¨æŒ‡ä»¤ä¸­çš„ call æŒ‡ä»¤ call far ptr å®ç°æ®µé—´è½¬ç§» push CS push IP è½¬ç§»åœ°å€åœ¨å†…å­˜ä¸­çš„ call æŒ‡ä»¤ call word ptr å†…å­˜å•å…ƒåœ°å€ push IP jmp word ptr å†…å­˜å•å…ƒåœ°å€ call dword ptr å†…å­˜å•å…ƒåœ°å€ push CS push IP mul æŒ‡ä»¤ ä¹˜æ•° éƒ½æ˜¯ 8 ä½ AL 8 ä½å¯„å­˜å™¨æˆ–å†…å­˜å­—èŠ‚å•å…ƒ éƒ½æ˜¯ 16 ä½ AX 16 ä½å¯„å­˜å™¨æˆ–å†…å­˜å­—å•å…ƒ ç»“æœ 8 ä½ï¼šAX 16 ä½ï¼šé«˜ä½ DX ï¼Œä½ä½ AX Lab 10 æ˜¾ç¤ºå­—ç¬¦ä¸² 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 assume cs:code data segment db 'Welcome to masm!', 0 data ends code segment start: mov dh, 8 mov dl, 3 mov cl, 2 mov ax, data mov ds, ax mov si, 0 call show_str mov ax, 4c00h int 21h show_str: ; ä½¿ç”¨ es:[bp] è½½å…¥æ˜¾å­˜ mov ax, 0b800h mov es, ax mov al, 160 mul dh mov dh, 0 add ax, dx add ax, dx mov bp, ax copy: ; å°†å­—ç¬¦ä¸²å¤åˆ¶å…¥æ˜¾å­˜ mov al, cl mov ch, 0 mov cl, ds:[si] jcxz finish mov es:[bp], cl mov cl, al mov es:[bp+1], cl add bp, 2 inc si jmp short copy finish: ; ç»“æŸ ret code ends end start è§£å†³é™¤æ³•æº¢å‡ºçš„é—®é¢˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 assume cs:code stack segment dw 6 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 12 mov ax, 4240H mov dx, 00FH mov cx, 0AH call divdw mov ax, 4c00h int 21h divdw: mov bx, ax mov ax, dx mov dx, 0 div cx push ax mov ax, bx div cx mov cx, dx pop dx ret code ends end start æ•°å€¼æ˜¾ç¤º 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 assume cs:code data segment db 'Welcome to masm!', 0 data ends code segment start: mov dh, 8 mov dl, 3 mov cl, 2 mov ax, data mov ds, ax mov si, 0 call show_str mov ax, 4c00h int 21h show_str: ; ä½¿ç”¨ es:[bp] è½½å…¥æ˜¾å­˜ mov ax, 0b800h mov es, ax mov al, 160 mul dh mov dh, 0 add ax, dx add ax, dx mov bp, ax copy: ; å°†å­—ç¬¦ä¸²å¤åˆ¶å…¥æ˜¾å­˜ mov al, cl mov ch, 0 mov cl, ds:[si] jcxz finish mov es:[bp], cl mov cl, al mov es:[bp+1], cl add bp, 2 inc si jmp short copy finish: ; ç»“æŸ ret code ends end start æ ‡å¿—å¯„å­˜å™¨ æ ‡å¿—å¯„å­˜å™¨æœ‰ 16 ä½ï¼Œå…¶ä¸­å­˜å‚¨çš„ä¿¡æ¯è¢«ç§°ä¸ºç¨‹åºçŠ¶æ€å­— (PSW)\nå½±å“æ ‡å¿—å¯„å­˜å™¨çš„å¤§éƒ½æ˜¯è¿ç®—æŒ‡ä»¤ï¼Œä¸å½±å“çš„å¤§éƒ½æ˜¯ä¼ é€æŒ‡ä»¤\ninc å’Œ loop æŒ‡ä»¤ä¸å½±å“ CF ä½\nZFï¼šé›¶æ ‡å¿—ä½ PFï¼šå¥‡å¶æ ‡å¿—ä½ SFï¼šç¬¦å·æ ‡å¿—ä½ï¼Œå³è®°å½•ç»“æœæœ€é«˜æœ‰æ•ˆä½æ˜¯å¦ä¸º 1 CFï¼šè¿›ä½æ ‡å¿—ä½ï¼Œé’ˆå¯¹æ— ç¬¦å·æ•°è¿ç®—ï¼Œè®°å½•ç»“æœçš„æœ€é«˜æœ‰æ•ˆä½å‘æ›´é«˜ä½çš„è¿›ä½æˆ–å€Ÿä½æƒ…å†µ OFï¼šæº¢å‡ºæ ‡å¿—ä½ï¼Œé’ˆå¯¹æœ‰ç¬¦å·æ•°è¿ç®— cmp æŒ‡ä»¤ å¯¹äºæ— ç¬¦å·æ•°è¿ç®— cmp ax, bx :\nZF = 1ï¼Œåˆ™ (ax) = (bx) ZF = 0ï¼Œåˆ™ (ax) != (bx) CF = 1ï¼Œåˆ™ (ax) \u003c (bx) CF = 0ï¼Œåˆ™ (ax) \u003e= (bx) CF = 0 ä¸” ZF = 0ï¼Œåˆ™ (ax) \u003e (bx) CF = 1 æˆ– ZF = 1ï¼Œåˆ™ (ax) \u003c= (bx) å¯¹äºæœ‰ç¬¦å·æ•°è¿ç®— cmp ah, bh :\nSF = 1 ä¸” OF = 0ï¼Œåˆ™ (ah) \u003c (bh) SF = 1 ä¸” OF = 1ï¼Œåˆ™ (ah) \u003e (bh) SF = 0 ä¸” OF = 0ï¼Œåˆ™ (ah) \u003c (bh) SF = 0 ä¸” OF = 1ï¼Œåˆ™ (ah) \u003e= (bh) æ£€æµ‹æ¯”è¾ƒç»“æœçš„æ¡ä»¶è½¬ç§»æŒ‡ä»¤ å®ƒä»¬æ‰€æ£€æµ‹çš„æ ‡å¿—ä½éƒ½æ˜¯ cmp æŒ‡ä»¤è¿›è¡Œæ— ç¬¦å·æ•°æ¯”è¾ƒæ—¶çš„\nDF æ ‡å¿—å’Œä¸²ä¼ é€æŒ‡ä»¤ DFï¼šæ–¹å‘æ ‡å¿—ä½ï¼Œåœ¨ä¸²å¤„ç†æŒ‡ä»¤ä¸­ï¼Œæ§åˆ¶æ¯æ¬¡æ“ä½œå si, di çš„å¢å‡ DF = 0, é€’å¢ DF = 1, é€’å‡ cldï¼šä»¤ DF = 0 stdï¼šä»¤ DF = 1 movsb ç›¸å½“äº (es:[di]) = (ds:[si]) ä¹‹åæ ¹æ® DF æ”¹å˜ si, di movsw movsb çš„å­—ç‰ˆæœ¬ si å’Œ di æ”¹å˜é‡ä¸º 2 rep æ ¹æ® cx çš„å€¼é‡å¤æ‰§è¡Œåé¢çš„ä¸²ä¼ é€æŒ‡ä»¤ pushf å’Œ popf pushfï¼šå°†æ ‡ç¤ºå¯„å­˜å™¨çš„å€¼å‹æ ˆ popfï¼šä»æ ˆä¸­å¼¹å‡ºæ•°æ®é€å…¥æ ‡å¿—å¯„å­˜å™¨ Lab 11 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 assume cs:codesg datasg segment db \"Beginner's All-purpose Symbolic Instruction Code.\", 0 datasg ends codesg segment begin: mov ax, datasg mov ds, ax mov si, 0 call letterc mov ax, 4c00h int 21h letterc: mov cx, 0 mov cl, ds:[si] jcxz finish cmp cl, 97 jb next cmp cl, 122 ja next and cl, 11011111B mov ds:[si], cl next: inc si jmp short letterc finish: ret codesg ends end begin ","description":"Chapter.10 ~ Chapter.11","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰","uri":"/posts/asm6/"},{"categories":["ACG"],"content":" ã€Œå¿…é¡»èƒŒè´Ÿèµ·æŸäº›äº‹ç‰©ï¼Œä¿æŠ¤æŸäº›äº‹ç‰©â€¦â€¦éå¾—è¦æœ‰è¿™ç§å† å†•å ‚çš‡çš„ç†ç”±ï¼Œæˆ‘ä»¬æ‰èƒ½é£å‘å¤©é™…å—ï¼Ÿã€\nã€Œè¿™ä¸ªä¸–ç•Œä¸ºæ‰¾ä¸åˆ°å½’å®¿çš„ä»–æ‰€å‡†å¤‡çš„ä¸œè¥¿ï¼Œå°½æ˜¯é™Œç”Ÿä¸æ­è°ƒçš„è¡£æœä¸é¢å…·ã€‚å³ä½¿å¦‚æ­¤è¿˜æ˜¯å¾—ç«™åœ¨èˆå°ä¸Šè¡¨æ¼”å—ï¼Ÿè¿˜æ˜¯å¾—è—‰æ­¤æ‰¾åˆ°å–œæ‚¦ä¸æ„ä¹‰å—ï¼Ÿã€\nã€Œå¦‚æœäººç”Ÿæ‹¥æœ‰æ„ä¹‰ä¸ä»·å€¼ï¼Œé‚£ä¹ˆå°±ä¸èƒ½è®©æ†§æ†¬åªä»¥æ†§æ†¬æ”¶åœºã€‚ã€\nã€Œå¡å°”ï¼Œä½ å•Šï¼Œé¦–å…ˆå¾—åŸºäºè‡ªå·±çš„æ„å¿—å®Œæˆä¸€äº›äº‹æƒ…ã€‚å¿…é¡»è—‰æ­¤äº²è‡ªç¡®è®¤è‡ªå·±ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„äººâ€”â€”å®Œæˆè¿™äº›è¿‡ç¨‹ä¹‹åï¼Œä½ æ‰èƒ½é¦–åº¦é¢å¯¹è‡ªå·±è¿‡å»çš„è¡Œä¸ºï¼Œæ‰èƒ½ç”±è‡ªå·±å†³å®šè¦æ€ä¹ˆåˆ¶è£è‡ªå·±ï¼Œèµ¦å…è‡ªå·±ã€‚ã€\nã€Œè¯´ä¸å®šç›´åˆ°ä»Šå¤©è¿™ä¸€å¤©ä¸ºæ­¢ï¼Œè‡ªå·±ä»æ¥æ²¡æœ‰åŸºäºçœŸæ­£çš„æ„ä¹‰é£ä¸Šå¤©ç©ºã€‚ é‚£å°±æŒ‘æˆ˜å§ã€‚è¿™æ¬¡çš„æˆ‘ï¼Œä¸€å®šè¦é£å‘çœŸæ­£çš„å¤©ç©ºã€‚ è¿™æ¬¡ä¸æ˜¯ä¸ºäº†æ†æ¨ä¸ææ€–ï¼Œè¦ä¸ºäº†è£è€€ä¸å–œæ‚¦è€Œé£ç¿”ã€‚ã€\næ¯æ¬¡åœ¨è¯»å‰ä¸­æœŸéƒ¨åˆ†æ—¶éƒ½ä¼šè§‰å¾—å¹³æ·¡æ— å¥‡ç”šè‡³è®©äººæ„Ÿè§‰æœ‰äº›æ— èŠï¼Œä½†æ˜¯ç¬¬ä¸€å·åé¢å¡å°”å¯¹äºè‡ªå·±çº¯ç²¹çš„é£ç¿”ç†æƒ³ã€å¯¹äºå¤©ç©ºå‘å¾€ã€å¯¹å¤©ç©ºéœ¸ä¸»â€”â€”å¸å‡°é¾™çš„æ•¬ç•ä¸æŒ‘æˆ˜ï¼Œä¸ç°å®ä¸­ä¸å¾—ä¸è¸ä¸Šæˆ˜åœºæˆä¸ºä¸€å…·æ— æƒ…çš„æ€äººæœºå™¨çš„æŠµè§¦ã€æ— å¥ˆä¸å¦¥åï¼Œè¿˜æœ‰ç¬¬äºŒå·åæœŸå¡å°”ä¸ºäº†è‡ªç§çš„å¿ƒæ„¿ã€Œå†æ¬¡ä¸é›·é¸Ÿå·é©°éª‹å¤©ç©ºã€è€Œæƒ…æ„¿è£…ä¸Šæ­¦å™¨ä¸æ•Œå†›æ®Šæ­»æŠµæŠ—ï¼Œæœ€åå¸å‡°é¾™åœ¨å¡å°”å†³å¿ƒå†²å‘æ•Œèˆ°èµ°ä¸Šæ‰€è°“æ›´å¥½çš„æœ«è·¯æ—¶ç°èº«ï¼Œé‚€è¯·å¡å°”ä¸€åŒã€Œç›´æŒ‡åŒ—æ–¹çš„å°½å¤´ã€ï¼Œè€Œå¡å°”è‡ªç„¶ä¸ä¼šæ”¾è¿‡è¿™ä¸ªå¥½æœºä¼šï¼Œé©¾é©¶ç€é›·é¸Ÿå·ï¼Œè¶…è¶Šäº†éŸ³é€Ÿï¼Œæ¶ˆå¤±åœ¨äº†åœ°çƒçš„åŒ—æï¼Œè¿™äº›éƒ¨åˆ†åœ¨è¯»çš„æ—¶å€™æ€»æ˜¯ä»¤æˆ‘æ„Ÿè§¦é¢‡æ·±ï¼Œä½†ä¸€æ—¦æƒ³è¦è®°å½•äº›ä»€ä¹ˆæƒ³æ³•æ—¶ï¼Œå´åˆæ— ä»ä¸‹æ‰‹ï¼Œå†™è¿™ç§æ„Ÿæƒ…è‰²å½©æµ“åšçš„æ–‡ç« æ€»æ˜¯æˆ‘çš„è½¯è‚‹ã€‚\nä½†æ˜¯å¯¹äºæ›¾ç»æ„ŸåŠ¨è¿‡æˆ‘çš„ç¬é—´ï¼Œæ€»è¿˜æ˜¯è¦è®°å½•ç‚¹ä»€ä¹ˆçš„ã€‚\næ”¾å‡ å¥æœ‰ç‚¹ä¸­äºŒçš„æ‘˜å½•ï¼Œæƒ³åˆ°äº†ä»€ä¹ˆèƒ½å†™å†å†™å§ã€‚\nã€Œæˆ‘ä»¬äººç±»åº”è¯¥ä»¥æ­¤ä¸ºå¥‘æœºï¼Œé‡æ–°æ€è€ƒå½¼æ­¤åœ¨ç›¸åŒçš„å¤©ç©ºä¹‹ä¸‹ï¼Œå…±äº«ç›¸åŒå¤§åœ°ç”Ÿæ´»çš„çœŸæ­£æ„ä¹‰ã€\nã€Œè¿™ä»½å¿ƒæƒ…å°±å·²ç»æ˜¯ç­”æ¡ˆï¼Œç”¨ä¸ç€è¿›ä¸€æ­¥æ€è€ƒï¼Œæ— è®ºæ˜¯å¤šä¹ˆé¥è¿œé»‘æš—çš„åœ°æ–¹ï¼Œåªè¦ä½ æƒ³å»ï¼Œé‚£å°±å»å§ã€‚ã€\nã€Œå¿…å°†æ— å°½è¿œå¾ï¼Œæ— è¿œå¼—å±Šã€\n","description":"è™šæ¸Šç„å¯¹äºçˆ±ä¸å¸Œæœ›çš„å‘å¾€","tags":["Light Novel"],"title":"ã€Œé’¢é“ä¹‹ç¿¼ã€: å¤©ç©ºã€æˆ˜äº‰ä¸å·¨é¾™","uri":"/posts/%E9%92%A2%E9%93%81%E4%B9%8B%E7%BF%BC/"},{"categories":["Study Notes","Assembly"],"content":"æ•°æ®å¤„ç†çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ bxã€siã€diã€bp åªæœ‰è¿™ 4 ä¸ªå¯„å­˜å™¨å¯ä»¥åœ¨ [...] ä¸­è¿›è¡Œå†…å­˜å•å…ƒçš„å¯»å€ å®ƒä»¬åªèƒ½å•ä¸ªå‡ºç°æˆ–è€…ä»¥ bx å’Œ siã€bx å’Œ diã€bp å’Œ siã€bp å’Œ di çš„ç»„åˆå‡ºç° bp çš„æ®µåœ°å€é»˜è®¤åœ¨ ss ä¸­ æœºå™¨æŒ‡ä»¤å¤„ç†çš„æ•°æ®æ‰€åœ¨ä½ç½® æŒ‡ä»¤åœ¨æ‰§è¡Œå‰ï¼Œæ‰€è¦å¤„ç†çš„æ•°æ®å¯ä»¥åœ¨ï¼šCPU å†…éƒ¨ã€å†…å­˜ã€ç«¯å£ æ±‡ç¼–è¯­è¨€ä¸­æ•°æ®ä½ç½®çš„è¡¨è¾¾ ç«‹å³æ•°ï¼ˆidataï¼‰ï¼šæ‰§è¡Œå‰åœ¨ CPU æŒ‡ä»¤ç¼“å†²å™¨ä¸­ SA å’Œ EAï¼šæŒ‡ä»¤è¦å¤„ç†çš„æ•°æ®åœ¨å†…å­˜ä¸­ å¯»å€æ–¹å¼ è®°ä¸€ä¸‹åå­—å³å¯\næŒ‡ä»¤è¦å¤„ç†çš„æ•°æ®æœ‰å¤šé•¿ï¼Ÿ push æŒ‡ä»¤åªè¿›è¡Œå­—æ“ä½œ\nå¯»å€æ–¹å¼çš„ç»¼åˆåº”ç”¨ ç”¨ bx å®šä½æ•´ä¸ªç»“æ„ä½“ï¼Œç”¨ idata å®šä½ç»“æ„ä½“ä¸­çš„æŸä¸€ä¸ªæ•°æ®é¡¹ï¼Œç”¨ si å®šä½æ•°ç»„é¡¹ä¸­çš„æ¯ä¸ªå…ƒç´ \ndiv æŒ‡ä»¤ é™¤æ•°ï¼š8 ä½å’Œ 16 ä½ä¸¤ç§ è¢«é™¤æ•°ï¼šä½æ•°æ˜¯é™¤æ•°çš„ä¸¤å€ï¼Œå­˜æ”¾åœ¨ ax ã€dx å¯„å­˜å™¨ dx å­˜æ”¾é«˜ 16 ä½ï¼Œax å­˜æ”¾ä½ 16 ä½ ç»“æœ é™¤æ•°ä¸º 8 ä½ï¼šal å­˜å•†ï¼Œah å­˜ä½™æ•° é™¤æ•°ä¸º 16 ä½ï¼šax å­˜å•†ï¼Œdx å­˜ä½™æ•° ä¼ªæŒ‡ä»¤ dd ddï¼šdword (double word)\ndup ä½¿ç”¨æ ¼å¼ï¼šdb é‡å¤æ¬¡æ•° dup (é‡å¤çš„å­—èŠ‚å‹æ•°æ®)\nLab 7 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 assume cs:code data segment db '1975','1976','1977','1978','1979','1980','1981','1982','1983' db '1984','1985','1986','1987','1988','1989','1990','1991','1992' db '1993','1994','1995' ;ä»¥ä¸Šæ˜¯è¡¨ç¤º21å¹´çš„21ä¸ªå­—ç¬¦ä¸² dd 16,22,382,1356,2390,8000,16000,24486,50065,97479,140417,197514 dd 345980,590827,803530,1183000,1843000,2759000,3753000,4649000,5937000 ;ä»¥ä¸Šæ˜¯è¡¨ç¤º21å¹´å…¬å¸æ€»æ”¶å…¥çš„21ä¸ªdwordå‹æ•°æ® dw 3,7,9,13,28,38,130,220,476,778,1001,1442,2258,2793,4037,5635,8226 dw 11542,14430,15257,17800 ;ä»¥ä¸Šæ˜¯è¡¨ç¤º21å¹´å…¬å¸é›‡å‘˜äººæ•°çš„21ä¸ªwordå‹æ•°æ® data ends table segment db 21 dup('year summ ne ?? ') table ends code segment start:\tmov ax, table mov ds, ax mov ax, data mov es, ax mov bx, 0 mov di, 0 mov cx, 21 s0:\tmov si, 0 push di mov ax, di add di, ax mov ax, es:[di+0] mov [bx].0[si], ax add si, 2 add di, 2 mov ax, es:[di+0] mov [bx].0[si], ax pop di ; year mov si, 0 push di mov ax, di add di, ax mov ax, es:[di+84] mov [bx].5[si], ax add si, 2 add di, 2 mov ax, es:[di+84] mov [bx].5[si], ax pop di ; summ mov si, 0 mov ax, es:[di+168] mov [bx].10[si], ax ; ne add bx, 16 add di, 2 loop s0 mov ax, 4c00h int 21h code ends end start è½¬ç§»æŒ‡ä»¤çš„åŸç† ä¾æ®ä½ç§»è¿›è¡Œè½¬ç§»çš„ jmp æŒ‡ä»¤ æ®µå†…çŸ­è½¬ç§»ï¼šjmp short æ ‡å· IP ä¿®æ”¹èŒƒå›´ï¼š-128 ~ 127 (IP) = (IP) + 8 ä½ä½ç§» å¯¹åº”æœºå™¨ç ä¸­ä¸åŒ…å«è½¬ç§»çš„ç›®çš„åœ°å€ï¼ŒåŒ…å«çš„æ˜¯ä¸‹ä¸€æ¡æŒ‡ä»¤åˆ°æ ‡å·åœ°å€åˆ°ä½ç§»å·® ä½ç§»ç”¨è¡¥ç è¡¨ç¤º æ®µå†…è¿‘è½¬ç§»ï¼šjmp near ptr æ ‡å· IP ä¿®æ”¹èŒƒå›´ï¼š-32768 ~ 32767 (IP) = (IP) + 16 ä½ä½ç§» è½¬ç§»åˆ°ç›®çš„åœ°å€åœ¨æŒ‡ä»¤ä¸­çš„ jmp æŒ‡ä»¤ æ®µé—´è½¬ç§»ï¼šjmp far ptr æ ‡å· è½¬ç§»åœ°å€åœ¨ 16 ä½å¯„å­˜å™¨ä¸­çš„ jmp æŒ‡ä»¤ jmp 16ä½å¯„å­˜å™¨ è½¬ç§»åœ°å€åœ¨å†…å­˜ä¸­çš„ jmp æŒ‡ä»¤ jmp word ptr å†…å­˜å•å…ƒåœ°å€ï¼ˆæ®µå†…è½¬ç§»ï¼‰ jmp dword ptr å†…å­˜å•å…ƒåœ°å€ï¼ˆæ®µé—´è½¬ç§»ï¼‰ jcxz æŒ‡ä»¤ jcxz æ ‡å· è‹¥ cx = 0ï¼Œ(IP) = (IP) + 8 ä½ä½ç§» loop æŒ‡ä»¤ æ‰€æœ‰å¾ªç¯æŒ‡ä»¤éƒ½æ˜¯çŸ­æŒ‡ä»¤\nLab 8 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 assume cs:codesg codesg segment mov ax, 4c00h int 21h start: mov ax, 0 s: nop nop mov di, offset s mov si, offset s2 mov ax, cs:[si] mov cs:[di], ax s1: mov ax, 0 int 21h mov ax, 0 s2: jmp short s1 nop codesg ends end start è¿è¡Œå‰ï¼šä¸èƒ½æ­£ç¡®è¿”å›\nä½¿ç”¨ debug åŠ è½½ç¨‹åºï¼Œä¸€æ­¥æ­¥æ‰§è¡ŒæŒ‡ä»¤å‘ç°\n1 2 3 4 mov di, offset s mov si, offset s2 mov ax, cs:[si] mov cs:[di], ax å°† s å¤„çš„æŒ‡ä»¤ä¿®æ”¹ä¸ºäº† s2 å¤„çš„æŒ‡ä»¤ï¼Œå³\n1 2 s: nop nop å˜æˆäº† jmp short s1 ï¼Œä½†æ˜¯ç”±äºæœºå™¨ç è®°å½•çš„æ˜¯ä½ç§»å·®ï¼Œå› æ­¤æ‰§è¡Œ jmp short s ä¹‹åå†æ¬¡æ‰§è¡Œ s å¤„çš„ jmp short s1 ä¼šè·³è½¬åˆ°å¥‡æ€ªçš„æŒ‡ä»¤å¤„ï¼Œä»è€Œä¸èƒ½æ­£ç¡®è¿”å›\nLab 9 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 assume cs:code ; ç»¿è‰² 00000010B ; ç»¿åº•çº¢è‰² 00100100B ; ç™½åº•è“è‰² 01110001B ; starts from B87A0H code segment mov ax, 0B87AH mov ds, ax mov bx, 0 mov ah, 'w' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'e' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'l' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'c' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'o' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'm' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'e' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, ' ' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 't' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'o' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, ' ' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'm' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'a' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 's' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, 'm' mov al, 00000010B mov word ptr [bx], ax add bx, 2 mov ah, '!' mov al, 00000010B mov word ptr [bx], ax mov ax, 4c00h int 21h code ends end ","description":"Chapter.8 ~ Chapter.9","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰","uri":"/posts/asm5/"},{"categories":["Study Notes","CS:APP"],"content":"å»å¹´çš„æ—¶å€™çœ‹äº†ä¸€ä¸‹ CS:APP ä¸­æ–‡ç‰ˆçš„ç¬¬ä¸€ç«  \u0026 ç¬¬äºŒç« å¼€äº†ä¸ªå¤´ï¼Œå½“æ—¶å•ƒçš„è¿˜æ˜¯æœ‰ç‚¹è¾›è‹¦çš„ï¼Œæ¯•ç«Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†è¿˜æ˜¯å¤ªåŒ®ä¹äº†ï¼ˆ\næ˜¨å¤©çœ‹äº†ä¸€ä¸‹è‹±æ–‡åŸç‰ˆçš„ CS:APP ï¼Œæˆ‘è¶…ï¼Œè§‚æ„Ÿè¿˜ä¸é”™å˜› XD\nä¹Ÿè®¸æ˜¯æˆ‘ç°åœ¨è®¡ç®—æœºåŸºç¡€å·²ç»æ‰©å……äº†å¾ˆå¤šï¼Œä¹Ÿè®¸æ˜¯ä¸­æ–‡ç‰ˆå¯¹å„ç§ä¸“æœ‰åè¯çš„ç¿»è¯‘è®©äººæ„Ÿè§‰ä¸æ˜æ‰€ä»¥ï¼ˆæˆ‘è§‰å¾—è¿™ä¸€ç‚¹å¿…ç„¶æœ‰ï¼ˆx\næ€»ä¹‹é˜…è¯»ä½“éªŒæ¯”å»å¹´è¦å¥½äº†å¤ªå¤šï¼Œä¸ºäº† push è‡ªå·±è¿™æ¬¡å¥½å¥½è¯»è¯»è¿™æœ¬ã€Œè®¡ç®—æœºé¢†åŸŸçš„ç¥ä¹¦ã€ï¼Œæ‰€ä»¥å¼€äº†ä¸ª CS:APP å­¦ä¹ ç¬”è®°ç³»åˆ— (^o^)/\nç¬¬ä¸€ç« å¤§çº¦å°±æ˜¯è®²äº†è®²ä¸€ä¸ª hello ç¨‹åºä»ä½ åœ¨ç¼–è¾‘å™¨ä¸­æ•²ä¸‹ hello.c æ–‡ä»¶åˆ°æœ€åå®ƒè¢«è®¡ç®—æœºæ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ä¸­ç©¶ç«Ÿå‘ç”Ÿäº†äº›ä»€ä¹ˆï¼Œå¯¹å„ç§ä¸“æœ‰åè¯åšäº†ä¸€ä¸ªæ¦‚æ‹¬æ€§çš„ä»‹ç»ï¼Œå°±ä¸ä¸“é—¨å†™ä¸€ä¸ªç¬”è®°äº†ï¼ˆå…¶å®å°±æ˜¯æ‡’\n","description":"è¿™æ¬¡ä¸€å®šè®¤çœŸè¯» XD","tags":["CS:APP","OS"],"title":"CS:APP å­¦ä¹ ç¬”è®° åº","uri":"/posts/csapp%E5%BA%8F/"},{"categories":["Study Notes","Assembly"],"content":"å¯æ‰§è¡Œæ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶ = æè¿°ä¿¡æ¯ + ç¨‹åº\nç¨‹åºï¼šæºç¨‹åºä¸­çš„æ±‡ç¼–æŒ‡ä»¤å’Œå®šä¹‰çš„æ•°æ®\næè¿°ä¿¡æ¯ï¼šä¸»è¦æ˜¯ masm.exeã€link.exe å¯¹æºç¨‹åºä¸­ç›¸å…³ä¼ªæŒ‡ä»¤è¿›è¡Œå¤„ç†æ‰€å¾—åˆ°çš„ä¿¡æ¯\nend start æŒ‡æ˜ç¨‹åºå…¥å£ï¼Œè¢«è½¬åŒ–ä¸ºä¸€ä¸ªå…¥å£åœ°å€ï¼Œå­˜å‚¨åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„æè¿°ä¿¡æ¯ä¸­\næ®µå®¹é‡ ä¸€ä¸ªæ®µæ®µå®¹é‡ä¸èƒ½å¤§äº 64KB ï¼Œè¿™æ˜¯å— 8086CPU çš„é™åˆ¶\nLab 5: ç¼–å†™ã€è°ƒè¯•å…·æœ‰å¤šä¸ªæ®µçš„ç¨‹åº ä»»åŠ¡ä¸€ 0123H, 0456H, 0789H, 0abch, 0defh, 0fedh, 0cbah, 0987H cs = 076C, ss = 076B, ds = 076A data: X - 2, stack: X - 1 ä»»åŠ¡äºŒ 0123H, 0456H cs = 076C, ss = 076B, ds = 076A data: X - 2, stack: X - 1 16 çš„å€æ•°ä¸ªå­—èŠ‚ä¸”å¤§äºç­‰äº N ä»»åŠ¡ä¸‰ 0123H, 0456H cs = 076A, ss = 076E, ds = 0766D data: X + 3, stack: X + 4 ä»»åŠ¡å›› ç¬¬ 3 é¢˜ï¼Œå› ä¸ºæ²¡æœ‰å…¥å£åœ°å€çš„è¯ IP é»˜è®¤ä¸º 0 ï¼Œå‰ä¸¤é¢˜ä» 0 åˆ°åé¢ä¸€æ®µçš„å†…å®¹éƒ½æ˜¯æ•°æ®å†…å®¹è€Œä¸æ˜¯æ­£ç¡®çš„æŒ‡ä»¤å†…å®¹ï¼Œæ— æ³•è¢«æ­£å¸¸æ‰§è¡Œ\nä»»åŠ¡äº” 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 assume cs:code a segment db 1, 2, 3, 4, 5, 6, 7, 8 a ends b segment db 1, 2, 3, 4, 5, 6, 7, 8 b ends c segment db 0, 0, 0, 0, 0, 0, 0, 0 c ends code segment start:\tmov ax, a mov ds, ax mov bx, 0 mov cx, 8 s:\tmov al, ds:[bx] add al, ds:[bx+16] mov ds:[bx+32], al inc bx loop s mov ax, 4c00h int 21h code ends end start ä»»åŠ¡å…­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 assume cs:code a segment dw 1, 2, 3, 4, 5, 6, 7, 8 a ends b segment dw 0, 0, 0, 0, 0, 0, 0, 0 b ends code segment start:\tmov ax, a mov ss, ax mov sp, 32 mov bx, 0 mov cx, 8 s:\tpush ss:[bx] add bx, 2 loop s mov ax, 4c00h int 21h code ends end start Lab 6: å®è·µè¯¾ç¨‹ä¸­çš„ç¨‹åº ä»»åŠ¡ä¸€ ç•¥\nä»»åŠ¡äºŒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 assume cs:codesg, ss:stacksg, ds:datasg stacksg segment dw 0, 0, 0, 0, 0, 0, 0, 0 stacksg ends datasg segment db '1. display ' db '2. brows ' db '3. replace ' db '4. modify ' datasg ends codesg segment start:\tmov ax, stacksg mov ss, ax mov sp, 16 mov ax, datasg mov ds, ax mov bx, 0 mov cx, 4 s0:\tpush cx mov si, 0 mov cx, 4 s:\tmov al, [bx+si+3] and al, 11011111b mov [bx+si+3], al inc si loop s pop cx add bx, 16 loop s0 mov ax, 4c00H int 21H codesg ends end start ","description":"Chapter.6 ~ Chapter.7","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰","uri":"/posts/asm4/"},{"categories":["Study Notes","Assembly"],"content":"ä¼ªæŒ‡ä»¤ end ï¼šæ ‡è®°æ•´ä¸ªç¨‹åºçš„ç»“æŸ\nassume : å°†æœ‰ç‰¹å®šç”¨é€”çš„æ®µå’Œç›¸å…³çš„æ®µå¯„å­˜å™¨å…³è”èµ·æ¥\nç¼–è¯‘ã€è¿æ¥ masm filename; : ç®€æ˜“ç¼–è¯‘æŒ‡ä»¤ï¼Œç”Ÿæˆ .obj æ–‡ä»¶\nlink filename; : ç®€æ˜“è¿æ¥æŒ‡ä»¤ï¼Œç”Ÿæˆ .exe å¯æ‰§è¡Œæ–‡ä»¶\nexe æ–‡ä»¶ä¸­ç¨‹åºçš„åŠ è½½è¿‡ç¨‹ Lab 4: [bx] å’Œ loop çš„ä½¿ç”¨ ä»»åŠ¡ä¸€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 assume cs:code code segment mov ax, 0H mov ds, ax mov bx, 200H mov cx, 64 s: mov ds:[bx], al inc bx inc ax loop s mov ax, 4c00H int 21H code ends end ä»»åŠ¡äºŒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 assume cs:code code segment mov ax, 0H mov ds, ax mov bx, 200H mov cx, 64 s: mov ds:[bx], bl inc bx loop s mov ax, 4c00H int 21H code ends end ä»»åŠ¡ä¸‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 assume cs:code code segment mov ax, cs mov ds, ax mov ax, 0020h mov es, ax mov bx, 0 mov cx, 10h s: mov al, [bx] mov es:[bx], al inc bx loop s mov ax, 4c00h int 21h code ends end ","description":"Chapter.4 ~ Chapter.5","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰","uri":"/posts/asm3/"},{"categories":["Algorithm"],"content":"KMP ç®—æ³•ä¸»è¦ç”¨æ¥è§£å†³ç»™å‡ºä¸€ä¸ªæ–‡æœ¬ä¸²å’Œä¸€ä¸ªæ¨¡å¼ä¸²ï¼Œè¦æ±‚æ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²ä¸­å‡ºç°çš„ä½ç½®ã€æ¬¡æ•°ç­‰çš„é—®é¢˜ï¼Œå®ƒçš„æ ¸å¿ƒå°±æ˜¯å‰ç¼€å‡½æ•°ã€‚\nå‰ç¼€å‡½æ•° ç»™å®šå­—ç¬¦ä¸² $s$ ï¼Œè‹¥ $s$ çš„å­ä¸² $s[0\\sim i]$ ä¸­å­˜åœ¨æŸä¸ªçœŸå‰ç¼€ä¸çœŸåç¼€ç›¸ç­‰ï¼Œè®°è¿™ä¸ªçœŸå‰ç¼€çš„é•¿åº¦ä¸º $k$ ï¼Œå®šä¹‰å‰ç¼€å‡½æ•° $\\pi[i]$ ä¸ºå­ä¸² $s[0\\sim i]$ çš„æœ€å¤§çš„è¿™æ ·çš„ $k$ ã€‚\næœ´ç´ ç®—æ³• ä¸€ç§æš´åŠ›æ±‚å‰ç¼€å‡½æ•°çš„æ–¹æ³•å°±æ˜¯æšä¸¾ $s[0\\sim i]$ çš„çœŸå‰ç¼€ï¼Œåˆ¤æ–­ä¸å¯¹åº”ç›¸ç­‰é•¿åº¦çš„çœŸåç¼€æ˜¯å¦ç›¸ç­‰ï¼Œå¤æ‚åº¦ä¸º $\\mathcal{O}(n^3)$ ã€‚\né«˜æ•ˆç®—æ³• å‡è®¾å½“å‰æ±‚è§£ $\\pi[i]$ ï¼Œå¯ä»¥å‘ç°ï¼Œ$\\pi[i]$ è‡³å¤šæ¯” $\\pi[i-1]$ å¤§ $1$ ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€æšä¸¾é•¿åº¦å°äºç­‰äº $\\pi[i-1]+1$ çš„çœŸå‰ç¼€ï¼Œå¹¶ä¸”æŒ‰ç…§é•¿åº¦ä»å¤§åˆ°å°æšä¸¾ï¼Œçœ‹èµ·æ¥å¤æ‚åº¦è¿˜æ˜¯ $\\mathcal{O}(n^3)$ çš„ï¼Œå®é™…ä¸Šå·²ç»é™ä½åˆ°äº† $\\mathcal{O}(n^2)$ ã€‚\nè¿›ä¸€æ­¥å¯ä»¥å‘ç°ï¼Œå¦‚æœ $s[i]\\not= s[\\pi[i-1]]$ ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ»¡è¶³ $s[0\\sim k-1]$ ä¸ $s[i-k\\sim i-1]$ ç›¸ç­‰çš„æœ€å¤§çš„ $k$ ï¼Œå³ä»…æ¯” $\\pi[i-1]$ å°çš„æ»¡è¶³ $s[0\\sim i-1]$ çš„çœŸå‰ç¼€ä¸çœŸåç¼€ç›¸ç­‰çš„å€¼ï¼Œå®ƒå°±ç­‰äº $\\pi[\\pi[i-1]-1]$ ï¼Œä»¤ $j=\\pi[i-1]$ ï¼Œå¦‚æœå®ƒå¤§äº $\\pi[j-1]$ ï¼Œé‚£ä¹ˆ $\\pi[i-1]$ å°±ä¸æ»¡è¶³å®ƒçš„æœ€å¤§å€¼çš„æ€§è´¨ï¼Œå¦‚æœå®ƒå°äº $\\pi[j-1]$ ï¼Œè¿™å°±ä¸æ»¡è¶³ $\\pi[j-1]$ çš„å®šä¹‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸‹ä¸€æ¬¡åˆ¤æ–­ $s[\\pi[j-1]]$ æ˜¯å¦ä¸ $s[i]$ ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œé‚£å°±é‡å¤ä¸Šè¿°æ“ä½œï¼Œä»¤ $j=\\pi[j-1]$ å†ç»§ç»­åˆ¤æ–­ç›´åˆ° $j=0$ æˆ–è€…åŒ¹é…æˆåŠŸï¼Œæ—¶é—´å¤æ‚åº¦ $\\mathcal{O}(n)$ ã€‚\nå¤æ‚åº¦è¯æ˜ å…ˆè¯ç¬¬ä¸€ä¸ªä¼˜åŒ–çš„ã€‚å¦‚æœä¸€æ¬¡å°±åŒ¹é…æˆåŠŸçš„è¯ï¼Œé‚£ä¹ˆè®¡ç®— $\\pi[i]$ çš„å¤æ‚åº¦å°±æ˜¯ $\\mathcal{O}(1)$ ï¼Œå¦‚æœå¤±é…äº†ï¼Œé‚£ä¹ˆæœ€åå¾—åˆ°çš„ $\\pi[i]\\le \\pi[i-1]$ ï¼Œæˆ‘ä»¬æšä¸¾è¿‡çš„ $s[i]$ çš„çœŸå‰ç¼€åœ¨ä¹‹åéƒ½ä¸ä¼šå†è¢«æšä¸¾åˆ°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ $s[\\pi[i]-1]\\sim s[\\pi[i-1]]$ ç»“å°¾çš„çœŸå‰ç¼€ä¹‹åéƒ½ä¸ä¼šå†è¢«æšä¸¾äº†ï¼Œå› æ­¤ $s$ çš„ä»»æ„ä¸€ä¸ªçœŸå‰ç¼€æœ€å¤šè¢«æšä¸¾ä¸€æ¬¡ï¼Œæ¯æ¬¡æšä¸¾æ¯”è¾ƒçš„å¤æ‚åº¦æ˜¯ $\\mathcal{O}(n)$ ï¼Œæ‰€ä»¥æ€»å¤æ‚åº¦æ˜¯ $\\mathcal{O}(n^2)$ ã€‚\nå†è¯åŠ ä¸Šç¬¬äºŒä¸ªä¼˜åŒ–çš„ã€‚ä¸å‰é¢çš„è¯æ˜ç›¸åŒï¼Œå¦‚æœä¸€æ¬¡åŒ¹é…æˆåŠŸï¼Œåˆ™ç›´æ¥åœæ­¢åŒ¹é…ï¼Œå¦åˆ™ä¸æ–­ä»¤ $j=\\pi[j-1]$ ï¼Œè¿™æ ·çš„ $j$ æ˜¯é€’å‡çš„ï¼Œè€Œä¸”å°äº $\\pi[i-1]$ ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ª $\\pi[i]$ åªä¼šè¢«æšä¸¾ä¸€æ¬¡ï¼Œè€Œæ¯ä¸€æ¬¡çš„åˆ¤æ–­éƒ½æ˜¯ $\\mathcal{O}(1)$ çš„ï¼Œæ‰€ä»¥æ€»å¤æ‚åº¦ä¸º $\\mathcal{O}(n)$ ã€‚\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 vector \u003cint\u003e pre_func(string s) { int n = s.length(); vector \u003cint\u003e pi(n); for (int i = 1; i \u003c n; ++i) { int j = pi[i - 1]; while (j \u0026\u0026 s[i] != s[j]) j = pi[j - 1]; if (s[i] == s[j]) j++; pi[i] = j; } return pi; } åº”ç”¨ å‰ç¼€å‡½æ•°åœ¨å­—ç¬¦ä¸²é¢˜ä¸­æœ‰å¾ˆå¤šç§åº”ç”¨ï¼Œè¿™é‡Œè¦è®²çš„çš„å°±æ˜¯å…¶ä¸­çš„ KMP ç®—æ³•ï¼Œå…¶ä»–çš„åº”ç”¨è¿˜åŒ…æ‹¬æ±‚è§£å­—ç¬¦ä¸²çš„å‘¨æœŸã€ç»Ÿè®¡æ¯ä¸ªå‰ç¼€çš„å‡ºç°æ¬¡æ•°ã€ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœ¬è´¨ä¸åŒå­ä¸²çš„æ•°ç›®ã€å­—ç¬¦ä¸²å‹ç¼©ã€æ„å»ºè‡ªåŠ¨æœºç­‰ï¼Œè¿™äº›åº”ç”¨çš„å‰ç¼€å‡½æ•°çš„åšæ³•å¹¶ä¸æ˜¯å¾ˆå¥½æƒ³ï¼Œä»–ä»¬ä¹ŸåŸºæœ¬å¯ä»¥ç”¨å­—ç¬¦ä¸²å“ˆå¸Œè§£å†³ï¼Œä½†æ˜¯ç›¸åº”çš„ï¼Œå“ˆå¸Œçš„å¤æ‚åº¦æ²¡æœ‰å‰ç¼€å‡½æ•°çš„ä¼˜ç§€ã€‚\nKMP ç®—æ³• ç»™å®šæ–‡æœ¬ä¸² $t$ å’Œæ¨¡å¼ä¸² $s$ ï¼Œè¦æ±‚ $s$ åœ¨ $t$ ä¸­å‡ºç°çš„æ‰€æœ‰ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² $cur=s+â€™#â€™+t$ ï¼Œå…¶ä¸­ $#$ å¯ä»¥æ›¿æ¢ä¸ºä»»ä½•åœ¨ $s,t$ ä¸­æ²¡æœ‰å‡ºç°è¿‡çš„å­—ç¬¦ï¼Œç„¶åæˆ‘ä»¬æ±‚å‡ºæ–°ä¸²çš„å‰ç¼€å‡½æ•°ï¼Œä» $t$ å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹æšä¸¾ï¼Œå¦‚æœå½“å‰ $\\pi[i]=s.length$ ï¼Œå°±è¯´æ˜è¿™é‡Œå‡ºç°äº†ä¸€æ¬¡ $t$ .\nä»£ç  1 2 3 4 5 6 7 8 vector \u003cint\u003e KMP(string text, string pattern) { int n1 = text.length(), n2 = pattern.length(); string cur = pattern + '#' + text; vector \u003cint\u003e pi = pre_func(cur), ret; for (int i = n2 + 1; i \u003c n1 + n2 + 1; ++i) if (pi[i] == n2) ret.push_back(i + 1 - n2 * 2); return ret; } ä¾‹é¢˜ P3375 KMPå­—ç¬¦ä¸²åŒ¹é… Luogu\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include \u003cbits/stdc++.h\u003e using namespace std; string s1, s2; vector \u003cint\u003e pre_func(string s) { int n = s.length(); vector \u003cint\u003e pi(n); for (int i = 1; i \u003c n; ++i) { int j = pi[i - 1]; while (j \u0026\u0026 s[i] != s[j]) j = pi[j - 1]; if (s[i] == s[j]) j++; pi[i] = j; } return pi; } vector \u003cint\u003e KMP(string text, string pattern) { int n1 = text.length(), n2 = pattern.length(); string cur = pattern + '#' + text; vector \u003cint\u003e pi = pre_func(cur), ret; for (int i = n2 + 1; i \u003c n1 + n2 + 1; ++i) if (pi[i] == n2) ret.push_back(i + 1 - n2 * 2); return ret; } int main() { ios :: sync_with_stdio(false); cin.tie(nullptr); cin \u003e\u003e s1 \u003e\u003e s2; vector \u003cint\u003e ans = KMP(s1, s2); for (int i = 0; i \u003c ans.size(); ++i) cout \u003c\u003c ans[i] \u003c\u003c \"\\n\"; ans.clear(); ans = pre_func(s2); for (int i = 0; i \u003c ans.size(); ++i) cout \u003c\u003c ans[i] \u003c\u003c \" \"; return 0; } P4391 Radio Transmission Luogu\nè€ƒè™‘å°†ç»™å‡ºçš„å­—ç¬¦ä¸² $s$ è¡¥å…¨æˆä¸ºç”± $s_2$ è‡ªèº«è¿æ¥æˆä¸ºçš„å­—ç¬¦ä¸² $s_1$ ï¼Œå‡è®¾å½“å‰å·²ç»æ±‚å‡º $s_1$ çš„å‰ç¼€å‡½æ•° $\\pi[i]$ ï¼Œä¸å¦¨è®¾ $s_1$ çš„é•¿åº¦ä¸º $n$ ï¼Œå¯ä»¥å‘ç° $s_1[0\\sim\\pi[n-1]-1]$ ä¸€å®šä¹Ÿæ˜¯ç”± $s_2$ è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè€Œå‰©ä¸‹çš„ $s_1[\\pi[n-1]\\sim n-1]$ åªæœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å®ƒå°±ç­‰äº $s_2$ ï¼Œå¦ä¸€ç§å¯èƒ½æ˜¯å®ƒçš„é•¿åº¦å°äº $s_2$ ï¼Œç”±äº $s_1$ ä¸€å®šæ˜¯ç”± $s_2$ ç»„æˆçš„ï¼Œæ‰€ä»¥è¿™ä¸€ç§æƒ…å†µæ˜¯ä¸å¯èƒ½çš„ï¼Œä»è€Œå‰©ä¸‹çš„è¿™éƒ¨åˆ†å°±æ˜¯ $s_2$ .\næ¥ä¸‹æ¥è€ƒè™‘ $s$ å¼€å¤´å’Œç»“å°¾éœ€è¦è¡¥å…¨çš„éƒ¨åˆ†ã€‚å› ä¸º $s$ æ˜¯ $s_1$ çš„å­ä¸²ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†ä¸€å®šæ˜¯ $s_2$ çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¸å¦¨å°†å¼€å¤´è¿™ä¸€éƒ¨åˆ†å­—ç¬¦ä¸å…¶åå®ƒæ‰€ç¼ºå¤±çš„éƒ¨åˆ†ç»“åˆå½¢æˆä¸€ä¸ªæ–°çš„ $s_2â€™$ ï¼Œç›¸å½“äºå°† $s_2$ ä»ä¸­é—´æˆªæ–­ç„¶åäº¤æ¢ä¸¤å¤´çš„é¡ºåºï¼Œè¿™æ ·ä¸€æ¥ $s$ å°±åªæœ‰ç»“å°¾éƒ¨åˆ†ä¸å®Œæ•´äº†ã€‚ç„¶åæˆ‘ä»¬è¿›ä¸€æ­¥å¯ä»¥å‘ç°ï¼Œè¦æ±‚çš„åªæ˜¯ $s_2$ çš„é•¿åº¦ï¼Œç›´æ¥æ±‚å‡º $\\pi[n-1]$ å†å°† $n-\\pi[n-1]$ ä½œä¸ºç­”æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä»”ç»†æƒ³æƒ³å¯ä»¥å‘ç°å‰©ä¸‹çš„ $s[\\pi[n-1]\\sim n-1]$ å…¶å®ä¹Ÿåªæ˜¯ $s_2â€™$ ä»ä¸­é—´æˆªæ–­ ç„¶åäº¤æ¢ä¸¤å¤´çš„é¡ºåºçš„å˜ä½“è€Œå·²ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include \u003cbits/stdc++.h\u003e using namespace std; vector \u003cint\u003e pre_func(string s) { int n = s.length(); vector \u003cint\u003e pi(n); for (int i = 1; i \u003c n; ++i) { int j = pi[i - 1]; while (j \u0026\u0026 s[j] != s[i]) j = pi[j - 1]; if (s[j] == s[i]) j++; pi[i] = j; } return pi; } int main() { int n; string s; cin \u003e\u003e n \u003e\u003e s; vector \u003cint\u003e nxt = pre_func(s); cout \u003c\u003c n - nxt[n - 1]; return 0; } P3435 OKR-Periods of Words Luogu\nç›¸å½“äºæ±‚æœ€å°çš„å‰ç¼€å’Œåç¼€ç›¸ç­‰çš„å‰ç¼€é•¿åº¦ $len$ ï¼Œç„¶åå¯¹åº”çš„å‘¨æœŸé•¿åº¦å°±æ˜¯ $i+1-len$ ï¼ˆå­—ç¬¦ä¸²ç¬¬ä¸€ä½ä¸º 0 ï¼‰ï¼Œåªéœ€è€ƒè™‘ $len$ è¯¥æ€ä¹ˆæ±‚ã€‚\nå‡è®¾å½“å‰å·²ç»æ±‚å‡º $a[0\\sim i-1]$ çš„ç­”æ¡ˆï¼Œå…¶ä¸­ä»¥ $a[j]$ ä¸ºç»“å°¾çš„å‰ç¼€çš„ç­”æ¡ˆä¸º $ans[j]$ ï¼Œé‚£ä¹ˆå¦‚æœ $a[i]\\not=a[0]$ çš„è¯ï¼Œå¿…ç„¶æœ‰ $ans[i]\u003eans[i-1]$ ï¼Œå®¹æ˜“æƒ³åˆ°ä¸€ç§æš´åŠ›ï¼šå…ˆæ¯”è¾ƒ $s[ans[i-1]]$ å’Œ $s[i]$ ï¼Œç›¸ç­‰å°±ä»¤ $ans[i]=ans[i-1]+1$ ï¼Œå¦åˆ™å°±æš´åŠ›è·³ $next[i]$ ï¼Œæ‰¾æœ€å°çš„é0 çš„é‚£ä¸ªä½œä¸º $ans[i]$ ã€‚ä½†æ˜¯å¯ä»¥å‘ç°ï¼Œå’Œ $ans[i]\u003eans[i-1]$ ç±»ä¼¼çš„ï¼Œå°†æ¯æ¬¡è·³çš„ $next$ å€¼è®°ä¸º $j$ ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ $j\u003ci$ ï¼Œäºæ˜¯ $ans[i]\\ge ans[j]$ ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è·³ä¸€æ¬¡ $next$ ï¼Œç„¶åå°†å®ƒçš„ç­”æ¡ˆä½œä¸º $ans[i]$ å³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #include \u003cbits/stdc++.h\u003e using i64 = long long; const int N = 1e6 + 5; int n; i64 sum; std :: string a; std :: vector \u003cint\u003e next(N), ans(N); std :: vector \u003cint\u003e pre_func(std :: string s) { std :: vector \u003cint\u003e pi(n); for (int i = 1; i \u003c n; ++i) { int j = pi[i - 1]; while (j \u0026\u0026 s[j] != s[i]) j = pi[j - 1]; if (s[j] == s[i]) j++; pi[i] = j; } return pi; } void Calc(std :: string s) { for (int i = 1; i \u003c n; ++i) { int j = next[i] - 1; if (j \u003c 0) continue; ans[i] = ans[j]; if (!ans[i]) ans[i] = next[i]; sum += i + 1 - ans[i]; } } int main() { std :: ios :: sync_with_stdio(false); std :: cin.tie(nullptr); std :: cin \u003e\u003e n \u003e\u003e a; next = pre_func(a); Calc(a); std :: cout \u003c\u003c sum; return 0; } P4828 Censoring S Luogu å¯ä»¥åœ¨ KMP æ±‚ next[] çš„æ—¶å€™ç”¨ä¸€ä¸ªæ ˆæ¥å‚¨å­˜ï¼Œä¸€æ—¦å‘ç°å½“å‰ä½ç½®å‡ºç°äº†å­—ç¬¦ä¸² $t$ å°±ä»æ ˆä¸­å¼¹å‡ºï¼Œç„¶åè®°å¾—æ¯æ¬¡ next[] åˆå§‹åŒ–è¦ä»¤ j = next[stk[top]] å°±å¥½äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include \u003cbits/stdc++.h\u003e const int N = 1e6 + 5; int top; int stk[N \u003c\u003c 1]; void Solve(std :: string s, int n) { int m = s.length(); std :: vector \u003cint\u003e next(m); for (int i = 1; i \u003c n; ++i) { int j = next[i - 1]; while (j \u0026\u0026 s[i] != s[j]) j = next[j - 1]; if (s[i] == s[j]) j++; next[i] = j; } for (int i = n + 1; i \u003c m; ++i) { int j = next[stk[top]]; stk[++top] = i; while (j \u0026\u0026 s[i] != s[j]) j = next[j - 1]; if (s[i] == s[j]) j++; next[i] = j; if (next[i] == n) top -= n; } for (int i = 1; i \u003c= top; ++i) std :: cout \u003c\u003c s[stk[i]]; } int main() { std :: ios :: sync_with_stdio(false); std :: cin.tie(nullptr); std :: string s, t, str; std :: cin \u003e\u003e s \u003e\u003e t; str = t + '#' + s; int n = t.length(); Solve(str, n); return 0; } ","description":"æ—§æ–‡æ¬è¿","tags":["String","KMP"],"title":"KMPç®—æ³•å­¦ä¹ ç¬”è®°","uri":"/posts/kmp/"},{"categories":["æŠ˜è…¾"],"content":"åœ¨å­¦æ±‡ç¼–çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜â€”â€”ç‹çˆ½çš„ã€Œæ±‡ç¼–è¯­è¨€ã€çš„ Lab æ˜¯åœ¨ Windows ç¯å¢ƒä¸‹çš„ x86 æ±‡ç¼–ï¼Œè€Œæˆ‘åªæœ‰ä¸€å° M2 çš„ Mac ï¼Œè¿™æ˜¾ç„¶ä¸è¡Œå•Šï¼ˆæ‚²ï¼‰\näºæ˜¯å¼€å§‹æŸ¥æ‰¾ Mac ä¸‹å­¦ä¹  x86 æ±‡ç¼–çš„æ–¹æ³•ï¼Œå…¶å®è¿˜æŒºç®€å•çš„ã€‚\nä¸»è¦ç”¨åˆ°ä¸¤ä¸ªå·¥å…·ï¼š\nDOSBox masm å…¶ä¸­ DOSBox ç”¨æ¥æ¨¡æ‹Ÿ x86 çš„ç¯å¢ƒï¼Œmasm æ˜¯ä¸€ä¸ªæ±‡ç¼–çš„å·¥å…·åŒ…ã€‚\nä¸‹è½½å¥½ä¹‹åï¼Œå°† masm è§£å‹åˆ°ä¸€ä¸ªæ–¹ä¾¿ç®¡ç†ã€è·¯å¾„ç®€å•çš„åœ°æ–¹ï¼Œæˆ‘å°±ç›´æ¥æ”¾åˆ°äº† username/masm5 è·¯å¾„ä¸‹ï¼Œä¸‹è½½çš„ DOSBox æ˜¯ä¸€ä¸ª dmg æ–‡ä»¶ï¼Œæ‰“å¼€åå°†é‡Œé¢çš„ DOSBox ç›´æ¥æ‹–åˆ° Application æ–‡ä»¶å¤¹ä¸‹å³å¯å®Œæˆå®‰è£…ã€‚\nç„¶åæ‰“å¼€ DOSBox è½¯ä»¶ï¼Œå¯ä»¥è¾“å…¥ dir å‘½ä»¤æŸ¥çœ‹ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œæ¥ç€ä½¿ç”¨ mount å‘½ä»¤æŒ‚è½½ masm å·¥å…·ï¼Œæ¯”å¦‚æˆ‘çš„å‘½ä»¤å°±æ˜¯ mount c ~/masm5 ï¼Œå½“å®ƒæ˜¾ç¤ºæŒ‚è½½æˆåŠŸä¹‹åå°±å¯ä»¥è¾“å…¥ debug è¿›è¡Œæ±‡ç¼–äº†ã€‚\nå¿½ç•¥æˆ‘è¾“å…¥çš„é”™è¯¯å‘½ä»¤ ls\n","description":"æ—§æ–‡æ¬è¿","tags":["Mac","Assembly"],"title":"Macä¸‹å¦‚ä½•å­¦ä¹ x86æ±‡ç¼–","uri":"/posts/learn-8086-asm-using-mac/"},{"categories":["Algorithm"],"content":"è™½ç„¶å¿«é€Ÿå¹‚çš„æ€æƒ³æ¯”è¾ƒç®€å•, è€Œä¸”ä¹‹å‰ä¹Ÿå¤ä¹ è¿‡ä¸€éäº†, ä½†æ˜¯åˆšæ‰å†™ä»£ç çš„æ—¶å€™è¿˜æ˜¯é‡æ–°æ¨äº†ä¸€éæ‰æƒ³èµ·æ¥æ€ä¹ˆå†™, æ‰€ä»¥è¿™é‡Œå†™(æ°´)ä¸€ç¯‡ blog æ¥å¢å¼ºç†è§£.\nç®€ä»‹ å¿«é€Ÿå¹‚æ˜¯ç”¨æ¥å¿«é€Ÿæ±‚è§£ $a^b(\\bmod , p)$ çš„ä¸€ç§ç®—æ³•.\nåˆ†æ å½“ b ä¸æ˜¯å¾ˆå¤§çš„æ—¶å€™, æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥æš´åŠ›æ±‚è§£ $a^b(\\bmod , p)$, è¿™æ—¶å¤æ‚åº¦æ˜¯ $\\mathcal{O}(b)$ , å¯æ˜¯å½“ b çš„æ•°é‡çº§å¾ˆå¤§çš„æ—¶å€™æ€ä¹ˆåŠå‘¢?\nè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å¿«é€Ÿå¹‚ç®—æ³•äº†.\nå½“ b ä¸ºå¶æ•°æ—¶, $a^b=a^{\\frac{b}{2}}\\cdot a^{\\frac{b}{2}}$ , å½“ b ä¸ºå¥‡æ•°æ—¶, $a^b=a^{\\frac{b}{2}}\\cdot a^{\\frac{b}{2}}\\cdot a$.\næˆ‘ä»¬è¦æ˜¯çŸ¥é“ $a^{\\frac{b}{2}}$ å°±å¯ä»¥å¾ˆå¿«æ±‚å‡º $a^b$ äº†, è¿™æ—¶å¾ˆå®¹æ˜“æƒ³åˆ°é€’å½’æ±‚è§£ $a^\\frac{b}{2}$ , æ¯•ç«Ÿè¿™ç§æƒ…å†µä¸‹é€’å½’è®¡ç®— $a^b$ çš„å¤æ‚åº¦æ˜¯ $\\mathcal{O}(\\log{b})$ çš„.\né€’å½’çš„å®ç°æ–¹æ³•å¾ˆç®€å•, è¿™é‡Œä¸å†èµ˜è¿°.\næˆ‘ä»¬è€ƒè™‘éé€’å½’å¼çš„å†™æ³•.\nåœ¨é€’å½’å¼å†™æ³•ä¸­, æ¯é€’å½’ä¸€æ¬¡, a çš„æ¬¡æ•°å°±ä¼šç¿»ä¸€å€, ä¸€å…±é€’å½’äº† $\\lfloor\\log{b}\\rfloor$ æ¬¡, å› æ­¤æˆ‘ä»¬åœ¨å¾ªç¯è¿‡ç¨‹ä¸­æ¯æ¬¡ a *= a å’Œ b \u003e\u003e= 1 å³å¯, ä½†æ˜¯å¦‚æœ b ä¸ºå¥‡æ•°æ—¶éœ€è¦å†ä¹˜ä»¥åŸå§‹çš„ a, è€Œæ­¤æ—¶ a çš„å€¼å·²ç»å˜äº†æ€ä¹ˆåŠ?\næˆ‘ä»¬ä»ä¸€äº›ç®€å•çš„ä¾‹å­å…¥æ‰‹.\nè€ƒè™‘ $b=5$ å’Œ $b=7$ çš„æƒ…å†µ.\n$$ a^5=a^2\\cdot a^2\\cdot a=(a\\cdot a)(a\\cdot a)a $$\n$$ a^7=a^3\\cdot a^3\\cdot a=(a^2\\cdot a)(a^2\\cdot a)a $$\nåœ¨ $b=5$ çš„æƒ…å†µä¸‹, æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€æ¬¡å¾ªç¯æ—¶ä¹˜ä»¥ a , æ­¤æ—¶ a çš„å€¼æ²¡æœ‰å˜, ä¹‹åæˆ‘ä»¬å†ä»¤ a è‡ªä¹˜.\nåœ¨ $b=7$ çš„æƒ…å†µä¸‹, ç¬¬ä¸€æ¬¡å¾ªç¯æ—¶çš„æƒ…å†µä¸ $b=5$ çš„ç›¸åŒ, æ²¡æœ‰å½±å“, ç¬¬äºŒæ¬¡å¾ªç¯æ—¶, å¯¹äºå…ˆå‰åˆ†å‡ºæ¥çš„ 2 ä¸ª $a^3$ æˆ‘ä»¬éƒ½è¦ä¹˜ä¸€æ¬¡ a , ä¹Ÿå°±æ˜¯éœ€è¦ä¹˜ä¸¤æ¬¡ a , ç›¸å½“äºä¹˜ä»¥ $a^2$ , æ­£å¥½æ˜¯æ­¤æ—¶ a å˜åŒ–ä¸€æ¬¡åçš„å€¼.\nåŒç†, æˆ‘ä»¬å¯ä»¥çœ‹å‡º, å½“ b æ›´å¤§, éœ€è¦ä¹˜ a çš„æ¬¡æ•°æ›´å¤šçš„æ—¶å€™, å‡è®¾å½“å‰æ˜¯ç¬¬ k æ¬¡å¾ªç¯, é‚£ä¹ˆæˆ‘ä»¬å·²ç»å°† $a^b$ æ‹†æˆäº† $2^k$ ä¸ª $a^{bÂ»k}$ (å½“ç„¶è¿˜è¦ç®—ä¸Šå¥‡æ•°æƒ…å†µä¸‹å¤šä¹˜çš„ a )çš„å½¢å¼, å½“è¿›å…¥ç¬¬ k + 1 æ¬¡å¾ªç¯æ—¶, è‹¥ b ä¸ºå¥‡æ•°, è¿™ $2^k$ ä¸ª $a^{bÂ»k}$ éƒ½è¦ä¹˜ä¸€ä¸ª a , ç›¸å½“äºä¹˜ä¸Šäº†ä¸€ä¸ª $a^{2^k}$ , è€Œå¯ä»¥å‘ç°è¿™æ­£å¥½æ˜¯å½“å‰ a ç»è¿‡ k æ¬¡è‡ªä¹˜åçš„å€¼, å› æ­¤æˆ‘ä»¬åªéœ€æ¯æ¬¡åˆ¤æ–­ b çš„å¥‡å¶æ€§, è‹¥ä¸ºå¥‡æ•°, å°± ret *= a å³å¯.\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 typedef long long ll; ll binpow(ll a, ll b, ll p) { a %= p; ll ret = 1; while (b \u003e 0) { if (b \u0026 1) ret = ret * a % p; a = a * a % p; b \u003e\u003e= 1; } return ret; } ","description":"æ—§æ–‡æ¬è¿","tags":["å¿«é€Ÿå¹‚","Math"],"title":"å¿«é€Ÿå¹‚å¤ä¹ ç¬”è®°","uri":"/posts/quickpow/"},{"categories":["Study Notes","Assembly"],"content":"é€šç”¨å¯„å­˜å™¨ 8086CPU çš„æ‰€æœ‰å¯„å­˜å™¨éƒ½æ˜¯ 16 ä½çš„ï¼Œå¯ä»¥å­˜æ”¾ 2 å­—èŠ‚çš„æ•°æ®ã€‚\n8086CPU ä¸€å…±æœ‰ 14 ä¸ªå¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯ï¼šAXï¼ŒBXï¼ŒCXï¼ŒDXï¼ŒSIï¼ŒDIï¼ŒSPï¼ŒBPï¼ŒIPï¼ŒCSï¼ŒSSï¼ŒDSï¼ŒESï¼ŒPSWï¼Œå…¶ä¸­ AXï¼ŒBXï¼ŒCXï¼ŒDX é€šå¸¸ç”¨æ¥å­˜æ”¾ä¸€èˆ¬æ€§çš„æ•°æ®ï¼Œç§°ä¸ºé€šç”¨å¯„å­˜å™¨ã€‚\nä¸ºäº†å…¼å®¹ä¸Šä¸€ä»£çš„ 8 ä½å¯„å­˜å™¨ï¼Œ8086 çš„è¿™å››ä¸ªé€šç”¨å¯„å­˜å™¨éƒ½å¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„å¯„å­˜å™¨æ¥ä½¿ç”¨ï¼Œå¦‚ AHã€AL ã€‚\nå­—åœ¨å¯„å­˜å™¨ä¸­çš„å­˜å‚¨ 8086CPU å¯ä»¥ä¸€æ¬¡æ€§å¤„ç†ä¸€ä¸‹ä¸¤ç§å°ºå¯¸çš„æ•°æ®ï¼š\nå­—èŠ‚ï¼š8 ä½ï¼Œå¯ä»¥å­˜æ”¾åœ¨ 8 ä½å¯„å­˜å™¨ä¸­ å­—ï¼š16 ä½ï¼Œå¯ä»¥å­˜æ”¾åœ¨ 16 ä½å¯„å­˜å™¨ä¸­ï¼Œé«˜ä½å­—èŠ‚å’Œåœ°ä½å­—èŠ‚åˆ†åˆ«å­˜æ”¾åœ¨è¯¥ 16 ä½å¯„å­˜å™¨çš„é«˜ 8 ä½å¯„å­˜å™¨ä¸ä½ 8 ä½å¯„å­˜å™¨ä¸­ å‡ æ¡æ±‡ç¼–æŒ‡ä»¤ æ±‡ç¼–æŒ‡ä»¤ æ§åˆ¶ CPU å®Œæˆçš„æ“ä½œ é«˜çº§è¯­è¨€çš„è¯­æ³•æè¿° mov ax,18 å°† 18 é€å…¥å¯„å­˜å™¨ AX AX = 18 mov ah,78 å°† 78 é€å…¥å¯„å­˜å™¨ AH AH = 78 add ax,8 å°†å¯„å­˜å™¨ AX ä¸­çš„æ•°å€¼åŠ  8 AX = AX + 8 mov ax,bx å°†å¯„å­˜å™¨ BX ä¸­çš„æ•°æ®é€å…¥å¯„å­˜å™¨ AX AX = BX add ax,bx å°† AX å’Œ BX ä¸­çš„æ•°å€¼ç›¸åŠ å¹¶å­˜å…¥ AX AX = AX + B æŒ‡ä»¤ä¸­çš„æ•°å€¼ä¹Ÿå¯ä»¥ç”¨ 16 è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œåªéœ€åœ¨åé¢åŠ ä¸Š H è¡¨ç¤ºå³å¯ã€‚\nåœ¨è¿›è¡Œæ•°æ®ä¼ é€å’Œè¿ç®—æ—¶ï¼Œæ³¨æ„æŒ‡ä»¤çš„ä¸¤ä¸ªæ“ä½œå¯¹è±¡çš„ä½æ•°åº”å½“æ˜¯ä¸€è‡´çš„ã€‚\nç‰©ç†åœ°å€ æ‰€æœ‰çš„å†…å­˜å•å…ƒæ„æˆçš„å­˜å‚¨ç©ºé—´æ˜¯ä¸€ä¸ªä¸€ç»´çš„çº¿æ€§ç©ºé—´ï¼Œæ¯ä¸€ä¸ªå†…å­˜å•å…ƒåœ¨è¿™ä¸ªç©ºé—´ä¸­éƒ½æœ‰å”¯ä¸€çš„åœ°å€ï¼Œå³ç‰©ç†åœ°å€ã€‚\nCPU å‘åœ°å€æ€»çº¿å‘å‡ºç‰©ç†åœ°å€ä¹‹å‰ï¼Œå¿…é¡»å…ˆåœ¨å†…éƒ¨å½¢æˆè¿™ä¸ªç‰©ç†åœ°å€ã€‚\nä¸åŒçš„ CPU å¯ä»¥æœ‰ä¸åŒçš„å½¢æˆç‰©ç†åœ°å€çš„æ–¹å¼ã€‚\n16 ä½ç»“æ„çš„ CPU 16 ä½ç»“æ„æè¿°äº†ä¸€ä¸ª CPU å…·æœ‰ä¸‹é¢å‡ æ–¹é¢çš„ç»“æ„ç‰¹æ€§ï¼š\nè¿ç®—å™¨ä¸€æ¬¡æœ€å¤šå¯ä»¥å¤„ç† 16 ä½çš„æ•°æ® å¯„å­˜å™¨çš„æœ€å¤§å®½åº¦ä¸º 16 ä½ å¯„å­˜å™¨å’Œè¿ç®—å™¨ä¹‹é—´çš„é€šè·¯ä¸º 16 ä½ 8086CPU ç»™å‡ºç‰©ç†åœ°å€çš„æ–¹æ³• 8086CPU çš„åœ°å€æ€»çº¿ä¸º 20 ä½ï¼Œå¯ä»¥è¾¾åˆ° 1MB çš„å¯»å€èƒ½åŠ›ï¼Œä½†æ˜¯åˆæ˜¯ 16 ä½ç»“æ„ï¼Œè¡¨ç°å‡ºçš„å¯»å€èƒ½åŠ›åªæœ‰ 64KB ï¼Œå› æ­¤ 8086CPU é‡‡ç”¨ä¸€ç§ç”¨ä¸¤ä¸ª 16 ä½åœ°å€åˆæˆçš„æ–¹æ³•å½¢æˆä¸€ä¸ª 20 ä½çš„ç‰©ç†åœ°å€ï¼šç‰©ç†åœ°å€ = æ®µåœ°å€ X 16 + åç§»åœ°å€\næ®µåœ°å€ åœ¨ç¼–ç¨‹æ—¶å¯ä»¥æ ¹æ®éœ€è¦ï¼Œå°†è‹¥å¹²åœ°å€è¿ç»­çš„å†…å­˜å•å…ƒçœ‹ä½œä¸€ä¸ªæ®µï¼Œä¸€ä¸ªæ®µçš„èµ·å§‹åœ°å€ä¸€å®šæ˜¯ 16 çš„å€æ•°ï¼Œé•¿åº¦æœ€å¤§ä¸º 64KB ã€‚\næ®µå¯„å­˜å™¨ æ®µåœ°å€åœ¨ 8086CPU çš„æ®µå¯„å­˜å™¨ä¸­å­˜æ”¾ï¼Œ8086CPU æœ‰ 4 ä¸ªå¯„å­˜å™¨ï¼šCSã€DSã€SSã€ES ã€‚\nCS å’Œ IP CS ä¸ºä»£ç æ®µå¯„å­˜å™¨ï¼ŒIP ä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ã€‚\n8086 æœºä¸­ï¼Œä»»æ„æ—¶åˆ»ï¼ŒCPU å°† CS:IP æŒ‡å‘çš„å†…å®¹å½“åšæŒ‡ä»¤æ‰§è¡Œï¼Œå®ƒçš„å·¥ä½œè¿‡ç¨‹å¯ä»¥ç®€è¦æè¿°å¦‚ä¸‹ï¼š\nä» CS:IP æŒ‡å‘çš„å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œè¯»å–çš„æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ IP = IP + æ‰€è¯»å–çš„æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ æ‰§è¡ŒæŒ‡ä»¤ã€‚ç„¶åè½¬åˆ°æ­¥éª¤ 1 é‡å¤è¿‡ç¨‹ åœ¨ 8086PC åˆšå¯åŠ¨æ—¶ï¼ŒCS å’Œ IP è®¾ç½®ä¸º CS = FFFFH, IP = 0000H ï¼Œæ‰€ä»¥ FFFF0H æ˜¯ 8086PC å¼€æœºåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚\nCPU å°† CS:IP æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„å†…å®¹çœ‹ä½œæŒ‡ä»¤ã€‚\nä¿®æ”¹ CSã€IP çš„æŒ‡ä»¤ 8086CPU å¤§éƒ¨åˆ†å¯„å­˜å™¨çš„å€¼éƒ½å¯ä»¥ç”¨ mov æŒ‡ä»¤æ¥æ”¹å˜ï¼Œmov æŒ‡ä»¤è¢«ç§°ä¸ºä¼ é€æŒ‡ä»¤ã€‚\nmov æŒ‡ä»¤ä¸èƒ½ç”¨äºè®¾ç½® CSã€IP çš„å€¼ã€‚\nèƒ½å¤Ÿæ”¹å˜ CSã€IP çš„å†…å®¹çš„æŒ‡ä»¤è¢«ç»Ÿç§°ä¸ºè½¬ç§»æŒ‡ä»¤ï¼Œå…¶ä¸­æœ€ç®€å•çš„ä¸€ä¸ªä¸º jmp ã€‚\nè‹¥æƒ³åŒæ—¶ä¿®æ”¹ CSã€IP ï¼Œå¯ä»¥ç”¨ jmp æ®µåœ°å€:åç§»åœ°å€\nè‹¥æƒ³ä»…ä¿®æ”¹ IP ï¼Œå¯ä»¥ç”¨ jmp æŸä¸€åˆæ³•çš„å¯„å­˜å™¨\nä»£ç æ®µ æˆ‘ä»¬å¯ä»¥å°†é•¿åº¦ä¸º N çš„ä¸€ç»„ä»£ç å­˜åœ¨ä¸€ç»„åœ°å€è¿ç»­ã€èµ·å§‹åœ°å€ä¸º 16 çš„å€æ•°çš„å†…å­˜å•å…ƒä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ®µå†…å­˜æ˜¯ç”¨æ¥å­˜æ”¾ä»£ç çš„ï¼Œä»è€Œå®šä¹‰äº†ä¸€ä¸ªä»£ç æ®µã€‚\nCPU åªè®¤è¢« CS:IP æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„å†…å®¹ä¸ºæŒ‡ä»¤ï¼Œæ‰€ä»¥è¦è®© CPU æ‰§è¡Œä»£ç æ®µä¸­çš„æŒ‡ä»¤ï¼Œå¿…é¡»è¦å°† CS:IP æŒ‡å‘æ‰€å®šä¹‰çš„ä»£ç æ®µä¸­çš„ç¬¬ä¸€æ¡æŒ‡ä»¤çš„é¦–åœ°å€ã€‚\nå®éªŒä»»åŠ¡ ä»»åŠ¡ä¸€ ç¬¬ä¸€æ­¥å…ˆæŠŠ CS:IP æŒ‡å‘ 1000:0000 ï¼Œä¹‹åå°†æŒ‡ä»¤è¾“å…¥åˆ°ä»¥ 1000:0000 ä¸ºèµ·ç‚¹çš„åœ°å€ä¸­ã€‚\nå…ˆä½¿ç”¨ E å‘½ä»¤å†™å…¥ï¼Œä½†æ˜¯å†™æ»¡ä¸€è¡Œåå‘ç°ä¸èƒ½ç»§ç»­è¾“å…¥äº†ï¼ŒåŒæ—¶ç”¨ D å‘½ä»¤æŸ¥çœ‹ï¼Œå‘ç°åªæˆåŠŸå†™å…¥äº†è¾“å…¥çš„ä¸€éƒ¨åˆ†æŒ‡ä»¤ï¼Œä¹‹åæ”¹ç”¨ A å‘½ä»¤å†™å…¥ï¼Œæ³¨æ„æŒ‡ä»¤çš„ 16 è¿›åˆ¶æ•°å€¼ä¸éœ€è¦åœ¨æœ«å°¾åŠ  H ã€‚\nç„¶åå°±æ˜¯ä¸æ–­ä½¿ç”¨ T å‘½ä»¤æ‰§è¡Œäº†ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥å‘ç°å¯„å­˜å™¨ä¸­æ•°å€¼æº¢å‡ºæ—¶æ˜¯ç›´æ¥èˆå»æº¢å‡ºéƒ¨åˆ†çš„æ•°ï¼Œè€Œæœªæº¢å‡ºéƒ¨åˆ†çš„æ•°ä¸å˜ï¼ŒåŒæ—¶ä½ 8 ä½å¯„å­˜å™¨æº¢å‡ºä¹Ÿæ˜¯ç›´æ¥æŠ›å¼ƒæº¢å‡ºéƒ¨åˆ†çš„æ•°ï¼Œè€Œä¸æ˜¯å­˜å…¥é«˜ 8 ä½å¯„å­˜å™¨ä¸­ã€‚\nä»»åŠ¡äºŒ ä½¿ç”¨ A å‘½ä»¤å†™å…¥ä¹‹åå°† CS:IP æŒ‡å‘ 2000:0 ã€‚\nè¿™ 3 æ¡æŒ‡ä»¤çš„å«ä¹‰å°±æ˜¯é¦–å…ˆå°† AX èµ‹å€¼ä¸º 1 ï¼Œç„¶åä¸æ–­ä¹˜ä»¥ 2 ï¼Œè¦è®¡ç®— $2^8$ çš„è¯ï¼Œåªéœ€ä¸€ç›´æ‰§è¡Œ T å‘½ä»¤ç›´åˆ° AX å˜ä¸º 0100 å³å¯ã€‚\nä»»åŠ¡ä¸‰ ä½¿ç”¨ D å‘½ä»¤æŸ¥çœ‹ FFF00H ~ FFFFFH çš„å†…å®¹ï¼Œå‘ç° FFFF5H ~ FFFFCH å¯¹åº”çš„ ASCII ç ä¸º 01/01/92 ï¼Œæ¨æµ‹æ­¤ä¸ºç”Ÿäº§æ—¥æœŸï¼Œè¡¨ç¤ºè¯¥ä¸»æ¿åœ¨ 1992 å¹´ 1 æœˆ 1 æ—¥ç”Ÿäº§ã€‚\nå°è¯•ä½¿ç”¨ E å‘½ä»¤æ”¹å˜å®ƒ ï¼Œç»“æœæ”¹å˜å¤±è´¥ï¼Œæ¯•ç«Ÿæ˜¯å†™åœ¨ ROM ä¸Šçš„å˜›\nå¿½ç•¥æˆ‘ä¸ª sb ä¸€å¼€å§‹ç”¨çš„ D å‘½ä»¤ä¿®æ”¹çš„åœ°æ–¹\nä»»åŠ¡å›› ç›´æ¥ç…§æ¬ä¹¦ä¸Šçš„å‘½ä»¤ï¼Œç„¶åå‘ç°æ›´æ”¹å¤±è´¥ XD ï¼Œè¿™å¤§æ¦‚åˆæ˜¯ä¸€ä¸ª ROM å§ï¼ˆ\n","description":"æ—§æ–‡æ¬è¿","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰","uri":"/posts/asm2/"},{"categories":["Algorithm"],"content":"ç¬¬ä¸€ç« â€”â€”åŸºç¡€ æ²™æµ·æ‹¾è´ å› ä¸ºæ˜¯ä¸è¿ç®—ï¼Œåªæœ‰å½“è¿™ m ä¸ªæ•°çš„ç¬¬ k ä½ä¸Šéƒ½æ˜¯ 1 çš„æ—¶å€™æ‰èƒ½ä½¿å¾—æœ€åçš„æ•°çš„ç¬¬ k ä½ä¸º 1 ã€‚\nä¸ºäº†è®©æœ€åçš„å¼€å¿ƒç¨‹åº¦æœ€å¤§ï¼Œæˆ‘ä»¬ä¼˜å…ˆå°†é«˜ä½å– 1 ï¼Œä¹Ÿå°±æ˜¯ä»é«˜ä½å¼€å§‹æšä¸¾ï¼Œé€‰å‡ºæ•°é‡å¤§äº m åŒæ—¶åœ¨ç¬¬ k ä½ä¸Šä¸º 1 çš„æ‰€æœ‰æ•°ï¼Œç„¶åå†ä»¥åŒæ ·çš„æ–¹æ³•ä»è¿™äº›æ•°ä¸­é€‰å–ç¬¬ kâˆ’1 ä½ä¸º 1 çš„æ•°ï¼Œä¾æ¬¡é€‰å–ä¸‹å»ç›´åˆ°å¯é€‰å–çš„æ•°çš„æ•°é‡ç­‰äº m ã€‚\nTag :ä½è¿ç®—\néº¦ç”° å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨å‰ç¼€å’Œç„¶åæš´åŠ›æšä¸¾å·¦ä¸Šè§’å’Œå³ä¸‹è§’ï¼Œä½†æ˜¯å¤æ‚åº¦è¿‡å¤§ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°çŠ¶æ€å‹ç¼©ï¼Œå°†äºŒç»´å˜ä¸ºä¸€ç»´ï¼Œäºæ˜¯åŸé—®é¢˜å°±å˜æˆäº†ä¸€é“ç»å…¸åŒæŒ‡é’ˆé—®é¢˜ã€‚\nTag : å‰ç¼€å’Œã€çŠ¶æ€å‹ç¼©ã€åŒæŒ‡é’ˆ\næ—¶é—´ç®¡ç†å¤§å¸ˆ ä¸€å¼€å§‹æƒ³ç”¨è´ªå¿ƒï¼Œä½†æ˜¯å‘ç°è¶Šæƒ³è¶Šå¤æ‚äº†ã€‚\nå¦‚æœè§‚å¯Ÿç­”æ¡ˆçš„è¯å¯ä»¥å‘ç°ç­”æ¡ˆæ˜¯å•è°ƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨äºŒåˆ†ç­”æ¡ˆçš„æ–¹æ³•ï¼Œå·²çŸ¥æœ€åèƒ½æ”¯æ’‘çš„æ—¶é—´çš„è¯å…·ä½“å……ç”µæ–¹æ¡ˆå°±å¾ˆå¥½æƒ³äº†ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æœ‰å¯èƒ½å³å¯ã€‚\nTag : äºŒåˆ†ç­”æ¡ˆ\nç»„é˜Ÿ æ­£ç¡®è§£æ³•æ˜¯è´ªå¿ƒ + ä¼˜å…ˆé˜Ÿåˆ—ã€‚\né¦–å…ˆè‚¯å®šè¦å°† a æ•°ç»„æ’åºï¼Œè¦ä½¿äººæ•°æœ€å°‘çš„é˜Ÿä¼äººæ•°æœ€å¤šï¼Œæˆ‘ä»¬ä¼˜å…ˆå°†å½“å‰çš„æ•° $a[i]$ æ”¾åˆ°ä»¥ $a[i]-1$ ç»“å°¾çš„é˜Ÿä¼ä¸­äººæ•°æœ€å°‘çš„ä¸€ä¸ªé˜Ÿä¼å³å¯ã€‚æ€è·¯å¾ˆç®€å•ï¼Œè¿™é¢˜çš„éš¾ç‚¹åœ¨äºæ€ä¹ˆå®ç°ã€‚\nå¦‚æœç”¨ä¸€ä¸ª queue æ¥å‚¨å­˜å½“å‰å·²ç»æœ‰äº†çš„é˜Ÿä¼ï¼Œç„¶åå†æš´åŠ›æŸ¥æ‰¾ç¬¦åˆè¦æ±‚çš„äººæ•°æœ€å°‘çš„é˜Ÿä¼ï¼Œæ—¶é—´å¤æ‚åº¦ $\\mathcal{O}(n^2)$ ï¼Œè‚¯å®šä¼š T ï¼Œäºæ˜¯æˆ‘ä»¬è€ƒè™‘ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥å­˜å‚¨æ¯æ¡é˜Ÿä¼çš„äººæ•°ï¼ŒæŸ¥æ‰¾æ—¶åªéœ€è¾“å‡ºé˜Ÿå¤´å³å¯ï¼Œè¿™æ—¶å€™åˆå¦‚ä½•å­˜å‚¨æ¯æ¡é˜Ÿä¼æœ€åä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿå¯ä»¥å¼€ n æ¡ä¼˜å…ˆé˜Ÿåˆ—ï¼Œq[i] è¡¨ç¤ºä»¥ a[i] ç»“å°¾çš„æ‰€æœ‰é˜Ÿä¼çš„äººæ•°ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦å¯¹ a[i] è¿›è¡Œç¦»æ•£åŒ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåˆ†åˆ«ä¸ºæ¯ä¸€ä¸ªäººåˆ†é˜Ÿæ˜¯ $\\mathcal{O}(n)$ çš„ï¼Œpriority_queue çš„æ“ä½œæ˜¯ $\\mathcal{O}(n\\log{n})$ çš„ï¼Œæ‰€ä»¥ æ€»å¤æ‚åº¦æ˜¯ $\\mathcal{O}(n\\log{n})$ ã€‚\nTag : è´ªå¿ƒã€ä¼˜å…ˆé˜Ÿåˆ—\nç¬¬äºŒç« â€”â€”æ•°æ®ç»“æ„åŸºç¡€ ç½‘ä¸Šå†²æµª ç›´æ¥ç”¨æ ˆæ¥æ¨¡æ‹Ÿã€‚\nTag : æ ˆ\næƒ…äººèŠ‚ é¦–å…ˆï¼Œå¦‚æœ flash å’Œä»–çš„ä¸¤ä¸ªå¥³æœ‹å‹åœ¨åŒä¸€æ¡é“¾ä¸Šï¼Œæ˜¾ç„¶é€‰æ‹©ä½äºä¸­é—´çš„é‚£åº§åŸå¸‚ä½œä¸ºç›®æ ‡åŸå¸‚æœ€ä¼˜ï¼›å¦‚æœä»–ä»¬åˆ†åˆ«åœ¨ä¸åŒçš„å­æ ‘ä¸Šï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬ä¸¤ä¸¤ä¹‹é—´çš„ LCA ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±é€‰æ‹©è¿™ä¸ª LCA ä½œä¸ºç›®æ ‡åŸå¸‚ï¼›å¦‚æœä»–ä»¬ä¸­æœ‰ä¸¤ä¸ªåœ¨åŒä¸€å­æ ‘ä¸Šï¼Œå¦ä¸€ä¸ªåœ¨ä¸åŒçš„å­æ ‘ä¸Šï¼Œé‚£ä¹ˆé€‰æ‹©é‚£ä¸¤ä¸ªå®¶ä¼™çš„ LCA ä½œä¸ºç›®æ ‡åŸå¸‚æœ€ä¼˜ã€‚\nç„¶åè¦æ³¨æ„ fa æ•°ç»„å¼€å¤§ä¸€ç‚¹ï¼Œè€ƒè¯•æ—¶å› ä¸ºè¿™ä¸ªè°ƒäº†ä¸ªæŠŠå°æ—¶éƒ½æ²¡å‘ç°ã€‚\nTag : LCA\næƒåŠ›å®å…¸ å› ä¸º l å’Œ r çš„èŒƒå›´å¾ˆå¤§ï¼Œæ‰€ä»¥é¦–å…ˆè¦å¯¹æ•°ç»„è¿›è¡Œç¦»æ•£åŒ–ï¼Œç„¶åæ ¹æ®é¢˜æ„å¤„ç†è¯¢é—®ï¼Œæ‰¾åˆ°æ˜¯å¦æœ‰ $\\max{(a[l+1, r-1])\u003ca[r]\\le a[l]}$ å³å¯ï¼Œå¯¹äºåŒºé—´æœ€å¤§å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ST è¡¨æ¥ $\\mathcal{O}(\\log{n})$ è§£å†³ã€‚\nTag : ç¦»æ•£åŒ–ã€ST è¡¨\nå¤§å¯Œç¿ ä¸€çœ‹åˆ°è¿™ä¸ªçŸ©å½¢å°±åº”è¯¥æƒ³åˆ°å°†äºŒç»´å‹ç¼©æˆä¸€ç»´ï¼Œç„¶åè€ƒè™‘åœ¨åŒºé—´ä¸Šæ‰¾åˆ°ä¸€æ®µå°½é‡é•¿è€Œä¸”æ»¡è¶³é‡‘é¢å’Œå°äº $S$ çš„å­åŒºé—´ï¼Œå‡è®¾å½“å‰è€ƒè™‘çš„å­åŒºé—´ä¸º $[l, r]$ ï¼Œå›ºå®šå·¦ç«¯ç‚¹ $l$ ï¼Œå¦‚æœ $[l, r+1]$ æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œé‚£ä¹ˆ $r$ ä¸€å®šä¸ä¼šæ˜¯ç­”æ¡ˆåŒºé—´ï¼Œå¯ä»¥çœ‹å‡ºå³ç«¯ç‚¹ $r$ æ»¡è¶³å†³ç­–å•è°ƒæ€§ï¼Œå› æ­¤å¯ä»¥ç”¨å•è°ƒæ ˆã€‚\nTag : çŠ¶æ€å‹ç¼©ã€å•è°ƒæ ˆ\nç¬¬ä¸‰ç« â€”â€”å›¾è®ºåŸºç¡€ æ‰“å¡æ–°é¤å… ä¸€é dfs å³å¯ï¼Œé€”ä¸­å¦‚æœåˆ°æŸä¸€ç‚¹çš„ $cost$ å·²ç»å¤§äº $m$ å°±ç›´æ¥ return ã€‚\nTag : DFS\nä¸Šè¯¾ åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šä½¿ç”¨ä¼ é€é—¨å’Œä¸ä½¿ç”¨ä¼ é€é—¨ã€‚\nä¸ä½¿ç”¨ä¼ é€é—¨ï¼Œç›´æ¥è·‘ä¸€éæœ€çŸ­è·¯ç®—å‡º $s$ åˆ° $t$ çš„æœ€çŸ­è·¯ $dis_1$ ã€‚\nä½¿ç”¨ä¼ é€é—¨ï¼Œå°±è·‘ä¸¤éæœ€çŸ­è·¯ï¼Œä¸€éä»¥ $s$ ä¸ºèµ·ç‚¹ï¼Œæ±‚å‡ºåˆ° $S$ çš„æœ€çŸ­è·¯ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸Šä¸€æ­¥ä¸­çš„ $dis_1[S]$ åŠ ä¸Šè·¯ä¸Šçš„è¾¹æ•°ï¼›å¦ä¸€éä»¥ $t$ ä¸ºèµ·ç‚¹ï¼Œæ±‚å‡ºåˆ° $T$ çš„æœ€çŸ­è·¯ï¼Œç„¶åä¸¤ä¸ªæœ€çŸ­è·¯åŠ èµ·æ¥å¾—åˆ°çš„ $dis_2$ å°±æ˜¯ä½¿ç”¨ä¼ é€é—¨çš„æœ€çŸ­è·¯ã€‚\næœ€åæ¯”è¾ƒä¸¤ä¸ªè°å°å°±è¾“å‡ºè°ã€‚\nTag : æœ€çŸ­è·¯\nå¤ä¹  ä¸€çœ¼çœ‹ä¸Šå»æ˜¯ä¸ªè£¸çš„ Topo + è´ªå¿ƒï¼ŒTopo çš„æ—¶å€™ç”¨ä¸ªå°æ ¹å †ç»´æŠ¤å°±å¥½äº†ã€‚\nç„¶è€Œæˆ‘å‡äº†\nè¿™ä¸ªé¡ºåºè¦æ±‚ï¼šåœ¨æ»¡è¶³æ‰€æœ‰å­¦ä¹ é™åˆ¶çš„å‰æä¸‹ï¼ŒçŸ¥è¯†ç‚¹ 1 å°½é‡ä¼˜å…ˆå¤ä¹ ï¼›åœ¨æ»¡è¶³æ‰€æœ‰å­¦ä¹ é™åˆ¶ä¸”çŸ¥è¯†ç‚¹ 1 å°½é‡ä¼˜å…ˆå¤ä¹ çš„å‰æä¸‹ï¼ŒçŸ¥è¯†ç‚¹ 2 å°½é‡ä¼˜å…ˆå¤ä¹ ï¼Œâ€¦ä»¥æ­¤ç±»æ¨ã€‚\nè¿™ä¸ªè¦æ±‚å¹¶ä¸æ˜¯æŒ‡ç­”æ¡ˆçš„å­—å…¸åºæœ€å°\næˆ‘ä»¬è€ƒè™‘ä¸€ç»„æ•°æ®\n4 2 2 4 3 1 å¦‚æœæŒ‰ç…§åŸå…ˆçš„ç­–ç•¥æˆ‘ä»¬å¾—åˆ°çš„ç­”æ¡ˆæ˜¯ 2 3 1 4 ï¼Œç„¶è€ŒæŒ‰ç…§è¦æ±‚å®é™…ä¸Šçš„ç­”æ¡ˆåº”è¯¥æ˜¯ 3 1 2 4 ã€‚\nä»è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºæœ‰æ—¶å€™æˆ‘ä»¬è¦é€‰æ‹©ä¸€ä¸ªå½“æ—¶çœ‹ä¸Šå»å¹¶ä¸ä¼˜çš„è§£æ¥å¾—åˆ°æœ€ç»ˆçš„æœ€ä¼˜è§£ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é“é¢˜å¹¶ä¸æ»¡è¶³æ¯ä¸€æ­¥éƒ½æ˜¯é€‰æœ€ä¼˜çš„ç­–ç•¥ï¼Œè¿™æ—¶å€™ä»æ­£é¢ä¸Šæ¥è€ƒè™‘ä¸€ç§æ™®é€‚æ€§çš„ç­–ç•¥ä¼¼ä¹ä¼šå¾ˆéº»çƒ¦çš„æ ·å­ã€‚\né‚£æˆ‘ä»¬ä¸å¦¨ä»åé¢æ€è€ƒã€‚æ—¢ç„¶è¦æ±‚å­—å…¸åºå°çš„çŸ¥è¯†ç‚¹å°½é‡å¾€å‰æ’ï¼Œé‚£ä¹ˆå¯¹äºä¼˜å…ˆçº§ä½ã€å­—å…¸åºåˆå¾ˆå¤§çš„çŸ¥è¯†ç‚¹æˆ‘ä»¬ä¸€å®šä¼šæŠŠå®ƒæ”¾æœ€åï¼Œä¸å¦‚è¿™æ ·ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¼˜å…ˆçº§ä»ä½åˆ°é«˜è€ƒè™‘ï¼Œæ¯æ¬¡æŠŠå­—å…¸åºå¤§çš„æ”¾åé¢ï¼Œè¿™æ ·å…¶å®å°±æ˜¯æŠŠå­—å…¸åºå°çš„å°½é‡å¾€å‰æ”¾äº†ï¼Œç„¶åç»§ç»­åšä¸‹å»å°±æ˜¯å°†è¿™äº›å­—å…¸åºå°çš„æŒ‰ç…§ä¼˜å…ˆçº§æ’åºäº†ï¼Œæ­¤æ—¶ä»–ä»¬éœ€è¦æ»¡è¶³çš„é™åˆ¶åªæœ‰ä¼˜å…ˆçº§ï¼Œä¸èƒ½å†æŠŠå®ƒå¾€å‰æ”¾äº†ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æ¯æ¬¡æŠŠå­—å…¸åºå¤§çš„æ”¾åé¢ï¼Œä¸æ–­çš„åšä¸‹å»ç›´åˆ°ä¸èƒ½åšä¸ºæ­¢ï¼Œè¿™æ ·å­—å…¸åºå¤§çš„é™¤éæ˜¯ä¼˜å…ˆçº§é«˜äºæŸä¸ªå­—å…¸åºå°çš„å¦åˆ™ä¸å¯èƒ½è¢«æ”¾åœ¨å­—å…¸åºå°çš„å‰é¢ã€‚\nå…·ä½“åˆ°æ“ä½œä¸Šæ¥è¯´ï¼Œè¿™ç§åšæ³•æ˜¯æ»¡è¶³è´ªå¿ƒçš„æ¡ä»¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥å»ºä¸€ä¸ªåå›¾ï¼Œç„¶å Topo çš„åŒæ—¶ç”¨ä¸€ä¸ªå¤§æ ¹å †ç»´æŠ¤ï¼Œæœ€åé€†åºè¾“å‡ºç­”æ¡ˆã€‚\nä¸€ç‚¹å¯ç¤ºï¼š\n**å½“æ­£é¢æ€è€ƒæ„Ÿåˆ°ç¹çã€å›°éš¾æ—¶ï¼Œä¸å¦¨è¯•ç€ä»åé¢æ€è€ƒã€‚**ç±»æ¯”æ•°å­¦è¯æ˜é¢˜ä¸­é€šè¿‡è¯æ˜é€†å¦å‘½é¢˜çš„æ­£ç¡®æ€§æ¥è¯æ˜æ­£å‘½é¢˜ã€‚ å»ºåå›¾ Topo ç„¶åé€†åºè¾“å‡ºç­”æ¡ˆæ˜¯åœ¨å¾ˆå¤šå­˜åœ¨å…ˆåå±‚çº§é¡ºåºã€éœ€è¦æ»¡è¶³ä¸€äº›é™åˆ¶çš„å›¾è®ºä¸­çš„å¸¸è§æŠ€å·§ã€‚ Tag : æ‹“æ‰‘æ’åºã€è´ªå¿ƒ\nç«æŠ€ æ­£è§£ä¼¼ä¹æ˜¯ç›´æ¥æš´æœç„¶ååŠ å‰ªæï¼Ÿä¸è¿‡è€ƒè™‘åˆ°ä¸¤ä¸ªåŒå­¦ä¹‹é—´å¯èƒ½çš„ç»“æœæ˜¯ 3 ç§åŠ ä¸Š $N$ çš„èŒƒå›´åªæœ‰ 10 ï¼Œé‚£ä¹ˆæš´æœæ˜¯å¾ˆè‡ªç„¶çš„æ€è·¯äº†ã€‚\nå¸¸ç”¨çš„å‰ªææŠ€å·§ï¼šå¯è¡Œæ€§å‰ªæï¼ˆæ’é™¤ä¸å¯èƒ½çš„çŠ¶æ€ï¼‰ã€è®°å¿†åŒ–å‰ªæï¼ˆé™¤å»é‡å¤å†—ä½™çš„çŠ¶æ€ï¼‰\nTag : æœç´¢ã€å‰ªæ\nç¬¬å››ç« â€”â€”æ•°å­¦åŸºç¡€ PvZ å®¹æ˜“å‘ç°ç›’å­é‡Œæ¯ä¸€ä¸ªçƒçš„ç¼–å· $c$ ä¸€å®šæ»¡è¶³ $ax+by=c$ çš„å½¢å¼ï¼Œè€ƒè™‘è£´èœ€å®šç†ï¼Œå¿…ç„¶æœ‰ $\\gcd(a,b)\\mid c$ ï¼Œå› æ­¤ç»Ÿè®¡ $1\\sim n$ ä¸­æœ‰å¤šå°‘ä¸ªæ•°æ˜¯ $\\gcd(a,b)$ çš„å€æ•°å³å¯ï¼Œç­”æ¡ˆæ˜¯ $\\lfloor\\frac{n}{\\gcd{(a,b)}}\\rfloor$ ï¼Œå¦‚æœè¿™ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå° P å¿…èµ¢ï¼Œå¦åˆ™å¿…è¾“ã€‚\nTag : è£´èœ€å®šç†ã€gcd\nåƒèåœ å¦‚æœä¸€ä¸ªåºåˆ—ä¸­å­˜åœ¨ä¸¤ä¸ªæ•°æ»¡è¶³ä»–ä»¬çš„ä¹˜ç§¯æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ•°åˆ†è§£åçš„æ¯ä¸€ä¸ªè´¨æ•°çš„æ¬¡æ•°ä¸€å®šéƒ½æ˜¯å¶æ•°ï¼Œäºæ˜¯æˆ‘ä»¬åªéœ€ç­›å‡º $1e7$ ä»¥å†…çš„æ‰€æœ‰è´¨æ•°ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªæ•°è®°å½•ä¸‹å®ƒå¯¹äºæ¯ä¸ªè´¨æ•°çš„æ¬¡æ•°çš„å¥‡å¶æ€§ï¼Œå†åœ¨å½“å‰åºåˆ—ä¸­å¯»æ‰¾æ˜¯å¦æœ‰å¥‡å¶æ€§ä¸å®ƒå®Œå…¨ç›¸åŒçš„æ•°å³å¯ï¼Œè¿™ç§æ–¹æ¡ˆçš„å¤æ‚åº¦æ˜¯ $\\mathcal{O}(n^2)$ ï¼Œè¿˜æ˜¯ä¸å¤Ÿä¼˜ç§€ã€‚\næ˜¾ç„¶éœ€è¦ä¼˜åŒ–çš„éƒ¨åˆ†æ˜¯æŸ¥æ‰¾éƒ¨åˆ†ï¼Œæ—¢ç„¶æœ‰ç”¨çš„ä¿¡æ¯åªæ˜¯æ¯ä¸ªè´¨æ•°çš„æ¬¡æ•°çš„å¥‡å¶æ€§ï¼Œæˆ‘ä»¬ä¸å¦¨å°†å¥‡æ•°æ¬¡çš„æŒ‡æ•°ç›´æ¥è®°ä¸º $1$ ï¼Œå¶æ•°æ¬¡çš„æŒ‡æ•°è®°ä¸º $0$ ï¼Œç„¶ååºåˆ—ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½ä¼šå˜æˆ $p_1^{0/1}p_2^{0/1}\\cdots p_n^{0/1}$ ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªæ•°æ¯ä¸ªè´¨æ•°çš„å¥‡å¶æ€§ä¸å®ƒå®Œå…¨ç›¸åŒçš„è¯ï¼Œé‚£ä¹ˆä»–ä»¬å˜å½¢åçš„æ•°æ˜¯å®Œå…¨ç›¸ç­‰çš„ï¼Œäºæ˜¯æˆ‘ä»¬åªéœ€å¼€ä¸€ä¸ª $vis$ æ•°ç»„æˆ–è€…ç”¨ä¸€ä¸ª $map$ æ¥è®°å½•å³å¯ã€‚\nTag : è´ªå¿ƒã€æƒŸä¸€åˆ†è§£å®šç†ã€è´¨æ•°ç­›æ³•\nå‡æ——ä»ªå¼ å¾ˆå®¹æ˜“æƒ³åˆ°è¦ç»Ÿè®¡æ»¡è¶³ $i\\times j=x$ çš„ $(i,j)$ çš„æ•°é‡ï¼Œç„¶åä¸€ä¸ªå‰ç¼€å’ŒåŠ äºŒåˆ†æŸ¥æ‰¾å³å¯ï¼Œæ³¨æ„åˆ° $k\\le \\max(n,m)$ ï¼Œå› æ­¤åªéœ€è¦è€ƒè™‘ $[1,\\max(n,m)]$ çš„ $x$ ï¼Œä¹‹åçš„æ•°ä¸€å®šä¸å¯èƒ½å‡ºç°ã€‚\nä¸å¦¨è®¾ $n\\le m$ ï¼Œè¦ç»Ÿè®¡ $i\\times j=x$ çš„ $(i,j)$ ç›¸å½“äºæ±‚ $x$ çš„çº¦æ•°ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ $\\sum_{d\\mid{x},d\\le n}1$ ï¼ŒåŠ ä¸Šç»Ÿè®¡å‰ç¼€å’Œçš„å¼å­å°±æ˜¯ $\\sum_{i=1}^m\\sum_{d\\mid{i},d\\le n}1$ ï¼Œä¹‹åå°±æ˜¯è€ƒè™‘ä¸€ä¸ª $d$ å¯èƒ½å¯¹å¤šå°‘ä¸ª $i$ äº§ç”Ÿè´¡çŒ®ï¼Œç­”æ¡ˆæ˜¾ç„¶æ˜¯ $\\lfloor \\frac{m}{d}\\rfloor$ ï¼Œå˜æ¢æ±‚å’Œé¡ºåºä¹‹åå¼å­å°±å˜æˆäº† $\\sum_{d=1}^n \\lfloor \\frac{m}{d}\\rfloor$ ï¼Œç„¶åæ•´é™¤åˆ†å—å³å¯ï¼Œå¤æ‚åº¦ $\\mathcal{O}(\\sqrt{m})$ ã€‚\nTag : æ•°è®ºåˆ†å—ã€æ±‚å’Œ\nå·´æ–¯å’Œä»–çš„å­¦ç”Ÿ ç­‰å¼ä¸¤è¾¹çš„è¿ç®—éƒ½æ˜¯åˆ—ç‹¬ç«‹çš„ï¼Œä»¤ $B_{\\star,i}$ è¡¨ç¤º $B$ çš„ç¬¬ $i$ åˆ—ï¼Œåˆ™æœ‰ $\\forall i\\in[1,n],A\\times B_{\\star,i}=C\\odot B_{\\star,i}$ ï¼Œå³ $\\forall i\\in[1,n],\\sum_{k=1}^n A_{j,k}B_{k,i}=B_{j,i}\\odot C_{j,i}$ ã€‚\nçœç•¥ç¬¬äºŒç»´çš„ $i$ ï¼Œæœ‰ $\\forall i\\in[1,n],\\sum_{k=1}^n A_{j,k}B_{k}=B_{j}\\odot C_{j}$\nå¦‚æœ $C_j=0$ åˆ™ä¸ç®¡ï¼Œå¦‚æœ $C_j=1$ åˆ™ç›¸å½“äºæŠŠå·¦ä¾§ $A_{j,j}B_j$ å˜ä¸º $(A_{j,j}-1)B_j$ ï¼Œä¹Ÿå°±æ˜¯ $$ \\forall j\\in[1,n],\\sum_{k=1}^n (A_{j,k}-[k=j\\land C_j])B_k=0 $$ å°† $B_k$ çœ‹åšç¬¬ $k$ ä¸ªå‘é‡é€‰ä¸é€‰ï¼Œç›¸å½“äºä» $n$ ä¸ªå‘é‡ä¸­é€‰è‹¥å¹²ä¸ªï¼Œä½¿å¾—ä»–ä»¬çš„å¼‚æˆ–å€¼ä¸º 0 å‘é‡ï¼Œå¯ä»¥åœ¨ $\\mathcal{O}(\\frac{n^3}{\\omega})$ çš„æ—¶é—´å†…æ±‚å‡ºåŸºæ•° $d_i$ ï¼Œç­”æ¡ˆå³ä¸º $\\prod_{i=1}^n 2^{n-d_i}$ ã€‚\nTag : çº¿æ€§ä»£æ•°ã€çŸ©é˜µ\nç¬¬äº”ç« â€”â€”åŠ¨æ€è§„åˆ’åŸºç¡€ å¤šå…ƒå‡½æ•° å¯ä»¥å‘ç°ç›´æ¥æš´åŠ›é€’æ¨è¿›è¡Œè®¡ç®—ä¼šé‡å¤è®¡ç®—å¾ˆå¤šçŠ¶æ€ï¼ŒåŒæ—¶æ•°æ®èŒƒå›´å¾ˆå°ï¼Œå¯ä»¥ä½¿ç”¨è®°å¿†åŒ–æœç´¢ã€‚\nTag: è®°å¿†åŒ–æœç´¢\nå‹å²é’± è¿™é“é¢˜éœ€è¦æ ¹æ®æ•°æ®èŒƒå›´æ¥é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œå‰ $60%$ çš„æ•°æ®ç›´æ¥æš´æœï¼Œå $40%$ çš„æ•°æ® DP ï¼Œä¸è¿‡ $100%$ çš„æ•°æ®åº”è¯¥å¯ä»¥ç”¨ meet in the middle è§£å†³ã€‚\nTag : æœç´¢ã€åŠ¨æ€è§„åˆ’\næ²¹ç”° åˆ†ç»„èƒŒåŒ…ã€‚å°†ç¬¬ $i$ å—æ²¹ç”°çš„å£«å…µä»å°åˆ°å¤§æ’åºåå¾—åˆ° $a_{i,1\\sim s}$ ï¼Œé‚£ä¹ˆåœ¨è¿™å—æ²¹ç”°éƒ¨ç½²çš„å£«å…µæ•°é‡ä¸€å®šæ˜¯ $2a_{i,x}+1$ ï¼Œèƒ½æˆ˜èƒœçš„å£«å…µæ•°æ˜¯å‰ç¼€å’Œ $a_{i,1\\sim x}$ ï¼Œç›¸å½“äºç¬¬ $i$ ç»„ç‰©å“ä¸€å…±æœ‰ $s$ ä¸ªï¼Œé€‰å–å‰ $j$ ä¸ªçš„é‡é‡æ˜¯ $2a_{i,j}+1$ ï¼Œä»·å€¼æ˜¯å‰ç¼€å’Œ $a_{i,1\\sim j}$ ï¼Œç„¶åèƒŒåŒ…å°±å¥½äº†ï¼Œå¤æ‚åº¦ $\\mathcal{O}(nms)$ ã€‚\nTag : åˆ†ç»„èƒŒåŒ…\nè èèœœ ä»·å€¼è¶Šé«˜çš„è èèœœä¸€å®šä¼šä¼˜å…ˆå–ï¼Œæ‰€ä»¥å¯ä»¥å°† $p_i$ ä»å¤§åˆ°å°æ’åºï¼Œç„¶åå‘ç°å–å‡ºçš„è èèœœçš„æ€»ä»·å€¼å’Œè èèœœç›’çš„æ€»èŠ±è´¹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œåªè€ƒè™‘è èèœœç›’çš„é€‰æ‹©çš„è¯å°±æ˜¯ä¸€ä¸ª 0/1 èƒŒåŒ…é—®é¢˜ï¼Œæˆ‘ä»¬ä»¤ $f[i][j]$ è¡¨ç¤ºå½“å‰è€ƒè™‘åˆ°ç¬¬ $i$ ä¸ªè èèœœç›’ï¼Œä¸€å…±å¯ä»¥æ”¾å…¥ $j$ ä¸ªè èèœœçš„æœ€å°èŠ±è´¹ï¼Œé‚£ä¹ˆ $f[i][j]=\\min{(f[i-1][j],f[i-1][j-c[i]]+e[i])}$ ï¼Œå…¶ä¸­ç¬¬ä¸€ç»´å¯ä»¥æ»šæ‰ï¼Œäºæ˜¯æˆ‘ä»¬æœ€åç›´æ¥æšä¸¾æ”¾å…¥è èèœœçš„ä¸ªæ•°ï¼Œå¯¹ $p[1\\sim i]-f[i]$ å– $\\min$ å³å¯ï¼Œå…¶ä¸­ $p[1\\sim i]$ ä¸ºå‰ç¼€å’Œã€‚\nTag : 0/1 èƒŒåŒ…ã€è´ªå¿ƒ\nç¬¬å…­ç« â€”â€”æ•°æ®ç»“æ„æé«˜ è¯´è° å¾ˆè£¸çš„å¹¶æŸ¥é›†ã€‚ä½†æ˜¯è¦æ³¨æ„ $a,b$ èŒƒå›´å¾ˆå¤§ï¼Œéœ€è¦å…ˆè¿›è¡Œç¦»æ•£åŒ–ï¼Œç„¶åå¯èƒ½å‡ºç°å…ˆè¯´ $a,b$ ä¸åœ¨ä¸€èµ·ï¼Œåé¢åˆåœ¨ä¸€èµ·çš„æƒ…å†µï¼Œæ‰€ä»¥è¿˜è¦å…ˆå¤„ç†æ‰€æœ‰åœ¨ä¸€èµ·çš„æƒ…å†µï¼Œä¹‹åå†åˆ¤æ–­ä¸åœ¨ä¸€èµ·çš„è¯´æ³•ã€‚\nTag : å¹¶æŸ¥é›†\né€‰è¡£æœ è¿™é“é¢˜ä¸»è¦ç”¨åˆ°äº†ä¸¤ä¸ªå¥—è·¯ï¼š\nç”¨çº¿æ®µæ ‘å¯¹ä¸€ä¸² 01 åºåˆ—è¿›è¡Œæ’åºï¼Œæ¯æ¬¡æ’åºçš„å¤æ‚åº¦æ˜¯ $\\log{n}$ å‡è®¾æœ‰åºåˆ— $a_{1\\sim n}$ ï¼Œæ‰“ä¹±å®ƒçš„åŸæœ‰æ¬¡åºï¼ˆä¸ä¸€å®šæ˜¯æŒ‰æ•°å€¼æ’åºï¼‰ï¼Œå¸Œæœ›æ‰¾åˆ°æ–°åºåˆ—çš„ç¬¬ $k$ ä½æ˜¯åŸåºåˆ—çš„ç¬¬å¤šå°‘ä½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨äºŒåˆ†ï¼Œå°†åŸåºåˆ—ç¬¬ $1\\sim mid-1$ ä¸ªæ•°å˜ä¸º $0$ ï¼Œå…¶ä½™çš„æ•°ç½®ä¸º $1$ ï¼Œé‚£ä¹ˆä»¥ç›¸åŒçš„æ–¹å¼æ‰“ä¹±æ¬¡åºåï¼Œè‹¥ç¬¬ $k$ ä½ä¸º $1$ ï¼Œè¯´æ˜ç­”æ¡ˆ $\\ge \\ mid$ ï¼Œå¦åˆ™ $\u003c mid$ ã€‚ çœ‹åˆ°è¿™é“é¢˜ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ’åºæ“ä½œç›´æ¥ $sort$ è‚¯å®šä¼šè¶…æ—¶ï¼Œå¦‚æœè¦å‡å°å¤æ‚åº¦çš„è¯ï¼Œå¿…ç„¶è¦ä»æ’åºçš„æ“ä½œå…¥æ‰‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯æ¬¡æ’åºçš„å¤æ‚åº¦èƒ½å¤Ÿåšåˆ° $\\log{n}$ çš„çº§åˆ«ï¼Œè€Œå¦‚æœåºåˆ—æ˜¯ 01 åºåˆ—çš„è¯ä¾¿å¯ç”¨å¥—è·¯ 1 é™åˆ° $\\mathcal{O}(\\log{n})$ ï¼Œå†çœ‹é—®é¢˜ï¼Œæ­£å¥½å¯ä»¥ç”¨å¥—è·¯ 2 æŠŠåºåˆ—å˜ä¸º 01 åºåˆ—ï¼Œä»è€Œæˆ‘ä»¬æ¯æ¬¡å¯¹åŸåºåˆ—äºŒåˆ†è½¬åŒ–ä¸º 01 åºåˆ—ä¹‹åå¥—ä¸€ä¸ªçº¿æ®µæ ‘å¯¹ $m$ æ¬¡æ“ä½œæ’åºï¼Œç„¶åçœ‹æ’åºåçš„ç¬¬ $q$ ä½æ˜¯ 1 è¿˜æ˜¯ 0 å³å¯ã€‚\næ‰€ä»¥è¿™é“é¢˜åº”è¯¥æ˜¯ä¸€ä¸ªå¥—è·¯é¢˜ï¼ˆ\nTag : å¥—è·¯ã€çº¿æ®µæ ‘\nå±±è„‰ è€ƒè¯•çš„æ—¶å€™æƒ³å¤æ‚äº†ï¼Œå†™äº†ä¸€ä¸ª $\\mathcal{O}(n\\sqrt{n})$ å¹¶ä¸”å¸¸æ•°å¾ˆå¤§çš„åˆ†å—æš´åŠ›ï¼Œç„¶è€Œå¿˜äº† set çš„æ¥å£æœ€ååªèƒ½äº¤ä¸€ä¸ªçº¯æš´åŠ›è§£æ³•ä¸Šå»äº†ã€‚\nå…¶å®è¿™é¢˜æŒºå¥½æƒ³çš„ï¼Œå¯¹äºæ¯æ¬¡çš„è¯¢é—®ï¼Œæ‰¾åˆ°å°äºç­‰äº $b_i$ çš„å±±çš„æ•°é‡ $x$ ï¼Œå¦‚æœå®ƒä»¬éƒ½ä¸åœ¨è¿™ $n$ åº§å±±çš„ä¸¤ç«¯çš„è¯ï¼Œé‚£ä¹ˆç­”æ¡ˆæ˜¾ç„¶å°±æ˜¯ $x+1$ ï¼Œè€Œç»Ÿè®¡è¿™æ ·çš„ $x$ å°±æ˜¯æ ‘çŠ¶æ•°ç»„çš„å¼ºé¡¹äº†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¾ˆè½»æ˜“çš„è§£å†³å•æ¬¡ä¿®æ”¹çš„é—®é¢˜ã€‚è€Œå¯¹äºåœ¨ $n$ åº§å±±çš„ä¸¤ç«¯çš„æƒ…å†µï¼Œæ˜¾ç„¶å¯ä»¥ç›´æ¥å¯¹ä¸¤ç«¯åˆ†åˆ«åˆ¤æ–­ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥åœ¨æ’å…¥æ ‘çŠ¶æ•°ç»„çš„æ—¶å€™åŠ å…¥ $0$ å’Œ $n+1$ ä¸¤ä¸ªèŠ‚ç‚¹ã€‚\nTag : æ ‘çŠ¶æ•°ç»„\né­”æ³•èŠ’æœ é¦–å…ˆè€ƒè™‘æš´åŠ›æ±‚è§£ã€‚æ¯æ¬¡æš´åŠ›æ±‚å‡ºæ‰€æœ‰åˆæ³•çš„è¾¹ï¼Œç„¶ååˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦è”é€šï¼ŒåŒæ—¶åˆ¤æ–­è”é€šå—å†…çš„æœ€å¤§å€¼æ˜¯å¦åˆæ³•ã€‚\nç„¶åè€ƒè™‘ç”¨åˆ†å—ç¦»çº¿å¤„ç†è¯¢é—®ã€‚å…ˆä»¥è¾¹ä¸ºç¬¬ä¸€å…³é”®å­—æ’åºåˆ†å—ï¼Œå†åœ¨å—å†…ä»¥è¯¢é—®ä¸ºç¬¬ä¸€å…³é”®å­—æ’åºï¼Œå½“å‰å—å‰é¢çš„ç‚¹ä¸ºç¬¬äºŒå…³é”®å­—æ’åºï¼Œä¿è¯å‰é¢çš„ç‚¹éƒ½æ˜¯ç¬¦åˆå½“å‰è¯¢é—®ç‚¹å¯¹äºç¬¬ä¸€å…³é”®å­—çš„æ¡ä»¶çš„ã€‚åŒæ—¶ç¬¬äºŒå…³é”®å­—éƒ½æ˜¯å•è°ƒçš„ï¼Œæ‰€ä»¥æŒ‰ç…§å—çš„é¡ºåºå¤„ç†ä¸€ä¸‹ï¼Œå†å¯¹æ¯ä¸ªè¯¢é—®æš´åŠ›å¤„ç†å½“å‰å—çš„è´¡çŒ®ï¼Œç”±äºæ¯æ¬¡å¤„ç†æ¶‰åŠæ’¤é”€æ“ä½œï¼Œå› æ­¤éœ€è¦ç”¨åˆ°å¹¶æŸ¥é›†ã€‚\nTag : åˆ†å—ã€ç¦»çº¿å¤„ç†ã€å¹¶æŸ¥é›†\nç¬¬ä¸ƒç« â€”â€”å›¾è®ºæé«˜ æŒ‘èŠ’æœ å¯ä»¥å‘ç°å¥‡æ•°å’Œå¥‡æ•°ã€å¶æ•°å’Œå¶æ•°çš„ç‚¹æ˜¯ä¸å¯èƒ½å‡ºç°åœ¨åŒä¸€é›†åˆé‡Œçš„ï¼Œå› æ­¤å¯ä»¥å¾—çŸ¥è¿™æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ã€‚\nç„¶åè€ƒè™‘æ±‚äºŒåˆ†å›¾çš„æœ€å¤§ç‹¬ç«‹é›†ï¼ŒæŠŠæ‰€æœ‰æ»¡è¶³ $\\gcd{(i,j)}\\cdot \\gcd{(i+1,j+1)}=1$ çš„ç‚¹ä¹‹é—´è¿ä¸€æ¡è¾¹å†æ±‚è§£å³å¯ã€‚\nTag : äºŒåˆ†å›¾ã€æœ€å¤§ç‹¬ç«‹é›†\nå®Œå…¨å›¾ è€ƒè™‘ Kruskal ç®—æ³•çš„æ­¥éª¤ï¼Œæ¯æ¬¡åŠ å…¥æœ€å°çš„åˆæ³•çš„ä¸€æ¡è¾¹ï¼Œè®°ä¸º $edge(u,v)$ ï¼Œç„¶ååˆå¹¶ä¸¤ä¸ªé›†åˆï¼Œè®¾ $u,v$ æ‰€åœ¨çš„é›†åˆçš„å¤§å°ä¸º $size[u],size[v]$ ï¼Œé‚£ä¹ˆåœ¨é¢˜è¿°çš„å®Œå…¨å›¾ä¸­ï¼Œä»»æ„ä¸€æ¡ä¿©èŠ‚ç‚¹åˆ†å±äºè¿™ä¸¤ä¸ªé›†åˆçš„è¾¹çš„é•¿åº¦éƒ½è¦å¤§äº $val(u,v)$ ï¼Œå¦‚æœæ˜¯è¾¹æƒå’Œæœ€å°çš„å®Œå…¨å›¾çš„è¯ï¼Œé‚£ä¹ˆé•¿åº¦å°±è¦ç­‰äº $val(u,v)+1$ ï¼Œäºæ˜¯è¿™ä¸¤ä¸ªé›†åˆä¹‹é—´çš„è¾¹æƒå’Œå³ä¸º $(val(u,v)+1)\\cdot(size[u]\\cdot size[v]-1)+val(u,v)$ ã€‚\næœ€åçš„åšæ³•æ˜¾ç„¶å°±æ˜¯è·‘ä¸€é Kruskal ï¼Œæ¯æ¬¡å°†ç­”æ¡ˆåŠ ä¸Šä¸Šè¿°è¾¹æƒå’Œå³å¯ã€‚\nTag : æœ€å°ç”Ÿæˆæ ‘ã€Kruskal\næ¢é™© è€ƒè¯•æ—¶åªæƒ³åˆ°å¦‚æœèƒ½æ‰¾å‡ºæ‰€æœ‰çš„è·¯å¾„ç»„æˆä¸€å¼ å®Œå…¨å›¾ï¼Œé‚£ä¹ˆæœ€åçš„ç­”æ¡ˆå°±æ˜¯åœ¨è¿™å¼ å›¾çš„æœ€å°ç”Ÿæˆæ ‘ä¸Šæ±‚ LCA ï¼ŒåŒæ—¶ç”±äº $n$ å¾ˆå¤§ï¼Œå»ºå›¾çš„æ—¶å€™åªéœ€è¦ç•™ä¸‹å¯èƒ½ä¼šç”¨åˆ°çš„è¾¹ï¼Œä½†æ˜¯å‰é¢æ€æ ·æ±‚å‡ºè¿™äº›è·¯å¾„ä¸ä¼šã€‚æ­£ç¡®çš„æ–¹æ³•æ˜¯åŒå‘å®½æœï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°å¤æ‚åº¦ã€‚\nTag : åŒå‘å®½æœã€LCAã€æœ€å°ç”Ÿæˆæ ‘\nç¬¬å…«ç« â€”â€”æ•°å­¦æé«˜ æŒ‘æˆ˜è€…æ¸¸æˆ å½“ $k=1$ æ—¶ï¼Œæ˜¾ç„¶ $n$ ä¸ºå¥‡æ•°çš„è¯æ˜¯å…ˆæ‰‹å¿…èƒœã€‚\nå½“ $k\u003e1$ æ—¶ï¼Œå¦‚æœå½“å‰æ˜¯ä¸¤å †æ•°é‡ç›¸åŒçš„çŸ³å¤´ï¼Œé‚£ä¹ˆæ— è®ºå…ˆæ‰‹æ€ä¹ˆå–ï¼Œåæ‰‹éƒ½å¯ä»¥åœ¨å¦ä¸€å †çŸ³å¤´é‡Œç”¨ç›¸åŒçš„æ–¹å¼å–ï¼Œä»è€Œå…ˆæ‰‹æ˜¯å¿…è¾“çš„ã€‚å› æ­¤ï¼ŒFA åªéœ€åœ¨ä¸€å¼€å§‹å°±å°†å…¶åˆ†æˆä¸¤å †æ•°é‡ç›¸åŒçš„çŸ³å¤´è®©è‡ªå·±æˆä¸ºåæ‰‹å°±æ˜¯å¿…èµ¢çš„ï¼Œè‹¥ $n$ ä¸ºå¥‡æ•°å°±ä»ä¸­é—´å– 1 ä¸ªï¼Œå¦åˆ™å°±å– 2 ä¸ªï¼Œæ‰€ä»¥ FA æ˜¯å¿…èµ¢çš„ã€‚\nTag : åšå¼ˆè®º\næ•°çš„ç ”ç©¶ å½“ $vi(x)=x$ ï¼Œä¹Ÿå°±æ˜¯ $x$ çš„åˆ†è§£å¼ä¸­ä¸å«æœ‰æŒ‡æ•°å¤§äº 1 çš„è´¨å› å­æ—¶ï¼Œç»“è®ºæ˜¾ç„¶ä¸æˆç«‹ã€‚\nå½“ $x$ çš„åˆ†è§£å¼ä¸­å«æœ‰æŒ‡æ•°å¤§äº 1 çš„è´¨å› å­æ—¶ï¼Œæˆ‘ä»¬å°è¯•æ‰¾åˆ°ä½¿å¾—ç»“è®ºæˆç«‹çš„ $y,z$ ï¼Œè§‚å¯Ÿç»“è®ºå¼ï¼Œä¸ç­‰å¼ä¸¤ç«¯çš„æ•°éƒ½æ˜¯ $vi(x)$ çš„å€æ•°ï¼Œå³ç«¯ $x$ é™¤ä»¥ $vi(x)$ ååªå‰©ä¸‹æŒ‡æ•°å¤§äº 1 çš„è´¨å› å­çš„ä¹˜ç§¯äº†ï¼Œè€Œå·¦è¾¹é™¤ä»¥ $vi(x)$ åå‰©ä¸‹çš„å› å­è¿˜ä¸ $y,z$ æœ‰å…³ï¼Œä¸ºäº†å‡å°‘æœªçŸ¥æ•°çš„æ•°é‡ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒåªä¸ $z$ æœ‰å…³å¹¶ä¸”æ˜¾ç„¶ä¸ä¼šå†åŒ…å« $vi(x)$ çš„è´¨å› å­äº†ï¼Œäºæ˜¯æƒ³åˆ°ä»¤ $y=p_1p_2\\cdots p_n$ ï¼Œé‚£ä¹ˆ $z=p_{1}p_{2}\\cdots p_{n}(p_{i_1}^{a_{i_1}-1}p_{i_2}^{a_{i_2}-1}\\cdots p_{i_k}^{a_{i_k}-1}-1)$ ï¼ˆå…¶ä¸­ $a_{i_1},a_{i_2},\\dots,a_{i_k}\u003e1$ ï¼‰ï¼Œæ­¤æ—¶ $$ \\begin{aligned} \\frac{vi(xyz)}{vi(x)}\u0026=vi(p_{i_1}^{a_{i_1}-1}p_{i_2}^{a_{i_2}-1}\\cdots p_{i_k}^{a_{i_k}-1}-1)\\\\ \u0026\\le p_{i_1}^{a_{i_1}-1}p_{i_2}^{a_{i_2}-1}\\cdots p_{i_k}^{a_{i_k}-1}-1\\\\ \u0026\u003c p_{i_1}^{a_{i_1}-1}p_{i_2}^{a_{i_2}-1}\\cdots p_{i_k}^{a_{i_k}-1}\\\\ \u0026= \\frac{x}{vi(x)} \\end{aligned} $$ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ‰¾åˆ°äº†åˆæ³•çš„ $y,z$ ï¼Œä»è€Œå½“ $x$ çš„åˆ†è§£å¼ä¸­å«æœ‰æŒ‡æ•°å¤§äº 1 çš„è´¨å› å­æ—¶ç»“è®ºæ˜¯ä¸€å®šæˆç«‹çš„ã€‚\näºæ˜¯æˆ‘ä»¬éœ€è¦å°† $x$ è´¨å› æ•°åˆ†è§£å³å¯ï¼Œè€ƒè™‘åˆ° $x\\le 10^{18}$ ï¼Œéœ€è¦ä½¿ç”¨ Pollard Rho ç®—æ³•ã€‚\nTag : æ•°è®ºã€æƒŸä¸€åˆ†è§£å®šç†ã€Pollard Rho\nå–·æ³‰ é¢˜æ„å³ä» $[L,R]$ ä¸­é€‰å– $\\le n$ ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ã€‚\nä¸å¦¨ä»¤ $m=R-L+1$ ï¼Œå³ä» $m$ ä¸ªæ•°é‡Œé€‰å– $\\le n$ ä¸ªæ•°ã€‚ç›´æ¥è€ƒè™‘ä¼šå¾ˆå¤æ‚ï¼Œç”±äºä»»æ„ä¸€ç§æ–¹æ¡ˆé€‰å–çš„æ•°æ€»èƒ½æ’åºåå½¢æˆä¸€ä¸ªå•è°ƒä¸é™åºåˆ—ï¼Œå› æ­¤æŒ‰ç…§å¤§å°é¡ºåºæ¥è€ƒè™‘æšä¸¾ä¼šæ›´å¥½ã€‚\nå‡è®¾æ˜¯é€‰å– $k$ ä¸ªæ•°ï¼Œå…ˆä»æœ€ç®€å•çš„æƒ…å†µâ€”â€”å•è°ƒé€’å¢åºåˆ—å¼€å§‹è€ƒè™‘ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•°æ˜¾ç„¶æ˜¯ $\\binom{m}{k}$ ï¼Œå¦‚æœæ˜¯å•è°ƒä¸é™åºåˆ—ï¼Œå‡è®¾ $m$ ä¸ªæ•°åˆ†åˆ«é€‰å– $x_1,x_2,\\dots,x_m$ ä¸ªï¼Œæœ‰ $x_1+x_2+\\cdots+x_m=k$ ï¼Œå¹¶ä¸” $x_i\\ge 0$ ï¼Œé‚£ä¹ˆå°±æ˜¯ç»å…¸éš”æ¿æ³•çš„åº”ç”¨äº†ï¼Œæ–¹æ¡ˆæ•°ä¸º $\\binom{k-1}{m+k-1}$ ï¼Œä»è€Œæœ€åçš„ç­”æ¡ˆä¸º $\\sum_{i=1}^n\\binom{m}{i}+\\binom{m+i-1}{i-1}$ ã€‚\nå°è¯•å°†å¼å­åŒ–ç®€ï¼Œæ ¹æ® $\\binom{n}{m}=\\binom{n-1}{m}+\\binom{n-1}{m-1}$ ï¼Œå…ˆåŠ ä¸Š $\\binom{m}{0}$ å†å‡å» 1 ï¼Œä¸æ–­é€’æ¨çº¦é¡¹å¯ä»¥å¾—åˆ° $\\binom{n+m}{n}-1$ ï¼Œç”±äºæ¨¡æ•°ä¸å¤§ï¼Œå¯ä»¥é‡‡ç”¨ Lucas å®šç†æ±‚è§£ã€‚\nTag : è®¡æ•°åŸç†ã€Lucas å®šç†ã€æ’åˆ—ç»„åˆ\ngcd and prime è€ƒè™‘è«æ¯”ä¹Œæ–¯åæ¼”ã€‚\nåªæœ‰å½“ $\\gcd(i,j)=p(pä¸ºç´ æ•°)$ æ—¶æ‰å¯¹ç­”æ¡ˆæœ‰è´¡çŒ®ï¼Œå› æ­¤åŸå¼è½¬åŒ–ä¸º $\\sum_{i=1}^n\\sum_{j=1}^m[\\gcd(i,j)=p]$ ï¼Œç­‰ä»·äº $\\sum_{p\\in primes}\\sum_{i=1}^n\\sum_{j=1}^m[\\gcd(i,j)=p]$ ã€‚\nè½¬åŒ–ä¸ºå¯ä»¥ç­‰ä»·ä»£æ¢çš„å½¢å¼ï¼Œ$\\sum_{p\\in primes}\\sum_{i=1}^{\\lfloor\\frac{n}{p}\\rfloor}\\sum_{j=1}^{\\lfloor\\frac{m}{p}\\rfloor}[\\gcd(i,j)=1]$ ï¼Œ\nç„¶åå¼€å§‹è«æ¯”ä¹Œæ–¯åæ¼”ï¼Œ$\\sum_{p\\in primes}\\sum_{i=1}^{\\lfloor\\frac{n}{p}\\rfloor}\\sum_{j=1}^{\\lfloor\\frac{m}{p}\\rfloor}\\sum_{d\\mid\\gcd(i,j)}\\mu(d)$ ï¼Œ\næ”¹å˜æ±‚å’Œé¡ºåºï¼Œ$\\sum_{p\\in primes}\\sum_{d=1}^{\\min{(\\lfloor\\frac{n}{p}\\rfloor,\\lfloor\\frac{m}{p}\\rfloor)}}\\mu(d)\\lfloor\\frac{n}{dp}\\rfloor\\lfloor\\frac{m}{dp}\\rfloor$ ï¼Œ\nä»¤ $T=dp$ ï¼Œæ”¹ä¸ºæšä¸¾ $T$ ï¼Œå¯ä»¥å‘ç° $T$ èƒ½å–é $[1,\\min(n, m)]$ ï¼Œè€Œ $d\\mid T$ å·²çŸ¥ï¼Œäºæ˜¯æœ‰ $\\sum_{T=1}^{\\min(n,m)}\\sum_{p\\mid T,p\\in primes}\\mu(\\frac{T}{p})\\lfloor\\frac{n}{T}\\rfloor\\lfloor\\frac{m}{T}\\rfloor$ ï¼Œ\næœ€åç”¨åŸƒæ°ç­›é¢„å¤„ç†æ¯ä¸ª $T$ çš„è´¡çŒ®å¹¶ä¸”æ•´é™¤åˆ†å—ï¼Œå†å¯¹ $T$ è¿›è¡Œå‰ç¼€å’Œå¤„ç†å³å¯ã€‚\nTag : è«æ¯”ä¹Œæ–¯åæ¼”ã€gcdã€æ•°è®ºåˆ†å—ã€ç´ æ€§ç­›\nç¬¬ä¹ç« â€”â€”åŠ¨æ€è§„åˆ’æé«˜ å¤§ç¦¹æ²»æ°´ ç›´æ¥æ±‚è§£æ¯ä¸ªèŠ‚ç‚¹é­å—æ´ªæ°´çš„æ¦‚ç‡æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯åè¿‡æ¥æ±‚è§£å®ƒä¸çˆ†å‘æ´ªæ°´çš„æ¦‚ç‡åˆ™æ¯”è¾ƒç®€å•ï¼Œç­‰äºæ¯æ¡é“è·¯ä¸è¢«æ´ªæ°´å†²å®åŒæ—¶è¯¥èŠ‚ç‚¹ä¸çˆ†å‘æ´ªæ°´çš„æ¦‚ç‡çš„ç§¯ã€‚\nç”±äºè¿™ä¸ªå›¾æ˜¯ä¸€æ£µæ ‘ï¼Œè€ƒè™‘æ¢æ ¹ DP ã€‚ä¸å¦¨è®¾ 1 å·èŠ‚ç‚¹ä¸ºæ ¹ï¼Œä»¤ $f_i$ ä¸ºåœ¨ $i$ çš„å­æ ‘ä¸­ $i$ æœªé­å—æ´ªæ°´çš„æ¦‚ç‡ï¼Œåˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º $f[u]=\\prod_{v\\in son[u]}f[v]+(1-f[v])(1-p)$ ï¼Œè®¾ $g_i$ ä¸º $i$ æœªé­å—æ´ªæ°´çš„æ¦‚ç‡ï¼Œä»¤ $s=\\dfrac{g[u]}{f[v]+(1-f[v])(1-p)}$ ï¼Œäºæ˜¯åˆæœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ $g[v]=fv$ ã€‚\nTag : æ¦‚ç‡è®ºã€æ¢æ ¹ DP\næ¼‚äº®å¦¹å¦¹ è€ƒè™‘æ•°ä½ DP ã€‚è®¾ $f[i][j][k][l][m]$ è¡¨ç¤ºç¬¬ $i$ ä½æ•°ï¼Œæ˜¯å¦å­˜åœ¨è‡³å°‘ 3 ä¸ªç›¸é‚»çš„ç›¸åŒæ•°å­—ä¸º $j$ ï¼Œä¸Šä¸€ä¸ªæ•°ä¸º $k$ ï¼Œç›¸é‚»çš„ç›¸åŒæ•°å­—å‡ºç°æ¬¡æ•°ä¸º $l$ ï¼Œæ˜¯å¦å‡ºç° 4 å’Œ 8 ä¸º $m$ çš„æ–¹æ¡ˆæ•°ï¼Œç„¶åä»¿ç…§ dfs è¿›è¡Œæ•°ä½ DP ã€‚\nTag : æ•°ä½ DP\nçŒ«å’– å¾ˆæ˜¾ç„¶æ˜¯çŠ¶å‹ DP ï¼Œè®¾ $f[i][j]$ ä¸ºè€ƒè™‘å‰ $i$ è¡Œï¼Œå…¶ä¸­ç¬¬ $i$ è¡Œçš„çŠ¶æ€ä¸º $j$ çš„æ–¹æ¡ˆæ•°ç„¶åè¿›è¡ŒçŠ¶æ€è½¬ç§»å³å¯ã€‚\nTag : çŠ¶å‹ DP\n","description":"æ—§æ–‡æ¬è¿","tags":["ACM"],"title":"ACMç®—æ³•å®è·µæ€»ç»“","uri":"/posts/summary-of-acm-algo/"},{"categories":["ACG"],"content":"å› ä¸ºçœ‹åˆ°ã€Šè‘¬é€çš„èŠ™è‰è²ã€‹ä¸­æœ‰ä¸€äº›å°è¯æŒºè§¦åŠ¨äººå¿ƒçš„ï¼ˆä¹Ÿè®¸åªæ˜¯æˆ‘ä¸­äºŒç—…çŠ¯äº†wwwï¼‰ï¼Œåœ¨ Bangumi ä¸Šæ°å¥½çœ‹åˆ°ã€Šè‘¬é€çš„èŠ™è‰è²ã€‹ä¼˜ç§€å°è¯ä¸ªäººæ”¶é›†ï¼Œå› æ­¤çªå‘å¥‡æƒ³ï¼Œä¹Ÿæ¥è®°å½•ä¸€ä¸‹è¿™äº›å°è¯ï¼Œé¡ºä¾¿çœ‹å®Œåä¹Ÿèƒ½åœ¨è¿™é‡Œå†™ç‚¹æ„Ÿè¨€ã€‚\nChap.19 çªè¢­\nè¿™ç§äº‹æƒ…ï¼Œæ€»æ˜¯è¦æœ‰äººå»åšçš„å§ï¼Ÿ\nChap.20 å¸ˆçˆ¶çš„æ‹›å¼\nã€Œæ— è®ºè¢«æ‰“å€’å¤šå°‘æ¬¡ï¼Œä½ éƒ½è¦ä¸åœåœ°ç«™èµ·æ¥åå‡»ã€‚\nâ€‹\tæˆ˜å£«çš„èƒœåˆ©å°±æ˜¯åœ¨æˆ˜åœºä¸Šç«™åˆ°æœ€åã€‚ã€\nChap.22 æœä»å¤©ç§¤\nã€Œå¬å¥½äº†ï¼ŒèŠ™ä¸½è²ã€‚ä¸è¦æƒ³ç€åç•™é’å²ã€‚\nâ€‹\tè¦æ´»å¾—ä¸èµ·çœ¼ã€‚\nâ€‹\tåœ¨ä½ æ€æ­»é­”ç‹ä¹‹æ—¥ï¼Œå°±æ˜¯ä½ åç•™é’å²ä¹‹æ—¶ã€‚ã€\nChap.25 å‰‘ä¹‹ä¹¡\nã€Œå‡å‹‡è€…ä¹Ÿæ²¡ä»€ä¹ˆä¸å¥½çš„å§ã€‚æˆ‘ä¼šå°†é­”ç‹æ‰“å€’ï¼Œè®©è¿™ä¸ªä¸–ç•Œå†æ¬¡æ¢å¤å’Œå¹³ã€‚\nâ€‹\tè¿™æ ·ä¸€æ¥ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆå‡å‹‡è€…ï¼Œè¿˜æ˜¯çœŸå‹‡è€…ï¼Œéƒ½æ— æ‰€è°“äº†ã€‚ã€\nã€Œè¾›ç¾å°”åšåˆ°äº†ã€‚\nâ€‹\tå°±ç®—æ²¡æœ‰é‚£æŠŠå‰‘ï¼Œè¾›ç¾å°”ä¹Ÿä¾ç„¶æ‹¯æ•‘äº†è¿™ä¸ªä¸–ç•Œã€‚\nâ€‹\tä»–æ˜¯çœŸæ­£çš„å‹‡è€…ã€‚ã€\nã€Œæ‰€è°“çš„è‹±é›„ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šè¢«åä¸–æ“…è‡ªç¾åŒ–ã€‚\nâ€‹\tæœ€ç»ˆï¼Œåœ¨è¿™ä¸æ–­çš„ç¾åŒ–è¿‡ç¨‹ä¸­ï¼Œå°±è¿æœ€åˆçš„åŸå‹éƒ½ä¼šé€æ¸æ¶ˆé€ã€‚ã€\nChap.26 é€ç»™æˆ˜å£«çš„ç¤¼ç‰©\nã€ŒåŠªåŠ›è¿‡çš„äººçš†ä¸ºæˆ˜å£«ã€‚ã€\nChap.27 å¹³å‡¡æ‘è½é‡Œçš„ç‰§å¸ˆ\nã€Œåœ¨æˆ‘å¿ƒåº•ï¼Œä¸€å®šæ˜¯ææƒ§ç€å’Œé­”ç‹æˆ˜æ–—çš„å§ã€‚\nâ€‹\tæˆ‘æ—©å·²æ— æ³•å¼¥è¡¥æµé€çš„å²æœˆæ‰€äº§ç”Ÿçš„ç©ºç™½ã€‚ã€\nã€Œé‚£åˆæ€ä¹ˆäº†ï¼ŒèŠ™ä¸½è²ã€‚\nâ€‹\tæˆ‘åœ¨å’Œä½ è°ˆçš„æ˜¯ç°åœ¨ã€‚ã€\n","description":"æ—§æ–‡æ¬è¿","tags":["Anime"],"title":"ã€Œè‘¬é€ã®ãƒ•ãƒªãƒ¼ãƒ¬ãƒ³ã€ä¼˜ç§€å°è¯ä¸ªäººæ”¶é›†","uri":"/posts/%E8%91%AC%E9%80%81%E3%81%AE%E3%83%95%E3%83%AA%E3%83%BC%E3%83%AC%E3%83%B3/"},{"categories":["Algorithm"],"content":"åŒå‘æœç´¢ä¸»è¦åˆ†ä¸ºã€ŒåŒå‘åŒæ—¶æœç´¢ã€å’Œ ã€Œmeet in the middleã€ ä¸¤ç§ç®—æ³•ã€‚\nåŒå‘åŒæ—¶æœç´¢ åŒå‘åŒæ—¶æœç´¢ç®—æ³•ä¸»è¦ç”¨äºè§£å†³ä¸€äº›ç»™å‡ºäº†èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œå•æ¬¡æœç´¢çš„ä»£ä»·ä¸å¤§ï¼ŒåŒæ—¶é¢˜ç›®ä¸­å¯¹ç­”æ¡ˆçš„è·¯å¾„å…·æœ‰ä¸€å®šé™åˆ¶è€Œå¯¼è‡´æ¯æ¬¡éƒ½æš´åŠ›æœç´¢æ¥å¯»æ‰¾ä¸€æ¡åˆæ³•è·¯å¾„çš„ä»£ä»·è¿‡é«˜çš„é—®é¢˜ã€‚\né¡¾åæ€ä¹‰ï¼ŒåŒå‘åŒæ—¶æœç´¢å°±æ˜¯ä»èµ·ç‚¹å’Œç»ˆç‚¹åŒæ—¶å‡ºå‘ï¼Œå„è‡ªæœç´¢åˆ°è¾¾æ¯ä¸ªä½ç½®çš„åˆæ³•è·¯å¾„ï¼Œç„¶åæ ¹æ®é™åˆ¶ç»ŸåˆäºŒè€…çš„çŠ¶æ€æ¥å¾—åˆ°ç­”æ¡ˆã€‚\nã€ŒLuogu P5195ã€Knights of Ni S è´èŒœé‡åˆ°äº†ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹ï¼šå¥¹æ— æ„ä¸­é—¯å…¥äº†æ£®æ—é‡Œçš„ä¸€åº§åŸå ¡ï¼Œå¦‚æœå¥¹æƒ³å›å®¶ï¼Œå°±å¿…é¡»ç©¿è¿‡è¿™ç‰‡ç”±éª‘å£«ä»¬å®ˆæŠ¤ç€çš„æ£®æ—ã€‚ä¸ºäº†èƒ½å®‰å…¨åœ°ç¦»å¼€ï¼Œè´èŒœä¸å¾—ä¸æŒ‰ç…§éª‘å£«ä»¬çš„è¦æ±‚ï¼Œåœ¨æ£®æ—å¯»æ‰¾ä¸€ç§ç‰¹æ®Šçš„çŒæœ¨å¹¶å¸¦ä¸€æ£µç»™ä»–ä»¬ã€‚\nå½“ç„¶ï¼Œè´èŒœæƒ³æ—©ç‚¹ç¦»å¼€è¿™å¯æ€•çš„æ£®æ—ï¼Œäºæ˜¯å¥¹å¿…é¡»å°½å¿«å®Œæˆéª‘å£«ä»¬ç»™çš„ä»»åŠ¡ï¼Œè´èŒœéšèº«å¸¦ç€è¿™ç‰‡æ£®æ—çš„åœ°å›¾ï¼Œåœ°å›¾ä¸Šçš„æ£®æ—è¢«æ”¾å…¥äº†ç›´è§’åæ ‡ç³»ï¼Œå¹¶æŒ‰ $x,y $ è½´ä¸Šçš„å•ä½é•¿åº¦åˆ’åˆ†æˆäº† $ W \\times H\\ ( 1 \\leq W,H \\leq 1000 )$ å—ï¼Œè´èŒœåœ¨åœ°å›¾ä¸ŠæŸ¥å‡ºäº†å¥¹è‡ªå·±ä»¥åŠéª‘å£«ä»¬æ‰€åœ¨çš„ä½ç½®ï¼Œå½“ç„¶åœ°å›¾ä¸Šä¹Ÿæ ‡æ³¨äº†å¥¹æ‰€éœ€è¦çš„çŒæœ¨ç”Ÿé•¿çš„åŒºåŸŸã€‚æŸäº›åŒºåŸŸæ˜¯ä¸èƒ½é€šè¿‡çš„ï¼ˆæ¯”å¦‚è¯´æ²¼æ³½åœ°ï¼Œæ‚¬å´–ï¼Œä»¥åŠé£Ÿäººå…”çš„èšå±…åœ°ï¼‰ã€‚åœ¨æ²¡æœ‰æ‰¾åˆ°çŒæœ¨ä¹‹å‰ï¼Œè´èŒœä¸èƒ½é€šè¿‡éª‘å£«ä»¬æ‰€åœ¨çš„é‚£ä¸ªåŒºåŸŸï¼Œä¸ºäº†ç¡®ä¿å¥¹è‡ªå·±ä¸ä¼šè¿·è·¯ï¼Œè´èŒœåªå‘æ­£åŒ—ã€æ­£ä¸œã€æ­£å—ã€æ­£è¥¿å››ä¸ªæ–¹å‘ç§»åŠ¨ï¼ˆæ³¨æ„ï¼Œå¥¹ä¸ä¼šèµ°å¯¹è§’çº¿ï¼‰ã€‚å¥¹è¦èµ°æ•´æ•´ä¸€å¤©ï¼Œæ‰èƒ½ä»æŸå—åŒºåŸŸèµ°åˆ°ä¸å®ƒç›¸é‚»çš„é‚£å—åŒºåŸŸã€‚\nè´èŒœå¸Œæœ›ä½ èƒ½å¸®å¥¹è®¡ç®—ä¸€ä¸‹ï¼Œå¥¹æœ€å°‘éœ€è¦å¤šå°‘å¤©æ‰å¯è„±ç¦»è¿™å¯æ€•çš„åœ°æ–¹ï¼Ÿè¾“å…¥æ•°æ®ä¿è¯è´èŒœä¸€å®šèƒ½å®Œæˆéª‘å£«çš„ä»»åŠ¡ã€‚\nLuogu\nåˆ†æ å·²çŸ¥èµ·ç‚¹ï¼ˆè´èŒœçš„ä½ç½®ï¼‰å’Œç»ˆç‚¹ï¼ˆéª‘å£«ä»¬çš„ä½ç½®ï¼‰ï¼Œä»æŸç‚¹æœç´¢åˆ°å…¶ä»–æ‰€æœ‰ç‚¹å¹¶ä¸”é€”ä¸­ä¸ç»è¿‡æŸäº›åŒºåŸŸçš„è·ç¦»çš„æ—¶é—´æ˜¯ $\\mathcal{O}(WH)$ çš„ï¼Œä»£ä»·è¾ƒå°ï¼ŒåŒæ—¶é¢˜ç›®è¦æ±‚ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ä¸Šä¸€å®šè¦ç»è¿‡çŒæœ¨ï¼Œå¦‚æœæœç´¢æ‰¾åˆ°èµ·ç‚¹åˆ°çŒæœ¨çš„è·¯å¾„ï¼Œç„¶åå†æšä¸¾ä»æ¯ä¸ªçŒæœ¨èµ°åˆ°ç»ˆç‚¹çš„è·¯å¾„çš„æ—¶é—´æ˜¯ $\\mathcal{O}(W^2H^2)$ çš„ï¼Œæ˜¾ç„¶ä»£ä»·å¤ªå¤§ï¼Œå› æ­¤è¿™æ˜¯ä¸€é“åŒå‘åŒæ—¶æœç´¢æ¿å­é¢˜ã€‚\næˆ‘ä»¬ä»èµ·ç‚¹å’Œç»ˆç‚¹åˆ†åˆ«å‡ºå‘ï¼Œæœç´¢åˆ°è¾¾æ¯ä¸€ä¸ªä½ç½®çš„æœ€çŸ­åˆæ³•è·¯å¾„ï¼Œç„¶åå†æšä¸¾æ¯ä¸€ä¸ªçŒæœ¨çš„ä½ç½®ï¼Œç­”æ¡ˆå°±æ˜¯å¯¹ä»–ä»¬åˆ†åˆ«åˆ°å½“å‰çŒæœ¨çš„æœ€çŸ­è·¯ä¹‹å’Œå– $\\min$ ã€‚\næ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(WH)$\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 #include \u003cbits/stdc++.h\u003e using namespace std; int gi() { int x = 0, f = 1; char c = getchar(); for ( ; !isdigit(c); c = getchar()) if (c == '-') f = -1; for ( ; isdigit(c); c = getchar()) x = x * 10 + (c ^ 48); return x * f; } const int N = 1005; struct hlw { int x, y; } st, ed, wd[N * N]; int n, m, tot, ans; int g[N][N], dis[2][N][N]; int dx[4] = {0, 0, 1, -1}, dy[4] = {1, -1, 0, 0}; bool vis[2][N][N]; void bfs(int op) { queue \u003chlw\u003e q; if (op) { q.push(ed), vis[op][ed.x][ed.y] = 1; dis[op][ed.x][ed.y] = 0; } else { q.push(st), vis[op][st.x][st.y] = 1; dis[op][st.x][st.y] = 0; } while (!q.empty()) { hlw u = q.front(); q.pop(); for (int i = 0; i \u003c 4; ++i) { hlw v = (hlw){u.x + dx[i], u.y + dy[i]}; if (v.x \u003c= 0 || v.y \u003c= 0 || v.x \u003e n || v.y \u003e m) continue; if (g[v.x][v.y] == 1 || vis[op][v.x][v.y]) continue; if (dis[op][v.x][v.y] \u003e dis[op][u.x][u.y] + 1) { dis[op][v.x][v.y] = dis[op][u.x][u.y] + 1; if (!vis[op][v.x][v.y]) q.push(v), vis[op][v.x][v.y] = 1; } } } } int main() { m = gi(), n = gi(); for (int i = 1; i \u003c= n; ++i) for (int j = 1; j \u003c= m; ++j) { g[i][j] = gi(); if (g[i][j] == 2) st.x = i, st.y = j; else if (g[i][j] == 3) ed.x = i, ed.y = j; else if (g[i][j] == 4) wd[++tot].x = i, wd[tot].y = j; } memset(dis, 0x3f3f3f3f, sizeof(dis)); bfs(0), bfs(1); ans = N * N; for (int i = 1; i \u003c= tot; ++i) ans = min(ans, dis[0][wd[i].x][wd[i].y] + dis[1][wd[i].x][wd[i].y]); printf(\"%d\", ans); return 0; } meet in the middle å¦‚æœé¢˜ä¸­çš„æ•°æ®é‡å¾ˆå°ï¼Œä½†æ˜¯åˆæ²¡å°åˆ°å¯ä»¥ç›´æ¥æš´æœçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ meet in the middle ç®—æ³•ã€‚\nmeet in the middle å…¶å®ä¹Ÿæ˜¯ç›´æ¥æš´æœï¼Œä½†æ˜¯å®ƒåªæš´åŠ›æšä¸¾ $\\frac{n}{2}$ çš„æ•°æ®å¯èƒ½äº§ç”Ÿçš„çŠ¶æ€ï¼Œé¦–å…ˆæšä¸¾å‰ä¸€åŠçš„æ•°æ®ï¼Œè®°å½•åˆ°è¾¾æ¯ç§çŠ¶æ€çš„ä»£ä»·ï¼Œç„¶åå†æœç´¢åä¸€åŠçš„æ•°æ®ï¼Œæ‰¾åˆ°ä¸€ç§çŠ¶æ€æ—¶è¦æ³¨æ„ç»Ÿåˆå‰ä¸€åŠçš„çŠ¶æ€çœ‹èƒ½å¦äº§ç”Ÿç­”æ¡ˆã€‚\nå‡å¦‚åŸæ¥ç›´æ¥æš´æœçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $\\mathcal{O}(2^n)$ ï¼Œé‚£ä¹ˆä½¿ç”¨ meet in the middle ä¹‹åçš„æ—¶é—´å¤æ‚åº¦ä¾¿æ˜¯ $\\mathcal{O}(2^{\\frac{n}{2}})$ çš„ã€‚\nã€ŒLuogu P2962ã€Lights G ç»™å‡ºä¸€å¼  $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œæ¯ä¸ªç‚¹çš„åˆå§‹çŠ¶æ€éƒ½ä¸º $0$ã€‚\nä½ å¯ä»¥æ“ä½œä»»æ„ä¸€ä¸ªç‚¹ï¼Œæ“ä½œç»“æŸåè¯¥ç‚¹ä»¥åŠæ‰€æœ‰ä¸è¯¥ç‚¹ç›¸é‚»çš„ç‚¹çš„çŠ¶æ€éƒ½ä¼šæ”¹å˜ï¼Œç”± $0$ å˜æˆ $1$ æˆ–ç”± $1$ å˜æˆ $0$ã€‚\nä½ éœ€è¦æ±‚å‡ºæœ€å°‘çš„æ“ä½œæ¬¡æ•°ï¼Œä½¿å¾—åœ¨æ‰€æœ‰æ“ä½œå®Œæˆä¹‹åæ‰€æœ‰ $n$ ä¸ªç‚¹çš„çŠ¶æ€éƒ½æ˜¯ $1$ã€‚\nLuogu\nåˆ†æ å®¹æ˜“éªŒè¯å¯¹äºä¸€ä¸ªå¼€å…³ï¼Œæˆ‘ä»¬æœ€å¤šæŒ‰ä¸‹ä¸€æ¬¡ï¼Œå› æ­¤æ¯ä¸ªå¼€å…³å¯èƒ½çš„çŠ¶æ€åªæœ‰ä¸¤ç§ï¼šæ‰“å¼€ or ä¸æ‰“å¼€ï¼Œç›´æ¥æš´åŠ›æšä¸¾æ¯ä¸ªå¼€å…³çš„çŠ¶æ€ç„¶ååˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶çš„ä»£ä»·æ˜¯å¾ˆæ˜æ˜¾çš„æŒ‡æ•°çº§åˆ«çš„ï¼Œä»è¿™ä¸€ç‚¹ä¸Šçœ‹å°±åº”è¯¥æƒ³åˆ°æ˜¯å¦èƒ½ç”¨ meet in the middle è§£å†³ã€‚\nå†çœ‹æ•°æ®èŒƒå›´ $n\\le 35$ å¾ˆå°ï¼Œä½†æ˜¯ç›´æ¥æšä¸¾æ¯ä¸ªç‚¹çš„çŠ¶æ€çš„ä»£ä»·æœ€å¤§ä¹Ÿè¿˜æ˜¯ $2^{35}$ çš„æ‰¿å—ä¸èµ·ï¼Œä½†æ˜¯å¦‚æœæŠŠå®ƒæŠ˜åŠä¹‹åå°±æ˜¯ $2^{17.5}$ çš„ï¼Œè¿™å®Œå…¨åœ¨æ‰¿å—èŒƒå›´ä¹‹å†…ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ç”¨ meet in the middle æš´æœã€‚\næ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(n\\cdot 2^{\\frac{n}{2}})$\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #include \u003cbits/stdc++.h\u003e using namespace std; typedef long long ll; int n, m, ans; ll a[40]; map \u003cll, int\u003e f;//æšä¸¾æ¯ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ä¹‹åå¾—åˆ°æ‰€æœ‰å¼€å…³å¯¹åº”çš„çŠ¶æ€ä¸å¯¹åº”æ‰“å¼€å¼€å…³çš„æ•°é‡çš„æ˜ å°„ int main() { int u, v; cin \u003e\u003e n \u003e\u003e m; for (int i = 0; i \u003c n; ++i) a[i] |= (1ll \u003c\u003c i); for (int i = 1; i \u003c= m; ++i) { cin \u003e\u003e u \u003e\u003e v; u--, v--; a[u] |= (1ll \u003c\u003c v), a[v] |= (1ll \u003c\u003c u); } for (ll i = 0; i \u003c (1ll \u003c\u003c (n / 2)); ++i) {//å‰ n/2 ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ ll tmp = 0;//å½“å‰æ‰€æœ‰å¼€å…³çš„çŠ¶æ€ int cnt = 0;//æ‰“å¼€çš„å¼€å…³æ•°ï¼Œå…¶å®å°±æ˜¯ i ä¸­ 1 çš„ä¸ªæ•° for (int j = 0; j \u003c n / 2; ++j) if ((i \u003e\u003e j) \u0026 1) tmp ^= a[j], cnt++; if (f.count(tmp)) f[tmp] = min(f[tmp], cnt); else f[tmp] = cnt; } ans = n; for (ll i = 0; i \u003c (1ll \u003c\u003c (n - n / 2)); ++i) { ll tmp = 0; int cnt = 0; for (int j = 0; j \u003c n - n / 2; ++j) if ((i \u003e\u003e j) \u0026 1) tmp ^= a[j + n / 2], cnt++; if (f.count(tmp ^ ((1ll \u003c\u003c n) - 1))) ans = min(f[tmp ^ ((1ll \u003c\u003c n) - 1)] + cnt, ans); } printf(\"%d\", ans); return 0; } ã€ŒLuogu P3067ã€Balanced Cow Subsets G æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¥¶ç‰›é›†åˆ $S$ æ˜¯å¹³è¡¡çš„ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š\n$S$ éç©ºã€‚ $S$ å¯ä»¥è¢«åˆ’åˆ†æˆä¸¤ä¸ªé›†åˆ $A,B$ï¼Œæ»¡è¶³ $A$ é‡Œçš„å¥¶ç‰›äº§å¥¶é‡ä¹‹å’Œç­‰äº $B$ é‡Œçš„å¥¶ç‰›äº§å¥¶é‡ä¹‹å’Œã€‚åˆ’åˆ†çš„å«ä¹‰æ˜¯ï¼Œ$A\\cup B=S$ ä¸” $A\\cap B=\\varnothing$ã€‚ ç°åœ¨ç»™å®šå¤§å°ä¸º $n$ çš„å¥¶ç‰›é›†åˆ $S$ï¼Œè¯¢é—®å®ƒæœ‰å¤šå°‘ä¸ªå­é›†æ˜¯å¹³è¡¡çš„ã€‚è¯·æ³¨æ„ï¼Œå¥¶ç‰›ä¹‹é—´æ˜¯äº’ä¸ç›¸åŒçš„ï¼Œä½†æ˜¯å®ƒä»¬çš„äº§å¥¶é‡å¯èƒ½å‡ºç°ç›¸åŒã€‚\nLuogu\nåˆ†æ æ¯ä¸ªå…ƒç´ æœ‰ä¸‰ç§å¯èƒ½ï¼šä¸åœ¨å­é›†ä¸­ã€åœ¨å­é›†ä¸­è¢«åˆ†åˆ°é›†åˆ $A$ ã€åœ¨å­é›†ä¸­è¢«åˆ†åˆ°é›†åˆ $B$ ã€‚\nç›´æ¥æš´æœçš„æ—¶é—´å¤æ‚åº¦åŒæ ·ä¹Ÿæ˜¯æŒ‡æ•°çº§ä¸”ä¸å¯æ¥å—çš„ï¼Œè€ŒæŠ˜åŠæœç´¢ä¹‹ååˆ™æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ meet in the middle ç®—æ³•ã€‚\nå½“æˆ‘ä»¬æœç´¢åˆ°å…ƒç´  $k$ æ—¶ï¼Œè‹¥å®ƒä¸åœ¨å­é›†ä¸­ï¼Œåˆ™å½“å‰æ€»ä»£ä»·ä¸å˜ï¼›è‹¥å°†å®ƒåˆ†åˆ°é›†åˆ $A$ ï¼Œåˆ™å°†å½“å‰æ€»ä»£ä»·åŠ ä¸Š $a[k]$ ï¼›è‹¥å°†å®ƒåˆ†åˆ°é›†åˆ $B$ ï¼Œåˆ™å‡å» $a[k]$ ã€‚åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•° status è®°å½•æ¯ä¸ªå…ƒç´ æ˜¯å¦è¢«é€‰å–ï¼Œå¹¶ç”¨ map å»ºç«‹ cost ä¸ status çš„æ˜ å°„ï¼Œç”±äºåŒä¸€ä¸ª cost å¯èƒ½ç”±å¤šä¸ªï¼ˆæœ€å¤š 1023 ä¸ªï¼‰ status äº§ç”Ÿè€Œä¸”æŠ˜åŠä¹‹å status çš„å€¼æœ€å¤§ä¸º 1023 ï¼Œæ‰€ä»¥ map çš„ç¬¬äºŒç»´æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª bitset æ¥å°†ç¬¬ status ä½æ ‡ä¸º 1 è¡¨ç¤º cost å¯ä»¥ç”±å®ƒäº§ç”Ÿã€‚\nè¿™é“é¢˜çš„å…³é”®åœ¨äºå»é‡ã€‚åœ¨æœç´¢ç¬¬ $\\frac{n}{2}\\sim n$ ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœå‰ $\\frac{n}{2}$ ä¸ªå…ƒç´ å¯ä»¥è¾¾åˆ°æ€»ä»£ä»·ä¸º cost çš„ç»“æœï¼Œé‚£ä¹ˆä»–ä»¬ä¸­çš„æ¯ä¸€ç§çŠ¶æ€éƒ½å¯ä»¥å’Œå½“å‰çŠ¶æ€ç»„åˆæˆä¸€ä¸ªå­é›†ã€‚ä½†æ˜¯åŒæ ·çš„ status å› ä¸ºæ¯ä¸ªå…ƒç´ è¢«åˆ†åˆ°çš„é›†åˆä¸åŒæ‰€ä»¥ä¹Ÿä¼šäº§ç”Ÿä¸åŒçš„ cost ï¼Œè€Œè¿™ä¸åŒçš„ cost ä¸‹å¯èƒ½å¯¹åº”äº†å‰ $\\frac{n}{2}$ ä¸ªå…ƒç´ äº§ç”Ÿçš„åŒä¸€çŠ¶æ€ï¼Œä»–ä»¬ç»Ÿåˆä¹‹åçš„å­é›†æ˜¾ç„¶åœ¨å‰é¢å·²ç»è¢«ç»Ÿè®¡è¿‡äº†ï¼Œè¿™å°±äº§ç”Ÿäº†é‡å¤ã€‚\nè§£å†³æ–¹æ¡ˆå°±æ˜¯å»ºä¸€ä¸ªå†å»º 1023 ä¸ªåä¸º vis çš„ bitset ï¼Œå¦‚æœå½“å‰çŠ¶æ€ status ä¸å‰ $\\frac{n}{2}$ ä¸ªå…ƒç´ äº§ç”Ÿçš„æŸç§çŠ¶æ€ statusLast ç»„åˆè¿‡ï¼Œå°±å°† vis[status] çš„ç¬¬ statusLast ä½æ ‡ä¸º 1 ï¼Œåœ¨ç»Ÿè®¡ç­”æ¡ˆä¹‹å‰è¿›è¡Œå»é‡ã€‚\nä¸€ç‚¹åæ§½ï¼š\næˆ‘åšçš„æ—¶å€™ä»¿ç…§å‰ä¸€é¢˜ç›´æ¥ç”¨ 3 è¿›åˆ¶æšä¸¾æ¯ä¸ªå…ƒç´ çš„çŠ¶æ€ï¼Œç„¶åç»Ÿè®¡ç­”æ¡ˆï¼Œä½†æ˜¯æˆ‘ sb æ²¡æ³¨æ„çœ‹é¢˜ï¼Œæœ€åç»Ÿè®¡çš„æ˜¯ä¸åŒå¹³è¡¡å­é›†ä¸‹åˆ†æˆ $A,B$ ä¸¤ä¸ªé›†åˆçš„æ€»æ–¹æ¡ˆæ•°ï¼Œè€Œä¸”ä¸€äº›ç»†èŠ‚ä¸Šæ²¡è€ƒè™‘åˆ°ï¼Œæ¯”å¦‚å $\\frac{n}{2}$ ä¸ªå…ƒç´ åˆ†æˆçš„ $A,B$ é›†åˆå¯ä»¥åˆ†åˆ«æ•´åˆè¿›å‰ $\\frac{n}{2}$ ä¸ªå…ƒç´ åˆ†æˆçš„ $A,B$ é›†åˆå†…ï¼Œè¿™æ ·ä¼šäº§ç”Ÿæ–°çš„ $A,B$ é›†åˆï¼Œå½“ç„¶ï¼Œäº§ç”Ÿçš„å­é›†æ˜¯ä¸€æ ·çš„ã€‚\nè¿™ä¸‹è¯¥åº†å¹¸å½“æ—¶å› ä¸ºä¸æƒ³è°ƒä»£ç å»çœ‹äº†é¢˜è§£å‘ç°çœ‹åŠå¤©çœ‹ä¸æ˜ç™½è§‰å¾—é¢˜è§£æœ‰é—®é¢˜ç„¶åå†çœ‹ä¸€éé—®é¢˜æ‰å‘ç°æˆ‘æŠŠé—®é¢˜æé”™äº†ï¼ˆ\nä¸€äº›è¦æ³¨æ„çš„åœ°æ–¹ï¼š\nå°†åˆ†åˆ°ä¸åŒé›†åˆçš„æƒ…å†µå¯¹å½“å‰ä»£ä»·çš„å½±å“åˆ†åˆ«è®°ä¸º $+a[k]$ å’Œ $-a[k]$ çš„æ–¹å¼æ˜¾ç„¶è¦æ¯”æˆ‘çš„åˆ†åˆ«ç”¨ sum1 å’Œ sum2 æ¥è®°å½• $A,B$ é›†åˆçš„ä»£ä»·è¦æ–¹ä¾¿ç»Ÿåˆå¾—å¤š åœ¨ dfs å‰å°†å…ƒç´  sort ä¸€éå¯ä»¥å¿«å¾ˆå¤š è¿™é‡Œåœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹å¯ä»¥ç›´æ¥å°†è®°å½•çŠ¶æ€çš„äºŒè¿›åˆ¶æ•°ä½œä¸ºè®°å½•å¦ä¸€ç§çŠ¶æ€çš„äºŒè¿›åˆ¶æ•°çš„æŸä¸€ä½æ¥å­˜å‚¨æ•°æ®ï¼Œé«˜æ•ˆæ–¹ä¾¿ æœ€åå»é‡çš„æ–¹å¼å¾ˆå¦™ï¼štmp \u0026= ~vis[status] ä»£ç  100pts æ­£è§£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include \u003cbits/stdc++.h\u003e using namespace std; const int N = 10; int n, ans; int a[25]; bitset \u003c1 \u003c\u003c N\u003e vis[1 \u003c\u003c N]; map \u003cint, bitset \u003c1 \u003c\u003c N\u003e \u003e f; void dfs1(int k, int cost, int status) { if (k == n / 2) { f[cost].set(status); return; } dfs1(k + 1, cost, status); dfs1(k + 1, cost + a[k], status | (1 \u003c\u003c k)); dfs1(k + 1, cost - a[k], status | (1 \u003c\u003c k)); } void dfs2(int k, int cost, int status) { if (k == n) { if (f.count(cost)) { bitset \u003c 1 \u003c\u003c N \u003e tmp(f[cost]); tmp \u0026= ~vis[status]; ans += tmp.count(); vis[status] |= tmp; } return; } dfs2(k + 1, cost, status); dfs2(k + 1, cost + a[k], status | (1 \u003c\u003c (k - n / 2))); dfs2(k + 1, cost - a[k], status | (1 \u003c\u003c (k - n / 2))); } int main() { scanf(\"%d\", \u0026n); for (int i = 0; i \u003c n; ++i) scanf(\"%d\", \u0026a[i]); sort(a, a + n); dfs1(0, 0, 0); dfs2(n / 2, 0, 0); printf(\"%d\", ans - 1);//è®°å¾— -1 å»æ‰å­é›†ä¸ºç©ºé›†çš„æƒ…å†µ return 0; } æˆ‘çš„æé”™äº†é¢˜ç›® + ç»†èŠ‚æ²¡å¤„ç†å¥½å´è¿˜æ··åˆ°äº† 19pts çš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #include \u003cbits/stdc++.h\u003e using namespace std; typedef long long ll; int n; ll ans; int a[25], sta[25]; map \u003cint, int\u003e f; map \u003cll, bool\u003e vis; int main() { ll ans1 = 0, ans2 = 0, ans3 = 0, ans4 = 0; scanf(\"%d\", \u0026n); for (int i = 0; i \u003c n; ++i) scanf(\"%d\", \u0026a[i]); for (ll i = 0; i \u003c pow(3, n / 2); ++i) { ll tmp = i, now = 0; int sum1 = 0, sum2 = 0; for (int k = 0; k \u003c n / 2; ++k) { sta[k] = tmp % 3, tmp /= 3; //printf(\"sta[%d]=%d\\n\", k, sta[k]); if (sta[k]) now |= (1 \u003c\u003c k); if (sta[k] == 1) sum1 += a[k]; else if (sta[k] == 2) sum2 += a[k]; } //printf(\"now:%lld sum1:%d sum2:%d\\n\", now, sum1, sum2); //if (vis[now]) puts(\"visited\"); //else puts(\"unvisited\"); if (sum1 == sum2 \u0026\u0026 sum1) ans1++; if (!vis[now]) f[sum1 + sum2]++, vis[now] = 1; } ans1 /= 2; for (ll i = 0; i \u003c pow(3, n - n / 2); ++i) { ll tmp = i, now = 0; int sum1 = 0, sum2 = 0; for (int k = n / 2; k \u003c n; ++k) { sta[k] = tmp % 3, tmp /= 3; if (sta[k]) now |= (1 \u003c\u003c k); if (sta[k] == 1) sum1 += a[k]; else if (sta[k] == 2) sum2 += a[k]; } if (sum1 == sum2 \u0026\u0026 sum1) ans2++; if ((sum1 + sum2 != 0) \u0026\u0026 !vis[now]) ans3 += f[sum1 + sum2], vis[now] = 1; if (sum1 + sum2 != 0) { if (f.count(sum1 - sum2)) ans4 += f[sum1 - sum2]; if (f.count(sum2 - sum1)) ans4 += f[sum2 - sum1]; } } ans2 /= 2, ans4 /= 2; ans = ans1 + ans2 + ans3 + ans4; //printf(\"ans1:%lld ans2:%lld ans3:%lld ans4:%lld\\n\", ans1, ans2, ans3, ans4); printf(\"%lld\", ans); return 0; } ","description":"æ—§æ–‡æ¬è¿","tags":["Search","åŒå‘åŒæ—¶æœç´¢","meet in the middle"],"title":"åŒå‘æœç´¢æ€»ç»“","uri":"/posts/search-on-both-sides/"},{"categories":["Study Notes","Assembly"],"content":"ç®€å•è®¤è¯†æ±‡ç¼–è¯­è¨€ æœºå™¨è¯­è¨€ï¼šæœºå™¨æŒ‡ä»¤çš„é›†åˆã€‚\nç”±äºç¡¬ä»¶è®¾è®¡å’Œå†…éƒ¨ç»“æ„ä¸åŒï¼Œæ¯ä¸€ç§å¾®å¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„æœºå™¨è¯­è¨€ã€‚\næ±‡ç¼–è¯­è¨€çš„ä¸»ä½“æ˜¯æ±‡ç¼–æŒ‡ä»¤ï¼Œæ±‡ç¼–æŒ‡ä»¤ä¸æœºå™¨æŒ‡ä»¤çš„å·®åˆ«åœ¨äºæŒ‡ä»¤çš„è¡¨ç¤ºæ–¹æ³•ã€‚\nå› ä¸ºè®¡ç®—æœºåªèƒ½è¯»æ‡‚æœºå™¨æŒ‡ä»¤ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ç¼–è¯‘å™¨å°†æ±‡ç¼–æŒ‡ä»¤è½¬æ¢æˆæœºå™¨æŒ‡ä»¤çš„ã€‚\næ±‡ç¼–è¯­è¨€çš„ç»„æˆï¼š\næ±‡ç¼–æŒ‡ä»¤ï¼ˆæœ‰å¯¹åº”çš„æœºå™¨ç ï¼‰ ä¼ªæŒ‡ä»¤ï¼ˆæ²¡æœ‰å¯¹åº”çš„æœºå™¨ç ï¼Œç”±ç¼–è¯‘å™¨æ‰§è¡Œï¼Œè®¡ç®—æœºä¸æ‰§è¡Œï¼‰ å…¶ä»–ç¬¦å·ï¼ˆæ²¡æœ‰å¯¹åº”çš„æœºå™¨ç ï¼Œç”±ç¼–è¯‘å™¨è¯†åˆ«ï¼‰ ç¡¬ä»¶çŸ¥è¯†åŸºç¡€ å­˜å‚¨å™¨ å­˜å‚¨å™¨å³å†…å­˜ï¼Œå­˜æ”¾ CPU å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æŒ‡ä»¤å’Œæ•°æ®ã€‚\næŒ‡ä»¤å’Œæ•°æ®\näºŒè€…åœ¨å†…å­˜æˆ–ç£ç›˜ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨ CPU è¿›è¡Œå·¥ä½œæ—¶ä¼šå°†ä¸€éƒ¨åˆ†ä¿¡æ¯çœ‹åšæŒ‡ä»¤ï¼Œä¸€éƒ¨åˆ†çœ‹åšæ•°æ®ã€‚\nå­˜å‚¨å•å…ƒ\nå­˜å‚¨å™¨è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­˜å‚¨å•å…ƒï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒä» 0 å¼€å§‹ç¼–å·ï¼Œå•ä¸ªå­˜å‚¨å•å…ƒå¯ä»¥å­˜å‚¨ 1 Byte çš„ä¿¡æ¯ã€‚\nCPU å¯¹å­˜å‚¨å™¨çš„è¯»å†™\nCPU è¿›è¡Œå¯¹æ•°æ®çš„è¯»å†™éœ€è¦ä¸å­˜å‚¨å™¨èŠ¯ç‰‡è¿›è¡Œ 3 ç§ä¿¡æ¯çš„äº¤äº’ï¼š\nå­˜å‚¨å•å…ƒçš„åœ°å€ï¼ˆåœ°å€ä¿¡æ¯ï¼‰ å™¨ä»¶çš„é€‰æ‹©ï¼Œè¯»/å†™çš„å‘½ä»¤ï¼ˆæ§åˆ¶ä¿¡æ¯ï¼‰ è¯»/å†™çš„æ•°æ®ï¼ˆæ•°æ®ä¿¡æ¯ï¼‰ æ€»çº¿ CPU é€šè¿‡æ€»çº¿å‘å­˜å‚¨å™¨èŠ¯ç‰‡ä¼ è¾“ä¿¡æ¯ï¼Œæ€»çº¿åœ¨é€»è¾‘ä¸Šåˆ†ä¸º 3 ç±»ï¼šåœ°å€æ€»çº¿ã€æ§åˆ¶æ€»çº¿ã€æ•°æ®æ€»çº¿ã€‚\nåœ°å€æ€»çº¿\nåœ°å€æ€»çº¿çš„å®½åº¦å†³å®šäº† CPU çš„å¯»å€èƒ½åŠ›ã€‚\nä¸€ä¸ª CPU å…·æœ‰ N æ ¹åœ°å€æ€»çº¿ï¼Œå°±è¯´å®ƒçš„åœ°å€æ€»çº¿å®½åº¦ä¸º N ï¼Œè¿™æ ·çš„ CPU å¯ä»¥å¯¹ $2^N$ ä¸ªå†…å­˜å•å…ƒè¿›è¡Œå¯»å€ã€‚\næ•°æ®æ€»çº¿\næ•°æ®æ€»çº¿çš„å®½åº¦å†³å®šäº† CPU ä¸å…¶ä»–å™¨ä»¶è¿›è¡Œæ•°æ®ä¼ é€æ—¶çš„ä¸€æ¬¡æ•°æ®ä¼ é€é‡ã€‚\næ§åˆ¶æ€»çº¿\næœ‰å¤šå°‘æ ¹æ§åˆ¶æ€»çº¿ï¼Œå°±æ„å‘³ç€ CPU æä¾›äº†å¯¹å¤–éƒ¨å™¨ä»¶çš„å¤šå°‘ç§æ§åˆ¶ã€‚\næ§åˆ¶æ€»çº¿çš„å®½åº¦å†³å®šäº† CPU å¯¹å¤–éƒ¨å™¨ä»¶çš„æ§åˆ¶èƒ½åŠ›ã€‚\nå†…å­˜åœ°å€ç©ºé—´ï¼ˆæ¦‚è¿°ï¼‰ ä¸»æ¿ï¼šä¸»æ¿ä¸Šæœ‰æ ¸å¿ƒå™¨ä»¶å’Œä¸€äº›ä¸»è¦å™¨ä»¶ï¼Œå¦‚ CPU ã€å­˜å‚¨å™¨ã€å¤–å›´èŠ¯ç‰‡ç»„ã€æ‰©å±•æ’æ§½ç­‰ï¼Œä»–ä»¬ä¹‹é—´é€šè¿‡æ€»çº¿ç›¸è¿ã€‚\næ¥å£å¡ï¼šè®¡ç®—æœºä¸Šç›´æ¥æ§åˆ¶å¤–éƒ¨è®¾å¤‡è¿›è¡Œå·¥ä½œçš„æ˜¯ä½äºæ‰©å±•æ’æ§½ä¸Šçš„æ¥å£å¡ã€‚CPU ç›´æ¥æ§åˆ¶æ¥å£å¡ï¼Œé€šè¿‡æ¥å£å¡å®ç°å¯¹å¤–éƒ¨è®¾å¤‡çš„é—´æ¥æ§åˆ¶ã€‚\nå„ç±»å­˜å‚¨å™¨èŠ¯ç‰‡\nå­˜å‚¨å™¨èŠ¯ç‰‡ä»è¯»å†™å±æ€§ä¸Šåˆ†ä¸ºä¸¤ç±»ï¼š\nRAMï¼šå¯è¯»å¯å†™ï¼Œå¿…é¡»å¸¦ç”µå­˜å‚¨ï¼Œå…³æœºåå­˜å‚¨å†…å®¹ä¸¢å¤± ROMï¼šåªå¯è¯»å–ä¸å¯å†™å…¥ï¼Œå…³æœºåå†…å®¹ä¸ä¸¢å¤± è¿™äº›å­˜å‚¨å™¨ä»åŠŸèƒ½å’Œè¿æ¥ä¸Šåˆå¯åˆ†ä¸º 3 ç±»ï¼š\néšæœºå­˜å‚¨å™¨ å­˜æ”¾ä¾› CPU ä½¿ç”¨çš„ç»å¤§éƒ¨åˆ†ç¨‹åºå’Œæ•°æ®ï¼Œä¸»éšæœºå­˜å‚¨å™¨ä¸€èˆ¬ç”±ä¸»æ¿ä¸Šçš„ RAM å’Œæ’åœ¨æ‰©å±•æ’æ§½ä¸Šçš„ RAM ç»„æˆ è£…æœ‰ BIOS çš„ ROM æ¥å£å¡ä¸Šçš„ RAM å¦‚æ˜¾å¡ä¸Šçš„æ˜¾å­˜ å†…å­˜åœ°å€ç©ºé—´\nCPU åœ¨æ§åˆ¶ä¸Šè¿°å­˜å‚¨å™¨æ—¶ï¼Œéƒ½å°†ä»–ä»¬å½“åšå†…å­˜æ¥å¯¹å¾…ï¼ŒæŠŠä»–ä»¬çœ‹åšä¸€ä¸ªç”±è‹¥å¹²å­˜å‚¨å•å…ƒç»„æˆçš„é€»è¾‘å­˜å‚¨å™¨ï¼Œå³å†…å­˜åœ°å€ç©ºé—´ã€‚\nå†…å­˜åœ°å€ç©ºé—´å¤§å°å— CPU åœ°å€æ€»çº¿å®½åº¦çš„é™åˆ¶ï¼Œä¸åŒçš„è®¡ç®—æœºç³»ç»Ÿçš„å†…å­˜åœ°å€ç©ºé—´çš„åˆ†é…æƒ…å†µä¸åŒã€‚\n","description":"æ—§æ–‡æ¬è¿","tags":["Assembly"],"title":"ç‹çˆ½ã€Œæ±‡ç¼–è¯­è¨€ã€å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰","uri":"/posts/asm1/"},{"categories":["Algorithm"],"content":"æ•°è®ºï¼Œæ˜¯ä¸€é—¨ç ”ç©¶æ•´æ•°çš„çº¯æ•°å­¦çš„åˆ†æ”¯ï¼Œè€Œæ•´æ•°çš„åŸºæœ¬å…ƒç´ æ˜¯ç´ æ•°(ä¹Ÿç§°è´¨æ•°)ï¼Œæ‰€ä»¥æ•°è®ºçš„æœ¬è´¨æ˜¯å¯¹ç´ æ•°æ€§è´¨çš„ç ”ç©¶ã€‚\nç´ æ•° ä¸€äº›åŸºæœ¬æ¦‚å¿µå°±ä¸å†™äº†.\næ³¨æ„ä¸¤ç‚¹:\n0ã€1ã€è´Ÿæ•´æ•°æ—¢ä¸æ˜¯ç´ æ•°ä¹Ÿä¸æ˜¯åˆæ•°. $\\pi(n)$ è¡¨ç¤ºä¸å¤§äº $n$ çš„ç´ æ•°ä¸ªæ•°, æœ‰å¦‚ä¸‹è¿‘ä¼¼å…³ç³» $\\pi(n)\\sim\\dfrac{n}{\\ln{n}}$ . ç´ æ•°åˆ¤å®š å¦‚ä½•åˆ¤å®šæ­£æ•´æ•° $n$ æ˜¯å¦æ˜¯ç´ æ•°?\nå¾ˆå®¹æ˜“æƒ³åˆ°ç”¨æ¯ä¸€ä¸ªå°äº $n$ ä¸”å¤§äº $1$ çš„æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ $n$ çš„çº¦æ•°, è‹¥éƒ½ä¸æ˜¯, åˆ™ $n$ ä¸ºç´ æ•°, å¦åˆ™ä¸ºåˆæ•°.\nè¿™ä¸ªæš´åŠ›ç®—æ³•æ˜¯ $\\mathcal{O}(n)$ çš„, ä½†æ˜¯æˆ‘ä»¬è€ƒè™‘åˆ°, è‹¥æ•° $p$ ä¸º $n$ çš„çº¦æ•°, åˆ™ $\\frac{n}{p}$ ä¹Ÿæ˜¯ $n$ çš„çº¦æ•°, æ‰€ä»¥æˆ‘ä»¬åªéœ€ç”¨ $2\\sim \\sqrt{n}$ çš„æ•°æ¥åˆ¤å®šå³å¯, äºæ˜¯ä¼˜åŒ–ä¸€ä¸‹æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª $\\mathcal{O}(\\sqrt{n})$ çš„ç®—æ³•.\n1 2 3 4 5 6 7 bool isPrime(int n) { if (n == 1) return false; if (n == 2) return true; for (int i = 2; i * i \u003c= n; ++i) if (n % i == 0) return false; return true; } æ•´æ•°æƒŸä¸€åˆ†è§£å®šç† è‹¥æ•´æ•° $n\\ge2$ , é‚£ä¹ˆ $n$ ä¸€å®šå¯ä»¥æƒŸä¸€åœ°è¡¨ç¤ºä¸ºè‹¥å¹²ç´ æ•°çš„ä¹˜ç§¯, å½¢å¦‚\n$$n=p_1^{r_1}p_2^{r_2}\\cdots p_k^{r_k}(p_iä¸ºç´ æ•°, r_i\\ge0)$$\n1 2 3 4 5 6 7 8 9 10 vector \u003cint\u003e factor(int n) { vector \u003cint\u003e ret; for (int i = 2; i * i \u003c= n; ++i) while (n % i == 0) { ret.push_back(i); n /= i; } if (n \u003e 1) ret.push_back(n); return ret; } ç´ æ•°ç­›æ³• ä¸»è¦æ˜¯åŸƒæ°ç­›æ³•å’Œæ¬§æ‹‰ç­›æ³•.\nEratosthenes ç­›æ³• Eratosthenes ç­›æ³•å¯ä»¥å¿«é€Ÿåˆ—ä¸¾å‡ºç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰ç´ æ•°.\nä¸€ä¸ªåˆæ•°ä¸€å®šå¯ä»¥å†™æˆ $p\\cdot x$ çš„å½¢å¼, å…¶ä¸­ $p$ ä¸ºç´ æ•°, $x$ ä¸ºæ•´æ•°, å› æ­¤å¯¹æ¯ä¸€ä¸ª $p$ , æˆ‘ä»¬ä»å°åˆ°å¤§æšä¸¾ $x$ , ç­›æ‰ç›¸åº”çš„ $p\\cdot x$ å³å¯.\nä¸€ç‚¹å°æ”¹è¿›: å½“ $x\u003cp$ æ—¶, $p\\cdot x$ ä¸€å®šè¢« $x$ çš„ç´ å› å­ç­›è¿‡ä¸€é, æ‰€ä»¥æˆ‘ä»¬æšä¸¾ $x$ æ—¶ä» $x=p$ å¼€å§‹æšä¸¾.\næ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(\\frac{n}{2}+\\frac{n}{3}+\\frac{n}{5}+\\cdots)=\\mathcal{O}(n\\log{\\log{n}})$\n1 2 3 4 5 6 7 8 9 10 11 bool isprime[N]; void Eratos(int n) { memset(isprime, 1, sizeof isprime); isprime[0] = isprime[1] = 0; for (int i = 2; i * i \u003c= n; ++i) if (isprime[i]) { for (int j = i * i; j \u003c= n; j += i) isprime[j] = 0; } } ä¾‹é¢˜ ã€ŒPOJ 2689ã€Prime Distance\nç”±äºè¿™é‡Œ $L,R$ çš„èŒƒå›´å¾ˆå¤§, æš´åŠ›ç­›å®Œä¹‹åæšä¸¾æ±‚è§£è‚¯å®šä¼š T , ä½†æ˜¯ $R-L\\le 10^6$ çš„èŒƒå›´å´æ˜¯åœ¨æˆ‘ä»¬çš„æ‰¿å—èŒƒå›´ä¹‹å†…çš„.\näºæ˜¯æˆ‘ä»¬è€ƒè™‘ç”¨ $1\\sim n$ è¿™ä¸€å°èŒƒå›´çš„ç´ æ•°ç­›æ‰ $L\\sim R$ ä¹‹é—´çš„åˆæ•°.\nå‡è®¾æ•° $k\\in[L, R]$ , å…¶ä¸­ $k$ çš„æœ€å°è´¨å› æ•°ä¸º $p$ , æ»¡è¶³ $p\u003en$ , åˆ™ $k=p\\cdot x$ , è‹¥ $x\u003cp$ , åˆ™ $k$ ä¸€å®šå­˜åœ¨å°äº $p$ çš„è´¨å› æ•°, çŸ›ç›¾, æ•…è€Œ $x\\ge p$ , ä¹Ÿå°±æ˜¯è¯´, ä¼šè¢«æ¼ç­›çš„æ•° $k$ æ»¡è¶³ $k\\ge p^2$ , ä¸ºäº†ä¿è¯ç®—æ³•çš„æ­£ç¡®æ€§, æˆ‘ä»¬è¦è®©è¿™æ ·çš„æ•°è½åœ¨ $[L, R]$ å¤–, ä¹Ÿå°±æ˜¯è®© $p^2\u003eR$ , äºæ˜¯æˆ‘ä»¬ä»¤ $n=\\sqrt{R}$ å³å¯.\nç­›æ³•ä¼˜åŒ–è´¨å› æ•°åˆ†è§£ åˆ©ç”¨åŸƒæ°ç­›æ³•å¯ä»¥å¿«é€Ÿå®ç°ç´ å› æ•°åˆ†è§£, åªè¦åœ¨ç­›çš„æ—¶å€™è®°å½•ä¸‹æ¯ä¸ªæ•°çš„æœ€å°ç´ å› æ•°å³å¯.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 bool isprime[N]; int minfac[N]; void Eratos(int n) { memset(isprime, 1, sizeof isprime); isprime[0] = isprime[1] = 0; for (int i = 1; i \u003c= n; ++i) minfac[i] = i; for (int i = 2; i * i \u003c= n; ++i) if (isprime[i]) { for (int j = i * i; j \u003c= n; j += i) { isprime[j] = 0; if (minfac[j] == j) minfac[j] = i; } } } vector \u003cint\u003e factor(int n) { vector \u003cint\u003e ret; while (n \u003e 1) { ret.push_back(minfac[n]); n /= minfac[n]; } return ret; } Euler ç­›æ³• åœ¨åŸƒæ°ç­›ä¸­, 30 è¿™ä¸ªæ•°è¢« $p=2,3,5$ åˆ†åˆ«ç­›äº†ä¸‰æ¬¡, é€ æˆäº†é‡å¤, å¦‚æœæˆ‘ä»¬èƒ½è®©æ¯ä¸ªæ•°åªè¢«å®ƒæœ€å°çš„ç´ å› æ•°ç­›, å°±èƒ½åšåˆ° $\\mathcal{O}(n)$ çš„æ—¶é—´å¤æ‚åº¦.\nåœ¨ Euler ç­›æ³•ä¸­, æˆ‘ä»¬ä» $2\\sim n$ æšä¸¾æ¯ä¸€ä¸ªæ•° $i$ , è‹¥ $i$ æ˜¯ç´ æ•°, åˆ™åŠ å…¥ç´ æ•°è¡¨ä¸­, ç„¶åæˆ‘ä»¬å†ä»å°åˆ°å¤§æšä¸¾å‰é¢çš„ç´ æ•° $prime[j]$ , ç­›æ‰ $i\\cdot prime[j]$ , å½“ $prime[j]$ æ˜¯ $i$ çš„ä¸€ä¸ªç´ å› æ•°æ—¶, é‚£ä¹ˆåé¢å†ç»§ç»­æšä¸¾åˆ°çš„ç´ æ•°ä¸€å®šä¸æ˜¯æ‰€ç­›çš„æ•°çš„æœ€å°ç´ å› æ•°, æ¯•ç«Ÿåé¢çš„ç´ æ•°ä¸€å®šå¤§äºå½“å‰çš„ $prime[j]$ , æ‰€ä»¥è¿™æ—¶å¯ä»¥ç»ˆæ­¢ç­›é€‰.\næ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(n)$\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 int prime[N]; bool isprime[N]; void Euler(int n) { memset(isprime, 1, sizeof isprime); isprime[0] = isprime[1] = 0; for (int i = 2; i \u003c= n; ++i) { if (isprime[i]) prime[++prime[0]] = i; for (int j = 1; j \u003c= prime[0] \u0026\u0026 prime[j] * i \u003c= n; ++j) { isprime[i * prime[j]] = 0; if (i % prime[j] == 0) break; } } } çº¦æ•° æ•´æ•°æƒŸä¸€åˆ†è§£å®šç†çš„æ¨è®º $$N=p_1^{r_1}p_2^{r_2}\\cdots p_k^{r_k}$$\n$N$ çš„æ­£çº¦æ•°çš„ä¸ªæ•°ä¸º $(r_1+1)(r_2+1)\\cdots(r_k+1)=\\prod_{i=1}^k(r_i+1)$ $N$ çš„çº¦æ•°ä¸ªæ•°ä¸Šç•Œä¸º $\\sqrt{N}$ $N$ çš„æ‰€æœ‰æ­£çº¦æ•°çš„å’Œä¸º $(1+p_1+p_1^2+\\cdots+p_1^{r_1})\\cdots(1+p_k+\\cdots+p_k^{r_k})=\\prod_{i=1}^k(\\sum_{j=0}^{r_i}p_i^j)$ æ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(\\sqrt{N})$ ä¾‹é¢˜ ã€ŒLuoggu P1463ã€åç´ æ•°\nè¿™é“é¢˜åªéœ€è¦çŸ¥é“ $1\\sim 2\\cdot 10^9$ å†…å‰ 12 ä¸ªç´ æ•°çš„ç§¯å°±å·²ç»è¶…å‡º $N$ çš„èŒƒå›´, æ‰€ä»¥æ‰“ä¸ªè¡¨ç„¶åç›´æ¥çˆ†æœå³å¯.\n(äºæˆ‘æƒ³äº†åŠå¤©è¦æ€ä¹ˆè½¬åŒ–, å®Œå…¨æ²¡è€ƒè™‘åªæœ‰ 12 ä¸ªç´ æ•°ä¼šè¢«ç”¨åˆ°)\næœ€å¤§å…¬çº¦æ•° å·¦è½¬ gcd \u0026 lcm å¤ä¹ ç¬”è®°\né«˜ç²¾åº¦ $\\gcd{(a, b)}$ æ›´ç›¸å‡æŸæœ¯é€‚ç”¨äºå¤§æ•´æ•°ä¸‹æ±‚ $\\gcd(a, b)$\n$a\u003cb$ æ—¶, $\\gcd(a, b)=\\gcd(b, a)$ $a=b$ æ—¶, $\\gcd(a, b)=a$ $a, b$ åŒä¸ºå¶æ•°æ—¶, $\\gcd(a, b)=2\\gcd(\\frac{a}{2}, \\frac{b}{2})$ $a$ ä¸ºå¶æ•°, $b$ ä¸ºå¥‡æ•°æ—¶, $\\gcd(a, b)=\\gcd(\\frac{a}{2}, b)$ $a$ ä¸ºå¥‡æ•°, $b$ ä¸ºå¶æ•°æ—¶, $\\gcd(a, b)=\\gcd(a, \\frac{b}{2})$ $a, b$ åŒä¸ºå¥‡æ•°æ—¶, $\\gcd(a, b)=\\gcd(b, a-b)$ å®¹æ–¥åŸç† åŸç†å¾ˆç®€å•, è®°ä½ä¸€ä¸ªå…¬å¼å³å¯\n$$|\\cap A_i|=\\sum_{1\\le i\\le m}|A_i|-\\sum_{1\\le i\u003c j\\le m}|A_i\\cap A_j|+\\sum_{1\\le i\u003cj\u003ck\\le m}|A_i\\cap A_j\\cap A_k|-\\cdots+(-1)^{m+1}\\sum|A_1\\cap A_2\\cap\\cdots\\cap A_m|$$\né”™æ’é—®é¢˜ åˆ©ç”¨å®¹æ–¥åŸç†æ±‚è§£\nä»¤é›†åˆ $S$ è¡¨ç¤º $1,2, \\cdots, n$ çš„å…¨æ’åˆ—, åˆ™ $|S|=n!$\nè®¾å­é›† $S_i$ è¡¨ç¤º $i$ æ’åœ¨ç¬¬ $i$ ä½çš„æ’åˆ—, åˆ™ $|S_i|=(n-1)!$\nåŒç†, è®¾ $S_{i_1}\\cap S_{i_2}\\cap\\cdots\\cap S_{i_k}$ è¡¨ç¤º $i_1, i_2, \\cdots, i_k$ è¿™ $k$ ä¸ªæ•°æ’åœ¨ç›¸åº”ä½ç½®çš„æ’åˆ—æ•°, åˆ™ $|S_{i_1}\\cap S_{i_2}\\cap\\cdots\\cap S_{i_k}|=(n-k)!$\næ¯ä¸ªå…ƒç´ éƒ½ä¸æ’åœ¨è‡ªå·±ä½ç½®çš„æ’åˆ—æ•°ä¸º $D_n=|\\overline{S_1}\\cap\\overline{S_2}\\cap\\cdots\\cap\\overline{S_n}|=|S|-|S_1\\cup S_2\\cup\\cdots\\cup S_n|$\nç”±å®¹æ–¥åŸç†å¯å¾—\n$$D_n=n!(1-\\frac{1}{1!}+\\frac{1}{2!}-\\frac{1}{3!}+\\cdots\\pm\\frac{1}{n!})$$\né€’æ¨å…¬å¼\næ¨å¯¼è¿‡ç¨‹å¹¶ä¸éš¾æƒ³, æ‡’å¾—å†™äº†, ç›´æ¥ä¸Šå…¬å¼\n$$D_n=(n-1)(D_{n-1}+D_{n-2})$$\næ¬§æ‹‰å‡½æ•° è‹¥ $\\gcd{(a, b)}=1$ , åˆ™ç§° $a, b$ äº’è´¨(äº’ç´ ), è®°ä½œ $a\\bot b$ æ¬§æ‹‰å‡½æ•° $\\varphi(n)$ å®šä¹‰ä¸º $[1, n]$ ä¸­ä¸ $n$ äº’è´¨çš„æ•°çš„ä¸ªæ•°. è‹¥ $n$ ä¸ºç´ æ•°, åˆ™ $\\varphi(n)=n-1$ å®¹æ–¥åŸç†æ±‚æ¬§æ‹‰å‡½æ•° æ ¹æ®æ•´æ•°æƒŸä¸€åˆ†è§£å®šç†, å°† $N$ åˆ†è§£ä¸º\n$$N=p_1^{r_1}p_2^{r_2}\\cdots p_k^{r_k}$$\nè®¾ $[1, n]$ ä¸­ $p_i$ çš„å€æ•°çš„é›†åˆä¸º $A_i$ , åˆ™ $|A_i|=\\lfloor \\frac{N}{p_i}\\rfloor$\nå¯¹äº $p_i\\not=p_j$ , æœ‰ $|A_i\\cap A_j|=\\lfloor\\frac{N}{p_ip_j}\\rfloor$\næ ¹æ®å®¹æ–¥åŸç†,\n$$\\begin{aligned}\\varphi(N)\u0026=|A|-|\\overline{A_1}\\cup\\overline{A_2}\\cup\\cdots\\cup\\overline{A_k}| \\\\ \u0026=N-(\\frac{N}{p_1}+\\frac{N}{p_2}+\\cdots+\\frac{N}{p_k})+(\\frac{N}{p_1p_2}+\\cdots+\\frac{N}{p_1p_k})-\\cdots\\pm\\frac{N}{p_1p_2\\cdots p_k} \\\\ \u0026=N(1-\\frac{1}{p_1})(1-\\frac{1}{p_2})\\cdots(1-\\frac{1}{p_k})\\end{aligned}$$\nç´ å› æ•°åˆ†è§£æ±‚æ¬§æ‹‰å‡½æ•°çš„ç®—æ³• æ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(\\sqrt{n})$\n1 2 3 4 5 6 7 8 9 10 int euler_phi(int n) { int ret = n; for (int i = 2; i * i \u003c= n; ++i) if (n % i == 0) { ret = ret / i * (i - 1);//å…ˆé™¤åä¹˜å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé¿å…çˆ† int while (n % i == 0) n /= i; } if (n \u003e 1) ret = ret / n * (n - 1); return ret; } åŸƒæ°ç­›æ³•é¢„å¤„ç†æ¬§æ‹‰å‡½æ•°å€¼ æ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(n\\log{\\log{n}})$\n1 2 3 4 5 6 7 8 9 10 11 int phi[N]; void euler_phi(int n) { for (int i = 2; i \u003c= n; ++i) phi[i] = i; for (int i = 2; i * i \u003c= n; ++i) if (phi[i] == i) { phi[i] = i - 1; for (int j = i; j \u003c= n; j += i)//æ³¨æ„è¿™é‡Œ j çš„èµ·ç‚¹æ˜¯ i è€Œä¸æ˜¯ i * i phi[j] = phi[j] / i * (i - 1); } } æ¬§æ‹‰å‡½æ•°çš„æ€§è´¨ è‹¥ $a\\bot b$ , åˆ™ $\\varphi(a)\\varphi(b)=\\varphi(ab)$ , å³æ¬§æ‹‰å‡½æ•°å…·æœ‰ç§¯æ€§å‡½æ•°çš„æ€§è´¨.\nä¸Šå¼åˆ†åˆ«å°† $a, b$ ç”¨æ•´æ•°æƒŸä¸€åˆ†è§£å®šç†è¡¨ç¤º, ç„¶åå¸¦å…¥æ¬§æ‹‰å‡½æ•°è®¡ç®—å¼å³å¯å¾—åˆ°è¯æ˜.\nä¾‹é¢˜ ã€ŒPOJ 3090ã€Visible Lattice Points\nè®¾æŸç‚¹åæ ‡ä¸º $(x_0, y_0)$ , è‹¥è¯¥ç‚¹èƒ½è¢«çœ‹è§, åˆ™è¿™ä¸ªç‚¹ä¸€å®šæ˜¯ç›´çº¿ $y=\\frac{y_0}{x_0}x$ ä¸Šè·ç¦»åŸç‚¹æœ€è¿‘çš„ä¸€ä¸ªæ•´æ•°ç‚¹.\næˆ‘ä»¬è®¾ä¸€ç‚¹ $(x_1, y_1)$ æ»¡è¶³ $\\frac{y_1}{x_1}=\\frac{y_0}{x_0}, x_1\u003ex_0$ , åˆ™è¯¥ç‚¹æ˜¾ç„¶ä¸å¯è§, ä»è¿™ä¸ªå¼å­ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“, $x_1, y_1$ å¿…ç„¶å­˜åœ¨ä¸€ä¸ªå…¬çº¦æ•°, è€Œ $x_0, y_0$ ä¸å­˜åœ¨å…¬çº¦æ•°, å³ $x_0, y_0$ äº’è´¨, å› æ­¤å¯è§ç‚¹å°±æ˜¯å›¾ä¸­æ‰€æœ‰æ»¡è¶³ $x_0, y_0$ äº’è´¨çš„ç‚¹å†åŠ ä¸Š $(1, 0), (0, 1), (1, 1)$ .\nå›ºå®š $y=y_0$ , å½“ $x\u003cy_0$ æ—¶, æ»¡è¶³æ¡ä»¶çš„ç‚¹çš„æ•°é‡å°±æ˜¯ $\\varphi(y_0)$ , å½“ $x\u003ey_0$ æ—¶, å°†ç‚¹ $(x, y_0)$ ä»¥ $y=x$ å¯¹ç§°è¿‡å»å¾—åˆ°çš„ç‚¹å°±æ˜¯å›ºå®š $x=x_i$ æ—¶ $y\u003cx_i$ çš„æƒ…å†µ, æ ¹æ®åæ ‡è½´å…³äº $y=x$ å¯¹ç§°çš„æ€§è´¨, $x\u003cy_0$ å’Œ $x\u003ey_0$ ä¸¤ç§æƒ…å†µä¸‹çš„ç­”æ¡ˆæ•°ç›¸ç­‰, æ‰€ä»¥æˆ‘ä»¬åªéœ€è€ƒè™‘ $x\u003cy_0$ çš„æƒ…å†µ, ç„¶åä¹˜ 2 å³å¯.\næœ€ç»ˆçš„ç­”æ¡ˆä¸º: $3+2\\cdot\\sum_{i=2}^N \\varphi(i)$\nã€ŒLuogu P2303ã€Longge çš„é—®é¢˜\nè€ƒè™‘æ»¡è¶³ $\\gcd(i, n)=d$ çš„ $i$ çš„ä¸ªæ•°.\nç”± $\\gcd(i, n)=d$ å¯ä»¥æ¨å‡º $\\gcd(\\frac{i}{d}, \\frac{n}{d})=1$, å³ $\\frac{i}{d}, \\frac{n}{d}$ äº’è´¨, åˆ $\\frac{i}{d}\u003c\\frac{n}{d}$ , æ‰€ä»¥è¿™æ ·çš„ $\\frac{i}{d}$ çš„ä¸ªæ•°ä¸º $\\varphi(\\frac{n}{d})$ , ä¹Ÿå°±æ˜¯ $i$ çš„ä¸ªæ•°ä¸º $\\varphi(\\frac{n}{d})$\næ‰€ä»¥ç­”æ¡ˆä¸º $\\sum_{d|n}d\\varphi(\\frac{n}{d})$\nåŒä½™ å‰©ä½™ç³» å‰©ä½™ç³»æŒ‡æ¨¡æ­£æ•´æ•° $n$ çš„ä½™æ•°æ‰€ç»„æˆçš„é›†åˆ. å®Œå…¨å‰©ä½™ç³»: å¦‚æœä¸€ä¸ªå‰©ä½™ç³»ä¸­åŒ…å«äº†è¿™ä¸ªæ­£æ•´æ•° $n$ æ‰€æœ‰å¯èƒ½çš„ä½™æ•° ($0, 1, \\cdots, n-1$) , é‚£ä¹ˆå°±ç§°å®ƒä¸ºæ¨¡ $n$ çš„ä¸€ä¸ªå®Œå…¨å‰©ä½™ç³», è®°ä½œ $Z_n$ . ç®€åŒ–å‰©ä½™ç³»:å®Œå…¨å‰©ä½™ç³»ä¸­ä¸ $n$ äº’è´¨çš„æ•°çš„é›†åˆ, è®°ä½œ $Z_n^*$ . åŒä½™ç­‰ä»·ç±»: $Z_n$ é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ ä»£è¡¨æ‰€æœ‰æ¨¡ $n$ æ„ä¹‰ä¸‹ä¸å®ƒåŒä½™çš„æ•´æ•°, æˆ‘ä»¬æŠŠæ»¡è¶³åŒä½™å…³ç³»çš„æ‰€æœ‰æ•´æ•°çœ‹ä½œä¸€ä¸ªåŒä½™ç­‰ä»·ç±». åœ¨ $Z_n$ ä¸­çš„å››åˆ™è¿ç®—ç»“æœå…¨éƒ¨éƒ½è¦åœ¨æ¨¡ $n$ æ„ä¹‰ä¸‹. æ¨¡è¿ç®— å¦‚æœ $a\\equiv b\\pmod{m}$ ä¸”æœ‰ $c\\equiv d\\pmod{m}$ , é‚£ä¹ˆ:\n$$a+c\\equiv b+d\\pmod{m}$$\n$$a-c\\equiv b-d\\pmod{m}$$\n$$a\\times c\\equiv b\\times d\\pmod{m}$$\n$$(a+b)\\bmod m=((a\\bmod m)+(b\\bmod m))\\bmod m$$\n$$(a-b)\\bmod m=((a\\bmod m)-(b\\bmod m)+m)\\bmod m$$\n$$(a\\times b)\\bmod m=((a\\bmod m)\\times(b\\bmod m))\\bmod m$$\nå¿«é€Ÿå¹‚ å³è½¬ å¿«é€Ÿå¹‚å¤ä¹ ç¬”è®°\nè´¹é©¬å°å®šç† è‹¥ $p$ ä¸ºç´ æ•°, ä¸” $a\\bot p$ , åˆ™ $a^{p-1}\\equiv 1\\pmod{p}$ .\nå› ä¸º $p$ ä¸ºç´ æ•°, åˆ™ $2, 3, \\cdots, p-1$ ä¸ $p$ äº’è´¨, ä¸”ä¸å­˜åœ¨ä¸¤ä¸ªæ•°æ¨¡ $p$ åŒä½™.\nåˆ $a\\bot p$ , æ‰€ä»¥ $a, 2a, 3a, \\cdots, (p-1)a$ ä¸ $p$ äº’è´¨, ä¸”ä¸å­˜åœ¨ä¸¤ä¸ªæ•°æ¨¡ $p$ åŒä½™.\nå› æ­¤ $a\\cdot 2a\\cdot 3a\\cdots(p-1)a=(p-1)!a^{p-1}$ ä¸ $p$ äº’è´¨, ä¸” $(p-1)!a^{p-1}\\equiv (p-1)!\\pmod{p}$\nä¸¤è¾¹åŒæ—¶é™¤ä»¥ $(p-1)!$ å¾—åˆ° $a^{p-1}\\equiv 1\\pmod{p}$\nè´¹é©¬å°å®šç†çš„å¦ä¸€ç§å½¢å¼: è‹¥ $p$ ä¸ºç´ æ•°, åˆ™å¯¹ä»»æ„æ­£æ•´æ•° $a$ æœ‰ $a^p\\equiv a\\pmod{p}$. åº”ç”¨: $p$ æ˜¯ç´ æ•°, $a, p$ äº’è´¨, åˆ™ $a^b\\bmod{p}= a^{b\\bmod (p-1)}\\bmod{p}$ . è´¹é©¬å°å®šç†åˆ¤æ–­ç´ æ•° å¤šæ¬¡é€‰å– $a$ æ¥åˆ¤æ–­ $p$ æ˜¯å¦æ»¡è¶³è´¹é©¬å°å®šç†, æ­£ç¡®çš„æ¦‚ç‡éš $a$ é€‰å–çš„æ¬¡æ•°çš„å¢åŠ è€Œå¢åŠ . æ—¶é—´å¤æ‚åº¦: è®¾é€‰å– $k$ æ¬¡ $a$ , æ¯æ¬¡ç”¨å¿«é€Ÿå¹‚å¤„ç†çš„æ—¶é—´ä¸º $\\mathcal{O}(\\log{p})$ , åˆ™æ€»æ—¶é—´å¤æ‚åº¦ä¸º $\\mathcal{O}(k\\log{p})$ . ç”±äºå­˜åœ¨ Carmichael æ•°, å› æ­¤ä¸Šè¿°ç®—æ³•å­˜åœ¨ç¼ºé™·, å³å­˜åœ¨åˆæ•°æ»¡è¶³è´¹é©¬å°å®šç†. $10^4$ ä»¥å†…çš„ Carmichael æ•°æœ‰: 561, 1105, 1729, 2465, 2821, 6601, 8911. æ¬§æ‹‰å®šç† (åœ¨ $p$ ä¸æ˜¯ç´ æ•°çš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨æ¬§æ‹‰å®šç†)\nå¯¹äºå’Œ $m$ äº’ç´ çš„ $a$ , æœ‰: $a^{\\varphi(m)}\\equiv1\\pmod{m}$ .\nè¯æ˜æ–¹æ³•å’Œè´¹é©¬å°å®šç†å·®ä¸å¤š.\nå¼•ç†: è‹¥ $a, m$ äº’è´¨, æ»¡è¶³ $a^x\\equiv 1\\pmod{m}$ çš„æœ€å°æ­£æ•´æ•° $x_0$ æ˜¯ $\\varphi(m)$ çš„çº¦æ•°.\næ¬§æ‹‰å®šç†çš„æ¨è®º $a, m(m\u003e1)$ äº’ç´ , åˆ™æœ‰ $a^b\\bmod{m}=a^{b\\bmod\\varphi(m)}\\bmod m$ .\nä¾‹é¢˜ ã€ŒPOJ 3696ã€The Luckiest number\nè®¾ $n$ ä¸ª 8 è¿åœ¨ä¸€èµ·çš„æ­£æ•´æ•°ä¸º $A_n$ , åˆ™ $A_n=10A_{n-1}+8$ , å®¹æ˜“æ±‚å¾— $A_n=\\frac{8}{9}(10^n-1)$ .\nè‹¥ $L|A_n$ , å³ $L|\\frac{8}{9}(10^n-1)$, å¯ä»¥å¾—åˆ° $9L|8(10^n-1)$ , ä»¤ $d=\\gcd(9L, 8)$ , åˆ™æœ‰ $\\frac{9L}{d}|(10^n-1)$\näºæ˜¯ $10^n\\equiv 1\\pmod{\\frac{9L}{d}}$\næ ¹æ®æ¬§æ‹‰å®šç†çš„å¼•ç†, åªéœ€æ±‚å‡º $\\varphi(\\frac{9L}{d})$ , ç„¶åæšä¸¾å®ƒçš„çº¦æ•°, ä¸€ä¸€éªŒè¯åå–æœ€å°çš„ä¸€ä¸ªæ•°å³å¯.\næ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(\\sqrt{L}\\log{L})$\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• è£´èœ€å®šç† ( BÃ©zout å®šç† ) å¯¹ä»»ä½•æ•´æ•° $a, b$ , å…³äºæœªçŸ¥æ•° $x, y$ çš„çº¿æ€§ä¸å®šæ–¹ç¨‹ ( ç§°ä¸ºè£´èœ€ç­‰å¼ ) $ax+by=c$ æœ‰æ•´æ•°è§£å½“ä¸”ä»…å½“ $c$ ä¸º $\\gcd{(a, b)}$ çš„å€æ•°.\nè£´èœ€ç­‰å¼æœ‰è§£æ—¶å¿…æœ‰æ— ç©·å¤šä¸ªè§£.\næ¨è®º: $a, b$ äº’ç´ ç­‰ä»·äº $ax+by=1$ æœ‰æ•´æ•°è§£.\nä¾‹é¢˜ ã€ŒBZOJ 1441ã€Min\nå‡è®¾ $S$ å·²çŸ¥, äºæ˜¯æœ‰æ–¹ç¨‹ $A_1x_1+A_2x_2+\\cdots+A_nx_n=S$\næ ¹æ®è£´èœ€å®šç†, $S$ å¿…ç„¶æ˜¯ $\\gcd{(A_1, A_2, \\cdots, A_n)}$ çš„å€æ•°, å– $S_{min}=\\gcd{(A_1, A_2, \\cdots, A_n)}$ å³å¯.\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• è§ gcd \u0026 lcm å¤ä¹ ç¬”è®°\næ ¹æ®è£´èœ€å®šç†, $ax+by=\\gcd{(a, b)}$ æœ‰æ— ç©·ç»„è§£, è€Œæ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚å‡ºæ¥çš„åªæ˜¯å…¶ä¸­ä¸€ç»„ç‰¹è§£ $(x_0, y_0)$ .\nä¸‹é¢è€ƒè™‘æ±‚ $ax+by=c$ çš„ä¸€èˆ¬è§£.\né¦–å…ˆè®¾ $c=t\\gcd(a, b)$ ( $t$ ä¸ºæ•´æ•° ) , åˆ™ä½¿ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚å‡º $ax+by=\\gcd{(a, b)}$ çš„ç‰¹è§£ $(x_0, y_0)$ å, å®¹æ˜“å¾—åˆ° $ax+by=c$ ç‰¹è§£ä¸º $(tx_0, ty_0)$ .\nç”±äºä¹‹åè€ƒè™‘çš„æ˜¯ $ax+by=c$ , æ‰€ä»¥åé¢ç”¨ $(x_0, y_0)$ ä»£æ›¿ $(tx_0, ty_0)$ .\nå°†æ–¹ç¨‹çš„æ‰€æœ‰è§£æŒ‰ç…§ $x$ çš„å¤§å°æ’åº, åˆ™ç‰¹è§£åçš„ä¸‹ä¸€ç»„è§£ $(x_1, y_1)$ å¯ä»¥è¡¨ç¤ºä¸º $(x_0+d_1, y_0+d_2)$ , å…¶ä¸­ $d_1$ ä¸ºæ»¡è¶³æ¡ä»¶çš„æœ€å°æ­£æ•´æ•°.\nå¸¦å…¥æ–¹ç¨‹åå¾—åˆ° $ad_1+bd_2=0$ , å˜å½¢åæœ‰ $-\\dfrac{d_1}{d_2}=\\dfrac{b}{a}=\\dfrac{\\frac{b}{\\gcd{(a, b)}}}{\\frac{a}{\\gcd{(a, b)}}}$ .\nå› æ­¤æ–¹ç¨‹çš„ä¸€èˆ¬è§£å¯ä»¥è¡¨ç¤ºä¸º $\\left(x_0+k\\dfrac{b}{\\gcd{(a, b)}}, y_0-k\\dfrac{a}{\\gcd{(a, b)}}\\right)(k\\in \\mathbf{Z})$ .\nä¸ºä»€ä¹ˆè¿™é‡Œè¦å°† $\\dfrac{b}{a}$ å†å˜å½¢ä¸º $\\dfrac{\\frac{b}{\\gcd{(a, b)}}}{\\frac{a}{\\gcd{(a, b)}}}$ å‘¢?\nå› ä¸º $\\frac{b}{a}$ ä¸æ˜¯æœ€ç®€åˆ†æ•°, è¿™ä¸€æ­¥å˜å½¢æ˜¯åŒ–ç®€ $\\frac{b}{a}$ , ç›´æ¥ç”¨ $(x_0+kb, y_0-ka)$ æ¥è¡¨ç¤ºç‰¹è§£çš„è¯ä¼šæ¼æ‰ä¸€äº›æƒ…å†µ, å¦‚ $(x_0+\\frac{b}{\\gcd{(a, b)}}, y_0-\\frac{a}{\\gcd{(a, b)}})$ å°±ä¸èƒ½è¢« $(x_0+kb, y_0-ka)$ è¡¨ç¤º.\né€†å…ƒ æ¨¡ $n$ æ„ä¹‰ä¸‹ä¹˜æ³•çš„é€† å¦‚æœåœ¨ $Z_n$ ä¸­ä¸¤å…ƒç´  $a, b$ æ»¡è¶³ $a\\cdot b=1$ , é‚£ä¹ˆæˆ‘ä»¬å°±è¯´ $a, b$ äº’ä¸ºæ¨¡ $n$ æ„ä¹‰ä¸‹ä¹˜æ³•çš„é€†å…ƒ, è®°ä½œ $a=b^{-1}, b=a^{-1}$ .\né€†å…ƒ å½“ $a, m$ äº’ç´ çš„æ—¶å€™, è‹¥ $ax\\equiv 1\\pmod{m}$ , åˆ™ç§° $x$ ä¸º $a$ å…³äºæ¨¡ $m$ çš„é€†å…ƒ, è®°ä½œ $a^{-1}$ .\nåœ¨ $[0, m)$ çš„èŒƒå›´å†…, é€†å…ƒæ˜¯å”¯ä¸€çš„.\næ±‚è§£é€†å…ƒ æ±‚è§£é€†å…ƒç­‰ä»·äºè§£æ–¹ç¨‹ $ax+my=1$\nç›´æ¥ä½¿ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•å³å¯.\næ¬§æ‹‰å®šç†æ±‚é€†å…ƒ å› ä¸º $a, m$ äº’ç´ , æ ¹æ®æ¬§æ‹‰å®šç†, æœ‰ $a\\cdot a^{\\varphi(m)-1}\\equiv 1\\pmod{m}$ , å› æ­¤ $a^{\\varphi(m)-1}$ ä¸ºæ‰€æ±‚é€†å…ƒ.\nçº¿æ€§æ±‚é€†å…ƒ: é€’æ¨æ³• é€’æ¨æ³•æ±‚è§£ $1\\sim n$ çš„é€†å…ƒ.\nå‡è®¾å½“å‰æ±‚è§£çš„æ˜¯ $i$ å…³äºæ¨¡ $p$ çš„é€†å…ƒ.\næ ¹æ®å¸¦ä½™é™¤æ³•, $p=iq+r$ , ä¸¤è¾¹åˆ†åˆ«å¯¹ $p$ å–æ¨¡å¾—åˆ° $iq+r\\equiv 0\\pmod{p}$\nè‹¥ $i$ ä¸ä¸º $p$ çš„å€æ•°, åˆ™ $r$ ä¸ä¸º 0 , å› æ­¤ $r^{-1}$ å­˜åœ¨.\nåœ¨ä¸Šå¼ä¸¤è¾¹ä¹˜ $i^{-1}r^{-1}$ å¾—åˆ° $qr^{-1}+i^{-1}\\equiv 0\\pmod{p}$ , å³\n$$r^{-1}\\equiv -qr^{-1}=-r^{-1}\\left\\lfloor \\dfrac{p}{i}\\right\\rfloor\\pmod{p}$$\nä¸ºäº†é˜²æ­¢ç­”æ¡ˆä¸ºè´Ÿæ•°, ä½¿ç”¨ $r^{-1}(p-\\left\\lfloor \\frac{p}{i}\\right\\rfloor)$ ä»£æ›¿ $-r^{-1}\\left\\lfloor \\frac{p}{i}\\right\\rfloor$ .\næ—¶é—´å¤æ‚åº¦: $\\mathcal{O}(n)$\n1 2 3 inv[1] = 1; for (int i = 2; i \u003c= n; ++i) inv[i] = inv[p % i] * (p - p / i) % p; çº¿æ€§æ±‚é€†å…ƒ: å€’æ¨æ³• å…ˆç›´æ¥æ±‚è§£ $n!$ çš„é€†å…ƒ, ç„¶ååˆ©ç”¨ $((n-1)!)^{-1}\\equiv(n!)^{-1}\\cdot n\\pmod{p}$ å€’æ¨æ±‚å¾— $1!\\sim (n-1)!$ çš„é€†å…ƒ.\næ¥ç€å†åˆ©ç”¨ $n^{-1}\\equiv (n!)^{-1}\\cdot (n-1)!\\pmod{p}$ æ±‚è§£ $1\\sim n$ çš„é€†å…ƒ.\nä¾‹é¢˜ ã€ŒPOJ 1845ã€Sumdiv\né¦–å…ˆåˆ©ç”¨æ•´æ•°æƒŸä¸€åˆ†è§£å®šç†å°† $A$ è¡¨ç¤ºä¸º $A=p_1^{r_1}p_2^{r_2}\\cdots p_n^{r_n}$ .\nåˆ™ $A^B$ çº¦æ•°å’Œä¸º\n$$(1+p_1+p_1^2+\\cdots +p_1^{B\\cdot r_1})(1+p_2+p_2^2+\\cdots+p_2^{B\\cdot r_2})\\cdots(1+p_n+p_n^2+\\cdots+p_n^{B\\cdot r_n})$$\nå¯ä»¥å‘ç°, æ¯ä¸€ä¸ªæ‹¬å·é‡Œéƒ½æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—æ±‚å’Œ, ä»¥ $p_i$ ä¸ºä¾‹, å®ƒçš„å’Œå¯ä»¥å†™æˆ $\\dfrac{p_i^{B\\cdot r_i+1}-1}{p_i-1}$ , ç„¶åæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¿«é€Ÿå¹‚æ±‚è§£åˆ†å­ $p_i^{B\\cdot r_i+1}\\bmod{9901}$ , è¿™æ—¶è‹¥ $p_i-1\u003e(p_i^{B\\cdot r_i+1}-1)\\bmod{9901}$ , æˆ‘ä»¬ä¼šå¾—åˆ° $0$ , è¿™æ˜¾ç„¶æ˜¯é”™çš„, è€Œæ¨¡æ•° $9901$ æ­£å¥½ä¸ºç´ æ•°, å› æ­¤è€ƒè™‘ç”¨ $p_i-1$ çš„é€†å…ƒä¸åˆ†å­çš„ç»“æœç›¸ä¹˜æ¥ä»£æ›¿é™¤æ³•.\nå½“ $p_i-1$ ä¸º $9901$ çš„å€æ•°æ—¶ä¸å­˜åœ¨é€†å…ƒ, è¿™æ—¶æˆ‘ä»¬å¯ä»¥å‘ç° $p_i\\equiv 1\\pmod{9901}$ , å› æ­¤ $1, p_i, p_i^2, \\cdots, p_i^{B\\cdot r_i+1}\\equiv 1\\pmod{9901}$ , æ‰€ä»¥ $1+p_i+p_i^2+\\cdots+p_i^{B\\cdot r_i}\\equiv B\\cdot r_i+1\\pmod{9901}$ .\nçº¿æ€§åŒä½™æ–¹ç¨‹ å½¢å¦‚ $ax\\equiv c\\pmod{m}$ çš„æ–¹ç¨‹ï¼Œç§°ä¸ºçº¿æ€§åŒä½™æ–¹ç¨‹ã€‚\næœ´ç´ ç®—æ³• å°† $x=1, 2, \\cdots, m-1$ ä¸€æ¬¡å¸¦è¿›å»éªŒè¯å³å¯ï¼Œè¿™ä¸ªæœ´ç´ ç®—æ³•çš„å¤æ‚åº¦å–å†³äº $m$ ã€‚ æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• å¯ä»¥å°†æ–¹ç¨‹çœ‹ä½œ $ax+my=c$ ï¼Œç„¶ååˆ©ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—æ–¹æ³•æ±‚è§£ã€‚ æ ¹æ®è£´èœ€å®šç†ï¼Œå½“ä¸”ä»…å½“ $\\gcd{(a, m)}|c$ æ—¶æ–¹ç¨‹æœ‰è§£ã€‚ ä»¤ $d=\\gcd(a, m)$ ï¼Œåˆ™æ–¹ç¨‹ä¸€å…±æœ‰ $d$ ä¸ªè§£ï¼Œæˆ‘ä»¬ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚å¾—ç‰¹è§£ $x_0$ ï¼Œåˆ™æ–¹ç¨‹çš„é€šè§£ $x_i=x_0+i\\cdot \\dfrac{m}{d}(i=0, 1, \\cdots, d-1)$ ã€‚ æ¬§æ‹‰å®šç† ä»¤ $d=\\gcd{(a, m)}$ ï¼Œè‹¥ $d \\nmid c$ åˆ™æ–¹ç¨‹æ— è§£ã€‚ ç„¶åä»¤ $a'=\\dfrac{a}{d}, c'=\\dfrac{c}{d}, m'=\\dfrac{m}{d}$ ï¼Œåˆ™ $\\gcd{(a', m')}=1$ ï¼ŒåŸæ–¹ç¨‹å˜ä¸º $a'x\\equiv c'\\pmod{m'}$ ï¼Œç”±æ¬§æ‹‰å®šç†ï¼Œ$a'^{\\varphi(m')}\\equiv 1\\pmod{m'}$ ï¼Œåœ¨æ–¹ç¨‹ä¸¤è¾¹åˆ†åˆ«ä¹˜ä¸Šä¸Šå¼ï¼Œå¾—åˆ° $a'x\\equiv c'a'^{\\varphi(m')}\\pmod{m'}$ ï¼Œå³ $x\\equiv c'a'^{\\varphi(m')-1}\\pmod{m'}$ ï¼Œäºæ˜¯æˆ‘ä»¬å¾—åˆ°åŸæ–¹ç¨‹çš„ç‰¹è§£ $x_0=dc'a'^{\\varphi(m')-1}$ ï¼Œå› æ­¤åŸæ–¹ç¨‹çš„è§£ä¸º $x_i=x_0+i\\cdot mâ€™(i=1, 2, \\cdots,d-1)$ ã€‚ ä¾‹é¢˜ çº¿æ€§ç»„åˆ\nå¯¹åº”æ•´æ•°æ•°åˆ— $A_1, A_2, \\cdots, A_n$ æ˜¯å¦å­˜åœ¨ $X_1, X_2, \\cdots, X_n$ ï¼Œ ä½¿å¾— $A_1X_1+A_2X_2+\\cdots+A_nX_n=C$ ï¼Œå…¶ä¸­ $\\gcd{(A_1, A_2, \\cdots, A_n)}\\mid C(n\\ge2)$ ã€‚å¦‚æœ‰ï¼Œè¯·æ‰¾å‡ºä¸€ç»„æ•´æ•°è§£ $(x_1, x_2, x_3, x_4)$ æ»¡è¶³ $12x_1+24x_2+18x_3+15x_4=3$ .\né¢˜ä¸­çš„æ–¹ç¨‹æ˜¯ n å…ƒå½¢å¼çš„æ‰©å±•æ¬§å‡ é‡Œå¾—æ–¹ç¨‹ï¼Œæˆ‘ä»¬å°è¯•å°† n å…ƒé€æ­¥é™ä¸ºäºŒå…ƒå¾—åˆ°æœ€ç»ˆè§£ã€‚\nè®¾ $d=\\gcd{(A_1, A_2, \\cdots, A_n)}$ ï¼Œä»¤ $C'=\\dfrac{C}{d},A_i'=\\dfrac{A_i}{d}(i=1, 2, \\cdots, n)$ ï¼Œé¦–å…ˆå°†æ–¹ç¨‹å˜å½¢ä¸º $A_1'X_1+A_2'X_2+\\cdots+A_n'X_n=C'$ ï¼Œæ­¤æ—¶æ»¡è¶³ $\\gcd{(A_1', A_2', \\cdots, A_n', C')}=1$ ã€‚\nç„¶åæˆ‘ä»¬è€ƒè™‘æ±‚è§£æ–¹ç¨‹ $A_1'X_1+\\gcd(A_2', A_3', \\cdots, A_n')Y_1=C'$ ï¼Œåˆ©ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—æ–¹æ³•æ±‚å¾—ç‰¹è§£ $X_1,Y_1$ ï¼Œç”±äºé¢˜ä¸­ä»…è¦æ±‚å¾—åˆ°ä¸€ç»„è§£ï¼Œå› æ­¤æˆ‘ä»¬åªå–ç‰¹è§£å³å¯ï¼Œç„¶åå†ä»¥åŒæ ·çš„æ–¹æ³•æ±‚è§£ $A_2'X_2+A_3'X_3+\\cdots+A_n'X_n=\\gcd(A_2', A_3', \\cdots, A_n')Y_1$ ä¾¿å¯ä»¥å®ç°é€æ¸é™å…ƒäº†ã€‚\nçº¿æ€§åŒä½™æ–¹ç¨‹ç»„ï¼ˆæ¨¡äº’ç´ ï¼‰ è€ƒè™‘å½¢å¦‚ $x\\equiv a_i\\pmod{m_i}$ çš„è‹¥å¹²ä¸ªçº¿æ€§åŒä½™æ–¹ç¨‹è”åˆå¾—åˆ°çš„æ–¹ç¨‹ç»„ï¼Œä¾‹å¦‚ $$ \\begin{cases} x \u0026\\equiv\u0026 2\\pmod{3} \\\\ x \u0026\\equiv\u0026 3\\pmod{5} \\\\ x \u0026\\equiv\u0026 5\\pmod{7} \\end{cases} $$ ä¸€ç§å¯è¡Œçš„è§£æ³•æ˜¯ä»¤ $x=3y+2$ ï¼Œç„¶åå°†æ–¹ç¨‹ $(2)$ æ”¹å†™æˆ $y\\equiv 2\\pmod{5}$ ï¼Œæ¥ç€å†ä»¤ $y=5z+2$ ä»£å…¥æ–¹ç¨‹ $(3)$ å¾—åˆ° $z\\equiv 4\\pmod{7}$ ï¼Œå†ä»¤ $z=7k+4$ ï¼Œæœ€åæˆ‘ä»¬å¯ä»¥å¾—åˆ°è§£ $x\\equiv68\\pmod{105}$ ã€‚\nä¸­å›½å‰©ä½™å®šç† è‹¥çº¿æ€§åŒä½™æ–¹ç¨‹ç»„ $x\\equiv a_i\\pmod{m_i}(i=1, \\cdots, n)$ çš„æ¨¡æ•° $m_i$ ä¸¤ä¸¤äº’ç´ ï¼Œåˆ™ $x$ åœ¨ $\\bmod{M}(M=\\prod_{i=1}^n m_i)$ ä¸‹æœ‰å”¯ä¸€è§£ã€‚\nä»¤ $M_i=\\dfrac{M}{m_i}$ ï¼Œæœ‰ $\\gcd{(M_i, m_i)}=1$ ï¼Œå› æ­¤ $M_i$ åœ¨ $\\bmod{m_i}$ ä¸‹çš„é€†å…ƒå­˜åœ¨ï¼Œè®¾å…¶ä¸º $t_i$ ï¼Œäºæ˜¯æœ‰ $a_iM_it_i\\equiv a_i\\pmod{m_i},a_iM_it_i\\equiv0\\pmod{m_j}(j\\not= i)$ ã€‚\nå¯ä»¥å¾—åˆ°è§£ $x\\equiv\\sum_{i=1}^na_iM_it_i\\pmod{M}$ ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 //China Remainer Theorem int CRT(const int a[], const int m[], int n) { int M = 1, ret = 0; for (int i = 1; i \u003c= n; ++i) M *= m[i]; for (int i = 1; i \u003c= n; ++i) { int ti = getinv(m[i], a[i]), Mi = M / m[i]; ret = (ret + a[i] * ti * Mi % M) % M; } return ret; } //åˆ©ç”¨ exgcd æ±‚é€†å…ƒ int getinv(int a, int b) { int x, y; exgcd(a, b, x, y); return x; } çº¿æ€§åŒä½™æ–¹ç¨‹ç»„ï¼ˆæ¨¡ä¸äº’ç´ ï¼‰ å¯¹äºæ¨¡ä¸äº’ç´ çš„çº¿æ€§åŒä½™æ–¹ç¨‹ç»„ $$ \\begin{cases} x \u0026\\equiv a_1\\pmod{m_1} \\\\ x \u0026\\equiv a_2\\pmod{m_2} \\\\ \u0026\\cdots \\\\ x \u0026\\equiv a_n\\pmod{m_n} \\end{cases} $$\nè€ƒè™‘æ±‚è§£æ–¹ç¨‹æ•°é‡ä¸º 2 çš„æƒ…å½¢ï¼Œå½“æ–¹ç¨‹æ•°é‡å¤§äº 2 æ—¶è¿­ä»£æ±‚è§£ã€‚\n$$ \\begin{cases} x \u0026\\equiv a_1\\pmod{m_1} \\\\ x \u0026\\equiv a_2\\pmod{m_2} \\end{cases} $$ è®¾ $y=x-a_1$ ï¼Œåˆ™æ–¹ç¨‹ç»„å˜ä¸º $$ \\begin{cases} y \u0026\\equiv 0 \u0026\\pmod{m_1} \\\\ y \u0026\\equiv a_2-a_1 \u0026\\pmod{m_2} \\end{cases} $$ è®¾ $d=\\gcd{(m_1, m_2)}$ ï¼Œæ ¹æ®è£´èœ€å®šç†ï¼Œè‹¥ $d \\nmid (a_2-a_1)$ ï¼Œåˆ™æ–¹ç¨‹ç»„æ— è§£ï¼Œå¦åˆ™ä»¤ $y'=\\dfrac{y}{d},a'=\\dfrac{a_2-a_1}{d}, m_i'=\\dfrac{m_1}{d}(i=1,2)$ ï¼Œæœ‰ $$ \\begin{cases} y' \u0026\\equiv{0} \u0026\\pmod{m_1â€™} \\\\ y' \u0026\\equiv{a'} \u0026\\pmod{m_2â€™} \\end{cases} $$ æ­¤æ—¶ $\\gcd{(m_1', m_2')}=1$ ï¼Œä»¤ $y'=km_1'$ ï¼Œå†ç”±æ¬§æ‹‰å®šç†å¯å¾— $k\\equiv{a'm_1'^{\\varphi(m_2')-1}}\\pmod{m_2'}$ ï¼Œäºæ˜¯ $y\\equiv{da'm_1'^{\\varphi{(m_2')}}}\\pmod{dm_1'm_2'}$ ï¼Œæœ€åä»£å›å»å¯ä»¥å¾—åˆ° $x\\equiv{(a_2-a_1)m_1'^{\\varphi{(m_2')}}+a_1}\\pmod{dm_1'm_2'}$ ã€‚\nä¾‹é¢˜ ã€ŒPOJ 2891ã€Strange Way to Express Integers\nç®—æ³•å’Œä¸Šè¿°ä¸€è‡´ã€‚\nå‡è®¾æˆ‘ä»¬å·²ç»é€šè¿‡è¿­ä»£æ±‚è§£å¾—åˆ°å‰ $k-1$ ä¸ªæ–¹ç¨‹çš„ä¸€ä¸ªè§£ $x_0$ ï¼Œä»¤ $M=\\prod_{i=1}^{k-1}m_i$ ï¼Œåˆ™ $x=x_0+i\\cdot M$ æ˜¯å‰ $k-1$ ä¸ªæ–¹ç¨‹çš„é€šè§£ã€‚\nè€ƒè™‘ç¬¬ $k$ ä¸ªæ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ”¹å†™ä¸º $x_0+t\\cdot M\\equiv{a_k}\\pmod{m_k}$ ï¼Œå³ $t\\cdot M\\equiv{a_k-x_0}\\pmod{m_k}$ ï¼Œæ¥ä¸‹æ¥æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ $t$ å³å¯ï¼Œä¹Ÿå°±æ˜¯æ±‚è§£ä¸€ä¸ªåŒä½™æ–¹ç¨‹äº†ï¼Œåˆ©ç”¨æ¬§æ‹‰å®šç†æ±‚è§£å³å¯ã€‚\né«˜æ¬¡åŒä½™æ–¹ç¨‹ ç¬¬ä¸€ç±»é«˜æ¬¡åŒä½™æ–¹ç¨‹ å½¢å¦‚ $a^x\\equiv{b}\\pmod{p}$ çš„æ–¹ç¨‹ç§°ä¸ºç¬¬ä¸€ç±»é«˜æ¬¡åŒä½™æ–¹ç¨‹ï¼Œå…¶ä¸­ $\\gcd(a, p)=1$ ã€‚\nBSGS è§£å†³è¿™ä¸€ç±»æ–¹ç¨‹ä¸»è¦é‡‡ç”¨ BSGS (Baby Step Giant Step) ç®—æ³•ã€‚\nå°† $x$ å†™æˆ $x=kt-m(0\\le m\\le t-1)$ çš„å½¢å¼ï¼Œåˆ™åŸæ–¹ç¨‹å¯å˜å½¢ä¸º $(a^t)^k\\equiv{b\\cdot a^m\\pmod{p}}$ ã€‚\nå‡è®¾ $t$ å·²çŸ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€æšä¸¾ $k$ ï¼Œç„¶åè®¡ç®—ç›¸åº”çš„ $b\\cdot a^m$ ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³å˜å½¢åçš„ç­‰å¼å³å¯ã€‚\nå› ä¸ºåœ¨æšä¸¾ $k$ çš„è¿‡ç¨‹ä¸­ $m$ çš„å–å€¼ä¹Ÿåœ¨å˜åŒ–ï¼Œä½† $m$ çš„å–å€¼èŒƒå›´æ˜¯ä¸å˜çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†æ‰€æœ‰å¯èƒ½çš„ $b\\cdot a^m$ å€¼ï¼Œç”¨ä¸€ä¸ª Hash è¡¨å‚¨å­˜ã€‚\nç”±æ¬§æ‹‰å®šç†å¯çŸ¥ï¼Œæœ‰ $a^{\\varphi(p)}\\equiv{1}\\pmod{p}$ ï¼Œè€Œ $\\varphi(p)\u003cp$ ï¼Œå› æ­¤ä» 1~p ï¼Œæ¨¡ $p$ æ„ä¹‰ä¸‹ $a$ çš„å¹‚è‡³å°‘å®Œæˆäº†ä¸€æ¬¡å¾ªç¯ï¼Œæ‰€ä»¥æœ€å°æ•´æ•°è§£ $x\u003cp$ ï¼Œè¿›è€Œæˆ‘ä»¬å¯ä»¥ä» $0$ åˆ° $\\dfrac{p}{t}$ æšä¸¾ $k$ ï¼Œè€Œ $m\\in[0,t-1]$ ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $\\mathcal{O}(\\dfrac{p}{t}+t)$ ï¼Œå½“ $t=\\sqrt{p}$ æ—¶å¤æ‚åº¦æœ€å°ã€‚\næ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(2\\sqrt{p})$\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 int BSGS(int a, int b, int p) { b %= p; if (a % p == 0) return b ? 1 : -1; map \u003cint, int\u003e hash; int t = sqrt(p) + 1; for (int i = 0; i \u003c t; ++i) { int val = (long long)b * power(a, i, p) % p;//å¿«é€Ÿå¹‚ hash[val] = i; } a = power(a, t, p); for (int i = 0; i \u003c= t; ++i) { int val = power(a, i, p); int j = hash.find(val) == hash.end() ? -1 : hash[val]; if (j \u003e= 0 \u0026\u0026 i * t - j \u003e= 0) return i * t - j; } return -1; } ç¬¬äºŒç±»é«˜æ¬¡åŒä½™æ–¹ç¨‹ å½¢å¦‚ $x^k\\equiv{b}\\pmod{p}$ çš„æ–¹ç¨‹ç§°ä¸ºç¬¬äºŒç±»é«˜æ¬¡åŒä½™æ–¹ç¨‹ã€‚\né¦–å…ˆå¼•å…¥é˜¶å’ŒåŸæ ¹çš„æ¦‚å¿µï¼Œè¿™ä¸€éƒ¨åˆ†å’ŒæŠ½è±¡ä»£æ•°ç›¸å…³ï¼Œæˆ‘ç›®å‰è¿˜ä¸ä¼š QAQ ã€‚\né˜¶ æ»¡è¶³åŒä½™å¼ $a^n\\equiv{1}\\pmod{p}$ çš„æœ€å°æ•´æ•° $n$ ç§°ä¸º $a$ æ¨¡ $p$ çš„é˜¶ï¼Œè®°ä½œ $\\delta_p(a)$ ã€‚\nç”±æ¬§æ‹‰å®šç†å¯çŸ¥ï¼Œå½“ $\\gcd(a, p)=1$ æ—¶ï¼Œæœ‰ $a^{\\varphi(p)}\\equiv{1}\\pmod{p}$ ï¼Œå› æ­¤é˜¶çš„å­˜åœ¨æ€§å¾—è¯ã€‚\næ€§è´¨ 1 ï¼š$a,a^2,\\cdots,a^{\\delta_p(a)}$ æ¨¡ $m$ ä¸¤ä¸¤ä¸åŒä½™ã€‚\næ€§è´¨ 2 ï¼šè‹¥ $a^n\\equiv{1}\\pmod{p}$ ï¼Œåˆ™ $n \\mid \\delta_p(a)$ ã€‚\nâ€‹\tæ¨è®º ï¼šè‹¥ $a^m\\equiv{a^n}\\pmod{p}$ ï¼Œåˆ™ $m\\equiv{n}\\pmod{\\delta_p(a)}$ ã€‚\næ€§è´¨ 3 ï¼šè®¾ $p\\in\\mathbb{N}^*,, a,b\\in\\mathbb{Z},\\gcd(a,p)=\\gcd(b,p)=1$ ï¼Œåˆ™ $\\delta_p(ab)=\\delta_p(a)\\delta_p(b)$ çš„å……è¦æ¡ä»¶æ˜¯ $\\gcd(\\delta_p(a),\\delta_p(b))=1$ ã€‚\næ€§è´¨ 4 ï¼šè®¾ $k\\in\\mathbb{N},p\\in\\mathbb{N}^*,a\\in\\mathbb{Z},\\gcd(a,p)=1$ ï¼Œåˆ™ $\\delta_p(a^k)=\\dfrac{\\delta_p(a)}{\\gcd(\\delta_p(a),k)}$ ã€‚\nåŸæ ¹ è®¾ $p\\in\\mathbb{N}^*,a\\in\\mathbb{Z}$ ï¼Œè‹¥ $\\gcd(a,p)=1$ ï¼Œä¸” $\\delta_p(a)=\\varphi(p)$ ï¼Œåˆ™ç§° $a$ ä¸ºæ¨¡ $m$ çš„åŸæ ¹ã€‚\nä»¥ä¸‹åŸºäº $p$ ä¸ºè´¨æ•°çš„æƒ…å†µè¿›è¡Œè®¨è®ºã€‚\nå¦‚ä½•åˆ¤æ–­ $a$ æ˜¯å¦æ˜¯ $p$ çš„åŸæ ¹ï¼Ÿ\nç”±è´¹é©¬å°å®šç†ï¼Œæ–¹ç¨‹ $a^x\\equiv{1}\\pmod{p}$ çš„ä¸€ä¸ªè§£ä¸º $x=p-1$ ï¼Œå› æ­¤æœ€å°æ•´æ•°è§£ $x_{min}\\mid (p-1)$ ï¼Œè€Œæ»¡è¶³ $x_{min}=p-1$ çš„æ•´æ•° $a$ æ˜¯ $p$ çš„åŸæ ¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€ä¸ªæšä¸¾ $p-1$ çš„çº¦æ•° $k$ ï¼Œå¦‚æœåªæœ‰å½“ $k=p-1$ æ—¶æ»¡è¶³ $a^k\\equiv{1}\\pmod{p}$ ï¼Œåˆ™ $a$ æ˜¯ $p$ çš„åŸæ ¹ã€‚\nä¸‹é¢è€ƒè™‘æ±‚è§£ $x^k\\equiv{b}\\pmod{p}$ ã€‚\nç”±é˜¶çš„æ€§è´¨ 1 ï¼Œå­˜åœ¨å”¯ä¸€çš„æ­£æ•´æ•° $m$ ï¼Œæ»¡è¶³ $a^m\\equiv{b}\\pmod{p},0\\le m\\le p-1$ ï¼Œå…¶ä¸­ $a$ æ˜¯ $p$ çš„åŸæ ¹ï¼Œ$m$ å¯ä»¥ç”±ç¬¬ä¸€ç±»é«˜æ¬¡åŒä½™æ–¹ç¨‹æ±‚å‡ºã€‚\nåŒæ ·ï¼Œå­˜åœ¨å”¯ä¸€æ­£æ•´æ•° $y$ ï¼Œä½¿å¾— $x\\equiv{a^y}\\pmod{p}$ ï¼Œäºæ˜¯ä¸Šè¿°æ–¹ç¨‹å˜ä¸º $a^{ky}\\equiv{a^m}\\pmod{p}$ ã€‚\nç”±é˜¶çš„æ€§è´¨ 2 çš„æ¨è®ºï¼Œ$ky\\equiv{m}\\pmod{p-1}$ ï¼Œäºæ˜¯æˆ‘ä»¬æ±‚è§£è¿™ä¸ªçº¿æ€§åŒä½™æ–¹ç¨‹å¾—åˆ° $y$ ä¾¿å¯ä»¥å¾—åˆ° $x$ ã€‚\n","description":"æ—§æ–‡æ¬è¿","tags":["Math","Number Theory"],"title":"åŸºç¡€æ•°è®ºå¤ä¹ ","uri":"/posts/basic-number-theory/"},{"categories":["Algorithm"],"content":"Miller Rabin å®šç†æ˜¯ä¸€ç§ç´ æ€§æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­åˆ©ç”¨åˆ°äº†ç´ æ•°çš„ä¸€äº›æ€§è´¨ï¼Œè¿˜æœ‰è´¹é©¬å°å®šç†ï¼Œä»¥åŠäºŒæ¬¡æ¢æµ‹å®šç†ã€‚\nç´ æ•°çš„ä¸€äº›æ€§è´¨ æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹ç´ æ•°çš„ 4 æ¡æœ‰è¶£çš„æ€§è´¨ï¼š\nä¸å­˜åœ¨æœ€å¤§çš„ç´ æ•° å‡è®¾æœ€å¤§çš„ç´ æ•°ä¸º $p_k$ ï¼Œå°äºå®ƒçš„æ‰€æœ‰ç´ æ•°ä¸º $p_1, p_2, \\dots, p_{k-1}$ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ„é€ å‡ºæ•° $p_1p_2\\cdots p_k+1$ ï¼Œå®ƒä¸èƒ½è¢« $p_1, \\cdots, p_k$ ä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°æ•´é™¤ï¼Œæ•…å®ƒæ˜¯ç´ æ•°ï¼Œåˆå®ƒæ˜¾ç„¶å¤§äº $p_k$ ï¼Œäºæ˜¯å¯ä»¥å¾—å‡ºä¸å­˜åœ¨æœ€å¤§çš„ç´ æ•°ã€‚\nç›¸é‚»ç´ æ•°ä¹‹é—´çš„é—´éš”ä»»æ„å¤§\nè€ƒè™‘æ•° $a$ æ»¡è¶³ $0\\le a\\le n$ ï¼Œé‚£ä¹ˆ $n!+a$ ä¸€å®šèƒ½è¢« $a$ æ•´é™¤ï¼Œå› æ­¤é•¿åº¦ä¸º $n$ çš„æ•°åˆ— $n!,n!+2, \\cdots, n!+n$ ï¼ˆæ³¨æ„æ²¡æœ‰ $n!+1$ ï¼‰éƒ½æ˜¯åˆæ•°ï¼Œç”±äº $n$ å¯ä»¥ä»»æ„å¤§ï¼Œæ‰€ä»¥ç›¸é‚»ç´ æ•°ä¹‹é—´çš„é—´éš”å¯ä»¥ä»»æ„å¤§ã€‚\næ‰€æœ‰å¤§äº 2 çš„ç´ æ•°éƒ½å¯ä»¥è¢«å”¯ä¸€çš„è¡¨ç¤ºä¸ºä¸¤ä¸ªå¹³æ–¹æ•°ä¹‹å·®\næ‰€æœ‰å¤§äº 2 çš„ç´ æ•°éƒ½æ˜¯å¥‡æ•°ï¼Œå‡è®¾å®ƒæ˜¯ $2n+1$ ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«è¡¨ç¤ºä¸º $(n+1)^2-n^2$ ã€‚\nä¸‹é¢è¯æ˜è¿™ç§è¡¨ç¤ºæ³•æ˜¯å”¯ä¸€çš„ã€‚å‡è®¾ç´ æ•° $p$ å¯ä»¥è¢«è¡¨ç¤ºä¸º $a^2-b^2$ ï¼Œå³ $p=(a+b)(a-b)$ ï¼Œå› ä¸º $p$ æ˜¯ç´ æ•°ï¼Œæ‰€ä»¥åªèƒ½æœ‰ $a-b=1,a+b=p$ ï¼Œå¾—è¯ã€‚\nå½“ $n$ ä¸ºå¤§äº 2 çš„æ•´æ•°æ—¶ï¼Œ$2^n+1$ å’Œ $2^n-1$ ä¸¤ä¸ªæ•°ä¸­ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ•°æ˜¯ç´ æ•°ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªæ•°ä¸€å®šæ˜¯åˆæ•°\næ˜¾ç„¶ $2^n\\nmid 3(n\u003e2)$ ï¼Œå¦‚æœ $2^n\\equiv 1\\pmod{3}$ ï¼Œé‚£ä¹ˆ $(2^n-1)\\mid 3$ ä¸ºåˆæ•°ï¼›å¦‚æœ $2^n\\equiv 2\\pmod{3}$ ï¼Œé‚£ä¹ˆ $(2^n+1)\\mid 3$ ä¸ºåˆæ•°ã€‚\nFermat ç´ æ€§æµ‹è¯• å›é¡¾ä¸€ä¸‹è´¹é©¬å°å®šç†ï¼š\nè‹¥ $p$ ä¸ºç´ æ•°ï¼Œä¸” $a\\bot p$ ï¼Œé‚£ä¹ˆæœ‰ $a^{p-1}\\equiv 1\\pmod{p}$ ã€‚\næ ¹æ®è´¹é©¬å°å®šç†ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°èƒ½ä¸èƒ½åˆ©ç”¨å®ƒçš„é€†å®šç†æ¥åˆ¤å®šç´ æ•°å‘¢ï¼Ÿå¾ˆé—æ†¾ï¼Œè´¹é©¬å°å®šç†çš„é€†å®šç†æ˜¯ä¼ªçš„ã€‚\näººä»¬ç”¨ä¼ªç´ æ•°æ¥ç§°å‘¼æ»¡è¶³è´¹é©¬å°å®šç†çš„åˆæ•°ï¼Œå¦‚æœæ˜¯ä»¤ $a=2$ çš„æƒ…å†µä¸‹çš„ä¼ªç´ æ•°ï¼Œå°±å«å®ƒä»¥ 2 ä¸ºåº•çš„ä¼ªç´ æ•°ï¼Œå…¶ä»–å–å€¼æƒ…å†µä¸‹çš„åå­—ä»¥æ­¤ç±»æ¨ã€‚\nä¸ºäº†æé«˜è¿™ä¸ªç´ æ•°æµ‹è¯•çš„æ­£ç¡®ç‡ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯å¤šæ¬¡é€‰å– $a$ æ¥åˆ¤æ–­ï¼Œä¸€æ—¦ä¸æ»¡è¶³è´¹é©¬å°å®šç†å°±åˆ¤å®šå®ƒä¸ºåˆæ•°ï¼Œæ˜¾ç„¶æ­£ç¡®ç‡éš $a$ çš„é€‰å–æ¬¡æ•°çš„å¢åŠ è€Œå¢åŠ ã€‚æˆ‘ä»¬éšæœºé€‰å–è‹¥å¹²ä¸ªå°äº $n$ çš„æ•°æ¥ä½œä¸º $a$ çš„å–å€¼è¿›è¡Œæµ‹è¯•ï¼Œè¿™ä¸ªåˆ¤å®šç´ æ•°çš„æ–¹æ³•å°±æ˜¯æ‰€è°“çš„ Fermat ç´ æ€§æµ‹è¯•ã€‚\nç„¶è€Œä¸å¹¸çš„æ˜¯ï¼Œå­˜åœ¨ Carmichael æ•°ï¼Œå®ƒä»¬æ»¡è¶³å½“ $a$ å–éæ‰€æœ‰å°äº $n$ çš„æ•°æ—¶éƒ½æ»¡è¶³è´¹é©¬å°å®šç†ï¼Œè‡ªèº«å´æ˜¯åˆæ•°ã€‚\näºŒæ¬¡æ¢æµ‹å®šç† è¦ç»§ç»­åŠ å¼ºç´ æ•°çš„åˆ¤å®šæ–¹æ³•ï¼Œå°±è½®åˆ°äºŒæ¬¡æ¢æµ‹å®šç†å‡ºåœºäº†ã€‚\nå½“éœ€è¦åˆ¤å®šçš„æ•° $n\u003e2$ æ—¶ï¼Œæ˜¾ç„¶ $n-1$ æ˜¯å¶æ•°ï¼Œå¦‚æœå°äº $n$ çš„æ•° $a$ æ»¡è¶³ $a^{n-1}\\equiv 1\\pmod{n}$ ï¼Œé‚£ä¹ˆ $a^{n-1}-1=(a^{\\frac{n-1}{2}}+1)(a^{\\frac{n-1}{2}}-1)\\mid n$ ï¼Œè‹¥ $n$ ä¸ºç´ æ•°ï¼Œåˆ™ $a^{\\frac{n-1}{2}}\\equiv n-1\\pmod{n}$ æˆ– $a^{\\frac{n-1}{2}}\\equiv n+1\\pmod{n}$ ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€æ€§è´¨æ¥ç»§ç»­åŠ å¼ºç´ æ•°çš„åˆ¤å®šã€‚\näºŒæ¬¡æ¢æµ‹å®šç†å°±æ˜¯æŒ‡ï¼Œå¦‚æœ $p$ æ˜¯å¥‡ç´ æ•°ï¼Œé‚£ä¹ˆå¯¹äºæ­£æ•´æ•° $x$ ï¼Œè‹¥ $x^2\\equiv1\\pmod{p}$ ï¼Œåˆ™ $x\\equiv1\\pmod{p}$ æˆ– $x\\equiv p-1\\pmod{p}$ ã€‚\nMiller Rabin ç´ æ€§æµ‹è¯• Miller Rabin ç´ æ€§æµ‹è¯•ç»¼åˆä»¥ä¸Šæ–¹æ³•ï¼Œä¸æ–­æå– $n-1$ çš„å› å­ 2 ï¼Œå°† $n-1$ è¡¨ç¤ºä¸º $d\\times2^r$ çš„å½¢å¼ï¼ˆå…¶ä¸­ $d$ ä¸ºå¥‡æ•°ï¼‰ï¼Œé¦–å…ˆå¾—åˆ° $a^d$ ï¼Œç„¶åä¸æ–­å°†å…¶å¹³æ–¹ç›´åˆ°å˜ä¸º $a^{n-1}$ ï¼Œæ¯æ¬¡å¹³æ–¹åé¦–å…ˆæµ‹è¯•æ˜¯å¦æ»¡è¶³ $(a^{d\\times 2^s})^2\\equiv 1\\pmod{n}$ ï¼Œçœ‹æ˜¯å¦æ»¡è¶³äºŒæ¬¡æ¢æµ‹å®šç†çš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³å°±ç«‹å³åˆ¤æ–­æ˜¯å¦æ»¡è¶³å®ƒçš„ç»“è®ºï¼Œä¸€æ—¦ä¸æ»¡è¶³å°±åˆ¤æ–­ $n$ ä¸ºåˆæ•°ã€‚\nMiller Rabin ç´ æ€§æµ‹è¯•ä¹Ÿæ˜¯ä¸ç¡®å®šç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»¥ $a$ ä¸ºåº•çš„æ»¡è¶³ Miller Rabin ç´ æ€§æµ‹è¯•çš„åˆæ•°ç§°ä¸ºä»¥ $a$ ä¸ºåº•çš„å¼ºä¼ªç´ æ•°ã€‚ç¬¬ä¸€ä¸ªä»¥ 2 ä¸ºåº•çš„å¼ºä¼ªç´ æ•°æ˜¯ 2047 ï¼Œè€Œç¬¬ä¸€ä¸ªä»¥ 2 å’Œ 3 ä¸ºåº•çš„å¼ºä¼ªç´ æ•°åˆ™å¤§åˆ°äº† 1 373 653 ã€‚\nå¯¹äºå¤§æ•°çš„ Miller Rabin æµ‹è¯•ï¼Œåº•æ•°ä¸€èˆ¬æ˜¯éšæœºé€‰å–ï¼Œä½†æ˜¯å½“å¾…æµ‹æ•°ä¸å¤ªå¤§æ—¶ï¼Œåº•æ•°çš„é€‰å–å°±æœ‰ä¸€äº›æŠ€å·§äº†ã€‚å¦‚ï¼Œå½“ $n\u003c4,759,123,141$ æ—¶ï¼Œé€‰å– $2,7,61$ è¿›è¡Œæµ‹è¯•å³å¯ã€‚éšæœºé€‰å– $k$ ä¸ªåº•æ•°è¿›è¡Œæµ‹è¯•çš„å¤±è¯¯ç‡å¤§æ¦‚æ˜¯ $4^{-k}$ ã€‚\nå¦å¤–è¿˜æœ‰ç¬¬ä¸€ä¸ªå¤šé¡¹å¼çš„ã€ç¡®å®šçš„ã€æ— éœ€å…¶å®ƒæ¡ä»¶çš„ç´ æ€§åˆ¤æ–­ç®—æ³• AKS ç®—æ³•ï¼Œä¹‹åæœ‰ç©ºå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚\nMiller Rabin çš„ä¸€ç‚¹å°ä¼˜åŒ–ï¼šå½“æŸä¸€æ¬¡å¹³æ–¹åå¾—åˆ° $a^{d\\times 2^s}\\equiv n-1\\pmod{n}$ ï¼Œé‚£ä¹ˆä¹‹åæ‰€æœ‰çš„å¹³æ–¹æ“ä½œéƒ½ä¼šå¾—åˆ° 1 ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ­¤æ¬¡æµ‹è¯•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 bool MillerRabin(int n, int t = 8) { if (n \u003c 3 || n % 2 == 0) return false;\t// n = 2 æ—¶è™½ç„¶æ˜¯ç´ æ•°ï¼Œä½†æ˜¯ä¸æ»¡è¶³ MillerRabin ç´ æ€§æµ‹è¯•çš„æ¡ä»¶ int d = n - 1, r = 0; while (d % 2 == 0) d \u003e\u003e= 1, r++; while (t--) {\t// t ä¸ºæµ‹è¯•æ¬¡æ•°ï¼Œæœ€å¥½å¤§äº 8 int a = rand() % (n - 2) + 2, s;\t//ä¸ºäº†ä¸è®© a = 1 ï¼Œæ‰€ä»¥æœ€åæ˜¯ +2 int u = qpow(a, d, n); if (u == 1) continue;\t//æ­¤æ—¶åé¢å¹³æ–¹æ€»ä¼šå¾—åˆ° 1 ï¼Œå¿…ç„¶æ»¡è¶³æµ‹è¯•ï¼Œç›´æ¥è·³è¿‡ for (s = 0; s \u003c r; ++s) { if (u == n - 1) break;\t//å°ä¼˜åŒ– u = (long long)u * u % n; } if (s == r) return false;\t//å¦‚æœå­˜åœ¨ä¸€æ¬¡å¹³æ–¹åä¸æ»¡è¶³æ¡ä»¶ï¼Œs ä¼šå¢åŠ åˆ° r ï¼Œè¯´æ˜æ­¤æ¬¡æµ‹è¯•å¤±è´¥ } return true; } å‚è€ƒï¼š\næ•°è®ºéƒ¨åˆ†ç¬¬ä¸€èŠ‚ï¼šç´ æ•°ä¸ç´ æ€§æµ‹è¯• | Matrix67: The Aha Moments\nç´ æ•° - OI Wiki (oi-wiki.org)\n","description":"æ—§æ–‡æ¬è¿","tags":["Math","Number Theory","Miller Rabin"],"title":"Miller Rabin","uri":"/posts/miller-rabin/"},{"categories":["Math"],"content":" Info\næœ¬æ–‡å†™äº 2022 å¹´å¤§ä¸€ä¸Šå­¦æœŸï¼Œè°¢æƒ æ°‘ä¸Šå†Œçš„è¯¾åç»ƒä¹ é¢˜å¤§éƒ¨åˆ†éƒ½å†™äº†ï¼Œä½†æ˜¯å¾ˆå¯æƒœï¼Œç”±äºæ—¶é—´åŸå› æ²¡èƒ½æŠŠæˆ‘è®¤ä¸ºçš„ä¸€äº›å¥½é¢˜æ‘˜å½•å®Œã€‚\nå‡ ä¸ªå¸¸ç”¨åˆç­‰ä¸ç­‰å¼ å…³äº Bernoulli ä¸ç­‰å¼çš„æ¨å¹¿\nï¼ˆ3ï¼‰è¯æ˜ï¼šè‹¥ $a_i\u003e-1(i=1,2,\\cdots,n)$ ä¸”åŒå·ï¼Œåˆ™æˆç«‹ä¸ç­‰å¼ $$\\prod_{i=1}^n(1+a_i)\\ge1+\\sum_{i=1}^na_i$$\n$\\color{red}{\\textbf{Proof}}$\næ„é€ è¾…åŠ©æ•°åˆ— ${x_n}$ ä½¿ $x_n=\\prod_{i=1}^n(1+a_i)-(1+\\sum_{i=1}^na_i)$\næ˜¾ç„¶æœ‰ $x_1=0$ ï¼Œåªéœ€è¯æ˜ ${x_n}$ ä¸ºå•è°ƒé€’å¢æ•°åˆ—å³å¯.\n$$x_{n+1}-x_n=[\\prod_{i=1}^n(1+a_i)-1]a_{n+1}\\ge0 \\Leftrightarrow x_{n+1}\\ge x_n$$\nåˆ™æœ‰ $x_n\\ge x_1=0$ ï¼Œå³ $\\prod_{i=1}^n(1+a_i)\\ge1+\\sum_{i=1}^na_i$\n$\\color{blue}{\\textbf{Thoughts}}$\nåœ¨å­˜åœ¨å¤šé¡¹æ±‚å’Œçš„æƒ…å†µä¸‹æ„é€ è¾…åŠ©æ•°åˆ—å¯ä»¥æ¶ˆé™¤ç»å¤§å¤šæ•°é¡¹ï¼Œä»è€ŒåŒ–ç¹ä¸ºç®€ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿåˆ©ç”¨æ•°åˆ—çš„å•è°ƒæ€§.\né˜¶ä¹˜ $n!$ åœ¨æ•°å­¦åˆ†æä»¥åŠå…¶ä»–è¯¾ç¨‹ä¸­ç»å¸¸å‡ºç°ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªæœ‰å…³ä¸ç­‰å¼ï¼Œå®ƒä»¬éƒ½å¯ä»¥ä»å¹³å‡å€¼ä¸ç­‰å¼å¾—åˆ°\nï¼ˆ2ï¼‰åˆ©ç”¨ $(n!)^2=(1\\cdot n)[2\\cdot (n-1)]\\cdots(n\\cdot 1)$ è¯æ˜ï¼šå½“ $n\u003e1$ æ—¶æˆç«‹ $$n!\u003c\\left(\\frac{n+2}{\\sqrt{6}} \\right)^n $$\n$\\color{red}{\\textbf{Proof}}$\né¦–å…ˆæ ¹æ®æç¤ºå’Œä¸ç­‰å¼ä¸­çš„ $\\sqrt{6}$ éƒ½åº”è¯¥æƒ³åˆ°å°†å¾…è¯ä¸ç­‰å¼å¹³æ–¹ï¼Œæœ‰\n$$(n!)^2\u003c\\left(\\frac{n^2+4n+4}{6} \\right)^n$$\nç„¶åå¯¹å®ƒä½¿ç”¨æ”¾ç¼©é­”æ³•.ç”±äºå°† $(1\\cdot n)[2\\cdot (n-1)]\\cdots(n\\cdot 1)$ ä¸€é¡¹ä¸€é¡¹åœ°æ”¾ç¼©ä¼šæœ‰è¾ƒå¤§çš„è¯¯å·®ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å°†è¿™ n é¡¹ä¸€èµ·æ”¾ç¼©ï¼Œå¾—åˆ°\n$$(n!)^2=(1\\cdot n)[2\\cdot (n-1)]\\cdots(n\\cdot 1)\\le \\left(\\frac{(1\\cdot n)+[2\\cdot (n-1)]+\\cdots+(n\\cdot 1)}{n}\\right)^n$$\nä¸‹é¢æ„é€ è¾…åŠ©æ•°åˆ—æ±‚è§£åˆ†å­çš„è¡¨è¾¾å¼.\nè®¾ $x_n=(1\\cdot n)+[2\\cdot (n-1)]+\\cdots+(n\\cdot 1)$ ï¼Œåˆ™ $x_1=n$ ï¼Œä½œå·®å¾—\n$$x_{n+1}-x_n=1+2+\\cdots+n+n+1=\\frac{n^2+3n+2}{2}$$\nç´¯åŠ åå¾—åˆ°\n$$x_{n+1}-x_1=\\frac{n^3+6n^2+11n}{6} $$\näºæ˜¯ $x_n=\\frac{n^3+3n^2+8n-12}{6}$ ï¼Œä»£å…¥ä¸Šé¢çš„å¼å­æœ‰\n$$(n!)^2\\le \\left(\\frac{(1\\cdot n)+[2\\cdot (n-1)]+\\cdots+(n\\cdot 1)}{n}\\right)^n=\\left(\\frac{n^3+3n^2+8n-12}{6n}\\right)^n $$\nå› ä¸º $\\frac{n^3+3n^2+8n-12}{n}-(n^2+4n+4)=4-(n+\\frac{12}{n})\u003c4-4\\sqrt{3}\u003c0$ ï¼Œæ‰€ä»¥ $n!\u003c\\left(\\frac{n+2}{\\sqrt{6}} \\right)^n$ æˆç«‹.\n$\\color{blue}{\\textbf{Thoughts}}$\nè¿™é‡Œä¸ºä»€ä¹ˆè¦å°† $n!$ å†™æˆå€’åºçš„ä¹˜ç§¯çš„å½¢å¼å‘¢ï¼Ÿå‡å¦‚æˆ‘ä»¬å°†å…¶å†™æˆæ­£åºçš„ä¹˜ç§¯å½¢å¼ï¼Œä¼šå¾—åˆ° $(n!)^2\\le \\left(\\frac{1^2+2^2+\\cdots+n^2}{n}\\right)^n$ ï¼Œå¸¦å…¥å¹³æ–¹å’Œå…¬å¼æœ‰ $\\left(\\frac{1^2+2^2+\\cdots+n^2}{n}\\right)^n=\\left[\\frac{(n+1)(2n+1)}{6}\\right]^n$ ï¼Œç„¶åæˆ‘ä»¬ä¼šå‘ç° $(n+1)(2n+1)\\ge(n+2)^2$ ï¼Œè¿™ä¸å°±æ”¾å¤šäº†å˜›.\näºæ˜¯æˆ‘ä»¬æƒ³åˆ°æ’åºä¸ç­‰å¼ï¼Œé€†åºå’Œ $\\le$ æ­£åºå’Œï¼Œä¸ºäº†ä½¿æ”¾ç¼©çš„ç²¾åº¦å°½é‡å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† $(n!)^2$ å†™æˆé€†åºçš„ä¹˜ç§¯çš„å½¢å¼ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ¯” $(n+2)^2$ å°çš„å¼å­.\nè¯æ˜ä¸‹åˆ—ä¸ç­‰å¼\n(3) $$\\frac{|a+b|}{1+|a+b|}\\le\\frac{|a|}{1+|a|}+\\frac{|b|}{1+|b|}$$\n$\\color{red}{\\textbf{Proof}}$\né¦–å…ˆå·¦è¾¹çš„å–çš„æ˜¯ $a+b$ çš„ç»å¯¹å€¼ï¼Œè€Œå³è¾¹åˆ™æ˜¯åˆ†åˆ«å– $a$ å’Œ $b$ çš„ç»å¯¹å€¼ï¼Œå› æ­¤åº”è¯¥è¦ç”¨åˆ°ä¸‰ç‚¹ä¸ç­‰å¼ $|a+b|\\le |a|+|b|$ ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå·¦è¾¹çš„åˆ†å­å’Œåˆ†æ¯éƒ½æœ‰ $|a+b|$ è¯¥å’‹åŠæï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬å°†åˆ†å­åˆ†æ¯åŒæ—¶é™¤ä»¥ $|a+b|$ å¾—åˆ° $\\frac{1}{\\frac{1}{|a+b|}+1}$ï¼Œç„¶åå†å¸¦å…¥ä¸‰ç‚¹ä¸ç­‰å¼å¾—åˆ°\n$$\\frac{|a+b|}{1+|a+b|}=\\frac{1}{\\frac{1}{|a+b|}+1}\\le\\frac{1}{\\frac{1}{|a|+|b|}+1}=\\frac{|a|+|b|}{|a|+|b|+1}$$\nç„¶åå°†å³è¾¹çš„å¼å­é€šåˆ†\n$$\\frac{|a|}{1+|a|}+\\frac{|b|}{1+|b|}=\\frac{|a|+|b|+2|ab|}{|a|+|b|+|ab|+1}$$\nè¿™æ—¶ï¼Œæˆ‘ä»¬å‘ç°ä¸¤ä¸ªå¼å­é•¿å¾—ååˆ†ç›¸ä¼¼ï¼Œåˆ†æ¯ç›¸å·®ä¸€ä¸ª $|ab|$ ï¼Œåˆ†å­ç›¸å·® 2 ä¸ª $|ab|$ ï¼Œè€Œå·¦å¼æ”¾ç¼©åçš„å¼å­æ˜¯çœŸåˆ†æ•°ï¼Œäºæ˜¯åˆ©ç”¨ç³–æ°´ä¸ç­‰å¼æ”¾ç¼©å¾—åˆ°\n$$\\frac{|a|+|b|}{|a|+|b|+1}\\le\\frac{|a|+|b|+|ab|}{|a|+|b|+|ab|+1}\\le\\frac{|a|+|b|+2|ab|}{|a|+|b|+|ab|+1}$$\nç»¼ä¸Šæ‰€è¿°ï¼Œ\n$$\\frac{|a+b|}{1+|a+b|}\\le\\frac{|a|+|b|}{|a|+|b|+1}\\le\\frac{|a|+|b|+2|ab|}{|a|+|b|+|ab|+1}=\\frac{|a|}{1+|a|}+\\frac{|b|}{1+|b|}$$\nè¯•æŒ‰ä¸‹åˆ—æç¤ºï¼Œç»™å‡º Cauchy ä¸ç­‰å¼çš„å‡ ä¸ªä¸åŒè¯æ˜\n(3) ç”¨ä¸ç­‰å¼ $|AB|\\le \\frac{A^2+B^2}{2}$\n$\\color{red}{\\textbf{Proof}}$\nå…ˆåˆ—å‡º Cauchy ä¸ç­‰å¼å¥½äº†.\n$$\\sum_{i=1}^n|a_ib_i|\\le\\sqrt{\\sum_{i=1}^na_i^2}\\sqrt{\\sum_{i=1}^nb_i^2}\\left(å½“ä¸”ä»…å½“\\frac{a_1}{b_1}=\\frac{a_2}{b_2}=\\cdots=\\frac{a_n}{b_n}æ—¶å–ç­‰\\right)$$\nå½“ $\\sum_{i=1}^na_i=0$ æˆ– $\\sum_{i=1}^nb_i=0$ æ—¶ï¼Œä¸ç­‰å¼æ˜¾ç„¶æˆç«‹.\nè€ƒè™‘ä»–ä»¬ä¸ä¸º 0 çš„æƒ…å†µï¼Œä¸ç­‰å¼å³\n$$\\frac{\\sum_{i=1}^n|a_ib_i|}{\\sqrt{\\sum_{i=1}^na_i^2}\\sqrt{\\sum_{i=1}^nb_i^2}}\\le 1$$\nå¯¹äº $i=k$ ï¼Œæœ‰\n$$\\frac{|a_kb_k|}{\\sqrt{\\sum_{i=1}^na_i^2}\\sqrt{\\sum_{i=1}^nb_i^2}}=\\frac{|a_k|}{\\sqrt{\\sum_{i=1}^na_i^2}}\\cdot\\frac{|b_k|}{\\sqrt{\\sum_{i=1}^nb_i^2}}\\le \\frac{1}{2}\\cdot\\left(\\frac{a_k^2}{\\sum_{i=1}^na_i^2}+\\frac{b_k^2}{\\sum_{i=1}^nb_i^2}\\right)$$\né‚£ä¹ˆå¯¹äº $i=1,2,\\cdots,n$ ï¼Œæ±‚å’Œæœ‰\n$$\\frac{\\sum_{i=1}^n|a_ib_i|}{\\sqrt{\\sum_{i=1}^na_i^2}\\sqrt{\\sum_{i=1}^nb_i^2}}\\le\\frac{1}{2}\\cdot(1+1)=1$$\nä¸ç­‰å¼å¾—è¯.\n$\\color{blue}{\\textbf{Thoughts}}$\nå‡å€¼ä¸ç­‰å¼çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯æŠŠä¹˜ç§¯å˜æˆåŠ æ³•çš„å½¢å¼ï¼Œåœ¨è¿™ä¸ªä¸ç­‰å¼ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å¯¹ $a_ib_i$ ä½¿ç”¨å‡å€¼ä¸ç­‰å¼å°†ä¼šå¾—åˆ° $\\sum_{i=1}^n|a_ib_i|\\le\\frac{\\sum_{i=1}^na_i^2+\\sum_{i=1}^nb_i^2}{2}$ ï¼Œç„¶åæˆ‘ä»¬æƒ³è¦è¯æ˜ $\\frac{\\sum_{i=1}^na_i^2+\\sum_{i=1}^nb_i^2}{2}\\le\\sqrt{\\sum_{i=1}^na_i^2\\cdot\\sum_{i=1}^nb_i^2}$ ï¼Œå·¦è¾¹æ˜¯åŠ æ³•ï¼Œå³è¾¹åˆ™æ˜¯æ ¹å·ä¸‹ä¹˜ç§¯çš„å½¢å¼ï¼Œæ˜¾ç„¶æ˜¯ä¸å¥½å¤„ç†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³å•Šï¼Œè¦æ˜¯å³è¾¹çš„ä¹Ÿæ˜¯åŠ æ³•çš„å½¢å¼å°±å¥½äº†ï¼Œå› æ­¤æˆ‘ä»¬æƒ³å¯¹ $\\sum_{i=1}^na_i^2\\cdot\\sum_{i=1}^nb_i^2$ ä¹Ÿä½¿ç”¨å‡å€¼ä¸ç­‰å¼ï¼Œä¸€ä¸ªåŠæ³•å°±æ˜¯åœ¨ä¸€å¼€å§‹æŠŠä»–ä»¬ç§»åˆ°ä¸ç­‰å¼å·¦è¾¹çš„åˆ†æ¯ä¸Šï¼Œç„¶åæ‹†æˆ $\\frac{|a_k|}{\\sqrt{\\sum_{i=1}^na_i^2}}\\cdot\\frac{|b_k|}{\\sqrt{\\sum_{i=1}^nb_i^2}}$ çš„å½¢å¼ï¼Œå†ä½¿ç”¨å‡å€¼ä¸ç­‰å¼ï¼Œä¼šå‘ç°æ±‚å’Œåçš„ç»“æœåˆšå¥½å°±æ˜¯ 1 .\nç”¨å‘å‰ - å‘åæ•°å­¦å½’çº³æ³•è¯æ˜ Fan Ky ä¸ç­‰å¼\nè®¾ $0\u003cx_i\\le\\frac{1}{2},i=1,2,\\cdots,n$ ï¼Œåˆ™ $$\\frac{\\prod_{i=1}^nx_i}{\\left(\\sum_{i=1}^nx_i\\right)^n}\\le\\frac{\\prod_{i=1}^n(1-x_i)}{\\left[\\sum_{i=1}^n(1-x_i)\\right]^n}$$\n$\\color{red}{\\textbf{Proof}}$\nä¸ç­‰å¼å³\n$$\\frac{\\prod_{i=1}^nx_i}{\\prod_{i=1}^n(1-x_i)}\\le\\left[\\frac{\\sum_{i=1}^nx_i}{\\sum_{i=1}^n(1-x_i)}\\right]^n$$\nè€ƒè™‘ $n=2^k(k\\in \\mathbb{N_+})$ çš„æƒ…å½¢.\nå½“ $k=1$ æ—¶ï¼Œä¸ç­‰å¼ä¸º $\\frac{x_1x_2}{(1-x_1)(1-x_2)}\\le\\frac{(x_1+x_2)^2}{[(1-x_2)+(1-x_2)]^2}$\nè¿™é‡Œå‡å€¼ä¸ç­‰å¼ä¸å¥½ä½¿ï¼Œè€Œå‚æ•°åªæœ‰ä¸¤é¡¹ï¼Œå› æ­¤ä½¿ç”¨ç›´æ¥ä½œå·®æ³•ï¼Œå¾—åˆ°\n$$\\frac{x_1x_2}{(1-x_1)(1-x_2)}-\\frac{(x_1+x_2)^2}{[(1-x_2)+(1-x_2)]^2}=\\frac{(x_1-x_2)^2(x_1+x_2-1)}{(1-x_2)(1-x_2)(2-x_1-x_2)^2}\\le 0$$\nå¾—è¯.\nå½“ $k=2$ æ—¶ï¼Œ\n$$\\begin{aligned} å·¦è¾¹ =\u0026 \\frac{x_1x_2}{(1-x_1)(1-x_2)}\\cdot\\frac{x_3x_4}{(1-x_3)(1-x_4)} \\ \\le\u0026 \\left(\\frac{x_1+x_2}{1-x_1+1-x_2}\\cdot\\frac{x_3+x_4}{1-x_3+1-x_4}\\right)^2 \\ \\le\u0026 \\left[\\frac{x_1+x_2+x_3+x_4}{(1-x_1)+(1-x_2)+(1-x_3)+(1-x_4)}\\right]^4 \\end{aligned}$$\nä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥è¯æ˜å½“ $n=2^k$ æ—¶ä¸ç­‰å¼æˆç«‹.\nä¸‹é¢è¿›è¡Œåå‘å½’çº³ï¼š\nå‡è®¾ä¸ç­‰å¼åœ¨ $n$ æ—¶å·²ç„¶æˆç«‹ï¼Œç°åœ¨æˆ‘ä»¬è¦æ¨å‡ºå®ƒåœ¨ $n-1$ æ—¶ä¹Ÿæˆç«‹.\nä»¤ $\\frac{\\sum_{i=1}^{n-1}x_i}{n-1}=A$ ï¼Œåˆ™ $\\frac{\\sum_{i=1}^{n-1}(1-x_i)}{n-1}=1-A$ ï¼Œäºæ˜¯ $\\left[\\frac{\\sum_{i=1}^{n-1}x_i}{\\sum_{i=1}^{n-1}(1-x_i)}\\right]^{n-1}=\\left(\\frac{A}{1-A}\\right)^{n-1}$ .\nå¾…è¯ä¸ç­‰å¼å³\n$$\\left(\\frac{A}{1-A}\\right)^{n-1}\\ge\\frac{\\prod_{i=1}^{n-1}x_i}{\\prod_{i=1}^{n-1}(1-x_i)}=\\frac{\\prod_{i=1}^{n}x_i}{\\prod_{i=1}^{n}(1-x_i)}\\cdot\\frac{1-x_n}{x_n}$$\nç­‰ä»·äº\n$$\\left(\\frac{A}{1-A}\\right)^{n-1}\\cdot\\frac{x_n}{1-x_n}\\ge\\frac{\\prod_{i=1}^{n}x_i}{\\prod_{i=1}^{n}(1-x_i)}$$\nç”±äºä¸ç­‰å¼åœ¨ $n$ æ—¶æˆç«‹ï¼Œæ˜¾ç„¶æœ‰\n$$\\left(\\frac{A}{1-A}\\right)^n\\ge\\frac{\\prod_{i=1}^{n}x_i}{\\prod_{i=1}^{n}(1-x_i)}$$\nå°† $\\frac{x_n}{1-x_n}$ çœ‹æˆ $\\frac{A}{1-A}$ ï¼Œå› è€Œä¸ç­‰å¼åœ¨ $n-1$ æ—¶ä¹Ÿæˆç«‹.\nä»è€Œ Fan Ky ä¸ç­‰å¼å¾—è¯.\n$\\color{blue}{\\textbf{Thoughts}}$\næ˜¾ç„¶æˆ‘ä»¬å¦‚æœä»å¾…è¯ä¸ç­‰å¼ï¼ˆå³ n - 1 çš„æƒ…å†µï¼‰å‡ºå‘ï¼Œå‘å·²çŸ¥ä¸ç­‰å¼ï¼ˆå³ n çš„æƒ…å†µï¼‰è½¬åŒ–ï¼Œä¼šå¤šå‡ºæ¥ä¸€ä¸ª $\\frac{1-x_n}{x_n}$ ï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„æ€è·¯.\nè¿™é“é¢˜çš„å…³é”®åœ¨äºå‘ç° $\\sum_{i=1}^{n-1}x_i$ ä¸ $\\sum_{i=1}^{n-1}(1-x_i)$ åœ¨å‡å€¼å½¢å¼ä¸‹çš„é«˜åº¦ç›¸ä¼¼æ€§ï¼Œå°†å®ƒä»¬ç›¸é™¤åçš„å¼å­åˆä¸ $\\frac{1-x_n}{x_n}$ é«˜åº¦ä¸€è‡´.\n2.1 æ•°åˆ—æé™çš„åŸºæœ¬æ¦‚å¿µ ä¾‹é¢˜ 2.1.1\nè¯æ˜æ•°åˆ— ${\\frac{n^5}{2^n}}$ æ”¶æ•›äº $0$ .\n$\\color{red}{\\textbf{Proof}}$\nè¿™é‡Œç”¨å®šä¹‰æ³•.\nä½¿ç”¨ $2^n=(1+1)^n=1+\\binom{n}{1}+\\cdots+\\binom{n}{n}$ æ¥è¿›è¡Œé€‚å½“æ”¾å¤§.\n$$\\frac{n^5}{2^n}\u003c\\frac{n^5}{\\binom{n}{6}}=\\frac{n^4\\cdot 6!}{(n-1)(n-2)(n-3)(n-4)(n-5)}\u003c\\frac{6!}{n}\u003c\\epsilon$$\nåªéœ€å– $N=\\left\\lfloor\\frac{720}{\\epsilon}\\right\\rfloor$ å³å¯.\n$\\color{blue}{\\textbf{Thoughts}}$\nä¸»è¦æ˜¯è¦æ³¨æ„ $2^n=\\sum_{i=0}^n\\binom{n}{i}$ çš„å˜å½¢æŠ€å·§.\nä¾‹é¢˜ 2.1.2\nè¯æ˜æ•°åˆ— ${\\sqrt[n]{n}}$ çš„æé™æ˜¯ $1$ .\n$\\color{red}{\\textbf{Proof \\ 1}}$\nåœ¨ $n\\ge2$ æ—¶ï¼Œæ ¹æ®å‡å€¼ä¸ç­‰å¼æœ‰\n$$1\\le\\sqrt[n]{n}=\\sqrt[n]{\\sqrt{n}\\cdot\\sqrt{n}\\cdot\\underbrace{1\\cdot1\\cdots\\cdot1}_{n-2ä¸ª1}}\\le\\frac{2\\sqrt{n}+n-2}{n}\\le1+\\frac{2}{\\sqrt{n}}$$\nå› æ­¤æœ‰ $0\\le\\sqrt[n]{n}-1\\le\\frac{2}{\\sqrt{n}}$\nå– $N=\\max{2,\\lceil\\frac{4}{\\epsilon^2}\\rceil}$ å³å¯.\n$\\color{blue}{\\textbf{Thoughts}}$\nè¿™ä¸ªåœ°æ–¹åˆ©ç”¨äº† 1 çš„ä»»æ„æ¬¡æ–¹ç­‰äº 1 çš„æ€§è´¨å’Œä¸€ä¸ªæ•°ä¹˜ä»¥ 1 è¿˜æ˜¯å®ƒæœ¬èº«çš„æ€§è´¨æ¥å¹²æ‰æŒ‡æ•°çš„ $\\frac{1}{n}$ .\n$\\color{red}{\\textbf{Proof \\ 2}}$\næ„é€ è¾…åŠ©æ•°åˆ—.\nç”±äº $\\sqrt[n]{n}\\ge1$ ï¼Œåªéœ€å…³å¿ƒ $\\sqrt[n]{n}-1\\le\\epsilon$ .\nä»¤ $y_n=\\sqrt[n]{n}-1$ ï¼Œåˆ™ $y_n\\ge0$ ï¼Œä¸”å½“ $n\u003e1$ æ—¶æœ‰\n$$n=(1+y_n)^n\\ge \\frac{n(n-1)}{2}y_n^2$$\näºæ˜¯æœ‰ $y_n\\le\\sqrt{\\frac{2}{n-1}}\u003c\\epsilon$ ï¼Œåªéœ€å– $N=[\\frac{2}{\\epsilon^2}]+1$ å³å¯.\n$\\color{blue}{\\textbf{Thoughts}}$\nå°†å¾…è¯ä¸ç­‰å¼ç›´æ¥æ„é€ ä¸ºè¾…åŠ©æ•°åˆ—å¯ä»¥æ›´æ–¹ä¾¿åœ°æ”¾ç¼©ä»è€Œæ‰¾å‡ºä¸€ä¸ªåˆé€‚çš„ N .\n2.1.5 ç»ƒä¹ é¢˜ 5\nè®¾ $a\u003e1$ ï¼Œè¯æ˜ $\\lim\\limits_{n\\to \\infty}\\frac{\\log_{a}n}{n}=0$ .\nï¼ˆå¯ä»¥åˆ©ç”¨å·²çŸ¥æé™ $\\lim\\limits_{n\\to\\infty}\\sqrt[n]{n}=1$ ï¼‰\n$\\color{red}{\\textbf{Proof}}$\nå› ä¸º $\\frac{\\log_an}{n}=\\log_a\\sqrt[n]{n}$ ï¼Œæ‰€ä»¥ $\\lim\\limits_{n\\to\\infty}\\frac{\\log_an}{n}=\\lim\\limits_{n\\to\\infty}\\log_{a}\\sqrt[n]{n}=0$\n2.2 æ”¶æ•›æ•°åˆ—çš„åŸºæœ¬æ€§è´¨ ä¾‹é¢˜ 2.2.2\nè‹¥ $\\lim\\limits_{n\\to\\infty}\\frac{x_n-a}{x_n+a}=0$ ï¼Œè¯æ˜ $\\lim\\limits_{n\\to\\infty}x_n=a$ .\n$\\color{red}{\\textbf{Proof \\ 1}}$\nå®šä¹‰æ³•.\nç”±é¢˜è®¾ï¼Œ $a\\not ={0}$ ï¼Œä¸” $\\forall\\epsilon\u003e0,\\exist N,s.t \\ n\u003eN,\\left|\\frac{x_n-a}{x_n+a}\\right|\u003c\\epsilon$\näºæ˜¯æœ‰\n$$|x_n-a|\u003c\\epsilon|x_n+a|=\\epsilon|x_n-a+2a|\\le\\epsilon(|x_n-a|+2|a|)$$\nå³\n$$(1-\\epsilon)|x_n-a|\u003c2\\epsilon|a|$$\né™å®š $\\epsilon\u003c1$ å¾—åˆ° $|x_n-a|\u003c\\frac{2\\epsilon|a|}{1-\\epsilon}$ ï¼Œå†é™å®š $\\epsilon\u003c\\frac{1}{2}$ ï¼Œå¯ä»¥å¾—åˆ° $|x_n-a|\u003c4|a|\\epsilon$ ï¼Œæ»¡è¶³ $\\lim\\limits_{n\\to\\infty}x_n=a$ çš„å®šä¹‰ï¼Œå¾—è¯.\n$\\color{blue}{\\textbf{Thoughts}}$\nè¿™é‡Œåˆ©ç”¨ç»å¯¹å€¼ä¸ç­‰å¼çš„æ—¶å€™ä¸èƒ½ç›´æ¥æ”¾ç¼©ï¼Œè€Œæ˜¯å°†å†…éƒ¨å‡­ç©ºæé€ å‡ºä¸€ä¸ªå¾…è¯å¼æ¥ï¼Œç„¶åå°†å¤šå‡ºæ¥çš„ä¸œè¥¿å‡å»ä¹‹åå†è¿›è¡Œæ”¾ç¼©.\n$\\color{red}{\\textbf{Proof \\ 2}}$\næ„é€ è¾…åŠ©æ•°åˆ—.\nä»¤ $y_n=\\left|\\frac{x_n-a}{x_n+a}\\right|$ ï¼Œåˆ™ $y_n$ æé™å·²çŸ¥ï¼Œä¸º 0 .\nå°† $x_n$ ç”¨ $y_n$ è¡¨ç¤ºï¼Œå¾—åˆ°\n$$x_n=a\\cdot\\frac{1+y_n}{1-y_n}$$\nå†ç”±æé™çš„å››åˆ™è¿ç®—æ³•åˆ™ï¼Œå¯ä»¥å¾—åˆ° $\\lim\\limits_{n\\to\\infty}x_n=a$ .\n$\\color{blue}{\\textbf{Thoughts}}$\nç›´æ¥å°†å·²çŸ¥å¼æ„é€ è¾…åŠ©æ•°åˆ—ï¼Œå¯ä»¥åˆ©ç”¨å·²çŸ¥æé™ç›´æ¥è®¡ç®—å‡ºè¦æ±‚çš„æé™.\n2.2.4 ç»ƒä¹ é¢˜ 2.(4)\nè®¾ ${ a_n }$ ä¸ºæ­£æ•°åˆ—ï¼Œå¹¶ä¸”å·²çŸ¥å®ƒæ”¶æ•›äº $a\u003e0$ ï¼Œè¯æ˜ $\\lim\\limits_{n\\to\\infty}\\sqrt[n]{a_n}=1$ .\n$\\color{red}{\\textbf{Proof}}$\nç”± $a_n\\rightarrow a$ å¯çŸ¥ï¼Œ$\\forall \\epsilon\u003e0$ , $\\exists N$ ,å½“ $n\u003eN$ æ—¶, æ»¡è¶³ $a-\\epsilon\u003ca_n\u003ca+\\epsilon$ .\nä»¤ $\\epsilon\u003c\\frac{a}{2}$ ï¼Œåˆ™ $\\frac{a}{2}\u003ca_n\u003c\\frac{3}{2}a$ ï¼Œå› ä¸º $\\lim\\limits_{n\\to\\infty}\\sqrt[n]{\\frac{a}{2}}=\\lim\\limits_{n\\to\\infty}\\sqrt[n]{\\frac{3}{2}a}$ ï¼Œæ‰€ä»¥ $\\lim\\limits_{n\\to\\infty}\\sqrt[n]{a_n}=1$ .\n2.2.4 ç»ƒä¹ é¢˜ 3.(1)\næ±‚ $\\lim\\limits_{n\\to\\infty}(1+x)(1+x^2)\\cdots(1+x^{2^n})$ ï¼Œå…¶ä¸­ $|x|\u003c1$ .\n$\\color{red}{\\textbf{Proof}}$\n$$(1+x)(1+x^2)\\cdots(1+x^{2^n})=\\frac{(1-x)(1+x)\\cdots(1+x^{2^n})}{1-x}=\\frac{1-x^{2^{n+1}}}{1-x}$$\nåˆ™ $\\lim\\limits_{n\\to\\infty}(1+x)(1+x^2)\\cdots(1+x^{2^n})=\\lim\\limits_{n\\to\\infty}\\frac{1-x^{2^{n+1}}}{1-x}=\\frac{1}{1-x}$\n2.2.4 ç»ƒä¹ é¢˜ 3.(5)\n$\\lim\\limits_{n\\to\\infty}\\sum_{k=1}^n\\frac{1}{k(k+1)\\cdots(k+\\nu)}$ï¼ˆå…¶ä¸­ $\\nu$ ä¸ºæ­£æ•´æ•°ï¼‰.\n$\\color{red}{\\textbf{Proof}}$\næ³¨æ„åˆ°\n$$\\frac{1}{k(k+1)\\cdots(k+\\nu)}=\\frac{1}{\\nu}\\left[\\frac{1}{k(k+1)\\cdots(k+\\nu-1)}-\\frac{1}{(k+1)\\cdots(k+v)}\\right]$$\næ‰€ä»¥\n$$\\lim\\limits_{n\\to\\infty}\\sum_{k=1}^n\\frac{1}{k(k+1)\\cdots(k+\\nu)}=\\lim\\limits_{n\\to\\infty}\\frac{1}{\\nu}(\\frac{1}{\\nu!}-\\frac{1}{(n+1)\\cdots(n+\\nu)})=\\frac{1}{\\nu\\cdot\\nu!}$$\n$\\color{blue}{\\textbf{Thoughts}}$\nè®°ä½è¿™é‡Œçš„æ³¨æ„åˆ°.\n2.3 å•è°ƒæ•°åˆ— ä¾‹é¢˜ 2.3.6\næ±‚æ•°åˆ— ${a_n}$ çš„æé™ï¼Œå…¶ä¸­$a_n=\\frac{1!+2!+\\cdots+n!}{n!}$ .\n$\\color{red}{\\textbf{Proof}}$\né¦–å…ˆè¯æ˜ ${a_n}$ æ”¶æ•›ï¼Œç ”ç©¶ç›¸ç»§ä¸¤é¡¹ä¹‹æ¯”ï¼Œæœ‰\n$$\\frac{a_{n+1}}{a_n}=\\frac{1!+2!+\\cdots+(n+1)!}{(n+1)(1!+2!+\\cdots+n!)}=\\frac{1!+2!+\\cdots+(n+1)!}{1!+(n+1)+2!(n+1)+\\cdots+n!(n+1)}$$\nåˆ†å­åˆ†æ¯ä»ç¬¬ä¸‰é¡¹å¼€å§‹å¯¹åº”æœ‰åˆ†æ¯çš„é¡¹å¤§äºåˆ†å­çš„é¡¹ï¼Œå› æ­¤ $\\frac{a_{n+1}}{a_n}\u003c1$ ï¼Œå³ ${a_n}$ ä¸ºå•è°ƒé€’å‡æ•°åˆ—.\nåˆæœ‰\n$$a_n\u003c\\frac{(n-2)(n-1)!+(n-1)!+n!}{n!}=\\frac{(n-1)(n-1)!+n!}{n!}\u003c\\frac{2n!}{n!}=2$$\næ‰€ä»¥ ${a_n}$ å•è°ƒæœ‰ç•Œï¼Œæ•… ${a_n}$ æ”¶æ•›.\nå¯ä»¥å‘ç°\n$$a_{n+1}=1+\\frac{a_n}{n+1}$$\nä¸¤è¾¹ä»¤ $n\\to\\infty$ ï¼Œå¯çŸ¥ $\\lim\\limits_{n\\to\\infty}a_n=1$ .\nå½“ç„¶ï¼Œè¿™é¢˜ç”¨ Stolz å®šç†è¯ä¼šæ›´ç®€å•.\n2.3.2 ç»ƒä¹ é¢˜ 12\nå¯¹æ¯ä¸ªæ­£æ•´æ•° $n$ ï¼Œç”¨ $x_n$ è¡¨ç¤ºæ–¹ç¨‹ $x+x^2+\\cdots+x^n=1$ åœ¨é—­åŒºé—´ $[0,1]$ ä¸­çš„æ ¹.æ±‚ $\\lim\\limits_{n\\to\\infty}x_n$ .\n$\\color{red}{\\textbf{Proof}}$\nç”±é¢˜æ„ï¼Œ\n$$ x_n+x_n^2+\\cdots+x_n^n=1 \\quad (1) \\\\ x_{n+1}+x_{n+1}^2+\\cdots+x_{n+1}^{n+1}=1 $$\né€šè¿‡æ¯”è¾ƒå¯ä»¥å‘ç° $x_n\u003ex_{n+1}$ ï¼Œå³ ${x_n}$ ä¸ºå•è°ƒé€’å‡æ•°åˆ—ï¼Œåˆæœ‰ $x_n\u003c1$ ï¼Œæ‰€ä»¥ $x_n$ æ”¶æ•›.\n$$x_{n+1}+x_{n+1}^2+\\cdots+x_{n+1}^{n+1}=x_{n+1}(1+x_{n+1}+\\cdots+x_{n+1}^n)=1$$\nå³\n$$x_{n+1}+\\cdots+x_{n+1}^n=\\frac{1}{x_{n+1}}-1\\quad(2)$$\nä»¤ $n\\to\\infty$ ï¼Œç”¨ ï¼ˆ2ï¼‰å¼å‡å»ï¼ˆ1ï¼‰å¼å¾—\n$$0=\\frac{1}{A}-2(\\lim\\limits_{n\\to\\infty}x_n=A)$$\næ‰€ä»¥ $A=\\frac{1}{2}$ .\n2.4 Cauchy å‘½é¢˜ä¸ Stolz å®šç† å‘½é¢˜ 2.4.1ï¼ˆCauchy å‘½é¢˜ï¼‰\nè®¾ ${x_n}$ æ”¶æ•›äº $l$ ï¼Œåˆ™å®ƒçš„å‰ $n$ é¡¹çš„ç®—æœ¯å¹³å‡å€¼ï¼ˆæ‰€æˆçš„æ•°åˆ—ï¼‰ä¹Ÿæ”¶æ•›äº $l$ ï¼Œå³æœ‰ $$\\lim\\limits_{n\\to\\infty}\\dfrac{x_1+x_2+\\cdots+x_n}{n}=l$$\n$\\color{blue}{\\textbf{Thoughts}}$\nå› ä¸ºè¿™ä¸ªè¯æ˜ç›¸å¯¹ç®€å•ï¼Œæ‰€ä»¥å°±ä¸åˆ—äº†ï¼Œä½†æ˜¯å®ƒçš„è¯æ˜å¾ˆé‡è¦ï¼Œä½“ç°äº†åˆ†æ²»çš„æ€æƒ³.\nP.S. Cauchy å‘½é¢˜åœ¨æ•°åˆ— ${x_n}$ ä¸ºæœ‰ç¡®å®šç¬¦å·çš„æ— ç©·å¤§é‡æ—¶ä¹Ÿæ˜¯æˆç«‹çš„.\nå‘½é¢˜ 2.4.2ï¼ˆ$\\frac{0}{0}$ å‹çš„ Stolz å®šç†ï¼‰\nè®¾ ${a_n}$ å’Œ ${b_n}$ éƒ½æ˜¯æ— ç©·å°é‡ï¼Œå…¶ä¸­ ${a_n}$ è¿˜æ˜¯ä¸¥æ ¼å•è°ƒå‡å°‘æ•°åˆ—ï¼Œåˆå­˜åœ¨ $\\lim\\limits_{n\\to\\infty}\\dfrac{b_{n+1}-b_n}{a_{n+1}-a_n}=l$ ï¼ˆå…¶ä¸­ $l$ ä¸ºæœ‰é™æˆ– $\\pm\\infin$ï¼‰ï¼Œåˆ™æœ‰ $\\lim\\limits_{n\\to\\infin}\\dfrac{b_n}{a_n}=l$ .\n$\\color{red}{\\textbf{Proof}}$\nè¿™é‡Œåªå¯¹æœ‰é™çš„ $l$ ä½œè¯æ˜ï¼Œå…¶ä»–æƒ…å†µçš„è¯æ˜ä¹Ÿæ˜¯ç±»ä¼¼çš„.\næ ¹æ®æ¡ä»¶ï¼Œ$\\forall \\epsilon\u003e0,\\exists N,s.t.$ å½“ $n\u003eN$ æ—¶æœ‰ $\\left|\\dfrac{b_n-b_{n+1}}{a_n-a_{n+1}}-l\\right|\u003c\\epsilon$ .\nå› ä¸º ${a_n}$ å•è°ƒå‡å°‘ï¼Œæ‰€ä»¥æœ‰\n$$(l-\\epsilon)(a_n-a_{n+1})\u003cb_n-b_{n+1}\u003c(l+\\epsilon)(a_n-a_{n+1})$$\nå– $m\u003en$ å¹¶ç´¯åŠ å¾—\n$$(l-\\epsilon)(a_n-a_m)\u003cb_n-b_m\u003c(l+\\epsilon)(a_n-a_m)$$\nå³\n$$\\left|\\dfrac{b_n-b_m}{a_n-a_m}-l\\right|\u003c\\epsilon$$\nä»¤ $m\\to\\infty$ ï¼Œå¹¶åˆ©ç”¨ $\\lim\\limits_{m\\to\\infin}a_m=\\lim\\limits_{m\\to\\infin}b_m=0$ ï¼Œä¾¿å¯ä»¥å¾—åˆ°å½“ $n\u003eN$ æ—¶ï¼Œæˆç«‹\n$$\\left|\\dfrac{b_n}{a_n}-l\\right|\\le\\epsilon$$\n$\\color{blue}{\\textbf{Thoughts}}$\nåœ¨è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶åé¢å¯ä»¥ç”¨åˆ° $\\lim\\limits_{n\\to\\infin}a_n=\\lim\\limits_{n\\to\\infin}b_n=0$ ï¼Œé‚£ä¸ºä»€ä¹ˆä¸€å¼€å§‹ä¸ç›´æ¥ç”¨ç„¶åç›´æ¥ç”±æé™çš„å››åˆ™è¿ç®—æ³•åˆ™å¾—åˆ° $\\lim\\limits_{n\\to\\infin}\\dfrac{b_n}{a_n}=l$ å‘¢ï¼Ÿ\nç­”æ¡ˆçš„å…³é”®å°±åœ¨äºè¿™ä¸ª m \u003e n .\nå½“æˆ‘ä»¬ç›´æ¥å¯¹ $\\lim\\limits_{n\\to\\infty}=\\dfrac{b_{n+1}-b_n}{a_{n+1}-a_n}$ ä½¿ç”¨æé™çš„å››åˆ™è¿ç®—æ³•åˆ™æ—¶ï¼Œä¼šå‘ç°åˆ†æ¯ $\\lim\\limits_{n\\to\\infty}(a_{n+1}-a_n)=0$ ï¼Œæ­¤æ—¶æ˜¾ç„¶æ˜¯ä¸èƒ½ç”¨æé™çš„å››åˆ™è¿ç®—æ³•åˆ™çš„.\nè€Œè‹¥æˆ‘ä»¬å– $m\u003en$ ï¼Œç„¶åä»¤ $m\\to\\infin$ ï¼Œè¿™é‡Œ $n$ å¹¶æ²¡æœ‰ $\\to\\infin$ ï¼Œç›¸å½“äºæˆ‘ä»¬å›ºå®šäº† n ï¼Œè€Œ m æ‰æ˜¯ä¸ç¡®å®šçš„é‚£ä¸ªï¼Œæ­¤æ—¶ $a_n,b_n$ éƒ½æ˜¯ä¸€ä¸ªç¡®å®šçš„æ•°ï¼Œè¿›è€Œ $\\lim\\limits_{m\\to\\infty}(a_n-a_m)=a_n$ è€Œä¸æ˜¯ 0 ï¼Œä¹Ÿå°±æ»¡è¶³äº†åˆ©ç”¨ $\\lim\\limits_{m\\to\\infin}a_m=\\lim\\limits_{m\\to\\infin}b_m=0$ çš„æ¡ä»¶é™åˆ¶ï¼Œä»è€Œæœ‰äº† $\\left|\\dfrac{b_n}{a_n}-l\\right|\\le\\epsilon$ ï¼Œæœ€åé€šè¿‡å®šä¹‰è¯æ˜äº† $\\lim\\limits_{n\\to\\infin}\\dfrac{b_n}{a_n}=l$ .\nè¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»æ˜¯é€šè¿‡å®šä¹‰æ¥è¯æ˜ï¼Œå› ä¸ºç›´æ¥åˆ©ç”¨æé™çš„å››åˆ™è¿ç®—æ³•åˆ™å¿…ç„¶è¦ä»¤ $n\\to\\infin$ ï¼Œè¿™æ ·å°±æ— æ³•é¿å…åˆ†æ¯ä¸º 0 äº†.\nå‘½é¢˜ 2.4.3 ï¼ˆ$\\frac{*}{\\infin}$ï¼‰å‹çš„ Stolz å®šç†\nè®¾æ•°åˆ— ${a_n}$ æ˜¯ä¸¥æ ¼å•è°ƒå¢åŠ çš„æ— ç©·å¤§é‡ï¼Œåˆå­˜åœ¨ $\\lim\\limits_{n\\to\\infty}\\dfrac{b_{n+1}-b_n}{a_{n+1}-a_n}=l$ï¼ˆå…¶ä¸­ $l$ ä¸ºæœ‰é™æˆ– $\\pm\\infin$ï¼‰ï¼Œåˆ™æœ‰ $\\lim\\limits_{n\\to\\infin}\\dfrac{b_n}{a_n}=l$ .\n$\\color{red}{\\textbf{Proof}}$\næ­¤å¤„åŒæ ·åªé’ˆå¯¹ l ä¸ºæœ‰é™çš„æƒ…å†µè¯æ˜.\næ ¹æ®é¢˜æ„ï¼Œ$\\forall\\epsilon\u003e0,\\exists N,s.t.$ å½“ $n\u003eN$ æ—¶æœ‰ $\\left|\\dfrac{b_n-b_{n+1}}{a_n-a_{n+1}}-l\\right|\u003c\\epsilon$ .\nå› ä¸º ${a_n}$ å•è°ƒå¢åŠ ï¼Œæ‰€ä»¥\n$$(l-\\epsilon)(a_{n+1}-a_n)\u003cb_{n+1}-b_n\u003c(l+\\epsilon)(a_{n+1}-a_n)$$\nå°†ä¸Šå¼çš„ n æ”¹æˆ n - 1 å¹¶ç´¯åŠ åˆ° N ï¼Œå¾—åˆ°\n$$(l-\\epsilon)(a_n-a_N)\u003cb_{n}-b_N\u003c(l+\\epsilon)(a_{n}-a_N)$$\nå³\n$$\\left|\\dfrac{b_n-b_{N}}{a_n-a_{N}}-l\\right|\u003c\\epsilon$$\næˆ‘ä»¬åˆæœ‰æ’ç­‰å¼\n$$\\frac{b_n}{a_n}-l=\\left(1-\\frac{a_N}{a_n}\\right)\\cdot\\left(\\frac{b_n-b_N}{a_n-a_N}-l\\right)+\\frac{b_N-la_N}{a_n}$$\nå…¶ä¸­ï¼Œç”±äº $\\lim\\limits_{n\\to\\infty}a_n=+\\infty$ ï¼Œå­˜åœ¨ $N_1$ ï¼Œä½¿å¾—å½“ $n\u003eN_1$ æ—¶ï¼Œæˆç«‹ $1-\\dfrac{a_N}{a_n}\u003c2$ å’Œ $\\left|\\dfrac{b_N-la_N}{a_n-a_N}\\right|\u003c\\epsilon$ .\nå› æ­¤ï¼Œå½“ $n\u003e\\max(N, N_1)$ æ—¶ï¼Œæœ‰ $\\left|\\frac{b_n}{a_n}-l\\right|\u003c3\\epsilon$ .\n$\\color{blue}{\\textbf{Thoughts}}$\nè¿™é‡Œçš„è¯æ˜æ€è·¯å’Œå‰ä¸€ä¸ª $\\frac{0}{0}$ å‹çš„ç±»ä¼¼ï¼Œä½†æ˜¯æ­¤å¤„ ${a_n}$ æ˜¯æ— ç©·å¤§é‡ï¼Œå› æ­¤ä¸èƒ½åˆ©ç”¨æé™æ¥è§£å†³æœ€åä¸€æ­¥.\nä¸ºäº†æ–¹ä¾¿æ”¾ç¼©å’Œåˆ©ç”¨ ${a_n}$ çš„æé™ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨å·²çŸ¥å¼ä¸­å¼•å…¥å›ºå®šçš„æ•° $a_N$ å’Œ $b_N$ ï¼Œç„¶åè¿™é‡Œâ€œå¼ºè¡Œâ€å°†å¾…è¯å¼ç”¨å·²çŸ¥å¼è¡¨ç¤ºï¼Œå†å€ŸåŠ© ${a_n}$ çš„æé™è¿›è¡Œæ”¾ç¼©ï¼Œä»è€Œè¯æ˜.\nè¿™ä¸ªåœ°æ–¹çš„å¾…è¯å¼å’Œå·²çŸ¥å¼çœ‹ä¸Šå»å¥½åƒä¸èƒ½è½¬åŒ–ï¼Œä½†å®é™…ä¸Šè½¬åŒ–æ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œæ‰€è°“çš„ trick å…¶å®ä¹Ÿä¸è¿‡æ˜¯å¾ˆæœ´ç´ çš„æ€æƒ³ï¼Œå½“æƒ³ä¸åˆ°å…¶ä»–å·§å¦™çš„æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªâ€œå¼ºè¡Œâ€è½¬åŒ–çš„æ–¹æ³•å¯èƒ½ä¼šå¾ˆå¥½ç”¨.\n$$\\color{yellow}{\\textbf{Attention}}$$\nä»¥ä¸Šä¸‰ä¸ªå‘½é¢˜çš„é€†å‘½é¢˜éƒ½ä¸æˆç«‹. è‹¥åœ¨è¿™ä¸‰ä¸ªå‘½é¢˜ä¸­å°† $l$ æ”¹ä¸ºä¸å¸¦ç¬¦å·çš„æ— ç©·å¤§é‡ $\\infin$ ï¼Œåˆ™ç»“è®ºå‡ä¸æˆç«‹. ä¾‹é¢˜ 2.4.3\nè®¾å·²çŸ¥ $\\lim\\limits_{n\\to\\infty}a_n=a$ ï¼Œè¯æ˜ï¼š$\\lim\\limits_{n\\to\\infty}\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}=a$ .\n$\\color{red}{\\textbf{Proof}}$\nåˆ©ç”¨ $2^n=(1+1)^n=\\sum_{k=0}^n\\binom{n}{k}$ ï¼Œæœ‰\n$$\\left|\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}a_k-a\\right|=\\left|\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}(a_k-a)\\right|\\le\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}|a_k-a|$$\nç”±é¢˜æ„ï¼Œ$\\forall\\epsilon\u003e0,\\exists N,s.t.$ å½“ $n\u003eN$ æ—¶æœ‰ $|a_n-a|\u003c\\epsilon$ .\nå°†ä¸Šé¢è½¬åŒ–åçš„å¼å­åˆ†æ‹†å¾—åˆ°\n$$\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}|a_k-a|=\\frac{1}{2^n}\\sum_{k=0}^N\\binom{n}{k}|a_k-a|+\\frac{1}{2^n}\\sum_{k=N+1}^n\\binom{n}{k}|a_k-a|$$\nå¯¹ç¬¬äºŒéƒ¨åˆ†çš„ä¼°è®¡æ˜¯å¾ˆå®¹æ˜“çš„\n$$\\frac{1}{2^n}\\sum_{k=N+1}^n\\binom{n}{k}|a_k-a|\u003c\\frac{\\epsilon}{2^n}\\sum_{k=N+1}^n\\binom{n}{k}\u003c\\frac{\\epsilon}{2^n}\\sum_{k=0}^n\\binom{n}{k}=\\epsilon$$\nè€Œå¯¹äºå‰ä¸€é¡¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸ç­‰å¼ â€”â€”$\\binom{n}{k}\u003cn^k$ .\nè®° $M=\\max|a_k-a|$ ï¼Œæ”¾ç¼©æœ‰\n$$\\frac{1}{2^n}\\sum_{k=0}^N\\binom{n}{k}|a_k-a|\u003c\\frac{M(n^0+n^1+\\cdots+n^N)}{2^n}$$\nå› ä¸º $N$ å›ºå®šï¼Œå½“ $n\\to\\infin$ æ—¶ï¼Œå³è¾¹çš„å¼å­çš„æé™ä¸º 0 ï¼Œå› æ­¤å­˜åœ¨ $N_1\u003eN$ ï¼Œå½“ $n\u003eN_1$ æ—¶æˆç«‹ $\\frac{1}{2^n}\\sum_{k=0}^N\\binom{n}{k}|a_k-a|\u003c\\epsilon$ .\nåˆå¹¶ä¸¤å¼çš„ä¼°è®¡ï¼Œæœ‰å½“ $n\u003eN_1$ æ—¶æˆç«‹\n$$\\left|\\frac{1}{2^n}\\sum_{k=0}^n\\binom{n}{k}a_k-a\\right|\u003c2\\epsilon$$\n$\\color{blue}{\\textbf{Thoughts}}$\næ­¤å¤„çš„è¯æ˜ç”¨äº†ä¸¤ä¸ªå¾ˆé‡è¦çš„ trick ï¼š\n$2^n=(1+1)^n=\\sum_{k=0}^n\\binom{n}{k}$ $\\binom{n}{k}\u003cn^k$ åŒæ—¶åœ¨å¯¹ $\\frac{M(n^0+n^1+\\cdots+n^N)}{2^n}$ çš„ä¼°è®¡ä¸­ï¼Œåˆ†å­åªæ˜¯ä¸€ä¸ªæœ€å¤§æŒ‡æ•°ç¡®å®šçš„ n çš„å¤šé¡¹å¼ï¼Œè€Œåˆ†æ¯åˆ™æ˜¯æŒ‡æ•°è¶‹äº $\\infty$ ä¸”åº•æ•°å¤§äº 1 çš„æŒ‡æ•°å‡½æ•°ï¼Œå› æ­¤æ•´ä¸ªè¡¨è¾¾å¼ä¸€å®šæ˜¯æ— ç©·å°é‡.\n2.4.3 ç»ƒä¹ é¢˜ 5\nè®¾ ${a_n}$ ä¸ºæ­£æ•°åˆ—ï¼Œä¸”æ”¶æ•›äº $A$ ï¼Œè¯æ˜ï¼š$\\lim\\limits_{n\\to\\infty}(a_1a_2\\cdots a_n)^{\\frac{1}{n}}=A$ .\n$\\color{red}{\\textbf{Proof}}$\næˆ‘ä»¬åˆ©ç”¨å¤¹é€¼å‡†åˆ™æ¥è¯.\n$$(a_1a_2\\cdots a_n)^{\\frac{1}{n}}\\le\\frac{a_1+a_2+\\cdots+a_n}{n}$$\næ ¹æ® Cauchy å‘½é¢˜ï¼Œ$\\lim\\limits_{n\\to\\infty}\\frac{a_1+a_2+\\cdots+a_n}{n}=\\lim\\limits_{n\\to\\infty}a_n=A$ .\nè€ƒè™‘ $\\frac{\\frac{1}{a_1}+\\frac{1}{a_2}+\\cdots+\\frac{1}{a_n}}{n}$ çš„æé™.\nç”± Stolz å®šç†å¯çŸ¥ï¼Œ $\\lim\\limits_{n\\to\\infty}\\frac{\\frac{1}{a_1}+\\frac{1}{a_2}+\\cdots+\\frac{1}{a_n}}{n}=\\lim\\limits_{n\\to\\infty}\\frac{1}{a_n}=\\frac{1}{A}$ ï¼Œå› æ­¤ $\\lim\\limits_{n\\to\\infty}\\frac{n}{\\frac{1}{a_1}+\\frac{1}{a_2}+\\cdots+\\frac{1}{a_n}}=A$ ,è¿›è€Œ\n$$(a_1a_2\\cdots a_n)^{\\frac{1}{n}}\\ge\\frac{n}{\\frac{1}{a_1}+\\frac{1}{a_2}+\\cdots+\\frac{1}{a_n}}$$\nä»è€Œå·¦å³ä¸¤è¾¹æé™éƒ½ä¸º A ï¼Œæ ¹æ®å¤¹é€¼å‡†åˆ™æœ‰ $\\lim\\limits_{n\\to\\infty}(a_1a_2\\cdots a_n)^{\\frac{1}{n}}=A$ .\n$\\color{blue}{\\textbf{Thoughts}}$\nå³è¾¹çš„å¼å­å¾ˆå¥½æƒ³ï¼Œä½†å·¦è¾¹çš„å¼å­å´ä¸å¤ªå¥½å¤„ç†.\né¦–å…ˆå®¹æ˜“æƒ³åˆ°çš„æ¯”å‡ ä½•å‡å€¼è¦å°çš„åªæœ‰è°ƒå’Œå‡å€¼ï¼Œç”±äºè°ƒå’Œå‡å€¼çš„åˆ†å­åˆ†æ¯éƒ½å¯ä»¥å†™æˆå’Œçš„å½¢å¼ï¼Œæˆ‘ä»¬æƒ³åˆ°åˆ©ç”¨ Stolz å®šç†ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå®ƒæ—¢ä¸æ»¡è¶³ $\\frac{0}{0}$ çš„å½¢å¼ä¹Ÿä¸æ»¡è¶³ $\\frac{*}{\\infty}$ çš„å½¢å¼ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nè¿™æ—¶æˆ‘ä»¬æ³¨æ„åˆ°å®ƒçš„åˆ†å­æ»¡è¶³ $\\infin$ çš„å½¢å¼ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Stolz å®šç†æ±‚å‡ºå®ƒçš„å€’æ•°çš„æé™å€¼ï¼Œä¹Ÿå°±æ±‚å‡ºäº†å®ƒçš„æé™å€¼.\n2.4.3 ç»ƒä¹ é¢˜ 9\nè®¾æ•°åˆ— ${a_n}$ æ»¡è¶³æ¡ä»¶ $0\u003ca_1\u003c1$ å’Œ $a_{n+1}=a_n(1-a_n)(n\\ge1)$ ï¼Œè¯æ˜ï¼š$\\lim\\limits_{n\\to\\infty}na_n=1$ .\n$\\color{red}{\\textbf{Proof}}$\nå¯ä»¥å‘ç° ${a_n}$ æ˜¯è¿­ä»£æ•°åˆ—ï¼Œæˆ‘ä»¬åªéœ€è¯æ˜å‡º ${a_n}$ å•è°ƒæœ‰ç•Œï¼Œä¾¿å¯ä»¥å¾ˆå¿«æ±‚å‡ºå®ƒçš„æé™å€¼.\nç”±é¢˜æ„ï¼Œæœ‰ $a_{n+1}-a_n=-a_n^2\u003c0$ ï¼Œå› æ­¤ ${a_n}$ ä¸¥æ ¼å•è°ƒå‡å°‘.\nå› ä¸º $0\u003ca_1\u003c1$ ï¼Œæ‰€ä»¥ $0\u003ca_2=a_1(1-a_1)\u003c1$ ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å½’çº³åœ°å¾—å‡º $0\u003ca_n=a_{n-1}(1-a_{n-1})\u003c1$ ï¼Œè¿›è€Œå¾—åˆ° ${a_n}$ å­˜åœ¨ä¸‹ç•Œ 0 ï¼Œå› æ­¤ ${a_n}$ æ”¶æ•›.\nåœ¨ $a_{n+1}=a_n(1-a_n)(n\\ge1)$ ä¸¤è¾¹ä»¤ $n\\to\\infin$ ï¼Œå¯ä»¥æ±‚å¾— $\\lim\\limits_{n\\to\\infty}a_n=0$ï¼ˆç­‰äº 1 çš„æƒ…å†µè¦æ’é™¤ï¼Œæ­¤å¤„è¯æ˜ç•¥ï¼‰.\nåˆ $na_n=\\dfrac{n}{\\frac{1}{a_n}}$ ï¼Œæ»¡è¶³ $\\frac{*}{\\infty}$ å‹ Stolz å®šç†ï¼Œäºæ˜¯å¯ä»¥æ±‚å‡º $\\lim\\limits_{n\\to\\infty}na_n=\\lim\\limits_{n\\to\\infty}\\dfrac{1}{\\frac{1}{a_n}-\\frac{1}{a_{n-1}}}$ .\nå°† $a_{n+1}=a_n(1-a_n)(n\\ge1)$ å˜å½¢ä¸º $\\frac{1}{a_n}-\\frac{1}{a_{n-1}}=\\frac{1}{1-a_n}$ ï¼Œå› æ­¤å¾—åˆ° $\\lim\\limits_{n\\to\\infty}(\\frac{1}{a_n}-\\frac{1}{a_{n-1}})=1$ ï¼Œæ‰€ä»¥ $\\lim\\limits_{n\\to\\infty}na_n=1$ .\n$\\color{blue}{\\textbf{Thoughts}}$\nè¿™æ˜¯ä¸€ä¸ªéœ€è¦å˜å½¢çš„ Stolz å®šç†é¢˜ï¼Œå…³é”®å°±åœ¨äºæƒ³åˆ°å°† $na_n$ å˜å½¢ä¸ºæ»¡è¶³ Stolz å®šç†çš„å½¢å¼.\næˆ‘ä»¬ä¸çŸ¥é“ ${a_n}$ ä¸­ä»»ä½•ä¸€é¡¹çš„å…·ä½“å€¼ï¼Œå·²çŸ¥çš„å¤§å°å…³ç³»ä¹Ÿä»…æœ‰å®ƒå’Œ 1 ä¸ 0 çš„å…³ç³»ï¼Œ$na_n$ ç®€å•çš„è¡¨è¾¾å¼ä¹Ÿä¸å¥½æƒ³åˆ°å®ƒèƒ½æ€æ ·æ”¾ç¼©ï¼Œå› æ­¤å®šä¹‰æ³•å’Œå¤¹é€¼å‡†åˆ™éƒ½ä¸å¥½åšï¼Œè¿™æ—¶å°±è¦è€ƒè™‘ Stolz å®šç†äº†.\nç”±äº ${a_n}$ æ˜¯è¿­ä»£æ•°åˆ—ï¼Œæ‰€ä»¥å®ƒçš„æé™å¾ˆå¥½æ±‚ï¼Œä¹Ÿå¾ˆå®¹æ˜“æ±‚å¾—ç›¸é‚»ä¸¤é¡¹ä¹‹é—´çš„å…³ç³»ï¼Œè€Œ $na_n$ ä¸­å«æœ‰ n ï¼Œè¿™æ˜¾ç„¶æ˜¯å¾ˆé€‚åˆç”¨ Stolz å®šç†çš„ï¼Œæˆ‘ä»¬åªéœ€å°†å…¶é€‚å½“å˜å½¢å³å¯.\n2.5 è‡ªç„¶å¯¹æ•°çš„åº• $e$ å’Œ Euler å¸¸æ•° $\\gamma$ æ›´ä¸å®Œäº† /dk\n","description":"æ—§æ–‡è¡¥æ¡£ï¼Œå¯æƒœå½“åˆåªå†™äº†å¾ˆå°‘ä¸€éƒ¨åˆ†","tags":["Calculus"],"title":"è°¢æƒ æ°‘åšé¢˜è®°å½•","uri":"/posts/%E8%B0%A2%E6%83%A0%E6%B0%91%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/"},{"categories":["æŠ˜è…¾"],"content":" Note\næœ¬åšå®¢å·²æ›´æ”¹ä¸»é¢˜ä¸º MemE ï¼ŒåŒæ ·è¿›è¡Œäº†ä¸€äº›ç»†èŠ‚ä¸Šçš„é­”æ”¹ï¼Œä½†æ˜¯æ‡’çš„å†æ°´ä¸€ç¯‡ blog äº†ï¼ˆ\næœ¬æ¥ä¹‹å‰çš„æœåŠ¡å™¨åˆ°æœŸäº†å‡†å¤‡æ”¾å¼ƒ Typecho ï¼Œæš‘å‡è‡ªå­¦ web ç„¶åå†™ä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œç„¶è€Œï¼Œäº‹å®æ˜¯åˆ°äº†ç°åœ¨éƒ½è¿˜æ²¡æ–°å»ºæ–‡ä»¶å¤¹ â•®(â•¯-â•°)â•­\nä½†æ˜¯åšå®¢è‚¯å®šè¿˜æ˜¯è¦å†™çš„ã€‚ç»§ç»­ç”¨ä»¥å‰çš„ hexo ï¼Ÿçœ‹äº†ä¸€çœ¼ Github ï¼Œçº¯ JavaScriptï¼ç®—äº†ç®—äº†ï¼Œæ„Ÿè§‰æ²¡æ„æ€ã€‚ç”¨å› Typecho å—ï¼Ÿè™½ç„¶éƒ¨ç½²æ–¹ä¾¿ï¼Œä½†æ˜¯ä¸€å † PHP æ–‡ä»¶æ›´ä¸ä¼šäº†å•Šï¼Œè¿™ä¸‹å‡ ä¹ä¸èƒ½ DIY äº†ã€‚\nä¸Šç½‘ä¸€é¡¿ä¹±æœï¼Œæœ€ç»ˆå°†ç›®æ ‡é”å®šï¼ˆå…¶å®åªæ˜¯ä¸€æ—¶å¿ƒè¡€æ¥æ½®ï¼‰åœ¨äº†ä»¥å‰ä½¿ç”¨è¿‡å‡ å¤©ï¼ˆæŒ‡å¯¹ç€æ–‡æ¡£ä¸€é¡¿ä¹±æï¼‰çš„ Hugo ä¸Šï¼Œè´¹äº†ç‚¹å·¥å¤«ç»ˆäºæŠ˜è…¾å‡ºä¸ªæ ·å­äº†ã€‚\nBuild ç›´æ¥æŠ„ä½œä¸šï¼\nï¼ˆ1ï¼‰å¸¦ç€Stackä¸»é¢˜å…¥å‘Hugo\nè¿™ä¸€æ­¥è²Œä¼¼æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œä¸‹ä¸€æ­¥å§ã€‚\nDeploy è¿˜æ˜¯æŠ„ä½œä¸šğŸ˜‹\nï¼ˆ2ï¼‰éƒ¨ç½²ä½ çš„Hugoåšå®¢\nä¸Šé¢è¿™ä½å¤§ä½¬åœ¨è¿™é‡Œæœ‰ä¸€äº›é—®é¢˜ï¼Œä¸€äº›æ²¡å†™æ¸…æ¥šå®¹æ˜“æ··æ·†ï¼Œä¸€äº›å†™é”™äº† XD ï¼Œè®©æˆ‘åœ¨è¿™ä¸€æ­¥è€—äº†ä¸å°‘æ—¶é—´ğŸ‘¿\nè·å– SSH Key å¯†é’¥ åœ¨ 1.3 æ­¥éª¤ã€Œè·å– SSH Key å¯†é’¥ã€ä¸­ï¼Œæ­£ç¡®çš„ Shell æŒ‡ä»¤å¦‚ä¸‹ï¼š\n1 ssh-keygen -t rsa -b 4096 -C \"$(git config user.email)\" -f gh-pages -N \"\" å¦‚æœä½ çš„ç”µè„‘ä¹‹å‰ç”Ÿæˆè¿‡å¯¹åº” git è´¦å·çš„ ssh-key ï¼Œé‚£ä¹ˆæŒ‰ç…§ä»–çš„æŒ‡ä»¤ä¼šç”Ÿæˆä¸€ä¸ªå’ŒåŸæ¥ä¸€æ ·çš„ ssh-key ï¼Œä¹Ÿå°±ç›¸å½“äºæ²¡æœ‰å˜åŒ–ï¼Œè€Œä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ä¼šç”Ÿæˆåä¸º gh-pages çš„ ssh-key ï¼Œå†åˆ†åˆ«å¡«å…¥å¯¹åº”çš„åœ°æ–¹ï¼Œè¿™æ ·åœ¨ä¹‹åçš„ Github Action ä¸Šæ‰èƒ½æˆåŠŸ deploy åˆ° blog ä»“åº“ã€‚\nè¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼ŒACTIONS_DEPLOY_KEY çš„å€¼æ˜¯æ²¡æœ‰ .pub åç¼€çš„ç§é’¥çš„å€¼ã€‚\néƒ¨ç½² hugo åšå®¢ åœ¨ 1.4 æ­¥éª¤ã€Œéƒ¨ç½² hugo åšå®¢ã€ä¸­ï¼Œdeploy.xml æ–‡ä»¶çš„åç¼€åº”è¯¥æ˜¯ .yml ï¼Œä¸ç„¶åœ¨ VSCode ä¸­æ‰“å¼€è¿é«˜äº®éƒ½æ²¡ï¼Œè¿˜ä¸€å †çº¢çº¿ã€‚\nç„¶å deploy.yml æ–‡ä»¶ä¸­è¦æ³¨æ„çœ‹ä½ ä»“åº“çš„é»˜è®¤ branch æ˜¯ main è¿˜æ˜¯ master ï¼Œå¦‚æœæ˜¯ master å°±è¦æŠŠæ–‡ä»¶ä¸­çš„ branch åæ”¹ä¸º master ã€‚\n1 2 3 4 on: push: branches: - master # åŸæ¥æ˜¯ main åŒæ ·çš„ï¼Œä¹‹åçš„ deploy.sh ä¹Ÿè¦æ³¨æ„çœ‹ä½ çš„ blog-file ä»“åº“çš„é»˜è®¤ branch ï¼Œç„¶åæ”¹æ‰æœ€åä¸€è¡Œï¼Œè€Œä¸”è¿˜è¦åœ¨ # å‰åŠ ä¸€ä¸ªç©ºæ ¼ã€‚\n1 git push -f git@github.com:username/blog-file.git master #å‘å­˜å‚¨åº“æ¨é€ ä¹‹ååº”è¯¥å°±æ²¡æœ‰é—®é¢˜äº†ï¼Œç„¶åæˆ‘è·³è¿‡äº† Vercel ã€‚\nDIY é‡å¤´æˆç»ˆäºæ¥äº†ğŸ˜¼ï¼Œæš‘å‡çœ‹çš„ weblab è™½ç„¶ä¸€çŸ¥åŠè§£ï¼Œè‡ªè§‰ä¹Ÿè¿˜æ˜¯æ­å»ºä¸å‡ºè‡ªå·±çš„åšå®¢ç³»ç»Ÿï¼Œä½†æ˜¯å¯¹æˆ‘çš„ DIY å’Œæ–‡ä»¶çº é”™èµ·åˆ°äº†æ•‘æ˜Ÿçš„ä½œç”¨ï¼Œè¿™é‡Œè¡·å¿ƒæ„Ÿè°¢ MIT çš„å¤§åŠ›æ”¯æŒğŸ˜\nç¬¬ä¸€æ­¥å½“ç„¶æ˜¯å…ˆæŠŠèƒ½æŠ„çš„ä½œä¸šæŠ„ä¸Šï¼\nï¼ˆ3ï¼‰Stackä¸»é¢˜çš„è‡ªå®šä¹‰\nè¿™é‡Œæˆ‘é™¤äº†ã€Œé¦–é¡µæ·»åŠ æ¬¢è¿æ¨ªå¹…ã€æ²¡åŠ ä¹‹å¤–å…¨éƒ½ç…§ç€æäº†ã€‚\nKateX æŒ‰ç…§ Stack ä¸»é¢˜æ–‡æ¡£çš„è¯´æ˜åœ¨ config.yml ä¸­æ‰“å¼€äº†å…¬å¼å¼€å…³ math: true ä½†æ˜¯ä»ç„¶å¤±è´¥äº†ï¼ŒæŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹æäº†åŠå¤©ä¹Ÿæä¸å‡ºæ¥ï¼ŒStack å®é™…ä¹Ÿå†…ç½®äº† KateX ä½†æ˜¯å°±æ˜¯æ¸²æŸ“å¤±è´¥ï¼ŒåŠå¤©æ‘¸ä¸ç€è„‘è¢‹æ—¶ï¼Œçªç„¶æƒ³èµ·æ¥å¯ä»¥ F12 æŸ¥é”™æ¥ç€ï¼\näºæ˜¯å¼€å¯ hugo server -D ä¹‹åæŒ‰ä¸‹ F12 ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå¥½å®¶ä¼™ï¼ŒåŸæ¥æ˜¯ KateX çš„æ–‡ä»¶æ‰“ä¸å¼€ï¼ŒæŸ¥äº†ä¸€ä¸‹ï¼ŒåŸæ¥ https://cdn.jsdelivr.net ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ç½‘ç«™ï¼ˆçœ‹æ¥æ˜¯æˆ‘æ²¡å¼€å…¨å±€çš„é”… XD\nä¸œç¿»è¥¿æ‰¾ä¹‹ååœ¨ä¸»é¢˜æ–‡ä»¶å¤¹é‡Œæ‰¾åˆ°äº†å¼•ç”¨ KateX çš„æ–‡ä»¶ã€‚\næ–°å»º blog\\data\\external.yaml æ–‡ä»¶ï¼ŒæŠŠ blog\\themes\\hugo-theme-stack\\data\\external.yaml é‡Œçš„å†…å®¹ç²˜è´´è¿›æ¥ï¼Œç„¶åæŠŠæ‰€æœ‰ https://cdn.jsdelivr.net ä¿®æ”¹ä¸ºå¯ä»¥è®¿é—®çš„é•œåƒç½‘ç«™åœ°å€ï¼Œå¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 Vibrant: - src: https://cdnjs.cloudflare.com/ajax/libs/vibrant.js/1.0.0/Vibrant.min.js integrity: sha512-V6rhYmJy8NZQF8F0bhJiTM0iI6wX/FKJoWvYrCM15UIeb6p38HjvTZWfO0IxJnMZrHWUJZJqLuWK0zslra2FVw== type: script PhotoSwipe: - src: https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js integrity: sha512-2R4VJGamBudpzC1NTaSkusXP7QkiUYvEKhpJAxeVCqLDsgW4OqtzorZGpulE3eEA7p++U0ZYmqBwO3m+R2hRjA== type: script defer: true - src: https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js integrity: sha512-SxO0cwfxj/QhgX1SgpmUr0U2l5304ezGVhc0AO2YwOQ/C8O67ynyTorMKGjVv1fJnPQgjdxRz6x70MY9r0sKtQ== type: script defer: true - src: https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css type: style - src: https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.css type: style KaTeX: - src: https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.css integrity: sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn type: style - src: https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.js integrity: sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx type: script defer: true - src: https://cdn.staticfile.org/KaTeX/0.16.8/contrib/auto-render.min.js integrity: sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 type: script defer: true å†æ¬¡æŸ¥çœ‹ blog ï¼Œå…¬å¼æ¸²æŸ“æˆåŠŸï¼\nFont å®¡ç¾å‚è€ƒ ouuan å¤§ä½¬çš„ blog ï¼Œæ­£æ–‡çš„ä¸­æ–‡å­—ä½“ä½¿ç”¨ æ€æºå®‹ä½“ ï¼Œè‹±æ–‡ä½¿ç”¨ä¸»é¢˜è‡ªå¸¦çš„ Lato ï¼Œæ ‡é¢˜åˆ™ä½¿ç”¨è‡ªå¸¦çš„ è‹¹æ–¹ ï¼Œå¼•ç”¨å—å†…ä½¿ç”¨ éœé¹œæ–‡æ¥· ã€‚\né¦–å…ˆå»ºç«‹ blog\\layouts\\custom-font.html æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹è¦†å†™åŸæœ‰å­—ä½“\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u003c!-- \u003cscript\u003e (function () { const customFont = document.createElement('link'); customFont.href = \"https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700\u0026display=swap\"; customFont.type = \"text/css\"; customFont.rel = \"stylesheet\"; document.head.appendChild(customFont); }()); \u003c/script\u003e --\u003e \u003clink rel=\"preconnect\" href=\"https://fonts.googleapis.com\"\u003e \u003clink rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin\u003e \u003clink href=\"https://fonts.googleapis.com/css2?family=Fira+Code\u0026family=JetBrains+Mono\u0026family=Noto+Sans+SC:wght@500\u0026family=Noto+Serif+HK:wght@500\u0026family=Noto+Serif+SC:wght@500\u0026family=Ubuntu+Mono\u0026display=swap\" rel=\"stylesheet\"\u003e è¿™é‡Œæˆ‘åœ¨ Google Font ä¸­å¼•å…¥éƒ¨åˆ†å­—ä½“ï¼Œè™½ç„¶æœ€åæ²¡æœ‰ä½¿ç”¨ã€‚ã€‚ã€‚\nç„¶åä¸‹è½½å¥½æ€æºå®‹ä½“å’Œéœé¹œæ–‡æ¥·çš„ .ttf æ–‡ä»¶ï¼Œæ”¾åœ¨ blog\\static\\fonts ç›®å½•ä¸‹ï¼Œæ¥ç€åœ¨ blog\\assets\\scss\\custom.scss ä¸­å¼•å…¥å­—ä½“æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨ unicode-range æ–¹æ³•å°†æ€æºå®‹ä½“çš„ä½œç”¨åŸŸé™åˆ¶åœ¨ä¸­æ–‡ã€‚\n1 2 3 4 5 6 7 8 9 10 @font-face { font-family: \"LXGWWenKai-Regular\"; src: url(\"/fonts/LXGWWenKai-Regular.ttf\") format(\"truetype\"); } @font-face { font-family: \"SourceHanSerif\"; src: url(\"/fonts/SourceHanSerifSC-VF.ttf\") format(\"truetype\"); unicode-range: U+1000-fffff } ä¹‹åå¦‚æœæƒ³è¦ä¿®æ”¹æŸä¸€éƒ¨åˆ†çš„å­—ä½“ï¼Œç›´æ¥ F12 é€‰ä¸­ç›¸åº”çš„éƒ¨åˆ†ï¼ŒæŸ¥çœ‹å¯¹åº”çš„ css ç±»åç§°ï¼Œå¦‚å›¾\nç„¶ååœ¨ blog\\assets\\scss\\custom.scss ä¸­åŠ å…¥\n1 2 3 4 5 6 7 8 9 10 11 12 body, .article-content { // font-family: 'Fira Code', monospace; // font-family: 'JetBrains Mono', monospace; // font-family: 'Noto Sans SC', sans-serif; // font-family: 'Noto Serif HK', serif; // font-family: 'Noto Serif SC', serif; // font-family: 'Ubuntu Mono', monospace; font-family: \"SourceHanSerif\", \"Lato\"; font-size: 1.7rem; font-weight: 480; } Sidebar ä¸»é¢˜åŸæœ‰ä¾§è¾¹æ çš„ä¸»é¡µå’Œå…³äºé¡µé¢çš„æ˜¯ä¸­æ–‡ï¼Œè€Œå…¶ä½™ä¸‰ä¸ªéƒ½æ˜¯è‹±æ–‡ï¼Œçœ‹ç€éš¾å—ï¼Œäºæ˜¯åœ¨ blog\\content\\page ç›®å½•ä¸‹æ‰¾åˆ° /about ç›®å½•å°†ä¸¤ä¸ª .md æ–‡ä»¶çš„ title éƒ½æ”¹ä¸ºè‹±æ–‡çš„ About ï¼Œä¸»é¡µåˆ™æ˜¯å°†åœ¨ blog\\content ç›®å½•ä¸‹çš„ä¸¤ä¸ª .md æ–‡ä»¶çš„ title æ”¹ä¸ºè‹±æ–‡çš„ Home.\nä¸€è¨€ åœ¨é¡µé¢ footer éƒ¨åˆ†åŠ å…¥ã€Œä¸€è¨€ã€\nä¸»è¦å‚è€ƒä¸€è¨€ å®˜æ–¹æ–‡æ¡£ï¼Œæ–°å»ºæ–‡ä»¶ blog\\assets\\scss\\partials\\footer.scss ï¼Œå…ˆå°†ä¸»é¢˜æ–‡ä»¶ä¸‹çš„ footer.scss å†…å®¹è’¯è¿›æ¥ï¼Œç„¶ååŠ å…¥ä¸€è¨€çš„å†…å®¹ï¼Œä¹‹åæ–‡ä»¶å†…å®¹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 footer.site-footer { padding: 20px 0 var(--section-separation) 0; font-size: 1.4rem; line-height: 1.75; \u0026:before { content: \"\"; display: block; height: 3px; width: 50px; background: var(--body-text-color); margin-bottom: 20px; } .copyright { color: var(--accent-color); font-weight: bold; margin-bottom: 5px; } .hitokoto { color: var(--body-text-color); font-weight: normal; font-size: 1.3rem; font-family: \"LXGWWenKai-Regular\"; p { margin: 0%; } a { color: var(--body-text-color); } } .powerby { color: var(--body-text-color); font-weight: normal; font-size: 1.2rem; a { color: var(--body-text-color); } } } æ¥ç€å»ºç«‹æ–‡ä»¶ blog\\layouts\\partials\\footer\\footer.html ï¼ŒåŒæ ·å°†ä¸»é¢˜æ–‡ä»¶å¤¹å†…åŒä¸€æ–‡ä»¶çš„å†…å®¹è’¯è¿‡æ¥ï¼Œå†åŠ å…¥ä¸€è¨€çš„å†…å®¹ï¼Œå¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 {{- $ThemeVersion := \"3.18.0\" -}} \u003cfooter class=\"site-footer\"\u003e \u003csection class=\"copyright\"\u003e \u0026copy; {{ if and (.Site.Params.footer.since) (ne .Site.Params.footer.since (int (now.Format \"2006\"))) }} {{ .Site.Params.footer.since }} - {{ end }} {{ now.Format \"2006\" }} {{ default .Site.Title .Site.Copyright }} \u003c/section\u003e \u003csection class=\"hitokoto\"\u003e \u003cp id=\"hitokoto\"\u003e \u003ca href=\"#\" id=\"hitokoto_text\"\u003e:D è·å–ä¸­...\u003c/a\u003e \u003c/p\u003e \u003cp id=\"hitofrom\" align=\"right\"\u003e \u003ca href=\"#\" id=\"hitokoto_text\"\u003e:D è·å–ä¸­...\u003c/a\u003e \u003c/p\u003e \u003cscript\u003e fetch('https://v1.hitokoto.cn') .then(function (res) { return res.json(); }) .then(function (data) { var hitokoto = document.getElementById('hitokoto'); hitokoto.innerText = data.hitokoto; var hitofrom = document.getElementById('hitofrom'); hitofrom.innerText = \"â€”â€”\" + data.from + '\\xa0'; }) .catch(function (err) { console.error(err); }) \u003c/script\u003e \u003c/section\u003e \u003csection class=\"powerby\"\u003e {{ with .Site.Params.footer.customText }} {{ . | safeHTML }} \u003cbr /\u003e {{ end }} {{- $Generator := `\u003ca href=\"https://gohugo.io/\" target=\"_blank\" rel=\"noopener\"\u003eHugo\u003c/a\u003e` -}} {{- $Theme := printf `\u003cb\u003e\u003ca href=\"https://github.com/CaiJimmy/hugo-theme-stack\" target=\"_blank\" rel=\"noopener\" data-version=\"%s\"\u003eStack\u003c/a\u003e\u003c/b\u003e` $ThemeVersion -}} {{- $DesignedBy := `\u003ca href=\"https://jimmycai.com\" target=\"_blank\" rel=\"noopener\"\u003eJimmy\u003c/a\u003e` -}} {{ T \"footer.builtWith\" (dict \"Generator\" $Generator) | safeHTML }} \u003cbr /\u003e {{ T \"footer.designedBy\" (dict \"Theme\" $Theme \"DesignedBy\" $DesignedBy) | safeHTML }} \u003c/section\u003e \u003c/footer\u003e Comment ä½¿ç”¨ Waline è¯„è®ºç³»ç»Ÿï¼Œç›´æ¥ç…§ç€ å®˜æ–¹æ–‡æ¡£ æå°±è¡Œäº†ï¼Œå°±æ˜¯è¿™ä¸ª Vercel åªæ”¯æŒ gmail é‚®ç®±å°±ç¦»è°±ï¼Œå®³å¾—æˆ‘è¿˜ç‰¹åœ°æ³¨å†Œäº†ä¸ª gmail é‚®ç®±ğŸ˜ \nColor Style çº¯è‰²èƒŒæ™¯æ„Ÿè§‰å¤ªå¹³æ·¡ï¼Œæƒ³æä¸ª Blue Archive é£æ ¼çš„ç•Œé¢ï¼Œä½†æ˜¯åˆæ²¡é‚£è®¾è®¡ UI çš„èƒ½åŠ›ï¼Œåªèƒ½ç jb æ”¹æ”¹èƒŒæ™¯è¿˜æœ‰ä¸€ç‚¹é¢œè‰²ç»†èŠ‚äº†ã€‚\nå…ˆè¯´è¯´é¢œè‰²å§ï¼Œä¸»è¦æ˜¯ä» Blue Archive å®˜ç½‘ä¸Šç”¨æµè§ˆå™¨æ’ä»¶å¸å–çš„ä¸€äº›é¢œè‰²ï¼Œç„¶åå†ä»ä¸­é€‰å–ä¸€éƒ¨åˆ†æ•´åˆåˆ° blog ä¸Šã€‚\nä¹‹åå°±å’Œå‰é¢ä¿®æ”¹å­—ä½“ä¸€æ ·ï¼Œåœ¨ä¿®æ”¹é¢œè‰²çš„åœ°æ–¹ F12 ç„¶åé€‰ä¸­ï¼ŒæŸ¥æ‰¾åˆ°å¯¹åº” CSS ç±»åå†åœ¨ blog\\assets\\scss\\custom.scss ä¸­ä¿®æ”¹å³å¯ã€‚\nè¿™é‡Œæˆ‘ä¿®æ”¹äº†é€‰ä¸­æ–‡æœ¬åçš„é¢œè‰²è¿˜æœ‰ä»£ç çš„é¢œè‰²ã€‚\n1 2 3 4 5 6 7 ::selection { background: #99d1fa; } .article-content code { color: #81b6f0; } ä¹‹åè¿˜ä¿®æ”¹äº† tags æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²ï¼ŒåŒæ ·æ˜¯åˆ›å»ºæ–‡ä»¶ blog\\assets\\scss\\variables.scss ç„¶åæŠŠä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹å¯¹åº”æ–‡ä»¶å†…å®¹å¤åˆ¶è¿‡æ¥ï¼Œå†ä¿®æ”¹é¡¶éƒ¨å†…å®¹ã€‚\n1 2 $defaultTagBackgrounds: #99d1fa, #5ecfd8, #f08f89, #f1c782, #9969ff; $defaultTagColors: #fff, #fff, #fff, #fff, #fff; æœ€åå°±æ˜¯æœ€æŠ˜è…¾æˆ‘çš„èƒŒæ™¯å›¾ç‰‡äº†ã€‚é¦–å…ˆå½“ç„¶è¿˜æ˜¯ F12 æ‰¾ CSS æ ·å¼åï¼Œç„¶åæ·»åŠ  Background ç›¸å…³å±æ€§ï¼Œè¿™é‡Œæˆ‘è¿˜ F12 äº† å•æ¥ª å¤§ä½¬çš„åšå®¢ï¼Œå› ä¸ºä»–æ˜¯æ”¾äº†èƒŒæ™¯å›¾ç‰‡çš„ã€‚\nç„¶åæˆ‘ä½¿ç”¨äº† Blue Archive æœ€ç»ˆç« çš„å›¾ç‰‡ï¼Œæ”¾ä¸Šå»å’Œå‰é¢ç™½è‰²çš„æ–‡ç« å—æœ‰ç‚¹çªå…€ï¼Œæƒ³æä¸€ä¸ªæ¨¡ç³Šæ•ˆæœï¼Œäºæ˜¯æƒ³åˆ°ä¹‹å‰å¾ˆå–œæ¬¢çš„ hexo ä¸»é¢˜ nexmoe ï¼Œäºæ˜¯æ‰¾åˆ°ä½¿ç”¨ nexmoe ä¸»é¢˜çš„ æŠ˜å½±æ¸…æ¢¦ ï¼Œå†æ¬¡ä½¿ç”¨ F12 ç¥å™¨ï¼ŒæŸ¥æ‰¾èƒŒæ™¯ç›¸å…³çš„ CSS ä»£ç ï¼Œå¦‚ä¸‹\näºæ˜¯åœ¨ custom.scss ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç \n1 2 3 4 5 6 7 body { background-image: url(\"/img/WhereAllMiraclesBegin.png\"); background-position: fixed; background-size: cover; backdrop-filter: blur(75px); background-color: transparent; } è¿™æ—¶æ¨¡ç³Šæ•ˆæœæ˜¯å®ç°äº†ï¼Œä½†æ˜¯ç‚¹å¼€è¾ƒé•¿çš„æ–‡ç« ä¼šå‘ç°å›¾ç‰‡è¢«æ‹‰é•¿åˆ°ä¸ç½‘é¡µä¸€æ ·é•¿åº¦äº†ï¼Œä¹‹åä¸Š MDN æŸ¥æ‰¾ background ç›¸å…³å±æ€§ï¼Œæ·»åŠ äº† background-attachment: fixed; ä¹‹åç»ˆäºå®ç°äº†æƒ³è¦çš„æ•ˆæœã€‚\nå› ä¸ºå›¾ç‰‡æ˜¯åæˆªçš„ï¼Œæ‰€ä»¥å¿½ç•¥æˆ‘çš„é˜´å½±æ•ˆæœ\nä½†æ˜¯è¿™æ—¶å€™åˆä¼šå‘ç°ï¼Œæ–‡ç« çš„ç™½è‰²è´´ç‰‡åƒæ˜¯ç›´æ¥æ”¾ä¸Šå»çš„ä¸€æ ·ï¼Œåˆä¼šå¾ˆæœ‰è¿å’Œæ„Ÿï¼Œç»§ç»­è§‚å¯Ÿ æŠ˜å½±æ¸…æ¢¦ ï¼Œå‘ç°ä»–çš„ç½‘ç«™æœ‰æ˜æ˜¾çš„é˜´å½±æ•ˆæœï¼Œé…åˆ blur çš„æ•ˆæœè§‚æ„Ÿä¼šå¾ˆå¥½ï¼Œ Google ä¸€é¡¿å‘ç°è¿™ç§æ•ˆæœå« box-shadow ï¼Œäºæ˜¯æ¥ç€ F12 ï¼Œç jb ä¹±æä¹‹åå†³å®šä»…ä»…ä¿®æ”¹ variables.scss ä¸­çš„ --shadow-l1 ä¸º --shadow-l1: 0px 4px 8px rgba(89, 110, 131, 0.4); ï¼ŒåŒæ—¶åœ¨ custom.scss ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ä¿®æ”¹å¤´åƒçš„é˜´å½±\n1 2 3 .sidebar header .site-avatar .site-logo { box-shadow: 0px 2px 12px rgba(89, 110, 131, 1); } è¿™ä¸‹åº”è¯¥å·®ä¸å¤šäº†ã€‚\nTo-do more thingsâ€¦ References action-gh-pages ï¼ˆ1ï¼‰å¸¦ç€Stackä¸»é¢˜å…¥å‘Hugo ï¼ˆ2ï¼‰éƒ¨ç½²ä½ çš„Hugoåšå®¢ æ—¶éš”åŠå¹´ï¼Œåšå®¢åˆæœ‰äº†é‚£äº›æ–°å˜åŒ–ï¼Ÿï¼ Hugo Stackä¸»é¢˜æ›´æ–°å°è®° Hugoåšå®¢è‡ªå®šä¹‰å­—ä½“ ouuanâ€™s blog ç”¨ CSS3 æŒ‡å®šç½‘é¡µçš„ä¸­è‹±æ–‡åˆ†åˆ«ä½¿ç”¨ä¸åŒå­—ä½“ ä¸€è¨€ Waline nexmoe æŠ˜å½±æ¸…æ¢¦ MDN-background ","description":"","tags":["blog"],"title":"Hugo Stack é­”æ³•æ”¹é€ è®°","uri":"/posts/magic-on-hugo-stack/"},{"categories":["Algorithm"],"content":"Introduction è€ƒè™‘ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œç»™å‡ºä¸€å¼ å›¾ï¼Œä¸€ä¸ªèµ·ç‚¹ S ï¼Œä¸€ä¸ªç»ˆç‚¹ G ï¼Œæ±‚ä»£ä»·æœ€å°çš„è·¯å¾„ã€‚\nå½“æ¯æ¡è¾¹çš„æƒå€¼ç›¸åŒæ—¶ï¼Œæ˜¾ç„¶ä½¿ç”¨ç»å…¸çš„ BFS ç®—æ³•å°±å¯ä»¥äº†ï¼Œä½†æ˜¯æ— è®ºæ˜¯ç©ºé—´è¿˜æ˜¯æ—¶é—´å¤æ‚åº¦éƒ½ä¸å¤Ÿä¼˜ç§€ï¼Œè€Œä¸”å½“æ¯æ¡è¾¹æƒå€¼ä¸åŒæ—¶ BFS å°±å¤±æ•ˆäº†ã€‚\nèƒ½ä¸èƒ½ä¼˜åŒ–ï¼Ÿå°† BFS é˜Ÿåˆ—ä¸­çš„ç»“ç‚¹è®°ä¸º frontiers ï¼Œåœ¨ frontiers ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½å­˜å‚¨ä¸‹æ‰©å±•åˆ°å®ƒæ—¶çš„èŠ±è´¹ cost ï¼Œç„¶åå°†é˜Ÿåˆ—æ¢æˆä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ¯æ¬¡ä¼˜å…ˆå–å‡º cost æœ€å°çš„ç»“ç‚¹ï¼Œè‹¥è¿™ä¸ªç»“ç‚¹æ˜¯ G åˆ™å®Œæˆï¼Œå¦åˆ™ç”¨å®ƒæ‰©å±•å…¶ä»–ç»“ç‚¹å¹¶åŠ å…¥ frontiers ã€‚è¿™æ ·ä¸€æ¥ï¼Œè²Œä¼¼æ˜¯æ»¡è¶³äº†æœ€ä¼˜æ€§ï¼Œä½†æ˜¯ç”±äºä¸€ä¸ªç»“ç‚¹å¯èƒ½ç¦» S å¾ˆè¿‘ï¼Œä½†æ˜¯å´ç¦» G å¾ˆè¿œï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªç»“ç‚¹ä¼šè¢«åŠ å…¥é˜Ÿåˆ—å¤šæ¬¡ï¼Œäº§ç”Ÿäº†å¤§é‡çš„å†—ä½™çŠ¶æ€ã€‚\nä¸Šé¢è¿™ä¸ªç®—æ³•ç§°ä¸º UCS (Uniform Cost Search) ï¼Œå®ƒä»…ä»…åªè€ƒè™‘äº†ç»“ç‚¹åˆ° S çš„èŠ±è´¹æ¥è¯„ä¼°ä¸€ä¸ªç»“ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å†ç»“åˆè€ƒè™‘ç»“ç‚¹åˆ° G çš„èŠ±è´¹æ¥ä¼˜åŒ–æ—¶é—´å’Œç©ºé—´ã€‚\nå…·ä½“è€Œè¨€ï¼Œè®¾ $g(x)$ è¡¨ç¤º S åˆ°ç»“ç‚¹ x çš„ cost ï¼Œå¯å‘å¼å‡½æ•° $h(x)$ è¡¨ç¤ºç»“ç‚¹ x åˆ° G çš„ä¼°è®¡ cost ï¼Œå°† $f(x)=g(x)+h(x)$ ä½œä¸ºä» S ç»è¿‡ x åˆ° G çš„é¢„ä¼° cost ã€‚æˆ‘ä»¬æ¯æ¬¡æ‰©å±•åˆ°ä¸€ä¸ªç»“ç‚¹ x æ—¶ä¾¿å¯ä»¥å¾—åˆ°å®é™…çš„ $g(x)$ ï¼Œè¿™æ—¶æˆ‘ä»¬è®¡ç®—å‡ºå®ƒçš„ $f(x)$ åˆå¹¶ä¸Š x ä½œä¸ºä¸€ä¸ªçŠ¶æ€ä¸¢è¿›ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ¯æ¬¡ä¼˜å…ˆå–å‡º $f(x)$ æœ€å°çš„çŠ¶æ€ï¼Œè‹¥è¿™ä¸ªçŠ¶æ€çš„ç»“ç‚¹æ˜¯ G ï¼Œåˆ™æ‰¾åˆ°æœ€ä¼˜è·¯å¾„ã€‚\nè¿™ä¾¿æ˜¯ A* ç®—æ³•çš„æµç¨‹ï¼Œå®ƒçš„éš¾ç‚¹åœ¨äºè®¾è®¡ä¸€ä¸ªåˆç†ã€ä¼˜ç§€çš„å¯å‘å¼å‡½æ•° $h(x)$ ã€‚\nConstraints ä¸€ä¸ªåˆç†çš„å¯å‘å¼å‡½æ•°éœ€è¦æ»¡è¶³ä¸¤ä¸ªçº¦æŸæ¡ä»¶ï¼šAdmissibilityï¼ˆä¸é«˜ä¼°ç»“ç‚¹åˆ° G çš„èŠ±è´¹ï¼‰å’Œ Consistencyï¼ˆä¸é«˜ä¼° S åˆ° G ç»è¿‡è¯¥ç»“ç‚¹çš„æœ€ä¼˜è·¯å¾„çš„èŠ±è´¹ï¼‰\nAdmissibility è®¾ $h^*(x)$ è¡¨ç¤º x åˆ° G å®é™…èŠ±è´¹ï¼Œè‹¥æ»¡è¶³ï¼š\n$$ \\forall n, 0\\le h(n)\\le h^*(n) $$\nåˆ™ A* ç®—æ³•ä¸€å®šèƒ½æ‰¾åˆ°æœ€ä¼˜è§£ã€‚\nProof è®¾ G å¯ä»¥ç”±å¯è¾¾ç»“ç‚¹ A' å’Œ B' æ‰©å±•å¾—åˆ°ï¼Œå…¶ä¸­ A' ä½äºæœ€ä¼˜è·¯å¾„ä¸Šï¼ŒB' ä¸ä½äºæœ€ä¼˜è·¯å¾„ï¼Œè®¾ A å’Œ B åˆ†åˆ«è¡¨ç¤º G ç”±A' å’Œ B' æ‰©å±•å¾—åˆ°å­˜å…¥ frontiers ä¸­çš„çŠ¶æ€ã€‚\nè®° n ä¸º A' çš„ç¥–å…ˆç»“ç‚¹ï¼Œæœ‰ $h^{\\ast}(n)-h^{\\ast}(A)=g(A)-g(n)$ ï¼Œäºæ˜¯\n$$ f(n)=g(n)+h(n)\\le g(n)+h^*(n)=g(A)+h(A)=f(A)\u003cf(B) $$\nä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€ä¼˜è·¯å¾„ä¸Šçš„çŠ¶æ€ä¸€å®šä¼šåœ¨ B ä¹‹å‰è¢«æ‰©å±•åˆ°ï¼Œä»è€Œ A* ç®—æ³•ä¸€å®šèƒ½æ‰¾å‡ºä¸€æ¡æœ€ä¼˜è·¯å¾„ã€‚\nConsistency ä»…ä»…æ»¡è¶³ Admissibility ä¼šå‘ç° A* ç®—æ³•ä¸ UCS å¹¶æ²¡æœ‰å¤šå°‘åŒºåˆ«ï¼ŒåŒæ ·ä¼šæŠŠä¸€ä¸ªç»“ç‚¹æ‰©å±•å¤šæ¬¡ï¼Œäºæ˜¯è¿˜éœ€è¦æ»¡è¶³ Consistency çº¦æŸï¼š\n$$ \\forall A, C \\ h(A)-h(C)\\le cost(A, C) $$\nè¿™æ ·ä¸€æ¥ï¼ŒA* ç®—æ³•ä¾¿ä¸ä¼šåŠ å…¥é‡å¤ç»“ç‚¹ã€‚\nProof è®¾ C ç”± A æ‰©å±•è€Œæ¥ï¼Œåˆ™æœ‰\n$$ f(C)=g(C)+h(C)=g(A)+cost(A, C)+h(C)\\le g(A)+h(A)=f(A) $$\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ¡è·¯å¾„ä¸Šçš„ç»“ç‚¹å¯¹åº”çš„ $f(n)$ æ˜¯å•è°ƒä¸å¢çš„ã€‚\nå‡è®¾ A å’Œ B éƒ½å¯ä»¥æ‰©å±•åˆ° C ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹ç”¨ A æ‰©å±•äº† C ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ° $f(C)\\le f(A)\u003cf(B)$ ï¼Œåˆè€ƒè™‘åˆ° $g(B)\u003cg(C)$ ï¼Œå³ä¾¿ç”¨ C å»æ‰©å±• B ä¹Ÿä¸ä¼šè®© $f(B)$ å˜å°ï¼Œæ›´ä½•å†µ B å·²ç»åœ¨ frontiers ä¸­äº†æˆ‘ä»¬ä¸ä¼šå†æ¬¡åŠ å…¥ B ï¼Œä¹Ÿå°±ä¸å¯èƒ½ç”¨ B æ¥é‡å¤æ‰©å±• C äº†ï¼Œä»è€Œ A* ç®—æ³•ä¸ä¼šåŠ å…¥é‡å¤ç»“ç‚¹ã€‚\nDominance å¯¹äºä¸¤ä¸ªæ»¡è¶³ constraints çš„å¯å‘å¼å‡½æ•° $h_a$ å’Œ $h_b$ ï¼Œè‹¥ $\\forall n, h_a(n)\\ge h_b(n)$ ï¼Œåˆ™è¯´æ˜ $h_a$ æ¯” $h_b$ æ›´æ¥è¿‘å®é™…å‡½æ•° $h^*$ ï¼Œä¹Ÿå°±æ›´ä¼˜ç§€ã€‚\nExample P1379 å…«æ•°ç éš¾é¢˜\nå°†æ¯ä¸ªçŠ¶æ€çœ‹ä½œä¸€ä¸ªç»“ç‚¹ï¼Œ$h(x)$ å®šä¹‰ä¸ºå½“å‰çŠ¶æ€ä¸­æ¯ä¸ªæ•°å­—åˆ°ç›®æ ‡ä½ç½®çš„æ›¼å“ˆé¡¿è·ç¦»ï¼ˆè®°å¾—æ’é™¤æ•°å­— 0 çš„ï¼‰ï¼Œç„¶åè·‘ A* å³å¯ã€‚\nOI-wiki ä¸Šå°† $h(x)$ å®šä¹‰ä¸ºå½“å‰çŠ¶æ€ä¸­ä½ç½®ä¸åœ¨ç›®æ ‡ä½ç½®ä¸Šçš„æ•°å­—çš„æ•°é‡ï¼Œè¿™ä¸ªå®šä¹‰å¹¶ä¸èƒ½ä¿è¯æ‰¾åˆ°çš„æ˜¯æœ€ä¼˜è·¯å¾„ï¼Œåœ¨ Luogu ä¸Šæäº¤ä¼šå‘ç°å¦‚æœ dx å’Œ dy æ•°ç»„ä¸æ ‡ç­”ä¸åŒä¼šæœ‰ä¸€ä¸ªç‚¹è¿‡ä¸å»ã€‚\nReferences A Star Algorithm æ€»ç»“ä¸å®ç° | Cheng Weiâ€™s Blog (scm_mos.gitlab.io) Aæ˜Ÿå¯»è·¯ç®—æ³•ä»‹ç» - è«æ°´åƒæµ - åšå®¢å›­ (cnblogs.com) A* - OI Wiki (oi-wiki.org) cs188-fa22-note02 ","description":"","tags":["Graph","A*"],"title":"A* ç®—æ³•æ€»ç»“","uri":"/posts/a-star/"}]